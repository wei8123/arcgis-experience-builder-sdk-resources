System.register(["jimu-core/react","jimu-core/react-dom"],(function(e){var t,n;return{setters:[function(e){t=e},function(e){n=e}],execute:function(){e(function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=174)}([function(e,n){e.exports=t},,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d}));var r,o,i,a,s,u,c,l,f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e.NotCreated="NOT_CREATED",e.Created="CREATED",e.CreateError="CREATE_ERROR",e.NotReady="NOT_READY",e.Unloaded="UNLOADED",e.Loading="LOADING",e.Loaded="LOADED",e.LoadError="LOAD_ERROR",e.Saving="SAVING",e.Saved="SAVED",e.SaveError="SAVE_ERROR",e.Closed="CLOSED",e.Connecting="CONNECTING",e.Connected="CONNECTED",e.Closing="CLOSING"}(o||(o={})),function(e){e.SimpleLocal="SIMPLE_LOCAL",e.CSV="CSV",e.FeatureLayer="FEATURE_LAYER",e.SceneLayer="SCENE_LAYER",e.GroupLayer="GROUP_LAYER",e.FeatureService="FEATURE_SERVICE",e.MapService="MAP_SERVICE",e.SceneService="SCENE_SERVICE"}(i||(i={})),function(e){e.FeatureLayer="Feature Layer",e.Table="Table",e.GroupLayer="Group Layer",e.SceneLayerPoint="Point",e.SceneLayer3DObject="3DObject"}(a||(a={})),function(e){e.FeatureService="FeatureServer",e.MapService="MapServer",e.SceneService="SceneServer"}(s||(s={})),function(e){e.WebMap="Web Map",e.WebScene="Web Scene",e.FeatureService="Feature Service",e.MapService="Map Service",e.SceneService="Scene Service",e.FeatureCollection="Feature Collection"}(u||(u={})),function(e){e.FeatureLayer="feature",e.MapImageLayer="map-image",e.TileLayer="tile",e.GroupLayer="group",e.SceneLayer="scene"}(c||(c={})),function(e){e.InAllData="IN_ALL_DATA",e.InRemoteConfigView="IN_REMOTE_CONFIG_VIEW",e.InConfigView="IN_CONFIG_VIEW",e.InRuntimeView="IN_RUNTIME_VIEW"}(l||(l={}));var d=function(e){function t(t,n){var r=e.call(this,n)||this;return r.dataSourceId=t,r}return f(t,e),t}(Error)},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12);function o(e){return void 0===e&&(e={}),e.portal?Object(r.a)(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h}));var r=n(3),o=n(41),i=n(25),a=n(20),s=n(24),u=n(17),c="@esri/arcgis-rest-js",l={httpMethod:"POST",params:{f:"json"}};function f(e,t){e.authentication&&!t&&Object(u.a)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),l=e}var d=function(e){function t(t,n,r,o,i){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var a=e.call(this,t,n,r,o,i)||this;return a.name="ArcGISAuthError",a.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,a}return Object(r.b)(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var o=0,i=function(a,s){e(n.url,n.options).then((function(e){var t=Object(r.a)(Object(r.a)({},n.options),{authentication:e});return o+=1,h(n.url,t)})).then((function(e){a(e)})).catch((function(e){"ArcGISAuthError"===e.name&&o<t?i(a,s):"ArcGISAuthError"===e.name&&o>=t?s(n):s(e)}))};return new Promise((function(e,t){i(e,t)}))},t}(s.a);function p(e,t,n,r,o){if(e.code>=400){var i=e.message,a=e.code;throw new s.a(i,a,e,t,r)}if(e.error){var u=e.error,c=(i=u.message,a=u.code,u.messageCode),l=c||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===c||400===a&&"Unable to generate token."===i)throw o||new d(i,l,e,t,r);throw new s.a(i,l,e,t,r)}if("failed"===e.status||"failure"===e.status){i=void 0,a="UNKNOWN_ERROR_CODE";try{i=JSON.parse(e.statusMessage).message,a=JSON.parse(e.statusMessage).code}catch(t){i=e.statusMessage||e.message}throw new s.a(i,a,e,t,r)}return e}function h(e,t){void 0===t&&(t={params:{f:"json"}});var n=Object(r.a)(Object(r.a)(Object(r.a)({httpMethod:"POST"},l),t),{params:Object(r.a)(Object(r.a)({},l.params),t.params),headers:Object(r.a)(Object(r.a)({},l.headers),t.headers)}),u=[],f=[];if(n.fetch||"undefined"==typeof fetch?(u.push("`fetch`"),f.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(u.push("`Promise`"),f.push("`es6-promise`")),"undefined"==typeof FormData&&(u.push("`FormData`"),f.push("`isomorphic-form-data`")),!n.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+u.join(", ")+". We recommend installing the "+f.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var d=n.httpMethod,h=n.authentication,g=n.rawResponse,v=Object(r.a)({f:"json"},n.params),m=null,y={method:d,credentials:"same-origin"};return n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(y.credentials="include"),(h?h.getToken(e,{fetch:n.fetch}).catch((function(t){return t.url=e,t.options=n,m=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(v.token=t);var s={};if("GET"===y.method){v.token&&n.hideToken&&"undefined"==typeof window&&(s["X-Esri-Authorization"]="Bearer "+v.token,delete v.token);var u=""===Object(i.b)(v)?e:e+"?"+Object(i.b)(v);n.maxUrlLength&&u.length>n.maxUrlLength||v.token&&n.hideToken?(y.method="POST",t.length&&n.hideToken&&(v.token=t,delete s["X-Esri-Authorization"])):e=u}var l=new RegExp("/items/.+/updateResources").test(e);return"POST"===y.method&&(y.body=Object(o.a)(v,l)),y.headers=Object(r.a)(Object(r.a)({},s),n.headers),"undefined"!=typeof window||y.headers.referer||(y.headers.referer=c),Object(a.b)(v)||l||(y.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,y)})).then((function(t){if(!t.ok){var r=t.status,o=t.statusText;throw new s.a(o,"HTTP "+r,t,e,n)}if(g)return t;switch(v.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==v.f&&"geojson"!==v.f||g)return t;var r=p(t,e,0,n,m);if(m){var o=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.trustedServers[o]={token:[],expires:new Date(Date.now()+864e5)},m=null}return r}))}},function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,"__immutable_invariants_hold")))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var l=["setPrototypeOf"],f=(l.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function d(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function p(e,t){return a(e,"__immutable_invariants_hold",!0),e}function h(e,t){var n=e[t];a(e,t,(function(){return B(n.apply(e,arguments))}))}function g(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=B.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=I.call(this);return o[e]=B(t),y(o)}l.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),d.prototype=new Error,d.prototype.constructor=Error;var v=B([]);function m(e,t,n){var r=e[0];if(1===e.length)return g.call(this,r,t,n);var o,i=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=B.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?m.call(v,i,t):D.call(_,i,t)}if(r in this&&a===o)return this;var u=I.call(this);return u[r]=o,y(u)}function y(e){for(var t in f){if(f.hasOwnProperty(t))h(e,f[t])}o.use_static||(a(e,"flatMap",w),a(e,"asObject",O),a(e,"asMutable",I),a(e,"set",g),a(e,"setIn",m),a(e,"update",R),a(e,"updateIn",N),a(e,"getIn",L));for(var n=0,r=e.length;n<r;n++)e[n]=B(e[n]);return p(e)}function b(){return new Date(this.getTime())}function w(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return y(n)}function S(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return V(n)}function I(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(E(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function O(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],a=o[1];n[i]=a}return V(n)}function E(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,"__immutable_invariants_hold")||e instanceof Date?e:B.asMutable(e,{deep:!0})}function x(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function C(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",l=t&&t.merger;function f(e,r,o){var s,f=B(r[o]),d=l&&l(e[o],f,t),p=e[o];void 0===n&&void 0===d&&e.hasOwnProperty(o)&&u(f,p)||(u(p,s=void 0!==d?d:a&&c(p)&&c(f)?B.merge(p,f,t):f)&&e.hasOwnProperty(o)||(void 0===n&&(n=x(e,i(e))),n[o]=s))}function d(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=x(e,i(e))),delete n[r])}if(o)for(var p=0,h=e.length;p<h;p++){var g=e[p];for(r in g)g.hasOwnProperty(r)&&f(void 0!==n?n:this,g,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&f(this,e,r);"replace"===s&&d(this,e)}return void 0===n?this:V(n)}function T(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return B.merge(this,e,{deep:n,mode:"replace"})}var j,A,P,_=B({});function D(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return k.call(this,r,t,n);var o,a=e.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?B.setIn(s,a,t):D.call(_,a,t),this.hasOwnProperty(r)&&s===o)return this;var u=x(this,i(this));return u[r]=o,V(u)}function k(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=B.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=x(this,i(this));return o[e]=B(t),V(o)}function R(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return B.set(this,e,t.apply(r,[r].concat(n)))}function M(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function N(e,t){var n=Array.prototype.slice.call(arguments,2),r=M(this,e);return B.setIn(this,e,t.apply(r,[r].concat(n)))}function L(e,t){var n=M(this,e);return void 0===n?t:n}function U(e){var t,n=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=E(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function F(){return{}}function V(e){return o.use_static||(a(e,"merge",C),a(e,"replace",T),a(e,"without",S),a(e,"asMutable",U),a(e,"set",k),a(e,"setIn",D),a(e,"update",R),a(e,"updateIn",N),a(e,"getIn",L)),p(e)}function B(e,t,n){if(s(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(B);if(Array.isArray(e))return y(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||a(i,"asMutable",b),p(i);var i,u=t&&t.prototype,c=(u&&u!==Object.prototype?function(){return Object.create(u)}:F)();for(var l in e)Object.getOwnPropertyDescriptor(e,l)&&(c[l]=B(e[l],void 0,n));return V(c)}function G(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function W(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return B.from=B,B.isImmutable=s,B.ImmutableError=d,B.merge=G(C),B.replace=G(T),B.without=G(S),B.asMutable=(j=U,A=I,P=b,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?A.apply(t,e):t instanceof Date?P.apply(t,e):j.apply(t,e)}),B.set=W(k,g),B.setIn=W(D,m),B.update=G(R),B.updateIn=G(N),B.getIn=G(L),B.flatMap=G(w),B.asObject=G(O),o.use_static||(B.static=e({use_static:!0})),Object.freeze(B),B}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";n.r(t);var r=n(5);n.d(t,"NODEJS_DEFAULT_REFERER_HEADER",(function(){return r.b})),n.d(t,"setDefaultRequestOptions",(function(){return r.e})),n.d(t,"ArcGISAuthError",(function(){return r.a})),n.d(t,"checkForErrors",(function(){return r.c})),n.d(t,"request",(function(){return r.d}));var o=n(13);n.d(t,"appendCustomParams",(function(){return o.a}));var i=n(24);n.d(t,"ArcGISRequestError",(function(){return i.a}));var a=n(12);n.d(t,"cleanUrl",(function(){return a.a}));var s=n(41);n.d(t,"encodeFormData",(function(){return s.a}));var u=n(25);n.d(t,"encodeParam",(function(){return u.a})),n.d(t,"encodeQueryString",(function(){return u.b}));var c=n(71);n.d(t,"decodeParam",(function(){return c.a})),n.d(t,"decodeQueryString",(function(){return c.b}));var l=n(120);n.d(t,"ErrorTypes",(function(){return l.a}));var f=n(121);for(var d in f)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return f[e]}))}(d);var p=n(122);for(var d in p)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return p[e]}))}(d);var h=n(123);for(var d in h)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return h[e]}))}(d);var g=n(124);for(var d in g)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return g[e]}))}(d);var v=n(125);for(var d in v)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return v[e]}))}(d);var m=n(126);for(var d in m)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return m[e]}))}(d);var y=n(127);for(var d in y)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return y[e]}))}(d);var b=n(128);for(var d in b)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return b[e]}))}(d);var w=n(129);for(var d in w)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return w[e]}))}(d);var S=n(130);for(var d in S)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return S[e]}))}(d);var I=n(20);n.d(t,"requiresFormData",(function(){return I.b})),n.d(t,"processParams",(function(){return I.a}));var O=n(131);for(var d in O)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","requiresFormData","processParams"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return O[e]}))}(d);var E=n(132);for(var d in E)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","requiresFormData","processParams"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return E[e]}))}(d);var x=n(17);n.d(t,"warn",(function(){return x.a}))},function(e,t,n){"use strict";function r(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!=typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function o(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){(function(n){var r;t=e.exports=J,r="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],a=t.src=[],s=0,u=s++;a[u]="0|[1-9]\\d*";var c=s++;a[c]="[0-9]+";var l=s++;a[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=s++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var d=s++;a[d]="("+a[c]+")\\.("+a[c]+")\\.("+a[c]+")";var p=s++;a[p]="(?:"+a[u]+"|"+a[l]+")";var h=s++;a[h]="(?:"+a[c]+"|"+a[l]+")";var g=s++;a[g]="(?:-("+a[p]+"(?:\\."+a[p]+")*))";var v=s++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var m=s++;a[m]="[0-9A-Za-z-]+";var y=s++;a[y]="(?:\\+("+a[m]+"(?:\\."+a[m]+")*))";var b=s++,w="v?"+a[f]+a[g]+"?"+a[y]+"?";a[b]="^"+w+"$";var S="[v=\\s]*"+a[d]+a[v]+"?"+a[y]+"?",I=s++;a[I]="^"+S+"$";var O=s++;a[O]="((?:<|>)?=?)";var E=s++;a[E]=a[c]+"|x|X|\\*";var x=s++;a[x]=a[u]+"|x|X|\\*";var C=s++;a[C]="[v=\\s]*("+a[x]+")(?:\\.("+a[x]+")(?:\\.("+a[x]+")(?:"+a[g]+")?"+a[y]+"?)?)?";var T=s++;a[T]="[v=\\s]*("+a[E]+")(?:\\.("+a[E]+")(?:\\.("+a[E]+")(?:"+a[v]+")?"+a[y]+"?)?)?";var j=s++;a[j]="^"+a[O]+"\\s*"+a[C]+"$";var A=s++;a[A]="^"+a[O]+"\\s*"+a[T]+"$";var P=s++;a[P]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var _=s++;a[_]="(?:~>?)";var D=s++;a[D]="(\\s*)"+a[_]+"\\s+",i[D]=new RegExp(a[D],"g");var k=s++;a[k]="^"+a[_]+a[C]+"$";var R=s++;a[R]="^"+a[_]+a[T]+"$";var M=s++;a[M]="(?:\\^)";var N=s++;a[N]="(\\s*)"+a[M]+"\\s+",i[N]=new RegExp(a[N],"g");var L=s++;a[L]="^"+a[M]+a[C]+"$";var U=s++;a[U]="^"+a[M]+a[T]+"$";var F=s++;a[F]="^"+a[O]+"\\s*("+S+")$|^$";var V=s++;a[V]="^"+a[O]+"\\s*("+w+")$|^$";var B=s++;a[B]="(\\s*)"+a[O]+"\\s*("+S+"|"+a[C]+")",i[B]=new RegExp(a[B],"g");var G=s++;a[G]="^\\s*("+a[C]+")\\s+-\\s+("+a[C]+")\\s*$";var W=s++;a[W]="^\\s*("+a[T]+")\\s+-\\s+("+a[T]+")\\s*$";var z=s++;a[z]="(<|>)?=?\\s*\\*";for(var q=0;q<35;q++)r(q,a[q]),i[q]||(i[q]=new RegExp(a[q]));function H(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof J)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[I]:i[b]).test(e))return null;try{return new J(e,t)}catch(e){return null}}function J(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof J){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof J))return new J(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?i[I]:i[b]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=H,t.valid=function(e,t){var n=H(e,t);return n?n.version:null},t.clean=function(e,t){var n=H(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=J,J.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},J.prototype.toString=function(){return this.version},J.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof J||(e=new J(e,this.options)),this.compareMain(e)||this.comparePre(e)},J.prototype.compareMain=function(e){return e instanceof J||(e=new J(e,this.options)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},J.prototype.comparePre=function(e){if(e instanceof J||(e=new J(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return Y(n,o)}while(++t)},J.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new J(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Z(e,t))return null;var n=H(e),r=H(t),o="";if(n.prerelease.length||r.prerelease.length){o="pre";var i="prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return o+a;return i},t.compareIdentifiers=Y;var $=/^[0-9]+$/;function Y(e,t){var n=$.test(e),r=$.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function K(e,t,n){return new J(e,n).compare(new J(t,n))}function X(e,t,n){return K(e,t,n)>0}function Q(e,t,n){return K(e,t,n)<0}function Z(e,t,n){return 0===K(e,t,n)}function ee(e,t,n){return 0!==K(e,t,n)}function te(e,t,n){return K(e,t,n)>=0}function ne(e,t,n){return K(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Z(e,n,r);case"!=":return ee(e,n,r);case">":return X(e,n,r);case">=":return te(e,n,r);case"<":return Q(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return Y(t,e)},t.major=function(e,t){return new J(e,t).major},t.minor=function(e,t){return new J(e,t).minor},t.patch=function(e,t){return new J(e,t).patch},t.compare=K,t.compareLoose=function(e,t){return K(e,t,!0)},t.rcompare=function(e,t,n){return K(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=X,t.lt=Q,t.eq=Z,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=oe;var ie={};function ae(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof oe)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,n,r,o,i,a,s,u,c,l,f,d){return((t=se(n)?"":se(r)?">="+n+".0.0":se(o)?">="+n+"."+r+".0":">="+t)+" "+(s=se(u)?"":se(c)?"<"+(+u+1)+".0.0":se(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+s)).trim()}function ce(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new ae(t,n)}catch(e){return!1}return t.test(e)}function fe(e,t,n,r){var o,i,a,s,u;switch(e=new J(e,r),t=new ae(t,r),n){case">":o=X,i=ne,a=Q,s=">",u=">=";break;case"<":o=Q,i=te,a=X,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],f=null,d=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),f=f||e,d=d||e,o(e.semver,f.semver,r)?f=e:a(e.semver,d.semver,r)&&(d=e)})),f.operator===s||f.operator===u)return!1;if((!d.operator||d.operator===s)&&i(e,d.semver))return!1;if(d.operator===u&&a(e,d.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[F]:i[V],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new J(n[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new J(e,this.options)),re(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ae(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new ae(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||o||i&&a||s||u},t.Range=ae,ae.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[W]:i[G];e=e.replace(n,ue),r("hyphen replace",e),e=e.replace(i[B],"$1$2$3"),r("comparator trim",e,i[B]),e=(e=(e=e.replace(i[D],"$1~")).replace(i[N],"$1^")).split(/\s+/).join(" ");var o=t?i[F]:i[V],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[U]:i[L];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),se(n)?s="":se(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[R]:i[k];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),se(n)?s="":se(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[A]:i[j];return e.replace(n,(function(t,n,o,i,a,s){r("xRange",e,t,n,o,i,a,s);var u=se(o),c=u||se(i),l=c||se(a);return"="===n&&l&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",c?o=+o+1:i=+i+1),t=n+o+"."+i+"."+a):c?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new oe(e,this.options)}),this)},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ae(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new J(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,o=null;try{var i=new ae(t,n)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(r&&-1!==o.compare(e)||(o=new J(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,o=null;try{var i=new ae(t,n)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(r&&1!==o.compare(e)||(o=new J(r=e,n)))})),r},t.minVersion=function(e,t){e=new ae(e,t);var n=new J("0.0.0");if(e.test(n))return n;if(n=new J("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new J(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!X(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return fe(e,t,"<",n)},t.gtr=function(e,t,n){return fe(e,t,">",n)},t.outside=fe,t.prerelease=function(e,t){var n=H(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new ae(e,n),t=new ae(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof J)return e;if("string"!=typeof e)return null;var t=e.match(i[P]);if(null==t)return null;return H(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}).call(this,n(155))},function(e,t,n){"use strict";var r=n(50),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();t.a=i},function(e,t,n){"use strict";n.r(t),n.d(t,"CHARSET",(function(){return d})),n.d(t,"COMMENT",(function(){return a})),n.d(t,"COUNTER_STYLE",(function(){return b})),n.d(t,"DECLARATION",(function(){return u})),n.d(t,"DOCUMENT",(function(){return g})),n.d(t,"FONT_FACE",(function(){return y})),n.d(t,"FONT_FEATURE_VALUES",(function(){return w})),n.d(t,"IMPORT",(function(){return f})),n.d(t,"KEYFRAMES",(function(){return m})),n.d(t,"MEDIA",(function(){return l})),n.d(t,"MOZ",(function(){return o})),n.d(t,"MS",(function(){return r})),n.d(t,"NAMESPACE",(function(){return v})),n.d(t,"PAGE",(function(){return c})),n.d(t,"RULESET",(function(){return s})),n.d(t,"SUPPORTS",(function(){return h})),n.d(t,"VIEWPORT",(function(){return p})),n.d(t,"WEBKIT",(function(){return i})),n.d(t,"abs",(function(){return S})),n.d(t,"alloc",(function(){return $})),n.d(t,"append",(function(){return D})),n.d(t,"caret",(function(){return q})),n.d(t,"char",(function(){return G})),n.d(t,"character",(function(){return U})),n.d(t,"characters",(function(){return F})),n.d(t,"charat",(function(){return j})),n.d(t,"column",(function(){return M})),n.d(t,"combine",(function(){return k})),n.d(t,"comment",(function(){return ae})),n.d(t,"commenter",(function(){return te})),n.d(t,"compile",(function(){return re})),n.d(t,"copy",(function(){return B})),n.d(t,"dealloc",(function(){return Y})),n.d(t,"declaration",(function(){return se})),n.d(t,"delimit",(function(){return K})),n.d(t,"delimiter",(function(){return ee})),n.d(t,"from",(function(){return I})),n.d(t,"hash",(function(){return O})),n.d(t,"identifier",(function(){return ne})),n.d(t,"indexof",(function(){return T})),n.d(t,"length",(function(){return N})),n.d(t,"line",(function(){return R})),n.d(t,"match",(function(){return x})),n.d(t,"middleware",(function(){return fe})),n.d(t,"namespace",(function(){return he})),n.d(t,"next",(function(){return W})),n.d(t,"node",(function(){return V})),n.d(t,"parse",(function(){return oe})),n.d(t,"peek",(function(){return z})),n.d(t,"position",(function(){return L})),n.d(t,"prefix",(function(){return ue})),n.d(t,"prefixer",(function(){return pe})),n.d(t,"replace",(function(){return C})),n.d(t,"ruleset",(function(){return ie})),n.d(t,"rulesheet",(function(){return de})),n.d(t,"serialize",(function(){return ce})),n.d(t,"sizeof",(function(){return _})),n.d(t,"slice",(function(){return H})),n.d(t,"stringify",(function(){return le})),n.d(t,"strlen",(function(){return P})),n.d(t,"substr",(function(){return A})),n.d(t,"token",(function(){return J})),n.d(t,"tokenize",(function(){return X})),n.d(t,"tokenizer",(function(){return Z})),n.d(t,"trim",(function(){return E})),n.d(t,"whitespace",(function(){return Q}));var r="-ms-",o="-moz-",i="-webkit-",a="comm",s="rule",u="decl",c="@page",l="@media",f="@import",d="@charset",p="@viewport",h="@supports",g="@document",v="@namespace",m="@keyframes",y="@font-face",b="@counter-style",w="@font-feature-values",S=Math.abs,I=String.fromCharCode;function O(e,t){return(((t<<2^j(e,0))<<2^j(e,1))<<2^j(e,2))<<2^j(e,3)}function E(e){return e.trim()}function x(e,t){return(e=t.exec(e))?e[0]:e}function C(e,t,n){return e.replace(t,n)}function T(e,t){return e.indexOf(t)}function j(e,t){return 0|e.charCodeAt(t)}function A(e,t,n){return e.slice(t,n)}function P(e){return e.length}function _(e){return e.length}function D(e,t){return t.push(e),e}function k(e,t){return e.map(t).join("")}var R=1,M=1,N=0,L=0,U=0,F="";function V(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:R,column:M,length:a,return:""}}function B(e,t,n){return V(e,t.root,t.parent,n,t.props,t.children,0)}function G(){return U}function W(){return U=L<N?j(F,L++):0,M++,10===U&&(M=1,R++),U}function z(){return j(F,L)}function q(){return L}function H(e,t){return A(F,e,t)}function J(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $(e){return R=M=1,N=P(F=e),L=0,[]}function Y(e){return F="",e}function K(e){return E(H(L-1,ee(91===e?e+2:40===e?e+1:e)))}function X(e){return Y(Z($(e)))}function Q(e){for(;(U=z())&&U<33;)W();return J(e)>2||J(U)>3?"":" "}function Z(e){for(;W();)switch(J(U)){case 0:D(ne(L-1),e);break;case 2:D(K(U),e);break;default:D(I(U),e)}return e}function ee(e){for(;W();)switch(U){case e:return L;case 34:case 39:return ee(34===e||39===e?e:U);case 40:41===e&&ee(e);break;case 92:W()}return L}function te(e,t){for(;W()&&e+U!==57&&(e+U!==84||47!==z()););return"/*"+H(t,L-1)+"*"+I(47===e?e:W())}function ne(e){for(;!J(z());)W();return H(e,L)}function re(e){return Y(oe("",null,null,null,[""],e=$(e),0,[0],e))}function oe(e,t,n,r,o,i,a,s,u){for(var c=0,l=0,f=a,d=0,p=0,h=0,g=1,v=1,m=1,y=0,b="",w=o,S=i,O=r,E=b;v;)switch(h=y,y=W()){case 34:case 39:case 91:case 40:E+=K(y);break;case 9:case 10:case 13:case 32:E+=Q(h);break;case 47:switch(z()){case 42:case 47:D(ae(te(W(),q()),t,n),u);break;default:E+="/"}break;case 123*g:s[c++]=P(E)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+l:p>0&&D(p>32?se(E+";",r,n,f-1):se(C(E," ","")+";",r,n,f-2),u);break;case 59:E+=";";default:if(D(O=ie(E,t,n,c,l,o,s,b,w=[],S=[],f),i),123===y)if(0===l)oe(E,t,O,O,w,i,f,s,S);else switch(d){case 100:case 109:case 115:oe(e,O,O,r&&D(ie(e,O,O,0,0,o,s,b,o,w=[],f),S),o,S,f,s,r?w:S);break;default:oe(E,O,O,O,[""],S,f,s,S)}}c=l=p=0,g=m=1,b=E="",f=a;break;case 58:f=1+P(E),p=h;default:switch(E+=I(y),y*g){case 38:m=l>0?1:(E+="\f",-1);break;case 44:s[c++]=(P(E)-1)*m,m=1;break;case 64:45===z()&&(E+=K(W())),d=z(),l=P(b=E+=ne(q())),y++;break;case 45:45===h&&2==P(E)&&(g=0)}}return i}function ie(e,t,n,r,o,i,a,u,c,l,f){for(var d=o-1,p=0===o?i:[""],h=_(p),g=0,v=0,m=0;g<r;++g)for(var y=0,b=A(e,d+1,d=S(v=a[g])),w=e;y<h;++y)(w=E(v>0?p[y]+" "+b:C(b,/&\f/g,p[y])))&&(c[m++]=w);return V(e,t,n,0===o?s:u,c,l,f)}function ae(e,t,n){return V(e,t,n,a,I(G()),A(e,2,-2),0)}function se(e,t,n,r){return V(e,t,n,u,A(e,0,r),A(e,r+1,-1),r)}function ue(e,t){switch(O(e,t)){case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return i+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return i+e+o+e+r+e+e;case 6828:case 4268:return i+e+r+e+e;case 6165:return i+e+r+"flex-"+e+e;case 5187:return i+e+C(e,/(\w+).+(:[^]+)/,i+"box-$1$2"+r+"flex-$1$2")+e;case 5443:return i+e+r+"flex-item-"+C(e,/flex-|-self/,"")+e;case 4675:return i+e+r+"flex-line-pack"+C(e,/align-content|flex-|-self/,"")+e;case 5548:return i+e+r+C(e,"shrink","negative")+e;case 5292:return i+e+r+C(e,"basis","preferred-size")+e;case 6060:return i+"box-"+C(e,"-grow","")+i+e+r+C(e,"grow","positive")+e;case 4554:return i+C(e,/([^-])(transform)/g,"$1"+i+"$2")+e;case 6187:return C(C(C(e,/(zoom-|grab)/,i+"$1"),/(image-set)/,i+"$1"),e,"")+e;case 5495:case 3959:return C(e,/(image-set\([^]*)/,i+"$1$`$1");case 4968:return C(C(e,/(.+:)(flex-)?(.*)/,i+"box-pack:$3"+r+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+i+e+e;case 4095:case 3583:case 4068:case 2532:return C(e,/(.+)-inline(.+)/,i+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(P(e)-1-t>6)switch(j(e,t+1)){case 102:t=j(e,t+3);case 109:return C(e,/(.+:)(.+)-([^]+)/,"$1"+i+"$2-$3$1"+o+(108==t?"$3":"$2-$3"))+e;case 115:return~T(e,"stretch")?ue(C(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==j(e,t+1))break;case 6444:switch(j(e,P(e)-3-(~T(e,"!important")&&10))){case 107:case 111:return C(e,e,i+e)+e;case 101:return C(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+i+(45===j(e,14)?"inline-":"")+"box$3$1"+i+"$2$3$1"+r+"$2box$3")+e}break;case 5936:switch(j(e,t+11)){case 114:return i+e+r+C(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return i+e+r+C(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return i+e+r+C(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return i+e+r+e+e}return e}function ce(e,t){for(var n="",r=_(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function le(e,t,n,r){switch(e.type){case f:case u:return e.return=e.return||e.value;case a:return"";case s:e.value=e.props.join(",")}return P(n=ce(e.children,r))?e.return=e.value+"{"+n+"}":""}function fe(e){var t=_(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}function de(e){return function(t){t.root||(t=t.return)&&e(t)}}function pe(e,t,n,a){if(!e.return)switch(e.type){case u:e.return=ue(e.value,e.length);break;case m:return ce([B(C(e.value,"@","@"+i),e,"")],a);case s:if(e.length)return k(e.props,(function(t){switch(x(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ce([B(C(t,/:(read-\w+)/,":"+o+"$1"),e,"")],a);case"::placeholder":return ce([B(C(t,/:(plac\w+)/,":"+i+"input-$1"),e,""),B(C(t,/:(plac\w+)/,":"+o+"$1"),e,""),B(C(t,/:(plac\w+)/,r+"input-$1"),e,"")],a)}return""}))}}function he(e){switch(e.type){case s:e.props=e.props.map((function(t){return k(X(t),(function(t,n,r){switch(j(t,0)){case 12:return A(t,1,P(t));case 0:case 40:case 43:case 62:case 126:return t;case 58:"global"===r[n+1]&&(r[n+1]="",r[n+2]="\f"+A(r[n+2],n=1,-1));case 32:return 1===n?"":t;default:switch(n){case 0:return e=t,_(r)>1?"":t;case n=_(r)-1:case 2:return 2===n?t+e+e:t+e;default:return t}}}))}))}}},function(e,t,n){"use strict";function r(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3);function o(e,t,n){var o=Object(r.a)(Object(r.a)({params:{}},n),e);return o.params=t.reduce((function(t,n){return(e[n]||"boolean"==typeof e[n])&&(t[n]=e[n]),t}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return o[t]&&(e[t]=o[t]),e}),{})}},function(e,t,n){(function(n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=i.URL||i.webkitURL,u=document.createElement("a");n=n||e.name||"download",u.download=n,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?o(u):r(u.href)?t(e,n,a):o(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(r(e))t(e,n,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){o(a)}))}}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,u=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&u||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},l.readAsDataURL(e)}else{var f=i.URL||i.webkitURL,d=f.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,o):r)||(e.exports=i)}).call(this,n(36))},function(e,t,n){"use strict";const r=n(148),o=n(149),i=n(150);function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?o(e):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function l(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!o&&u(n,e).includes(e.arrayFormatSeparator);n=i?u(n,e):n;const a=o||i?n.split(e.arrayFormatSeparator).map(t=>u(t,e)):null===n?n:u(n,e);r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const o of e.split("&")){let[e,a]=i(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:u(a,t),n(u(e,t),a,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else r[e]=f(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=l,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",o,"]"].join("")]:[...n,[s(t,e),"[",s(o,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[s(t,e),"=",s(r,e)].join("")]:[[n,s(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),o={};for(const t of Object.keys(e))n(t)||(o[t]=e[t]);const i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map(n=>{const o=e[n];return void 0===o?"":null===o?s(n,t):Array.isArray(o)?o.reduce(r(n),[]).join("&"):s(n,t)+"="+s(o,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(l(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),a=Object.assign(i,e.query);let u=t.stringify(a,n);u&&(u="?"+u);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l="#"+s(e.fragmentIdentifier,n)),`${r}${u}${l}`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(4),o=n(46);function i(e){var t=e.authentication.username,n=e.owner||t;return Object(r.a)(e)+"/content/users/"+encodeURIComponent(n)+"/items/"+e.id+"/share"}function a(e){var t=e.authentication.username;return(e.owner||t)===t}function s(e){return e.authentication.getUser(e).then((function(e){return e&&"org_admin"===e.role&&!e.roleId}))}function u(e){return Object(o.a)(e.groupId,e).then((function(e){return e.userMembership.memberType})).catch((function(){return"none"}))}},function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn.apply(console,[e])}n.d(t,"a",(function(){return r}))},,function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=o.apply(null,r);a&&e.push(a)}else if("object"===i)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";function r(e){return Object.keys(e).some((function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function o(e){var t={};return Object.keys(e).forEach((function(n){var r,o,i=e[n];if(i&&i.toParam&&(i=i.toParam()),i||0===i||"boolean"==typeof i||"string"==typeof i){var a;switch(i.constructor.name){case"Array":var s=null===(o=null===(r=i[0])||void 0===r?void 0:r.constructor)||void 0===o?void 0:o.name;a="Array"===s?i:"Object"===s?JSON.stringify(i):i.join(",");break;case"Object":a=JSON.stringify(i);break;case"Date":a=i.valueOf();break;case"Function":a=null;break;case"Boolean":a=i+"";break;default:a=i}(a||0===a||"string"==typeof a||Array.isArray(a))&&(t[n]=a)}})),t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";var r=n(56),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=p(n);o&&o!==h&&e(t,o,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(t),g=u(n),v=0;v<a.length;++v){var m=a[v];if(!(i[m]||r&&r[m]||g&&g[m]||s&&s[m])){var y=d(n,m);try{c(t,m,y)}catch(e){}}}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);function o(e,t){var n=t;return n.rawResponse=!1,Object(r.d)(e,n).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}},function(e,t,n){"use strict";function r(e,t){if(0===e.length)return[];for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=o};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(20);function o(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return o(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e){var t=Object(r.a)(e);return Object.keys(t).map((function(e){return o(e,t[e])})).join("&")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t,n={httpMethod:"GET"};if("string"==typeof e)t="https://www.arcgis.com/sharing/rest/community/users/"+e;else{var a=e.username||e.authentication.username;t=Object(i.a)(e)+"/community/users/"+encodeURIComponent(a),n=Object(r.a)(Object(r.a)({},e),n)}return Object(o.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),o=n(5),i=n(33),a=n(4);function s(e,t){var n,u,c;switch(u="string"==typeof e||e instanceof i.a?{httpMethod:"GET",params:{q:e}}:Object(r.a)(e,["q","num","start","sortField","sortOrder"],{httpMethod:"GET"}),t){case"item":c="/search";break;case"group":c="/community/groups";break;case"groupContent":if("string"==typeof e||e instanceof i.a||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));c="/content/groups/"+e.groupId+"/search";break;default:c="/portals/self/users/search"}return n=Object(a.a)(u)+c,Object(o.d)(n,u).then((function(n){return n.nextStart&&-1!==n.nextStart&&(n.nextPage=function(){var r;return"string"==typeof e||e instanceof i.a?r={q:e,start:n.nextStart}:(r=e).start=n.nextStart,s(r,t)}),n}))}},,function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(90);n.d(t,"addItemData",(function(){return r.a})),n.d(t,"addItemRelationship",(function(){return r.b})),n.d(t,"addItemResource",(function(){return r.c}));var o=n(91);n.d(t,"getUserContent",(function(){return o.a}));var i=n(92);n.d(t,"createFolder",(function(){return i.a})),n.d(t,"createItemInFolder",(function(){return i.c})),n.d(t,"createItem",(function(){return i.b}));var a=n(93);n.d(t,"exportItem",(function(){return a.a}));var s=n(72);n.d(t,"getItem",(function(){return s.a})),n.d(t,"getItemBaseUrl",(function(){return s.b})),n.d(t,"getItemData",(function(){return s.c})),n.d(t,"getRelatedItems",(function(){return s.k})),n.d(t,"getItemResources",(function(){return s.i})),n.d(t,"getItemResource",(function(){return s.h})),n.d(t,"getItemGroups",(function(){return s.d})),n.d(t,"getItemStatus",(function(){return s.j})),n.d(t,"getItemParts",(function(){return s.g})),n.d(t,"getItemInfo",(function(){return s.e})),n.d(t,"getItemMetadata",(function(){return s.f}));var u=n(94);n.d(t,"protectItem",(function(){return u.a})),n.d(t,"unprotectItem",(function(){return u.b}));var c=n(95);n.d(t,"reassignItem",(function(){return c.a}));var l=n(96);n.d(t,"removeItem",(function(){return l.b})),n.d(t,"removeItemRelationship",(function(){return l.c})),n.d(t,"removeItemResource",(function(){return l.d})),n.d(t,"removeFolder",(function(){return l.a}));var f=n(47);n.d(t,"searchItems",(function(){return f.a}));var d=n(45);n.d(t,"updateItem",(function(){return d.b})),n.d(t,"updateItemInfo",(function(){return d.c})),n.d(t,"updateItemResource",(function(){return d.d})),n.d(t,"moveItem",(function(){return d.a}));var p=n(8);n.d(t,"serializeItem",(function(){return p.b})),n.d(t,"determineOwner",(function(){return p.a}));var h=n(97);n.d(t,"addItemPart",(function(){return h.a})),n.d(t,"commitItemUpload",(function(){return h.c})),n.d(t,"cancelItemUpload",(function(){return h.b}));var g=n(48);n.d(t,"addGroupUsers",(function(){return g.a}));var v=n(49);n.d(t,"removeGroupUsers",(function(){return v.a}));var m=n(98);n.d(t,"inviteGroupUsers",(function(){return m.a}));var y=n(99);n.d(t,"createGroup",(function(){return y.a}));var b=n(46);n.d(t,"getGroup",(function(){return b.a})),n.d(t,"getGroupCategorySchema",(function(){return b.b})),n.d(t,"getGroupContent",(function(){return b.c})),n.d(t,"getGroupUsers",(function(){return b.d})),n.d(t,"searchGroupUsers",(function(){return b.e}));var w=n(100);for(var S in w)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItemInFolder","createItem","exportItem","getItem","getItemBaseUrl","getItemData","getRelatedItems","getItemResources","getItemResource","getItemGroups","getItemStatus","getItemParts","getItemInfo","getItemMetadata","protectItem","unprotectItem","reassignItem","removeItem","removeItemRelationship","removeItemResource","removeFolder","searchItems","updateItem","updateItemInfo","updateItemResource","moveItem","serializeItem","determineOwner","addItemPart","commitItemUpload","cancelItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers"].indexOf(S)<0&&function(e){n.d(t,e,(function(){return w[e]}))}(S);var I=n(101);n.d(t,"createGroupNotification",(function(){return I.a}));var O=n(102);n.d(t,"protectGroup",(function(){return O.a})),n.d(t,"unprotectGroup",(function(){return O.b}));var E=n(103);n.d(t,"removeGroup",(function(){return E.a}));var x=n(104);n.d(t,"searchGroups",(function(){return x.b})),n.d(t,"searchGroupContent",(function(){return x.a}));var C=n(105);n.d(t,"updateGroup",(function(){return C.a}));var T=n(38);n.d(t,"updateUserMemberships",(function(){return T.a}));var j=n(106);n.d(t,"joinGroup",(function(){return j.a})),n.d(t,"leaveGroup",(function(){return j.b}));var A=n(107);n.d(t,"createOrgNotification",(function(){return A.a}));var P=n(26);n.d(t,"getUser",(function(){return P.a}));var _=n(108);n.d(t,"getUserTags",(function(){return _.a}));var D=n(109);n.d(t,"getUserUrl",(function(){return D.a}));var k=n(110);n.d(t,"getUserInvitations",(function(){return k.d})),n.d(t,"getUserInvitation",(function(){return k.c})),n.d(t,"acceptInvitation",(function(){return k.a})),n.d(t,"declineInvitation",(function(){return k.b}));var R=n(111);n.d(t,"getUserNotifications",(function(){return R.a})),n.d(t,"removeNotification",(function(){return R.b}));var M=n(112);n.d(t,"searchUsers",(function(){return M.a}));var N=n(113);n.d(t,"updateUser",(function(){return N.a}));var L=n(114);n.d(t,"setItemAccess",(function(){return L.a}));var U=n(115);n.d(t,"shareItemWithGroup",(function(){return U.b})),n.d(t,"ensureMembership",(function(){return U.a}));var F=n(116);n.d(t,"unshareItemWithGroup",(function(){return F.a}));var V=n(31);n.d(t,"isItemSharedWithGroup",(function(){return V.a}));var B=n(16);n.d(t,"getSharingUrl",(function(){return B.a})),n.d(t,"isItemOwner",(function(){return B.c})),n.d(t,"isOrgAdmin",(function(){return B.d})),n.d(t,"getUserMembership",(function(){return B.b}));var G=n(117);n.d(t,"getSelf",(function(){return G.b})),n.d(t,"getPortal",(function(){return G.a}));var W=n(118);n.d(t,"getPortalSettings",(function(){return W.a}));var z=n(4);n.d(t,"getPortalUrl",(function(){return z.a}));var q=n(43);n.d(t,"scrubControlChars",(function(){return q.a}));var H=n(119);for(var S in H)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItemInFolder","createItem","exportItem","getItem","getItemBaseUrl","getItemData","getRelatedItems","getItemResources","getItemResource","getItemGroups","getItemStatus","getItemParts","getItemInfo","getItemMetadata","protectItem","unprotectItem","reassignItem","removeItem","removeItemRelationship","removeItemResource","removeFolder","searchItems","updateItem","updateItemInfo","updateItemResource","moveItem","serializeItem","determineOwner","addItemPart","commitItemUpload","cancelItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers","createGroupNotification","protectGroup","unprotectGroup","removeGroup","searchGroups","searchGroupContent","updateGroup","updateUserMemberships","joinGroup","leaveGroup","createOrgNotification","getUser","getUserTags","getUserUrl","getUserInvitations","getUserInvitation","acceptInvitation","declineInvitation","getUserNotifications","removeNotification","searchUsers","updateUser","setItemAccess","shareItemWithGroup","ensureMembership","unshareItemWithGroup","isItemSharedWithGroup","getSharingUrl","isItemOwner","isOrgAdmin","getUserMembership","getSelf","getPortal","getPortalSettings","getPortalUrl","scrubControlChars"].indexOf(S)<0&&function(e){n.d(t,e,(function(){return H[e]}))}(S);var J=n(33);n.d(t,"SearchQueryBuilder",(function(){return J.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(47);function o(e){var t={q:"id: "+e.id+" AND group: "+e.groupId,start:1,num:10,sortField:"title",authentication:e.authentication,httpMethod:"POST"};return Object(r.a)(t).then((function(t){if(t.total>0)return t.results.some((function(t){return t.id===e.id}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);function o(e,t){var n=t;return"undefined"!=typeof window&&window.location&&window.location.host?n.params.referer=window.location.host:n.params.referer=r.b,Object(r.d)(e,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17),o=function(){function e(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}return e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},e.prototype.in=function(e){var t="`in("+(e?'"'+e+'"':"")+")`";return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):(Object(r.a)(t+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},e.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},e.prototype.endGroup=function(){return this.openGroups<=0?(Object(r.a)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},e.prototype.and=function(){return this.addModifier("and")},e.prototype.or=function(){return this.addModifier("or")},e.prototype.not=function(){return this.addModifier("not")},e.prototype.from=function(e){return this.hasTerms?(Object(r.a)("`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[0]=e,this)},e.prototype.to=function(e){return this.hasTerms?(Object(r.a)("`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[1]=e,this)},e.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},e.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},e.prototype.clone=function(){return this.commit(),this.cleanup(),new e(this.q+"")},e.prototype.addModifier=function(e){return this.currentModifer?(Object(r.a)("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?(Object(r.a)("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" ",this))},e.prototype.hasWhiteSpace=function(e){return/\s/g.test(e)},e.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.hasWhiteSpace(e)?'"'+e+'"':e},e.prototype.commit=function(){var e=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((function(t){return e.formatTerm(t)})).join(" "),this.termStack=[]),this},Object.defineProperty(e.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){if(this.openGroups>0)for(Object(r.a)("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&Object(r.a)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},e}()},function(e,t){function n(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),a=t.get(i);return void 0===a&&(a=e.call(this,r),t.set(i,a)),a}function r(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function o(e,t,n,r,o){return n.bind(t,e,r,o)}function i(e,t){return o(e,this,1===e.length?n:r,t.cache.create(),t.serializer)}function a(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var u={create:function(){return new s}};e.exports=function(e,t){var n=t&&t.cache?t.cache:u,r=t&&t.serializer?t.serializer:a;return(t&&t.strategy?t.strategy:i)(e,{cache:n,serializer:r})},e.exports.strategies={variadic:function(e,t){return o(e,this,r,t.cache.create(),t.serializer)},monadic:function(e,t){return o(e,this,n,t.cache.create(),t.serializer)}}},function(e,t,n){"use strict";e.exports=function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(var i=0;i<o;i++){var a=n[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),o=n(5);function i(e){var t=Object(r.a)(e)+"/community/groups/"+e.id+"/updateUsers",n={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?n.params.admins=e.users:n.params.users=e.users,Object(o.d)(t,n)}},function(e,t,n){"use strict";(function(e){var r=n(10),o=n(138),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||o.a;t.a=u}).call(this,n(52)(e))},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&u()}function s(){i(a)}function u(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);o=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},f=m(0,0,0,0);function d(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=l(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=d(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=d(r.width),u=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=p(r,"left","right")+i),Math.round(u+a)!==n&&(u-=p(r,"top","bottom")+a)),!function(e){return e===l(e).document.documentElement}(e)){var c=Math.round(s+i)-t,h=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(h)&&(u-=h)}return m(o.left,o.top,s,u)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return r?g(e)?function(e){var t=e.getBBox();return m(0,0,t.width,t.height)}(e):h(e):f}function m(e,t,n,r){return{x:e,y:t,width:n,height:r}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,o,i,a,s,u,l=(r=(n=t).x,o=n.y,i=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),c(u,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),u);c(this,{target:e,contentRect:l})},w=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!=typeof WeakMap?new WeakMap:new n,I=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new w(t,n,this);S.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){I.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}));var O=void 0!==o.ResizeObserver?o.ResizeObserver:I;t.a=O}).call(this,n(36))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),o=n(25);function i(e,t){var n=Object(r.b)(e)||t,i=Object(r.a)(e);if(n){var a=new FormData;return Object.keys(i).forEach((function(e){if("undefined"!=typeof Blob&&i[e]instanceof Blob){var t=i.fileName||i[e].name||e;a.append(e,i[e],t)}else a.append(e,i[e])})),a}return Object(o.b)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);function o(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var o=n+"/oauth2/validateAppAccess",i={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(r.d)(o,i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=/[\x00-\x1F\x7F-\x9F\xA0]/g;function o(e){return e.replace(r,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(12);function i(e){return Object(r.d)(Object(o.a)(e.url),e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(3),o=n(5),i=n(4),a=n(8);function s(e){return Object(a.a)(e).then((function(t){var n=e.folderId?Object(i.a)(e)+"/content/users/"+t+"/"+e.folderId+"/items/"+e.item.id+"/update":Object(i.a)(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=Object(r.a)(Object(r.a)({},e.params),Object(a.b)(e.item)),Object(o.d)(n,e)}))}function u(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateinfo";return e.params=Object(r.a)({folderName:e.folderName,file:e.file},e.params),Object(o.d)(n,e)}))}function c(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=Object(r.a)({file:e.resource,fileName:e.name,text:e.content},e.params),void 0!==e.private&&(e.params.access=e.private?"private":"inherit"),Object(o.d)(n,e)}))}function l(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",a=e.folderId;return a||(a="/"),e.params=Object(r.a)({folder:a},e.params),Object(o.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return f}));var r=n(3),o=n(5),i=n(13),a=n(4);function s(e,t){var n=Object(a.a)(t)+"/community/groups/"+e,i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}function u(e,t){var n=Object(a.a)(t)+"/community/groups/"+e+"/categorySchema",i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}function c(e,t){var n=Object(a.a)(t)+"/content/groups/"+e,i=Object(r.a)(Object(r.a)({httpMethod:"GET"},{params:{start:1,num:100}}),t);return t&&t.paging&&(i.params=Object(r.a)({},t.paging)),Object(o.d)(n,i)}function l(e,t){var n=Object(a.a)(t)+"/community/groups/"+e+"/users",i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}function f(e,t){var n=Object(a.a)(t)+"/community/groups/"+e+"/userlist",r=Object(i.a)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return Object(o.d)(n,r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(27);function o(e){return Object(r.a)(e,"item")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(23);function s(e){var t=e.id,n=Object(i.a)(e)+"/community/groups/"+t+"/addUsers",a=Object.assign({},e,{admins:void 0,users:void 0}),s=Object(r.c)(u("users",e.users,a),u("admins",e.admins,a)).map((function(e){return function(e,t){return Object(o.d)(e,t).catch((function(e){return{errors:[e]}}))}(n,e)}));return Promise.all(s).then(c)}function u(e,t,n){return!t||t.length<1?[]:Object(a.a)(t,25).map((function(t){return function(e,t,n){var o,i;return Object.assign({},n,((o={})[e]=t,o.params=Object(r.a)(Object(r.a)({},n.params),((i={})[e]=t,i)),o))}(e,t,n)}))}function c(e){var t=e.filter((function(e){return e.notAdded})).reduce((function(e,t){return e.concat(t.notAdded)}),[]),n=e.filter((function(e){return e.errors})).reduce((function(e,t){return e.concat(t.errors)}),[]),r={notAdded:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(23);function s(e){var t=e.id,n=e.users,s=Object(i.a)(e)+"/community/groups/"+t+"/removeUsers",u=Object(a.a)(n,25).map((function(t){return n=t,i=Object(r.a)(Object(r.a)({},e),{users:n,params:{users:n}}),Object(o.d)(s,i).catch((function(e){return{errors:[e]}}));var n,i}));return Promise.all(u).then((function(e){var t=function(t){return e.filter((function(e){return e[t]})).reduce((function(e,n){return e.concat(n[t])}),[])},n=t("errors"),o={notRemoved:t("notRemoved")};return n.length?Object(r.a)(Object(r.a)({},o),{errors:n}):o}))}},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(36))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(154))&&r.__esModule?r:{default:r},i=n(11);function a(e,t,n,r){switch(e.type){case i.IMPORT:case i.DECLARATION:case i.COMMENT:return e.return=e.return||e.value;case i.RULESET:e.value=e.props.join(","),e.children.forEach((function(e){e.type===i.COMMENT&&(e.children=e.value)}))}return(0,i.strlen)(n=(0,i.serialize)(e.children,a))?e.return=e.value+"{"+n+"}":""}function s(e,t,n,r){if(!e.root){var s=o.default.transform(a(e,0,n));e.children=s?(0,i.compile)(s)[0].children:[],e.return=""}}Object.defineProperty(s,"name",{value:"stylisRTLPlugin"});var u=s;t.default=u},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){var r=n(66),o=n(151);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";e.exports=n(147)},function(e,t,n){"use strict";n.r(t);var r=n(74);n.d(t,"ApplicationSession",(function(){return r.a}));var o=n(75);n.d(t,"ApiKey",(function(){return o.a}));var i=n(136);n.d(t,"UserSession",(function(){return i.a}));var a=n(22);n.d(t,"fetchToken",(function(){return a.a}));var s=n(32);n.d(t,"generateToken",(function(){return s.a}));var u=n(76);for(var c in u)["default","ApplicationSession","ApiKey","UserSession","fetchToken","generateToken"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(c);var l=n(70);n.d(t,"exchangeToken",(function(){return l.a})),n.d(t,"platformSelf",(function(){return l.b}));var f=n(42);n.d(t,"validateAppAccess",(function(){return f.a}))},function(e,t,n){var r=n(55),o=n(156),i=n(158),a=Math.max,s=Math.min;e.exports=function(e,t,n){var u,c,l,f,d,p,h=0,g=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=u,r=c;return u=c=void 0,h=t,f=e.apply(r,n)}function b(e){return h=e,d=setTimeout(S,t),g?y(e):f}function w(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-h>=l}function S(){var e=o();if(w(e))return I(e);d=setTimeout(S,function(e){var n=t-(e-p);return v?s(n,l-(e-h)):n}(e))}function I(e){return d=void 0,m&&u?y(e):(u=c=void 0,f)}function O(){var e=o(),n=w(e);if(u=arguments,c=this,p=e,n){if(void 0===d)return b(p);if(v)return clearTimeout(d),d=setTimeout(S,t),y(p)}return void 0===d&&(d=setTimeout(S,t)),f}return t=i(t)||0,r(n)&&(g=!!n.leading,l=(v="maxWait"in n)?a(i(n.maxWait)||0,t):l,m="trailing"in n?!!n.trailing:m),O.cancel=function(){void 0!==d&&clearTimeout(d),h=0,u=p=c=d=void 0},O.flush=function(){return void 0===d?f:I(o())},O}},function(e,t,n){"use strict";(function(e,r){var o,i=n(137);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(i.a)(o);t.a=a}).call(this,n(36),n(52)(e))},function(e,t,n){"use strict";(function(e){var r=n(50),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.a.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n(52)(e))},,,function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){var r=n(65),o=n(68),i=n(153);function a(e,t){return new i(t).process(e)}for(var s in(t=e.exports=a).filterXSS=a,t.FilterXSS=i,r)t[s]=r[s];for(var s in o)t[s]=o[s];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},function(e,t,n){var r=n(53).FilterCSS,o=n(53).getDefaultWhiteList,i=n(54);function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var s=new r;function u(e){return e.replace(c,"&lt;").replace(l,"&gt;")}var c=/</g,l=/>/g,f=/"/g,d=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,g=/&newline;?/gim,v=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,m=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function b(e){return e.replace(f,"&quot;")}function w(e){return e.replace(d,'"')}function S(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function I(e){return e.replace(h,":").replace(g," ")}function O(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function E(e){return e=O(e=I(e=S(e=w(e))))}function x(e){return e=u(e=b(e))}var C=/<!--[\s\S]*?-->/g;t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},t.getDefaultWhiteList=a,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=E(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(v.lastIndex=0,v.test(n))return""}else if("style"===t){if(m.lastIndex=0,m.test(n))return"";if(y.lastIndex=0,y.test(n)&&(v.lastIndex=0,v.test(n)))return"";!1!==r&&(n=(r=r||s).process(n))}return n=x(n)},t.escapeHtml=u,t.escapeQuote=b,t.unescapeQuote=w,t.escapeHtmlEntities=S,t.escapeDangerHtml5Entities=I,t.clearNonPrintableCharacter=O,t.friendlyAttrValue=E,t.escapeAttrValue=x,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(a,s,u){if(function(t){return!!n||-1!==i.indexOf(e,t)}(a)){if(u.isClosing){var c="[/removed]",l=u.position+c.length;return r.push([!1!==o?o:u.position,l]),o=!1,c}return o||(o=u.position),"[removed]"}return t(a,s,u)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){return e.replace(C,"")},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=s,t.getDefaultCSSWhiteList=o},function(e,t){function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t,n){var r=n(54);function o(e){var t=r.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function u(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function c(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",a=0,s=!1,u=!1,c=0,l=e.length,f="",d="";e:for(c=0;c<l;c++){var p=e.charAt(c);if(!1===s){if("<"===p){s=c;continue}}else if(!1===u){if("<"===p){r+=n(e.slice(a,c)),s=c,a=c;continue}if(">"===p){r+=n(e.slice(a,s)),f=o(d=e.slice(s,c+1)),r+=t(s,r.length,f,d,i(d)),a=c+1,s=!1;continue}if('"'===p||"'"===p)for(var h=1,g=e.charAt(c-h);" "===g||"="===g;){if("="===g){u=p;continue e}g=e.charAt(c-++h)}}else if(p===u){u=!1;continue}}return a<e.length&&(r+=n(e.substr(a))),r},t.parseAttr=function(e,t){"use strict";var n=0,o=[],i=!1,l=e.length;function f(e,n){if(!((e=(e=r.trim(e)).replace(a,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&o.push(i)}}for(var d=0;d<l;d++){var p,h=e.charAt(d);if(!1!==i||"="!==h)if(!1===i||d!==n||'"'!==h&&"'"!==h||"="!==e.charAt(d-1))if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(p=s(e,d))){f(r.trim(e.slice(n,d))),i=!1,n=d+1;continue}d=p-1;continue}if(-1===(p=u(e,d-1))){f(i,c(r.trim(e.slice(n,d)))),i=!1,n=d+1;continue}}else;else{if(-1===(p=e.indexOf(h,d+1)))break;f(i,r.trim(e.slice(n+1,p))),i=!1,n=(d=p)+1}else i=e.slice(n,d),n=d+1}return n<e.length&&(!1===i?f(e.slice(n)):f(i,c(r.trim(e.slice(n))))),r.trim(o.join(" "))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(5);function o(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var o=n+"/oauth2/exchangeToken",i={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(r.d)(o,i).then((function(e){return e.token}))}function i(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var o=n+"/oauth2/platformSelf?f=json",i={method:"POST",headers:{"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":t},params:{f:"json"}};return Object(r.d)(o,i)}},function(e,t,n){"use strict";function r(e){var t=e.split("="),n=t[0],r=t[1];return{key:decodeURIComponent(n),value:decodeURIComponent(r)}}function o(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var n=r(t),o=n.key,i=n.value;return e[o]=i,e}),{})}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"k",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return b}));var r=n(3),o=n(5),i=n(13),a=n(4),s=n(43),u=n(8);function c(e,t){var n=l(e,t),i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}var l=function(e,t){return("string"==typeof t?t:Object(a.a)(t))+"/content/items/"+e};function f(e,t){var n=l(e,t)+"/data",i=Object(r.a)({httpMethod:"GET",params:{}},t);return i.file&&(i.params.f=null),Object(o.d)(n,i).catch((function(e){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(e.message))throw e}))}function d(e){var t=l(e.id,e)+"/relatedItems",n=Object(r.a)({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?n.params.relationshipType=e.relationshipType:n.params.relationshipTypes=e.relationshipType,delete n.direction,delete n.relationshipType,Object(o.d)(t,n)}function p(e,t){var n=l(e,t)+"/resources",i=Object(r.a)({},t);return i.params=Object(r.a)({num:1e3},i.params),Object(o.d)(n,i)}function h(e,t){var n=t.readAs||"blob";return w(e,"/resources/"+t.fileName,n,t)}function g(e,t){var n=l(e,t)+"/groups";return Object(o.d)(n,t)}function v(e){return Object(u.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/status",s=Object(i.a)(e,["jobId","jobType"],{params:Object(r.a)({},e.params)});return Object(o.d)(n,s)}))}function m(e){return Object(u.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/parts";return Object(o.d)(n,e)}))}function y(e,t){var n=t||{},o=n.fileName,i=void 0===o?"iteminfo.xml":o,a=n.readAs;return w(e,"/info/"+i,void 0===a?"text":a,Object(r.a)({httpMethod:"GET"},t))}function b(e,t){return y(e,Object(r.a)(Object(r.a)({},t),{fileName:"metadata/metadata.xml"}))}function w(e,t,n,i){var a=""+l(e,i)+t,u=Object(r.a)({params:{}},i),c=u.rawResponse;return u.rawResponse=!0,u.params.f=null,Object(o.d)(a,u).then((function(e){return c?e:"json"!==n?e[n]():e.text().then((function(e){return JSON.parse(Object(s.a)(e))}))}))}},function(e){e.exports=JSON.parse('{"exbVersion":"1.4.0","exbBuildNum":"613","exbBuildCommit":"05b44e4cc1c04f0bc5abf3126926e3e3208664c0","exbExtensionsBuildCommit":"464a15efcfd0cb563f34dabf9166c7627d8482bc","exbBuildDate":"20210429.143455.CST","productVersion":"ArcGIS Experience Builder"}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(22),i=function(){function e(e){this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.token=e.token,this.expires=e.expires,this.portal=e.portal||"https://www.arcgis.com/sharing/rest",this.duration=e.duration||7200}return e.prototype.getToken=function(e,t){return this.token&&this.expires&&this.expires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequest||(this._pendingTokenRequest=this.refreshToken(t)),this._pendingTokenRequest)},e.prototype.refreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",expiration:this.duration}},e);return Object(o.a)(this.portal+"/oauth2/token/",n).then((function(e){return t._pendingTokenRequest=null,t.token=e.token,t.expires=e.expires,e.token}))},e.prototype.refreshSession=function(){var e=this;return this.refreshToken().then((function(){return e}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){this.key=e.key}return e.prototype.getToken=function(e){return Promise.resolve(this.key)},e}()},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(3),o=n(12),i=n(5),a=n(13);function s(e){var t=Object(o.a)(e.url)+"/"+e.id,n=Object(r.a)({httpMethod:"GET"},e);return Object(i.d)(t,n).then((function(e){return n.rawResponse?e:e.feature}))}function u(e){var t=Object(a.a)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:Object(r.a)({where:"1=1",outFields:"*"},e.params)});return Object(i.d)(Object(o.a)(e.url)+"/query",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(12),i=n(13),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/addFeatures",n=Object(i.a)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(12),i=n(13),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/updateFeatures",n=Object(i.a)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(12),i=n(13),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/deleteFeatures",n=Object(i.a)(e,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(12),i=n(13),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/applyEdits",n=Object(i.a)(e,["adds","updates","deletes","useGlobalIds","attachments","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(12);function a(e){var t=Object(r.a)({httpMethod:"GET"},e);return Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/attachments",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(12);function a(e){var t=Object(r.a)({params:{}},e);return t.params.attachment=e.attachment,Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/addAttachment",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(12);function a(e){var t=Object(r.a)({params:{}},e);return t.params.attachment=e.attachment,t.params.attachmentId=e.attachmentId,Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/updateAttachment",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(12);function a(e){var t=Object(r.a)({params:{}},e);return t.params.attachmentIds=e.attachmentIds,Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/deleteAttachments",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(13),i=n(5),a=n(12);function s(e){var t=Object(o.a)(e,["objectIds","relationshipId","definitionExpression","outFields"],{httpMethod:"GET",params:Object(r.a)({definitionExpression:"1=1",outFields:"*",relationshipId:0},e.params)});return Object(i.d)(Object(a.a)(e.url)+"/queryRelatedRecords",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(12);function i(e){return Object(r.d)(Object(o.a)(e.url),e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(44);function i(e){return new Promise((function(t){if(!e.fields)return Object(o.a)({url:e.url}).then((function(n){t(e.fields=n.fields)}));t(e.fields)})).then((function(t){var n=function(e){return e.reduce((function(e,t){var n=t.domain;return n&&"codedValue"===n.type&&(e[t.name]=n),e}),{})}(t);if(Object.keys(n).length<1)return e.queryResponse;var o=e.queryResponse.features.map((function(e){var t={};for(var o in e.attributes)if(e.attributes.hasOwnProperty(o)){var i=e.attributes[o],s=n[o];t[o]=null!==i&&s?a(i,s):i}return Object(r.a)(Object(r.a)({},e),{attributes:t})}));return Object(r.a)(Object(r.a)({},e.queryResponse),{features:o})}))}function a(e,t){var n=t.codedValues.find((function(t){return e===t.code}));return n?n.name:e}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f}));var r=n(3),o=n(13),i=n(5),a=n(4),s=n(8),u=n(45);function c(e){var t=Object(r.a)({item:{id:e.id,data:e.data}},e);return delete t.id,delete t.data,Object(u.b)(t)}function l(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/addRelationship",s=Object(o.a)(e,["originItemId","destinationItemId","relationshipType"],{params:Object(r.a)({},e.params)});return Object(i.d)(n,s)}))}function f(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=Object(r.a)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),Object(i.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(4),i=n(8),a=function(e){var t=e.folderId,n=e.start,a=void 0===n?1:n,s=e.num,u=void 0===s?10:s,c=e.authentication,l=t?"/"+t:"";return Object(i.a)(e).then((function(t){return Object(o.a)(e)+"/content/users/"+t+l})).then((function(e){return Object(r.d)(e,{httpMethod:"GET",authentication:c,params:{start:a,num:u}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(3),o=n(5),i=n(13),a=n(4),s=n(8);function u(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/createFolder";return e.params=Object(r.a)({title:e.title},e.params),Object(o.d)(n,e)}))}function c(e){return e.multipart&&!e.filename?Promise.reject(new Error("The filename is required for a multipart request.")):Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t,u=n+"/addItem";e.folderId&&(u=n+"/"+e.folderId+"/addItem"),e.params=Object(r.a)(Object(r.a)({},e.params),Object(s.b)(e.item));var c=Object(i.a)(e,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:Object(r.a)({},e.params)});return Object(o.d)(u,c)}))}function l(e){return c(Object(r.a)({folderId:null},e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(8),i=n(4),a=function(e){var t=e.authentication,n=e.id,a=e.title,s=e.exportFormat,u=e.exportParameters;return Object(o.a)(e).then((function(t){return Object(i.a)(e)+"/content/users/"+t+"/export"})).then((function(e){return Object(r.d)(e,{httpMethod:"POST",authentication:t,params:{itemId:n,title:a,exportFormat:s,exportParameters:u}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(5),o=n(4),i=n(8);function a(e){return Object(i.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/protect";return Object(r.d)(n,e)}))}function s(e){return Object(i.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/unprotect";return Object(r.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(4),i=n(16);function a(e){return Object(i.d)(e).then((function(t){if(!t)throw Error("Item "+e.id+" can not be reassigned because current user is not an organization administrator.");var n=Object(o.a)(e)+"/content/users/"+e.currentOwner+"/items/"+e.id+"/reassign",i={params:{targetUsername:e.targetUsername,targetFolderName:e.targetFolderName},authentication:e.authentication};return Object(r.d)(n,i)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(3),o=n(5),i=n(13),a=n(4),s=n(8);function u(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/delete";return Object(o.d)(n,e)}))}function c(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/deleteRelationship",s=Object(i.a)(e,["originItemId","destinationItemId","relationshipType"],{params:Object(r.a)({},e.params)});return Object(o.d)(n,s)}))}function l(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=Object(r.a)(Object(r.a)({},e.params),{resource:e.resource}),Object(o.d)(n,e)}))}function f(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+encodeURIComponent(t)+"/"+e.folderId+"/delete";return Object(o.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(3),o=n(13),i=n(5),a=n(4),s=n(8);function u(e){var t=e.partNum;return!Number.isInteger(t)||t<1||t>1e4?Promise.reject(new Error("The part number must be an integer between 1 to 10000, inclusive.")):Object(s.a)(e).then((function(n){var s=Object(a.a)(e)+"/content/users/"+n+"/items/"+e.id+"/addPart?partNum="+t,u=Object(o.a)(e,["file"],{params:Object(r.a)({},e.params)});return Object(i.d)(s,u)}))}function c(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/commit",u=Object(o.a)(e,[],{params:Object(r.a)(Object(r.a)({},e.params),Object(s.b)(e.item))});return Object(i.d)(n,u)}))}function l(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/cancel";return Object(i.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(23);function s(e){var t=e.id,n=Object(i.a)(e)+"/community/groups/"+t+"/invite",s=function(e){return Object(a.a)(e.users,25).map((function(t){return function(e,t){var n=Object.assign({},t);return n.params=Object(r.a)(Object(r.a)({},n.params),{users:e,role:n.role,expiration:n.expiration}),n}(t,e)}))}(e).map((function(e){return function(e,t){return Object(o.d)(e,t).catch((function(e){return{errors:[e]}}))}(n,e)}));return Promise.all(s).then(u)}function u(e){var t=e.every((function(e){return e.success})),n=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),r={success:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/createGroup";return e.params=Object(r.a)(Object(r.a)({},e.params),e.group),Object(o.d)(t,e)}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/createNotification",n=Object(r.a)({params:Object(r.a)({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e);return Object(o.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(5),o=n(4);function i(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/protect";return Object(r.d)(t,e)}function a(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/unprotect";return Object(r.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/delete",n=Object(r.a)({},e);return Object(o.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(27);function o(e){return Object(r.a)(e,"group")}function i(e){return Object(r.a)(e,"groupContent")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.group.id+"/update";return e.params=Object(r.a)(Object(r.a)({},e.params),e.group),Object(o.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(5),o=n(4);function i(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/join";return Object(r.d)(t,e)}function a(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/leave";return Object(r.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(23);function s(e){var t=Object(i.a)(e)+"/portals/self/createNotification",n=function(e){return Object(a.a)(e.users,e.batchSize||25).map((function(t){return function(e,t){var n=Object.assign({},t);return n.params=Object(r.a)(Object(r.a)({},n.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:n.notificationChannelType}),n}(t,e)}))}(e).map((function(e){return function(e,t){return Object(o.d)(e,t).catch((function(e){return{errors:[e]}}))}(t,e)}));return Promise.all(n).then(u)}function u(e){var t=e.every((function(e){return e.success})),n=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),r={success:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(4);function i(e){var t=e.username||e.authentication.username,n=Object(o.a)(e)+"/community/users/"+encodeURIComponent(t)+"/tags";return Object(r.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4);function o(e){return Object(r.a)(e)+"/community/users/"+encodeURIComponent(e.username)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n(3),o=n(5),i=n(4);function a(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username),a=Object(i.a)(e)+"/community/users/"+n+"/invitations";return t=Object(r.a)(Object(r.a)({},e),t),Object(o.d)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId,a={httpMethod:"GET"};return a=Object(r.a)(Object(r.a)({},e),a),Object(o.d)(n,a)}function u(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/accept",a=Object(r.a)({},e);return Object(o.d)(n,a)}function c(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/decline",a=Object(r.a)({},e);return Object(o.d)(n,a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(3),o=n(5),i=n(4);function a(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username),a=Object(i.a)(e)+"/community/users/"+n+"/notifications";return t=Object(r.a)(Object(r.a)({},e),t),Object(o.d)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/notifications/"+e.id+"/delete";return Object(o.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(27);function o(e){return Object(r.a)(e,"user")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=e.user.username||e.authentication.username,n=Object(i.a)(e)+"/community/users/"+encodeURIComponent(t)+"/update";return e.params=Object(r.a)(Object(r.a)({},e.user),e.params),delete e.user,Object(o.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(16);function a(e){var t=Object(i.a)(e);return Object(i.c)(e)?s(t,e):Object(i.d)(e).then((function(n){if(n)return s(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")}))}function s(e,t){return t.params=Object(r.a)({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),Object(o.d)(e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n(5),o=n(4),i=n(16),a=n(26),s=n(48),u=n(49),c=n(38),l=n(31);function f(e){return Object(l.a)(e).then((function(t){if(t)return{itemId:e.id,shortcut:!0,notSharedWith:[]};var n=e.authentication.username,r=e.owner,o=e.confirmItemControl,s=r||n;return s!==n?Promise.all([Object(a.a)({username:n,authentication:e.authentication}),Object(a.a)({username:s,authentication:e.authentication}),Object(i.b)(e)]).then((function(t){var n=t[0],r=t[1],i=t[2];return function(e,t,n,r,o,i){var a=[];if(i.groupId!==e.favGroupId)if(t){if(!r)throw Error("This item can not be shared to shared editing group "+i.groupId+" by "+e.username+" as they not the item owner or org admin.");a.push(p(e,e,!1,"Error adding "+e.username+" as member to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i),p(e,o,!0,"none"===n?"Error adding user "+o.username+" to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.":"Error promoting user "+o.username+" to admin in edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i))}else if(r)a.push(p(e,e,!1,"Error adding "+e.username+" as member to view group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i));else if("none"===n)throw new Error("This item can not be shared by "+e.username+" as they are not a member of the specified group "+i.groupId+".");return a}(n,!!o,i,"org_admin"===n.role&&!n.roleId,r,e)})).then((function(t){var n=t[0],r=(void 0===n?{promise:Promise.resolve({notAdded:[]}),revert:function(e){return Promise.resolve(e)}}:n).revert;return Promise.all(t.map((function(e){return e.promise}))).then((function(){return d(e)})).then((function(e){return r(e)}))})):d(e)})).then((function(t){if(t.notSharedWith.length)throw Error("Item "+e.id+" could not be shared to group "+e.groupId+".");return t}))}function d(e){var t=e.authentication.username,n=e.owner||t,i=Object(o.a)(e)+"/content/items/"+e.id+"/share";return n===t&&(i=Object(o.a)(e)+"/content/users/"+n+"/items/"+e.id+"/share"),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},Object(r.d)(i,e)}function p(e,t,n,r,o){var i,a,l,f=t.groups||[],d=f.find((function(e){return e.id===o.groupId}));if(e.orgId!==t.orgId)throw Error("User "+t.username+" is not a member of the same org as "+e.username+". Consequently they can not be added added to group "+o.groupId+" nor can item "+o.id+" be shared to the group.");if(!d&&f.length>511)throw Error("User "+t.username+" already has 512 groups, and can not be added to group "+o.groupId+". Consequently item "+o.id+" can not be shared to the group.");if(d)n&&"member"===d.userMembership.memberType?(a=Object(c.a)({id:o.groupId,users:[t.username],newMemberType:"admin",authentication:o.authentication}).then((function(e){var t=e.results.reduce((function(e,t){return t.success||e.push(t.username),e}),[]);return Promise.resolve({notAdded:t})})).catch((function(){return{notAdded:[t.username]}})),l=function(e){return Object(c.a)({id:o.groupId,users:[t.username],newMemberType:"member",authentication:o.authentication}).then((function(){return e})).catch((function(){return e}))}):(a=Promise.resolve({notAdded:[]}),l=function(e){return Promise.resolve(e)});else{var p=n?"admins":"users";a=Object(s.a)((i={id:o.groupId},i[p]=[t.username],i.authentication=o.authentication,i)).then((function(e){if(e.errors&&e.errors.length)throw e.errors[0];return e})).catch((function(){return{notAdded:[t.username]}})),l=function(e){return Object(u.a)({id:o.groupId,users:[t.username],authentication:o.authentication}).then((function(){return e}))}}return{promise:a.then((function(e){if(e.notAdded.length)throw new Error(r);return e})),revert:l}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(4),i=n(16),a=n(31),s=n(26);function u(e){return Object(a.a)(e).then((function(t){if(!t)return Promise.resolve({itemId:e.id,shortcut:!0,notUnsharedFrom:[]});var n=e.authentication.username,a=e.owner;return Promise.all([Object(i.b)(e),Object(s.a)({username:n,authentication:e.authentication})]).then((function(t){var i=t[0],s=t[1],u=(a||n)===n,c="org_admin"===s.role&&!s.roleId;if(!u&&!c&&["admin","owner"].indexOf(i)<0)throw Error("This item can not be unshared from group "+e.groupId+" by "+n+" as they not the item owner, an org admin, group admin or group owner.");return function(e){var t=e.authentication.username,n=e.owner||t,i=Object(o.a)(e)+"/content/items/"+e.id+"/unshare";n===t&&(i=Object(o.a)(e)+"/content/users/"+n+"/items/"+e.id+"/unshare");return e.params={groups:e.groupId},Object(r.d)(i,e)}(e)})).then((function(t){if(t.notUnsharedFrom.length)throw Error("Item "+e.id+" could not be unshared to group "+e.groupId);return t}))}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4);function a(e){return s(null,e)}function s(e,t){var n=e||"self",a=Object(i.a)(t)+"/portals/"+n,s=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(a,s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e,t){var n=e||"self",a=Object(i.a)(t)+"/portals/"+n+"/settings",s=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(a,s)}},function(e,t){},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError"}(r||(r={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){var r=n(157),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var r=n(133).Symbol;e.exports=r},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(3),o=n(12),i=n(25),a=n(5),s=n(71),u=n(32),c=n(22),l=/^https?:\/\/(\S+)\.arcgis\.com.+/;function f(e){return l.test(e)}function d(e){if(!l.test(e))return null;var t=e.match(l)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function p(e,t){var n=Object(o.a)(function(e){if(!l.test(e))return e;switch(d(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(t)).replace(/https?:\/\//,""),r=Object(o.a)(e).replace(/https?:\/\//,"");return new RegExp(r,"i").test(n)}var h=n(42);var g=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?Object(o.a)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||1440,this.trustedServers={},e.server){var t=this.getServerRootUrl(e.server);this.trustedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,n){void 0===n&&(n=window);var o,s=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",duration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),u=s.portal,c=s.provider,l=s.clientId,f=s.duration,d=s.redirectUri,p=s.popup,h=s.popupWindowFeatures,g=s.state,v=s.locale,m=s.params;if(o="arcgis"===c?u+"/oauth2/authorize?client_id="+l+"&response_type=token&expiration="+f+"&redirect_uri="+encodeURIComponent(d)+"&state="+g+"&locale="+v:u+"/oauth2/social/authorize?client_id="+l+"&socialLoginProviderName="+c+"&autoAccountCreateForSocial=true&response_type=token&expiration="+f+"&redirect_uri="+encodeURIComponent(d)+"&state="+g+"&locale="+v,m&&(o=o+"&"+Object(i.b)(m)),p){var y,b=((y={promise:null,resolve:null,reject:null}).promise=new Promise((function(e,t){y.resolve=e,y.reject=t})),y);return n["__ESRI_REST_AUTH_HANDLER_"+l]=function(t,n){if(t){var r=JSON.parse(t);b.reject(new a.a(r.errorMessage,r.error))}else if(n){var o=JSON.parse(n);b.resolve(new e({clientId:l,portal:u,ssl:o.ssl,token:o.token,tokenExpires:new Date(o.expires),username:o.username}))}},n.open(o,"oauth-window",h),b.promise}n.location.href=o},e.completeOAuth2=function(t,n){void 0===n&&(n=window);var o=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),i=o.portal,u=o.clientId,c=o.popup;function l(t,r){try{var o=void 0,s="__ESRI_REST_AUTH_HANDLER_"+u;if(c&&(n.opener?n.opener.parent&&n.opener.parent[s]?o=n.opener.parent[s]:n.opener&&n.opener[s]&&(o=n.opener[s]):n!==n.parent&&n.parent&&n.parent[s]&&(o=n.parent[s]),o))return o(t?JSON.stringify(t):void 0,JSON.stringify(r)),void n.close()}catch(e){throw new a.a('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new a.a(t.errorMessage,t.error);return new e({clientId:u,portal:i,ssl:r.ssl,token:r.token,tokenExpires:r.expires,username:r.username})}var f=Object(s.b)(n.location.hash);if(!f.access_token){var d=void 0,p="Unknown error";return f.error&&(d=f.error,p=f.error_description),l({error:d,errorMessage:p})}var h=f.access_token,g=new Date(Date.now()+1e3*parseInt(f.expires_in,10)-6e4),v=f.username;return l(void 0,{token:h,expires:g,ssl:"true"===f.ssl,username:v})},e.fromParent=function(t,n){var r;return!n&&window&&(n=window),new Promise((function(o,i){r=function(t){if(t.source===n.parent&&t.data)try{return o(e.parentMessageHandler(t))}catch(e){return i(e)}},n.addEventListener("message",r,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return n.removeEventListener("message",r,!1),e}))},e.authorize=function(e,t){var n=Object(r.a)({portal:"https://arcgis.com/sharing/rest",duration:20160},e),o=n.portal,i=n.clientId,a=n.duration,s=n.redirectUri;t.writeHead(301,{Location:o+"/oauth2/authorize?client_id="+i+"&duration="+a+"&response_type=code&redirect_uri="+encodeURIComponent(s)}),t.end()},e.exchangeAuthorizationCode=function(t,n){var o=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:1440},t),i=o.portal,a=o.clientId,s=o.redirectUri,u=o.refreshTokenTTL;return Object(c.a)(i+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:a,redirect_uri:s,code:n}}).then((function(t){return new e({clientId:a,portal:i,ssl:t.ssl,redirectUri:s,refreshToken:t.refreshToken,refreshTokenTTL:u,refreshTokenExpires:new Date(Date.now()+1e3*(u-1)),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var n=JSON.parse(t);return new e({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})},e.fromCredential=function(t){return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:t.ssl,token:t.token,username:t.userId,tokenExpires:new Date(t.expires)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var n=new Error(t.data.error.message);throw n.name=t.data.error.name,n}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var n=this.portal+"/community/self",o=Object(r.a)(Object(r.a)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=Object(a.d)(n,o).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return n=this.portal,r=e,o=f(n),i=f(r),a=d(n),s=d(r),o&&i&&a===s||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var n,r,o,i,a,s},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return Object(h.a)(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new a.a("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=Object(o.a)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),n=(t[0],t[1]),r=t[2].split("/"),i=r[0],a=r.slice(1);return""+n+i.toLowerCase()+"/"+a.join("/")},e.prototype.createPostMessageHandler=function(e){var t=this;return function(n){var r=e.indexOf(n.origin)>-1,o="arcgis:auth:requestCredential"===n.data.type;if(r&&o){var i=t.toCredential();i.server=i.server.replace("/sharing/rest",""),n.source.postMessage({type:"arcgis:auth:credential",credential:i},n.origin)}}},e.prototype.getTokenForServer=function(e,t){var n=this,r=this.getServerRootUrl(e),o=this.trustedServers[r];return o&&o.expires&&o.expires.getTime()>Date.now()?Promise.resolve(o.token):(this._pendingTokenRequests[r]||(this._pendingTokenRequests[r]=Object(a.d)(r+"/rest/info").then((function(o){if(o.owningSystemUrl){if(p(o.owningSystemUrl,n.portal))return Object(a.d)(o.owningSystemUrl+"/sharing/rest/info",t);throw new a.a(e+" is not federated with "+n.portal+".","NOT_FEDERATED")}if(o.authInfo&&void 0!==n.trustedServers[r])return Promise.resolve({authInfo:o.authInfo});throw new a.a(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return n.token&&n.tokenExpires.getTime()>Date.now()?Object(u.a)(t,{params:{token:n.token,serverUrl:e,expiration:n.tokenDuration,client:"referer"}}):Object(u.a)(t,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e}))})).then((function(e){return n.trustedServers[r]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[r],e.token}))),this._pendingTokenRequests[r])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,n=Object(r.a)({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return Object(u.a)(this.portal+"/generateToken",n).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return Object(c.a)(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return Object(c.a)(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e}()},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(o[c]=u,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},function(e,t,n){"use strict";n.r(t);var r=n(77);n.d(t,"getFeature",(function(){return r.a})),n.d(t,"queryFeatures",(function(){return r.b}));var o=n(78);n.d(t,"addFeatures",(function(){return o.a}));var i=n(79);n.d(t,"updateFeatures",(function(){return i.a}));var a=n(80);n.d(t,"deleteFeatures",(function(){return a.a}));var s=n(81);n.d(t,"applyEdits",(function(){return s.a}));var u=n(82);n.d(t,"getAttachments",(function(){return u.a}));var c=n(83);n.d(t,"addAttachment",(function(){return c.a}));var l=n(84);n.d(t,"updateAttachment",(function(){return l.a}));var f=n(85);n.d(t,"deleteAttachments",(function(){return f.a}));var d=n(86);n.d(t,"queryRelated",(function(){return d.a}));var p=n(44);n.d(t,"getLayer",(function(){return p.a}));var h=n(87);n.d(t,"getService",(function(){return h.a}));var g=n(88);n.d(t,"decodeValues",(function(){return g.a}));var v=n(89);for(var m in v)["default","getFeature","queryFeatures","addFeatures","updateFeatures","deleteFeatures","applyEdits","getAttachments","addAttachment","updateAttachment","deleteAttachments","queryRelated","getLayer","getService","decodeValues"].indexOf(m)<0&&function(e){n.d(t,e,(function(){return v[e]}))}(m)},function(e,t,n){var r=n(58),o=n(55);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},,,function(e,t,n){e.exports=n(145)()},function(e,t,n){"use strict";var r=n(146);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;function I(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case d:case a:case u:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case m:case v:case c:return e;default:return t}}case i:return t}}}function O(e){return I(e)===d}t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=p,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return O(e)||I(e)===f},t.isConcurrentMode=O,t.isContextConsumer=function(e){return I(e)===l},t.isContextProvider=function(e){return I(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return I(e)===p},t.isFragment=function(e){return I(e)===a},t.isLazy=function(e){return I(e)===m},t.isMemo=function(e){return I(e)===v},t.isPortal=function(e){return I(e)===i},t.isProfiler=function(e){return I(e)===u},t.isStrictMode=function(e){return I(e)===s},t.isSuspense=function(e){return I(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===u||e===s||e===h||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===b||e.$$typeof===w||e.$$typeof===S||e.$$typeof===y)},t.typeOf=I},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function a(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="";for(var i=Object.keys(t),s=0;s<i.length;s++){var u=i[s];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){var r=n(66),o=n(152);n(67);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return o(e,(function(e,t,o,u,c){var l=n[o],f=!1;if(!0===l?f=l:"function"==typeof l?f=l(u):l instanceof RegExp&&(f=l.test(u)),!0!==f&&(f=!1),u=s(o,u)){var d,p={position:t,sourcePosition:e,source:c,isWhite:f};return f?i(d=r(o,u,p))?o+":"+u:d:i(d=a(o,u,p))?void 0:d}}))},e.exports=a},function(e,t,n){var r=n(67);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,o=!1,i=0,a=0,s="";function u(){if(!o){var n=r.trim(e.slice(i,a)),u=n.indexOf(":");if(-1!==u){var c=r.trim(n.slice(0,u)),l=r.trim(n.slice(u+1));if(c){var f=t(i,s.length,c,l,n);f&&(s+=f+"; ")}}}i=a+1}for(;a<n;a++){var c=e[a];if("/"===c&&"*"===e[a+1]){var l=e.indexOf("*/",a+2);if(-1===l)break;i=(a=l+1)+1,o=!1}else"("===c?o=!0:")"===c?o=!1:";"===c?o||u():"\n"===c&&u()}return r.trim(s)}},function(e,t,n){var r=n(53).FilterCSS,o=n(65),i=n(68),a=i.parseTag,s=i.parseAttr,u=n(54);function c(e){return null==e}function l(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList=e.whiteList||o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}l.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,l=t.onTagAttr,f=t.onIgnoreTagAttr,d=t.safeAttrValue,p=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var g=!1;if(t.stripIgnoreTagBody){g=o.StripTagBody(t.stripIgnoreTagBody,i);i=g.onIgnoreTag}var v=a(e,(function(e,t,o,a,g){var v,m={sourcePosition:e,position:t,isClosing:g,isWhite:n.hasOwnProperty(o)};if(!c(v=r(o,a,m)))return v;if(m.isWhite){if(m.isClosing)return"</"+o+">";var y=function(e){var t=u.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=u.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=u.trim(e.slice(0,-1))),{html:e,closing:n}}(a),b=n[o],w=s(y.html,(function(e,t){var n,r=-1!==u.indexOf(b,e);return c(n=l(o,e,t,r))?r?(t=d(o,e,t,h))?e+'="'+t+'"':e:c(n=f(o,e,t,r))?void 0:n:n}));a="<"+o;return w&&(a+=" "+w),y.closing&&(a+=" /"),a+=">"}return c(v=i(o,a,m))?p(a):v}),p);return g&&(v=g.remove(v)),v},e.exports=l},function(e,t,n){
/*!
 * Converts CSS stylesheets between left-to-right and right-to-left.
 * https://github.com/cssjanus/cssjanus
 *
 * Copyright 2008 Google Inc.
 * Copyright 2010 Trevor Parscal
 */
var r;function o(e,t){var n=[],r=0;function o(e){return n.push(e),t}function i(){return n[r++]}return{tokenize:function(t){return t.replace(e,o)},detokenize:function(e){return e.replace(new RegExp("("+t+")","g"),i)}}}r=new function(){var e="(?:(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f])",t="(?:[_a-z0-9-]|[^\\u0020-\\u007e]|"+e+")",n="(?:[0-9]*\\.[0-9]+|[0-9]+)(?:\\s*(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)|-?(?:[_a-z]|[^\\u0020-\\u007e]|(?:(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f]))(?:[_a-z0-9-]|[^\\u0020-\\u007e]|(?:(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f]))*)?",r="((?:-?"+n+")|(?:inherit|auto))",i="(#?"+t+"+|(?:rgba?|hsla?)\\([ \\d.,%-]+\\))",a="(?:[!#$%&*-~]|[^\\u0020-\\u007e]|"+e+")*?",s="(?!("+t+"|\\r?\\n|\\s|#|\\:|\\.|\\,|\\+|>|\\(|\\)|\\[|\\]|=|\\*=|~=|\\^=|'[^']*'|\"[^\"]*\"|`COMMENT`)*?{)",u="(?!"+a+"['\"]?\\s*\\))",c="(?="+a+"['\"]?\\s*\\))",l="(\\s*(?:!important\\s*)?[;}])",f=/`TMP`/g,d=new RegExp("\\/\\*[^*]*\\*+([^\\/*][^*]*\\*+)*\\/","gi"),p=new RegExp("(\\/\\*\\!?\\s*@noflip\\s*\\*\\/"+s+"[^;}]+;?)","gi"),h=new RegExp("(\\/\\*\\!?\\s*@noflip\\s*\\*\\/[^\\}]*?})","gi"),g=new RegExp("(direction\\s*:\\s*)ltr","gi"),v=new RegExp("(direction\\s*:\\s*)rtl","gi"),m=new RegExp("(^|[^a-zA-Z])(left)(?![a-zA-Z])"+u+s,"gi"),y=new RegExp("(^|[^a-zA-Z])(right)(?![a-zA-Z])"+u+s,"gi"),b=new RegExp("(^|[^a-zA-Z])(left)"+c,"gi"),w=new RegExp("(^|[^a-zA-Z])(right)"+c,"gi"),S=new RegExp("(^|[^a-zA-Z])(ltr)"+c,"gi"),I=new RegExp("(^|[^a-zA-Z])(rtl)"+c,"gi"),O=new RegExp("(^|[^a-zA-Z])([ns]?)e-resize","gi"),E=new RegExp("(^|[^a-zA-Z])([ns]?)w-resize","gi"),x=new RegExp("((?:margin|padding|border-width)\\s*:\\s*)"+r+"(\\s+)"+r+"(\\s+)"+r+"(\\s+)"+r+l,"gi"),C=new RegExp("((?:-color|border-style)\\s*:\\s*)"+i+"(\\s+)"+i+"(\\s+)"+i+"(\\s+)"+i+l,"gi"),T=new RegExp("(background(?:-position)?\\s*:\\s*(?:[^:;}\\s]+\\s+)*?)("+n+")","gi"),j=new RegExp("(background-position-x\\s*:\\s*)(-?(?:[0-9]*\\.[0-9]+|[0-9]+)%)","gi"),A=new RegExp("(border-radius\\s*:\\s*)"+r+"(?:(?:\\s+"+r+")(?:\\s+"+r+")?(?:\\s+"+r+")?)?(?:(?:(?:\\s*\\/\\s*)"+r+")(?:\\s+"+r+")?(?:\\s+"+r+")?(?:\\s+"+r+")?)?"+l,"gi"),P=new RegExp("(box-shadow\\s*:\\s*(?:inset\\s*)?)"+r,"gi"),_=new RegExp("(text-shadow\\s*:\\s*)"+r+"(\\s*)"+i,"gi"),D=new RegExp("(text-shadow\\s*:\\s*)"+i+"(\\s*)"+r,"gi"),k=new RegExp("(text-shadow\\s*:\\s*)"+r,"gi"),R=new RegExp("(transform\\s*:[^;}]*)(translateX\\s*\\(\\s*)"+r+"(\\s*\\))","gi"),M=new RegExp("(transform\\s*:[^;}]*)(translate\\s*\\(\\s*)"+r+"((?:\\s*,\\s*"+r+"){0,2}\\s*\\))","gi");function N(e,t,n){var r,o;return"%"===n.slice(-1)&&(-1!==(r=n.indexOf("."))?(o=n.length-r-2,n=(n=100-parseFloat(n)).toFixed(o)+"%"):n=100-parseFloat(n)+"%"),t+n}function L(e){switch(e.length){case 4:e=[e[1],e[0],e[3],e[2]];break;case 3:e=[e[1],e[0],e[1],e[2]];break;case 2:e=[e[1],e[0]];break;case 1:e=[e[0]]}return e.join(" ")}function U(e,t){var n=[].slice.call(arguments),r=n.slice(2,6).filter((function(e){return e})),o=n.slice(6,10).filter((function(e){return e})),i=n[10]||"";return t+(o.length?L(r)+" / "+L(o):L(r))+i}function F(e){return 0===parseFloat(e)?e:"-"===e[0]?e.slice(1):"-"+e}function V(e,t,n){return t+F(n)}function B(e,t,n,r,o){return t+n+F(r)+o}function G(e,t,n,r,o){return t+n+r+F(o)}return{transform:function(e,t){var n=new o(p,"`NOFLIP_SINGLE`"),r=new o(h,"`NOFLIP_CLASS`"),i=new o(d,"`COMMENT`");return e=i.tokenize(r.tokenize(n.tokenize(e.replace("`","%60")))),t.transformDirInUrl&&(e=e.replace(S,"$1`TMP`").replace(I,"$1ltr").replace(f,"rtl")),t.transformEdgeInUrl&&(e=e.replace(b,"$1`TMP`").replace(w,"$1left").replace(f,"right")),e=e.replace(g,"$1`TMP`").replace(v,"$1ltr").replace(f,"rtl").replace(m,"$1`TMP`").replace(y,"$1left").replace(f,"right").replace(O,"$1$2`TMP`").replace(E,"$1$2e-resize").replace(f,"w-resize").replace(A,U).replace(P,V).replace(_,G).replace(D,G).replace(k,V).replace(R,B).replace(M,B).replace(x,"$1$2$3$8$5$6$7$4$9").replace(C,"$1$2$3$8$5$6$7$4$9").replace(T,N).replace(j,N),e=n.detokenize(r.detokenize(i.detokenize(e)))}}},e.exports?t.transform=function(e,t,n){var o;return"object"==typeof t?o=t:(o={},"boolean"==typeof t&&(o.transformDirInUrl=t),"boolean"==typeof n&&(o.transformEdgeInUrl=n)),r.transform(e,o)}:"undefined"!=typeof window&&(window.cssjanus=r)},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){var r=n(133);e.exports=function(){return r.Date.now()}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(36))},function(e,t,n){var r=n(55),o=n(159),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){var r=n(160),o=n(163);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(134),o=n(161),i=n(162),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},function(e,t,n){var r=n(134),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"AppRoot",(function(){return HO})),n.d(t,"React",(function(){return O})),n.d(t,"ReactDOM",(function(){return x})),n.d(t,"ExtensionManager",(function(){return fl})),n.d(t,"BaseWidget",(function(){return lI})),n.d(t,"WidgetManager",(function(){return DI})),n.d(t,"ConfigManager",(function(){return zI})),n.d(t,"DataSourceManager",(function(){return ld})),n.d(t,"urlUtils",(function(){return d})),n.d(t,"SessionManager",(function(){return Bp})),n.d(t,"SessionChangedReasonType",(function(){return Rp})),n.d(t,"appActions",(function(){return p})),n.d(t,"extensionSpec",(function(){return c})),n.d(t,"utils",(function(){return s})),n.d(t,"appConfigUtils",(function(){return f})),n.d(t,"themeUtils",(function(){return g})),n.d(t,"ReactRedux",(function(){return r})),n.d(t,"MessageManager",(function(){return EI})),n.d(t,"Immutable",(function(){return xe})),n.d(t,"classNames",(function(){return Ce})),n.d(t,"uuidv1",(function(){return Ue})),n.d(t,"queryString",(function(){return Ee})),n.d(t,"moduleLoader",(function(){return u})),n.d(t,"jimuHistory",(function(){return S})),n.d(t,"portalUrlUtils",(function(){return l})),n.d(t,"portalUtils",(function(){return h})),n.d(t,"i18n",(function(){return m})),n.d(t,"defaultMessages",(function(){return nm})),n.d(t,"DataSourceComponent",(function(){return YO})),n.d(t,"MultipleDataSourceComponent",(function(){return QO})),n.d(t,"IntlProvider",(function(){return Bv})),n.d(t,"injectIntl",(function(){return sv})),n.d(t,"jsx",(function(){return At})),n.d(t,"css",(function(){return _t})),n.d(t,"Global",(function(){return Pt})),n.d(t,"ThemeContext",(function(){return vt})),n.d(t,"styled",(function(){return jt})),n.d(t,"xss",(function(){return Dt})),n.d(t,"polished",(function(){return KT})),n.d(t,"MutableStoreManager",(function(){return wI})),n.d(t,"Keyboard",(function(){return jO})),n.d(t,"AppKeyboardComponent",(function(){return PO})),n.d(t,"keyboardUtils",(function(){return v})),n.d(t,"requestUtils",(function(){return b})),n.d(t,"expressionUtils",(function(){return I})),n.d(t,"dateUtils",(function(){return a})),n.d(t,"createIntl",(function(){return Vv})),n.d(t,"createIntlCache",(function(){return qg})),n.d(t,"useIntl",(function(){return WS})),n.d(t,"FormattedDate",(function(){return HS})),n.d(t,"FormattedMessage",(function(){return KS})),n.d(t,"FormattedNumber",(function(){return $S})),n.d(t,"FormattedPlural",(function(){return QS})),n.d(t,"FormattedRelativeTime",(function(){return oI})),n.d(t,"FormattedTime",(function(){return JS})),n.d(t,"esri",(function(){return YT})),n.d(t,"lodash",(function(){return $T})),n.d(t,"RepeatedDataSourceProvider",(function(){return sI})),n.d(t,"withRepeatedDataSource",(function(){return uI})),n.d(t,"dataSourceUtils",(function(){return w})),n.d(t,"ExportJson",(function(){return rO})),n.d(t,"ExportCSV",(function(){return lO})),n.d(t,"ExportGeoJSON",(function(){return SO})),n.d(t,"DataActionManager",(function(){return TI})),n.d(t,"ThemeManager",(function(){return ch})),n.d(t,"invariant",(function(){return Rn})),n.d(t,"CONSTANTS",(function(){return i})),n.d(t,"ReactResizeDetector",(function(){return tr})),n.d(t,"ResizeObserver",(function(){return Mn.a})),n.d(t,"ExpressionResolverComponent",(function(){return rE})),n.d(t,"ExpressionResolverErrorCode",(function(){return GO})),n.d(t,"ServiceManager",(function(){return Am})),n.d(t,"version",(function(){return JT})),n.d(t,"privilegeUtils",(function(){return y})),n.d(t,"spring",(function(){return o})),n.d(t,"ThemeProvider",(function(){return yt})),n.d(t,"saveAs",(function(){return xo.saveAs})),n.d(t,"LayoutItemType",(function(){return il})),n.d(t,"LayoutType",(function(){return al})),n.d(t,"JimuMapViewStatus",(function(){return JE})),n.d(t,"ContainerType",(function(){return Dl})),n.d(t,"LayoutParentType",(function(){return kl})),n.d(t,"ScreenTransitionType",(function(){return Rl})),n.d(t,"ScreenTriggerType",(function(){return Ml})),n.d(t,"PageType",(function(){return Nl})),n.d(t,"PageMode",(function(){return Ll})),n.d(t,"DialogMode",(function(){return Ul})),n.d(t,"DialogPosition",(function(){return Fl})),n.d(t,"DialogInteractionType",(function(){return Vl})),n.d(t,"MessageCarryData",(function(){return $E})),n.d(t,"BrowserSizeMode",(function(){return Li})),n.d(t,"JimuFieldType",(function(){return Ui})),n.d(t,"EsriFieldType",(function(){return Fi})),n.d(t,"AjaxState",(function(){return Vi})),n.d(t,"AppMode",(function(){return Bi})),n.d(t,"WidgetState",(function(){return Gi})),n.d(t,"LinkType",(function(){return Wi})),n.d(t,"WidgetType",(function(){return zi})),n.d(t,"ESRI_DATE_FORMAT_ARRAY",(function(){return Ki})),n.d(t,"PagePart",(function(){return $i})),n.d(t,"UrlProtocol",(function(){return Yi})),n.d(t,"APP_FRAME_NAME_IN_BUILDER",(function(){return Zi})),n.d(t,"ResourceType",(function(){return Xi})),n.d(t,"LoadingType",(function(){return Qi})),n.d(t,"ThemeFontVariantKeys",(function(){return Zp})),n.d(t,"ThemeCommonColorKeys",(function(){return eh})),n.d(t,"ThemeThemeAlertColorKeys",(function(){return th})),n.d(t,"ThemeThemeMainColorKeys",(function(){return nh})),n.d(t,"ThemeThemeColorKeys",(function(){return rh})),n.d(t,"ThemeBoxStyleKeys",(function(){return oh})),n.d(t,"COMPONENT_CATEGORIES",(function(){return ph})),n.d(t,"ExpressionPartType",(function(){return Ew})),n.d(t,"ExpressionFunctions",(function(){return xw})),n.d(t,"SqlExpressionMode",(function(){return ry})),n.d(t,"ClauseLogic",(function(){return oy})),n.d(t,"ClauseCascade",(function(){return iy})),n.d(t,"ClauseOperator",(function(){return ay})),n.d(t,"ClauseSourceType",(function(){return sy})),n.d(t,"EMPTY_OPTION_VALUE",(function(){return gy})),n.d(t,"ClauseType",(function(){return fy})),n.d(t,"ClauseLabelDisplay",(function(){return dy})),n.d(t,"ClauseDisplayType",(function(){return py})),n.d(t,"OrderRule",(function(){return hy})),n.d(t,"USER_SETTING_FILE_KEY",(function(){return XE})),n.d(t,"UrlInfoPartType",(function(){return KE})),n.d(t,"DataSourceStatus",(function(){return ea.b})),n.d(t,"DataSourceTypes",(function(){return ea.c})),n.d(t,"SupportedLayerServiceTypes",(function(){return ea.f})),n.d(t,"SupportedServiceTypes",(function(){return ea.h})),n.d(t,"SupportedItemTypes",(function(){return ea.e})),n.d(t,"SupportedLayerTypes",(function(){return ea.g})),n.d(t,"QueryScope",(function(){return ea.d})),n.d(t,"DataSourceError",(function(){return ea.a})),n.d(t,"MessageType",(function(){return QE})),n.d(t,"getMessageTypeLabel",(function(){return ex})),n.d(t,"StringSelectionChangeMessage",(function(){return nx})),n.d(t,"DataRecordsSelectionChangeMessage",(function(){return rx})),n.d(t,"ExtentChangeMessage",(function(){return ox})),n.d(t,"RecordSetChangeType",(function(){return tx})),n.d(t,"DataRecordSetChangeMessage",(function(){return ix})),n.d(t,"SelectDataRecordMessage",(function(){return ax})),n.d(t,"AbstractMessageAction",(function(){return sx})),n.d(t,"DummyMessageAction",(function(){return ux})),n.d(t,"translatedLocales",(function(){return Ux})),n.d(t,"init",(function(){return Vx})),n.d(t,"initPortal",(function(){return zx})),n.d(t,"preloadModulesForSSR",(function(){return qx})),n.d(t,"createAppStore",(function(){return Hf})),n.d(t,"getAppStore",(function(){return Jf})),n.d(t,"observeStore",(function(){return $f})),n.d(t,"TrackingManager",(function(){return MI})),n.d(t,"LoadingHandler",(function(){return Yx})),n.d(t,"loadDependency",(function(){return Rm})),n.d(t,"loadDependencies",(function(){return Mm})),n.d(t,"loadArcGISJSAPIModules",(function(){return Gm})),n.d(t,"ErrorBoundary",(function(){return LO})),n.d(t,"AbstractDataAction",(function(){return $I})),n.d(t,"DummnyDataAction",(function(){return YI})),n.d(t,"groupExpressionPartsByFunction",(function(){return mS})),n.d(t,"StatisticType",(function(){return Cw})),n.d(t,"ESRIOBJECTIDTYPE",(function(){return Uw})),n.d(t,"resolveExpression",(function(){return TS})),n.d(t,"BaseVersionManager",(function(){return FI})),n.d(t,"AppVersionManager",(function(){return VI})),n.d(t,"AppDialog",(function(){return AT})),n.d(t,"AnimationTriggerType",(function(){return Kx})),n.d(t,"AnimationType",(function(){return Xx})),n.d(t,"AnimationEffectType",(function(){return Qx})),n.d(t,"AnimationDirection",(function(){return Zx})),n.d(t,"AnimationPlayMode",(function(){return eC})),n.d(t,"Animation",(function(){return UC})),n.d(t,"OneByOneAnimation",(function(){return GC})),n.d(t,"useIntersection",(function(){return AC})),n.d(t,"AnimationContext",(function(){return PC})),n.d(t,"isDirectionalTransition",(function(){return HT})),n.d(t,"getIndexFromProgress",(function(){return VT})),n.d(t,"getTransition",(function(){return GT})),n.d(t,"clamp",(function(){return BT})),n.d(t,"isIntegerProgress",(function(){return FT})),n.d(t,"TransitionContainer",(function(){return qT})),n.d(t,"TransitionDirection",(function(){return PT})),n.d(t,"TransitionType",(function(){return _T})),n.d(t,"INTERACTIVE_CLASS",(function(){return VO})),n.d(t,"FocusVisibility",(function(){return BO}));var r={};n.r(r),n.d(r,"Provider",(function(){return _})),n.d(r,"connectAdvanced",(function(){return q})),n.d(r,"ReactReduxContext",(function(){return C})),n.d(r,"connect",(function(){return pe})),n.d(r,"batch",(function(){return x.unstable_batchedUpdates})),n.d(r,"useDispatch",(function(){return ye})),n.d(r,"createDispatchHook",(function(){return me})),n.d(r,"useSelector",(function(){return Ie})),n.d(r,"createSelectorHook",(function(){return we})),n.d(r,"useStore",(function(){return ve})),n.d(r,"createStoreHook",(function(){return ge})),n.d(r,"shallowEqual",(function(){return J}));var o={};n.r(o),n.d(o,"apply",(function(){return So})),n.d(o,"config",(function(){return Rr})),n.d(o,"update",(function(){return Pr})),n.d(o,"animated",(function(){return Eo})),n.d(o,"a",(function(){return Eo})),n.d(o,"interpolate",(function(){return kr})),n.d(o,"Globals",(function(){return Cr})),n.d(o,"useSpring",(function(){return Br})),n.d(o,"useTrail",(function(){return Gr})),n.d(o,"useTransition",(function(){return Hr})),n.d(o,"useChain",(function(){return Mr})),n.d(o,"useSprings",(function(){return Vr}));var i={};n.r(i),n.d(i,"BREAK_POINTS",(function(){return Bu})),n.d(i,"DEFAULT_VIEWPORT_SIZE",(function(){return Gu})),n.d(i,"DEFAULT_PAGE_WIDTH",(function(){return Wu})),n.d(i,"SCREEN_RESOLUTIONS",(function(){return Ju})),n.d(i,"SHARED_THEME",(function(){return $u})),n.d(i,"SELECTION_DATA_VIEW_ID",(function(){return Yu})),n.d(i,"DATA_VIEW_ID_FOR_NO_SELECTION",(function(){return Ku})),n.d(i,"OUTPUT_DATA_VIEW_ID",(function(){return Xu})),n.d(i,"REPEAT_CONTEXT_DATA_VIEW_ID",(function(){return Qu})),n.d(i,"PROVIDE_REPEATED_DATA_SOURCE_CONTEXT_WIDGET_URI",(function(){return Zu})),n.d(i,"CURRENT_PAGE",(function(){return ec})),n.d(i,"DEFAULT_QUERY_PAGE_SIZE",(function(){return tc})),n.d(i,"USER_LOCALE_KEY",(function(){return nc}));var a={};n.r(a),n.d(a,"VirtualDateType",(function(){return qu})),n.d(a,"TimeUnit",(function(){return Hu})),n.d(a,"ESRI_DATE_FORMAT_MAP",(function(){return oc})),n.d(a,"DATE_TIME_CONNECTOR",(function(){return ic})),n.d(a,"DATE_TIME_DEFAULT_FORMAT",(function(){return ac})),n.d(a,"getEsriDateFormat",(function(){return sc})),n.d(a,"getDateTimeFormat",(function(){return uc})),n.d(a,"formatDateField",(function(){return cc})),n.d(a,"formatDateLocally",(function(){return lc})),n.d(a,"getIntlOptions",(function(){return fc})),n.d(a,"getDateOptions",(function(){return dc})),n.d(a,"getTimeOption",(function(){return pc})),n.d(a,"formatDate",(function(){return hc})),n.d(a,"formatTime",(function(){return gc}));var s={};n.r(s),n.d(s,"getValue",(function(){return Es})),n.d(s,"isDeepEqual",(function(){return Vu})),n.d(s,"getWidgetCallbackNamesFromWidgetState",(function(){return yc})),n.d(s,"getPanelCallbackNamesFromPanelState",(function(){return bc})),n.d(s,"isTouchDevice",(function(){return wc})),n.d(s,"getBrowserSizeMode",(function(){return Sc})),n.d(s,"findViewportSize",(function(){return Ic})),n.d(s,"getSizeModeWidth",(function(){return Oc})),n.d(s,"loadstyle",(function(){return xc})),n.d(s,"applyMixins",(function(){return Cc})),n.d(s,"isArrayContainSameItems",(function(){return Tc})),n.d(s,"hyphenateStyleName",(function(){return Pc})),n.d(s,"styleObjectToString",(function(){return _c})),n.d(s,"tryGet",(function(){return Dc})),n.d(s,"getLocalStorageAppKey",(function(){return kc})),n.d(s,"getUID",(function(){return Rc})),n.d(s,"getUUID",(function(){return Mc})),n.d(s,"calculateDigits",(function(){return Nc})),n.d(s,"getOverlayUniqueId",(function(){return Lc})),n.d(s,"replaceI18nPlaceholdersInObject",(function(){return Uc})),n.d(s,"checkUpdate",(function(){return Fc})),n.d(s,"showApp",(function(){return Vc})),n.d(s,"getIntlOption",(function(){return Bc})),n.d(s,"memoize",(function(){return Gc})),n.d(s,"readLocalStorage",(function(){return Wc})),n.d(s,"setLocalStorage",(function(){return zc})),n.d(s,"readSessionStorage",(function(){return qc})),n.d(s,"setSessionStorage",(function(){return Hc})),n.d(s,"removeFromLocalStorage",(function(){return Jc})),n.d(s,"removeFromSessionStorage",(function(){return $c}));var u={};n.r(u),n.d(u,"getModuleSync",(function(){return Qc})),n.d(u,"loadModule",(function(){return Zc})),n.d(u,"loadModules",(function(){return el})),n.d(u,"resolveModuleFullUrl",(function(){return tl})),n.d(u,"resolveModuleFullPath",(function(){return nl})),n.d(u,"getJimuForBuilderModules",(function(){return rl})),n.d(u,"deleteModule",(function(){return ol}));var c={};n.r(c),n.d(c,"ExtensionPoints",(function(){return Yc})),n.d(c,"EP_SUPPORT_MULTIPLE_EXTENTIONS",(function(){return sl})),n.d(c,"DummyExtension",(function(){return ul}));var l={};n.r(l),n.d(l,"getPortalSelfInfoUrl",(function(){return dl})),n.d(l,"getPortalUrlFromLocation",(function(){return pl})),n.d(l,"getPortalRestUrl",(function(){return hl})),n.d(l,"getPortalUrlFromRestUrl",(function(){return gl})),n.d(l,"isSamePortalUrl",(function(){return vl})),n.d(l,"isAGOLDomain",(function(){return ml})),n.d(l,"getStandardPortalUrl",(function(){return yl})),n.d(l,"getBaseItemUrl",(function(){return bl})),n.d(l,"getItemUrl",(function(){return wl})),n.d(l,"getBaseUserUrl",(function(){return Sl})),n.d(l,"getUserUrl",(function(){return Il})),n.d(l,"getContentUrl",(function(){return Ol})),n.d(l,"getUserContentUrl",(function(){return El})),n.d(l,"getUserItemsUrl",(function(){return xl})),n.d(l,"shareItemUrl",(function(){return Cl})),n.d(l,"getHomeIndexUrl",(function(){return Tl})),n.d(l,"getHomeMapViewerUrl",(function(){return jl})),n.d(l,"fixPortalUrlProtocol",(function(){return Al})),n.d(l,"getPortalProxyUrl",(function(){return Pl})),n.d(l,"getHostUrlByOrgUrl",(function(){return _l}));var f={};n.r(f),n.d(f,"getWidgetContext",(function(){return $l})),n.d(f,"addWidgetManifestProperties",(function(){return Yl})),n.d(f,"addWidgetDefaultLabelAndIcon",(function(){return Kl})),n.d(f,"addLayoutLabel",(function(){return Xl})),n.d(f,"getUniqueId",(function(){return Ql})),n.d(f,"getUniqueLabel",(function(){return Zl})),n.d(f,"getAllWidgets",(function(){return ef})),n.d(f,"getWidgetMessageActionJsons",(function(){return tf})),n.d(f,"isTwoViewsInSaveSection",(function(){return nf})),n.d(f,"fixLayoutIds",(function(){return rf})),n.d(f,"updateStateWhenAppConfigChange",(function(){return of})),n.d(f,"isWidgetFromSameSource",(function(){return af})),n.d(f,"getLayoutIdInSizeMode",(function(){return sf})),n.d(f,"buildDataActionRelatedWidgetMap",(function(){return uf})),n.d(f,"getWidgetIdByOutputDataSource",(function(){return lf})),n.d(f,"getRealAppResourceUrl",(function(){return zl})),n.d(f,"appendPortalInfoToResource",(function(){return ql})),n.d(f,"cleanPortalInfoFromResource",(function(){return Hl})),n.d(f,"replaceAppConfigNodeValue",(function(){return Jl}));var d={};n.r(d),n.d(d,"parsePath",(function(){return ff})),n.d(d,"isAbsoluteUrl",(function(){return df})),n.d(d,"getDataSourceInfosFromQueryObject",(function(){return pf})),n.d(d,"getSectionNavInfoFromQueryObject",(function(){return gf})),n.d(d,"getAppIdPageIdFromUrl",(function(){return vf})),n.d(d,"parseAppPath",(function(){return mf})),n.d(d,"getPageLink",(function(){return yf})),n.d(d,"getPageLinkUrl",(function(){return bf})),n.d(d,"getFolder",(function(){return wf})),n.d(d,"getFixedRootPath",(function(){return Sf})),n.d(d,"getAbsoluteRootUrl",(function(){return If})),n.d(d,"createLocation",(function(){return Of})),n.d(d,"createHref",(function(){return Ef})),n.d(d,"getHrefFromLinkTo",(function(){return xf})),n.d(d,"getLinkResultFromHref",(function(){return Cf})),n.d(d,"updateQueryStringParameter",(function(){return Tf})),n.d(d,"getProtocol",(function(){return jf})),n.d(d,"setProtocol",(function(){return Af})),n.d(d,"getUrlHost",(function(){return Pf})),n.d(d,"removeSearchFromUrl",(function(){return _f})),n.d(d,"appendQueryParam",(function(){return Df})),n.d(d,"normalize",(function(){return kf})),n.d(d,"getAppUrl",(function(){return Rf})),n.d(d,"getExperienceBuilderOnlineUrl",(function(){return Mf})),n.d(d,"getArcgisOnlineUrl",(function(){return Nf}));var p={};n.r(p),n.d(p,"ActionKeys",(function(){return id})),n.d(p,"appConfigLoaded",(function(){return fd})),n.d(p,"appConfigChanged",(function(){return dd})),n.d(p,"appPathChanged",(function(){return pd})),n.d(p,"appInfoChanged",(function(){return hd})),n.d(p,"appIdChanged",(function(){return gd})),n.d(p,"widgetClassLoaded",(function(){return vd})),n.d(p,"widgetConfigUpgraded",(function(){return md})),n.d(p,"widgetConfigLoaded",(function(){return yd})),n.d(p,"openWidget",(function(){return bd})),n.d(p,"openWidgets",(function(){return wd})),n.d(p,"closeWidget",(function(){return Sd})),n.d(p,"closeWidgets",(function(){return Id})),n.d(p,"activateWidget",(function(){return Od})),n.d(p,"initAppContext",(function(){return Ed})),n.d(p,"i18nMessagesLoaded",(function(){return xd})),n.d(p,"queryObjectChanged",(function(){return Cd})),n.d(p,"setAppInBuilder",(function(){return Td})),n.d(p,"appModeChanged",(function(){return jd})),n.d(p,"layoutClassLoaded",(function(){return Ad})),n.d(p,"dataSourceStatusChanged",(function(){return Pd})),n.d(p,"dataSourceCountStatusChanged",(function(){return _d})),n.d(p,"dataSourceInstanceStatusChanged",(function(){return Dd})),n.d(p,"dataSourceSaveStatusChanged",(function(){return kd})),n.d(p,"dataSourceVersionAdded",(function(){return Rd})),n.d(p,"dataSourceSourceVersionAdded",(function(){return Md})),n.d(p,"changeDataSourceGDBVersion",(function(){return Nd})),n.d(p,"clearDataSourceInfo",(function(){return Ld})),n.d(p,"updateDataSourceInfo",(function(){return Ud})),n.d(p,"setDataNeedRefresh",(function(){return Fd})),n.d(p,"updateWidgetQuery",(function(){return Vd})),n.d(p,"jimuMapViewAdded",(function(){return Bd})),n.d(p,"jimuMapViewUpdated",(function(){return Gd})),n.d(p,"jimuMapViewRemoved",(function(){return Wd})),n.d(p,"requestAutoControlMapWidget",(function(){return zd})),n.d(p,"releaseAutoControlMapWidget",(function(){return qd})),n.d(p,"MapWidgetInfoAdded",(function(){return Hd})),n.d(p,"MapWidgetInfoUpdated",(function(){return Jd})),n.d(p,"MapWidgetInfoRemoved",(function(){return $d})),n.d(p,"initStoreExtensionState",(function(){return Yd})),n.d(p,"widgetStatePropChange",(function(){return Kd})),n.d(p,"widgetMutableStatePropChange",(function(){return Xd})),n.d(p,"setPortalUrl",(function(){return Qd})),n.d(p,"setPortalInfo",(function(){return Zd})),n.d(p,"dataSourceSelectedIndexesChanged",(function(){return ep})),n.d(p,"dataSourceSelectedIdsChanged",(function(){return tp})),n.d(p,"sessionStart",(function(){return np})),n.d(p,"userSignIn",(function(){return rp})),n.d(p,"userSignOut",(function(){return op})),n.d(p,"browserSizeModeChanged",(function(){return ip})),n.d(p,"setWidgetIsInlineEditingState",(function(){return ap})),n.d(p,"setWidgetPreloadProps",(function(){return sp})),n.d(p,"setDataSourcePreloadData",(function(){return up})),n.d(p,"networkStatusChanged",(function(){return cp})),n.d(p,"currentPageChanged",(function(){return lp})),n.d(p,"currentDialogChanged",(function(){return fp})),n.d(p,"dialogInfosChanged",(function(){return dp})),n.d(p,"selectionChanged",(function(){return pp})),n.d(p,"clipboardChanged",(function(){return hp})),n.d(p,"updateStoreState",(function(){return gp})),n.d(p,"appRuntimeInfoInit",(function(){return vp})),n.d(p,"themeVariablesChanged",(function(){return mp})),n.d(p,"setPortalSelf",(function(){return yp})),n.d(p,"activePagePartChanged",(function(){return bp})),n.d(p,"openOverlay",(function(){return wp})),n.d(p,"closeOverlay",(function(){return Sp})),n.d(p,"activeOverlay",(function(){return Ip})),n.d(p,"zoomScaleChange",(function(){return Op})),n.d(p,"setIsBusy",(function(){return Ep})),n.d(p,"layoutChanged",(function(){return xp})),n.d(p,"sectionNavInfoChanged",(function(){return Cp})),n.d(p,"screenGroupNavInfoChanged",(function(){return Tp})),n.d(p,"screenPanelVisibleChanged",(function(){return jp})),n.d(p,"setupAnimationPreview",(function(){return Ap})),n.d(p,"clearAnimationPreview",(function(){return Pp})),n.d(p,"setHasNewVersion",(function(){return _p})),n.d(p,"userLocaleChanged",(function(){return Dp})),n.d(p,"hasPrivilegeChanged",(function(){return kp}));var h={};n.r(h),n.d(h,"initPortalSelf",(function(){return Jp})),n.d(h,"clearPortalSelf",(function(){return $p})),n.d(h,"getAppInfo",(function(){return Kp})),n.d(h,"removeAppInfo",(function(){return Xp}));var g={};n.r(g),n.d(g,"withTheme",(function(){return bt})),n.d(g,"withStyles",(function(){return bh})),n.d(g,"getThemeNameFromUri",(function(){return wh})),n.d(g,"lighten",(function(){return Ih})),n.d(g,"darken",(function(){return Oh})),n.d(g,"valueOf",(function(){return Eh})),n.d(g,"pathOf",(function(){return xh})),n.d(g,"varsOf",(function(){return Ch})),n.d(g,"isCSSVar",(function(){return Th})),n.d(g,"color",(function(){return jh})),n.d(g,"withBuilderStyle",(function(){return Ph})),n.d(g,"withBuilderTheme",(function(){return _h})),n.d(g,"getBuilderThemeVariables",(function(){return Dh})),n.d(g,"getMappedShareThemeVariables",(function(){return kh})),n.d(g,"getThemeVariablesByCategory",(function(){return Rh})),n.d(g,"appendSharedTheme",(function(){return Mh}));var v={};n.r(v),n.d(v,"triggerEvent",(function(){return Bh}));var m={};n.r(m),n.d(m,"getLocaleToLoad",(function(){return zv})),n.d(m,"getBrowserLanguage",(function(){return qv})),n.d(m,"getTranslatedLocale",(function(){return Hv})),n.d(m,"isSameLanguage",(function(){return Jv})),n.d(m,"loadLocaleMessages",(function(){return $v})),n.d(m,"isRTLLocale",(function(){return Yv})),n.d(m,"getIntl",(function(){return Xv})),n.d(m,"getDecimalSeparator",(function(){return Qv})),n.d(m,"findLocale",(function(){return Zv}));var y={};n.r(y),n.d(y,"CheckTarget",(function(){return em})),n.d(y,"InvalidInfo",(function(){return tm})),n.d(y,"checkAccess",(function(){return im})),n.d(y,"getAccessCapabilities",(function(){return am})),n.d(y,"checkExbAccess",(function(){return sm})),n.d(y,"getPortalVersion",(function(){return cm})),n.d(y,"isPortal1061OrBefore",(function(){return lm})),n.d(y,"isPortal1080OrBefore",(function(){return fm})),n.d(y,"shouldCheckAppAccess",(function(){return bm}));var b={};n.r(b),n.d(b,"requestWrapper",(function(){return xm}));var w={};n.r(w),n.d(w,"queryAllAttachments",(function(){return Xy})),n.d(w,"filterAttachments",(function(){return Qy})),n.d(w,"convertFieldToJimuField",(function(){return Zy})),n.d(w,"isNumericalField",(function(){return eb})),n.d(w,"getFieldInfoByFieldName",(function(){return tb})),n.d(w,"getDisplayValueForCodedValueOrSubtype",(function(){return nb})),n.d(w,"getDisplayValueForCodedValueOrSubtypeBatch",(function(){return rb})),n.d(w,"getCodedValueListForCodedValueOrSubtypeField",(function(){return ob})),n.d(w,"isHostedService",(function(){return pb})),n.d(w,"fixLayerId",(function(){return hb})),n.d(w,"getFixedLayerIdByLayer",(function(){return gb})),n.d(w,"getFixedLayerIdByLayerDefinition",(function(){return vb})),n.d(w,"isLayerDefinitionTypeSupported",(function(){return mb})),n.d(w,"isJSAPILayerTypeSupported",(function(){return yb})),n.d(w,"getFullServiceUrl",(function(){return bb})),n.d(w,"getSingleDsJsonFromLayerDefinition",(function(){return wb})),n.d(w,"getSingleDsJsonFromWholeServiceDefinition",(function(){return Sb})),n.d(w,"getDsTypeFromWholeServiceUrl",(function(){return Ib})),n.d(w,"fetchSupportedLayerDefinitionsFromUrls",(function(){return Ob})),n.d(w,"fetchSupportedLayerDefinitions",(function(){return Cb})),n.d(w,"isSupportedSingleLayerService",(function(){return Tb})),n.d(w,"isSupportedWholeService",(function(){return jb})),n.d(w,"getServiceLabelFromUrl",(function(){return Ab})),n.d(w,"isSupportedService",(function(){return Pb})),n.d(w,"getSortedArrayByLabel",(function(){return _b})),n.d(w,"getChildDataSourceId",(function(){return Db})),n.d(w,"queryFeatureCountByField",(function(){return Rb})),n.d(w,"queryValueLabelsByFieldAndPageSize",(function(){return Mb})),n.d(w,"getUrlByLayer",(function(){return Nb})),n.d(w,"getRealDataSourceId",(function(){return Lb})),n.d(w,"fetchAssociatedFeatureLayerDefinition",(function(){return Ub})),n.d(w,"fetchAssociatedFeatureLayerUrl",(function(){return Fb})),n.d(w,"getAssumedAssociatedLayerUrl",(function(){return Vb})),n.d(w,"fetchAssociatedFeatureServicePortalItem",(function(){return Bb})),n.d(w,"findAssociatedFeatureLayerUrl",(function(){return Gb})),n.d(w,"getDataSourceProxyUrl",(function(){return Wb})),n.d(w,"getDataSourceSourceUrl",(function(){return zb})),n.d(w,"getWhetherUseProxy",(function(){return qb})),n.d(w,"isLayerDataSource",(function(){return Hb})),n.d(w,"getOriginDataLabel",(function(){return Jb})),n.d(w,"getJSAPILayerBySublayer",(function(){return $b})),n.d(w,"isDerivedFrom",(function(){return Yb})),n.d(w,"isSelectionView",(function(){return Kb})),n.d(w,"supportSymbol",(function(){return Xb})),n.d(w,"supportAttachment",(function(){return Qb})),n.d(w,"getLayerDefinition",(function(){return Zb})),n.d(w,"isOriginDataSubscriber",(function(){return nw})),n.d(w,"isOriginDataPremium",(function(){return rw})),n.d(w,"isDataSourceSubscriber",(function(){return ow})),n.d(w,"isDataSourceSubscriberOrPremium",(function(){return iw})),n.d(w,"isDataSourcePremium",(function(){return aw})),n.d(w,"createFeatureLayerByRecords",(function(){return Ym})),n.d(w,"changeToRestAPIFeature",(function(){return Zm})),n.d(w,"changeToJSAPIGraphic",(function(){return ey})),n.d(w,"getPopupInfo",(function(){return ny})),n.d(w,"changeJimuFeatureLayerQueryToJSAPILayerQuery",(function(){return ly})),n.d(w,"getRealDateByVirtualDate",(function(){return Py})),n.d(w,"getArcGISSQL",(function(){return _y})),n.d(w,"parserSQL",(function(){return Dy})),n.d(w,"containsNonLatinCharacter",(function(){return Uy})),n.d(w,"getUTCTimes",(function(){return Gy})),n.d(w,"getLocalTimes",(function(){return Wy})),n.d(w,"DateTimeType",(function(){return Fy})),n.d(w,"getUTCDateValue",(function(){return Hy}));var S={};n.r(S),n.d(S,"browserHistory",(function(){return Ow})),n.d(S,"HistoryProvider",(function(){return jw})),n.d(S,"withHistory",(function(){return Aw})),n.d(S,"changeQueryObject",(function(){return Pw})),n.d(S,"replaceQueryObject",(function(){return _w})),n.d(S,"changePage",(function(){return Dw})),n.d(S,"changeView",(function(){return kw})),n.d(S,"changeDialog",(function(){return Rw})),n.d(S,"changeQueryObjectByDataRecordIds",(function(){return Mw})),n.d(S,"changeQueryObjectByDataRecordIndexes",(function(){return Nw}));var I={};n.r(I),n.d(I,"getUseDataSourceFromExpParts",(function(){return AS})),n.d(I,"mergeUseDataSources",(function(){return PS})),n.d(I,"getWhetherExpressionValid",(function(){return _S})),n.d(I,"getWhetherFunctionIncludeChildExpression",(function(){return DS})),n.d(I,"getWhetherFunctionIncludeFieldParam",(function(){return kS})),n.d(I,"getWhetherFieldInDs",(function(){return MS})),n.d(I,"getChildExpression",(function(){return NS})),n.d(I,"isSingleStringExpression",(function(){return FS})),n.d(I,"getSingleStringExpressionText",(function(){return VS})),n.d(I,"getUseDataSourcesWithoutFields",(function(){return BS})),n.d(I,"whetherHasFieldsInUseDataSources",(function(){return GS}));var O=n(0),E=n.n(O),x=n(29),C=(n(144),E.a.createContext(null));var T=function(e){e()},j={notify:function(){}};function A(){var e=T,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var P=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=j,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=A())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=j)},e}();var _=function(e){var t=e.store,n=e.context,r=e.children,o=Object(O.useMemo)((function(){var e=new P(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),i=Object(O.useMemo)((function(){return t.getState()}),[t]);Object(O.useEffect)((function(){var e=o.subscription;return e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,i]);var a=n||C;return E.a.createElement(a.Provider,{value:o},r)};function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var R=n(21),M=n.n(R),N=n(56),L="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?O.useLayoutEffect:O.useEffect,U=[],F=[null,null];function V(e,t){var n=e[1];return[t.payload,n+1]}function B(e,t,n){L((function(){return e.apply(void 0,t)}),n)}function G(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function W(e,t,n,r,o,i,a,s,u,c){if(e){var l=!1,f=null,d=function(){if(!l){var e,n,d=t.getState();try{e=r(d,o.current)}catch(e){n=e,f=e}n||(f=null),e===i.current?a.current||u():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var z=function(){return[null,0]};function q(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,o=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,i=n.methodName,a=void 0===i?"connectAdvanced":i,s=n.renderCountProp,u=void 0===s?void 0:s,c=n.shouldHandleStateChanges,l=void 0===c||c,f=n.storeKey,d=void 0===f?"store":f,p=(n.withRef,n.forwardRef),h=void 0!==p&&p,g=n.context,v=void 0===g?C:g,m=k(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),y=v;return function(t){var n=t.displayName||t.name||"Component",r=o(n),i=D({},m,{getDisplayName:o,methodName:a,renderCountProp:u,shouldHandleStateChanges:l,storeKey:d,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=m.pure;var c=s?O.useMemo:function(e){return e()};function f(n){var r=Object(O.useMemo)((function(){var e=n.reactReduxForwardedRef,t=k(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),o=r[0],a=r[1],s=r[2],u=Object(O.useMemo)((function(){return o&&o.Consumer&&Object(N.isContextConsumer)(E.a.createElement(o.Consumer,null))?o:y}),[o,y]),f=Object(O.useContext)(u),d=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var p=d?n.store:f.store,h=Object(O.useMemo)((function(){return function(t){return e(t.dispatch,i)}(p)}),[p]),g=Object(O.useMemo)((function(){if(!l)return F;var e=new P(p,d?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,d,f]),v=g[0],m=g[1],b=Object(O.useMemo)((function(){return d?f:D({},f,{subscription:v})}),[d,f,v]),w=Object(O.useReducer)(V,U,z),S=w[0][0],I=w[1];if(S&&S.error)throw S.error;var x=Object(O.useRef)(),C=Object(O.useRef)(s),T=Object(O.useRef)(),j=Object(O.useRef)(!1),A=c((function(){return T.current&&s===C.current?T.current:h(p.getState(),s)}),[p,S,s]);B(G,[C,x,j,s,A,T,m]),B(W,[l,p,v,h,C,x,j,T,m,I],[p,v,h]);var _=Object(O.useMemo)((function(){return E.a.createElement(t,D({},A,{ref:a}))}),[a,t,A]);return Object(O.useMemo)((function(){return l?E.a.createElement(u.Provider,{value:b},_):_}),[u,_,b])}var p=s?E.a.memo(f):f;if(p.WrappedComponent=t,p.displayName=r,h){var g=E.a.forwardRef((function(e,t){return E.a.createElement(p,D({},e,{reactReduxForwardedRef:t}))}));return g.displayName=r,g.WrappedComponent=t,M()(g,t)}return M()(p,t)}}function H(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function J(e,t){if(H(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!H(e[n[o]],t[n[o]]))return!1;return!0}var $=n(59),Y=function(){return Math.random().toString(36).substring(7).split("").join(".")},K={INIT:"@@redux/INIT"+Y(),REPLACE:"@@redux/REPLACE"+Y(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Y()}};function X(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Q(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Q)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function d(e){if(!X(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,d({type:K.REPLACE})}function h(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[$.a]=function(){return this},e}return d({type:K.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:p})[$.a]=h,r}function Z(e,t){return function(){return t(e.apply(this,arguments))}}function ee(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function te(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ne(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=te(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=te(o),o=r(t,n)),o},r}}var re=[function(e){return"function"==typeof e?ne(e):void 0},function(e){return e?void 0:ee((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?ee((function(t){return function(e,t){if("function"==typeof e)return Z(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=Z(o,t))}return n}(e,t)})):void 0}];var oe=[function(e){return"function"==typeof e?ne(e):void 0},function(e){return e?void 0:ee((function(){return{}}))}];function ie(e,t,n){return D({},n,e,t)}var ae=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return ie}}];function se(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function ue(e,t,n,r,o){var i,a,s,u,c,l=o.areStatesEqual,f=o.areOwnPropsEqual,d=o.areStatePropsEqual,p=!1;function h(o,p){var h,g,v=!f(p,a),m=!l(o,i);return i=o,a=p,v&&m?(s=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):v?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):m?(h=e(i,a),g=!d(h,s),s=h,g&&(c=n(s,u,a)),c):c}return function(o,l){return p?h(o,l):(s=e(i=o,a=l),u=t(r,a),c=n(s,u,a),p=!0,c)}}function ce(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=k(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,i),s=r(e,i),u=o(e,i);return(i.pure?ue:se)(a,s,u,e,i)}function le(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function fe(e,t){return e===t}function de(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?q:n,o=t.mapStateToPropsFactories,i=void 0===o?oe:o,a=t.mapDispatchToPropsFactories,s=void 0===a?re:a,u=t.mergePropsFactories,c=void 0===u?ae:u,l=t.selectorFactory,f=void 0===l?ce:l;return function(e,t,n,o){void 0===o&&(o={});var a=o,u=a.pure,l=void 0===u||u,d=a.areStatesEqual,p=void 0===d?fe:d,h=a.areOwnPropsEqual,g=void 0===h?J:h,v=a.areStatePropsEqual,m=void 0===v?J:v,y=a.areMergedPropsEqual,b=void 0===y?J:y,w=k(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=le(e,i,"mapStateToProps"),I=le(t,s,"mapDispatchToProps"),O=le(n,c,"mergeProps");return r(f,D({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:I,initMergeProps:O,pure:l,areStatesEqual:p,areOwnPropsEqual:g,areStatePropsEqual:m,areMergedPropsEqual:b},w))}}var pe=de();function he(){return Object(O.useContext)(C)}function ge(e){void 0===e&&(e=C);var t=e===C?he:function(){return Object(O.useContext)(e)};return function(){return t().store}}var ve=ge();function me(e){void 0===e&&(e=C);var t=e===C?ve:ge(e);return function(){return t().dispatch}}var ye=me(),be=function(e,t){return e===t};function we(e){void 0===e&&(e=C);var t=e===C?he:function(){return Object(O.useContext)(e)};return function(e,n){void 0===n&&(n=be);var r=t(),o=function(e,t,n,r){var o,i=Object(O.useReducer)((function(e){return e+1}),0)[1],a=Object(O.useMemo)((function(){return new P(n,r)}),[n,r]),s=Object(O.useRef)(),u=Object(O.useRef)(),c=Object(O.useRef)(),l=Object(O.useRef)(),f=n.getState();try{o=e!==u.current||f!==c.current||s.current?e(f):l.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return L((function(){u.current=e,c.current=f,l.current=o,s.current=void 0})),L((function(){function e(){try{var e=u.current(n.getState());if(t(e,l.current))return;l.current=e}catch(e){s.current=e}i()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[n,a]),o}(e,n,r.store,r.subscription);return Object(O.useDebugValue)(o),o}}var Se,Ie=we();Se=x.unstable_batchedUpdates,T=Se;var Oe,Ee=n(15),xe=n(6),Ce=n(19),Te=new Uint8Array(16);function je(){if(!Oe&&!(Oe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oe(Te)}var Ae=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Pe=function(e){return"string"==typeof e&&Ae.test(e)},_e=[],De=0;De<256;++De)_e.push((De+256).toString(16).substr(1));var ke,Re,Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(_e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]).toLowerCase();if(!Pe(n))throw TypeError("Stringified UUID is invalid");return n},Ne=0,Le=0;var Ue=function(e,t,n){var r=t&&n||0,o=t||new Array(16),i=(e=e||{}).node||ke,a=void 0!==e.clockseq?e.clockseq:Re;if(null==i||null==a){var s=e.random||(e.rng||je)();null==i&&(i=ke=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Re=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:Le+1,l=u-Ne+(c-Le)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||u>Ne)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ne=u,Le=c,Re=a;var f=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var d=u/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var p=0;p<6;++p)o[r+p]=i[p];return t||Me(o)};n(63);var Fe=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Ve=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Be=Fe((function(e){return Ve.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var Ge=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),We=n(11),ze=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},qe=function(e,t){return Object(We.dealloc)(function(e,t){var n=-1,r=44;do{switch(Object(We.token)(r)){case 0:38===r&&12===Object(We.peek)()&&(t[n]=1),e[n]+=Object(We.identifier)(We.position-1);break;case 2:e[n]+=Object(We.delimit)(r);break;case 4:if(44===r){e[++n]=58===Object(We.peek)()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Object(We.from)(r)}}while(r=Object(We.next)());return e}(Object(We.alloc)(e),t))},He=new WeakMap,Je=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||He.get(n))&&!r){He.set(e,!0);for(var o=[],i=qe(t,o),a=n.props,s=0,u=0;s<i.length;s++)for(var c=0;c<a.length;c++,u++)e.props[u]=o[s]?i[s].replace(/&\f/g,a[c]):a[c]+" "+i[s]}}},$e=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Ye=[We.prefixer],Ke=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){document.head.appendChild(e),e.setAttribute("data-s","")}))}var r=e.stylisPlugins||Ye;var o,i,a={},s=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll("style[data-emotion]"),(function(e){var n=e.getAttribute("data-emotion").split(" ");if(n[0]===t){for(var r=1;r<n.length;r++)a[n[r]]=!0;s.push(e)}}));var u=[Je,$e];var c,l=[We.stringify,Object(We.rulesheet)((function(e){c.insert(e)}))],f=Object(We.middleware)(u.concat(r,l));i=function(e,t,n,r){var o;c=n,o=e?e+"{"+t.styles+"}":t.styles,Object(We.serialize)(Object(We.compile)(o),f),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Ge({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend}),nonce:e.nonce,inserted:a,registered:{},insert:i};return d.sheet.hydrate(s),d},Xe=function(e,t){return M()(e,t)};function Qe(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Ze=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}};var et=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},tt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nt=/[A-Z]|^ms/g,rt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ot=function(e){return 45===e.charCodeAt(1)},it=function(e){return null!=e&&"boolean"!=typeof e},at=Fe((function(e){return ot(e)?e:e.replace(nt,"-$&").toLowerCase()})),st=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(rt,(function(e,t,n){return ct={name:t,styles:n,next:ct},t}))}return 1===tt[e]||ot(e)||"number"!=typeof t||0===t?t:t+"px"};function ut(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return ct={name:n.name,styles:n.styles,next:ct},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)ct={name:r.name,styles:r.styles,next:ct},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=ut(e,t,n[o])+";";else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":it(a)&&(r+=at(i)+":"+st(i,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=ut(e,t,a);switch(i){case"animation":case"animationName":r+=at(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<a.length;u++)it(a[u])&&(r+=at(i)+":"+st(i,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=ct,i=n(e);return ct=o,ut(e,t,i)}break;case"string":}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var ct,lt=/label:\s*([^\s;\n{]+)\s*;/g;var ft=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";ct=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=ut(n,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=ut(n,t,e[a]),r&&(o+=i[a]);lt.lastIndex=0;for(var s,u="";null!==(s=lt.exec(o));)u+="-"+s[1];return{name:et(o)+u,styles:o,next:ct}},dt=Object.prototype.hasOwnProperty,pt=Object(O.createContext)("undefined"!=typeof HTMLElement?Ke({key:"css"}):null),ht=pt.Provider,gt=function(e){return Object(O.forwardRef)((function(t,n){var r=Object(O.useContext)(pt);return e(t,r,n)}))},vt=Object(O.createContext)({}),mt=ze((function(e){return ze((function(t){return function(e,t){return"function"==typeof t?t(e):D({},e,{},t)}(e,t)}))})),yt=function(e){var t=Object(O.useContext)(vt);return e.theme!==t&&(t=mt(t)(e.theme)),Object(O.createElement)(vt.Provider,{value:t},e.children)};function bt(e){var t=e.displayName||e.name||"Component",n=function(t,n){var r=Object(O.useContext)(vt);return Object(O.createElement)(e,D({theme:r,ref:n},t))},r=Object(O.forwardRef)(n);return r.displayName="WithTheme("+t+")",Xe(r,e)}var wt="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",St=function(e,t){var n={};for(var r in t)dt.call(t,r)&&(n[r]=t[r]);return n[wt]=e,n},It=gt((function(e,t,n){var r=e.css;"string"==typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var o=e[wt],i=[r],a="";"string"==typeof e.className?a=Qe(t.registered,i,e.className):null!=e.className&&(a=e.className+" ");var s=ft(i,void 0,"function"==typeof r||Array.isArray(r)?Object(O.useContext)(vt):void 0);Ze(t,s,"string"==typeof o);a+=t.key+"-"+s.name;var u={};for(var c in e)dt.call(e,c)&&"css"!==c&&c!==wt&&(u[c]=e[c]);return u.ref=n,u.className=a,Object(O.createElement)(o,u)}));var Ot=Be,Et=function(e){return"theme"!==e},xt=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Ot:Et},Ct=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},Tt=function e(t,n){var r,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,o=n.target);var s=Ct(t,n,i),u=s||xt(a),c=!u("as");return function(){var l=arguments,f=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&f.push("label:"+r+";"),null==l[0]||void 0===l[0].raw)f.push.apply(f,l);else{0,f.push(l[0][0]);for(var d=l.length,p=1;p<d;p++)f.push(l[p],l[0][p])}var h=gt((function(e,t,n){var r=c&&e.as||a,i="",l=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=Object(O.useContext)(vt)}"string"==typeof e.className?i=Qe(t.registered,l,e.className):null!=e.className&&(i=e.className+" ");var h=ft(f.concat(l),t.registered,d);Ze(t,h,"string"==typeof r);i+=t.key+"-"+h.name,void 0!==o&&(i+=" "+o);var g=c&&void 0===s?xt(r):u,v={};for(var m in e)c&&"as"===m||g(m)&&(v[m]=e[m]);return v.className=i,v.ref=n,Object(O.createElement)(r,v)}));return h.displayName=void 0!==r?r:"Styled("+("string"==typeof a?a:a.displayName||a.name||"Component")+")",h.defaultProps=t.defaultProps,h.__emotion_real=h,h.__emotion_base=a,h.__emotion_styles=f,h.__emotion_forwardProp=s,Object.defineProperty(h,"toString",{value:function(){return"."+o}}),h.withComponent=function(t,r){return e(t,D({},n,{},r,{shouldForwardProp:Ct(h,r,!0)})).apply(void 0,f)},h}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Tt[e]=Tt(e)}));var jt=Tt,At=function(e,t){var n=arguments;if(null==t||!dt.call(t,"css"))return O.createElement.apply(void 0,n);var r=n.length,o=new Array(r);o[0]=It,o[1]=St(e,t);for(var i=2;i<r;i++)o[i]=n[i];return O.createElement.apply(null,o)},Pt=gt((function(e,t){var n=e.styles,r=ft([n],void 0,"function"==typeof n||Array.isArray(n)?Object(O.useContext)(vt):void 0),o=Object(O.useRef)();return Object(O.useLayoutEffect)((function(){var e=t.key+"-global",n=new Ge({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&n.hydrate([i]),o.current=n,function(){n.flush()}}),[t]),Object(O.useLayoutEffect)((function(){void 0!==r.next&&Ze(t,r.next,!0);var e=o.current;if(e.tags.length){var n=e.tags[e.tags.length-1].nextElementSibling;e.before=n,e.flush()}t.insert("",r,e,!1)}),[t,r.name]),null}));function _t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ft(t)}var Dt=n(64);function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Nt(e,t,n){return(Nt=Mt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Rt(o,n.prototype),o}).apply(null,arguments)}function Lt(e){var t="function"==typeof Map?new Map:void 0;return(Lt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Nt(e,arguments,kt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Rt(r,e)})(e)}function Ut(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var Ft={symbols:{"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:Ut,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:Ut,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"}}};var Vt=function(e){var t,n;function r(t){return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(Lt(Error)),Bt=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function Gt(e,t){var n,r=e.pop();return t.push(r.f.apply(r,(n=[]).concat.apply(n,t.splice(-r.argCount)))),r.precedence}function Wt(e,t){var n,r=function(e){var t={};return t.symbols=e?D({},Ft.symbols,e.symbols):D({},Ft.symbols),t}(t),o=[r.symbols["("].prefix],i=[],a=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(r.symbols).map((function(e){return r.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");a.lastIndex=0;var s=!1;do{var u=(n=a.exec(e))||[")",void 0],c=u[0],l=u[1],f=r.symbols[c],d=f&&!f.prefix&&!f.func,p=!f||!f.postfix&&!f.infix;if(l||(s?p:d))throw new Vt(37,n?n.index:e.length,e);if(s){var h=f.postfix||f.infix;do{var g=o[o.length-1];if((h.precedence-g.precedence||g.rightToLeft)>0)break}while(Gt(o,i));s="postfix"===h.notation,")"!==h.symbol&&(o.push(h),s&&Gt(o,i))}else if(f){if(o.push(f.prefix||f.func),f.func&&(!(n=a.exec(e))||"("!==n[0]))throw new Vt(38,n?n.index:e.length,e)}else i.push(+c),s=!0}while(n&&o.length);if(o.length)throw new Vt(39,n?n.index:e.length,e);if(n)throw new Vt(40,n?n.index:e.length,e);return i.pop()}function zt(e){return e.split("").reverse().join("")}function qt(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ht(e,t){return e.substr(-t.length)===t}var Jt=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function $t(e){return"string"!=typeof e?e:e.match(Jt)?parseFloat(e):e}var Yt=function(e){return function(t,n){void 0===n&&(n="16px");var r=t,o=n;if("string"==typeof t){if(!Ht(t,"px"))throw new Vt(69,e,t);r=$t(t)}if("string"==typeof n){if(!Ht(n,"px"))throw new Vt(70,e,n);o=$t(n)}if("string"==typeof r)throw new Vt(71,t,e);if("string"==typeof o)throw new Vt(72,n,e);return""+r/o+e}},Kt=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function Xt(e){if("string"!=typeof e)return[e,""];var t=e.match(Kt);return t?[parseFloat(e),t[2]]:[e,void 0]}var Qt=Yt("rem");function Zt(e){return Math.round(255*e)}function en(e,t,n){return Zt(e)+","+Zt(t)+","+Zt(n)}function tn(e,t,n,r){if(void 0===r&&(r=en),0===t)return r(n,n,n);var o=(e%360+360)%360/60,i=(1-Math.abs(2*n-1))*t,a=i*(1-Math.abs(o%2-1)),s=0,u=0,c=0;o>=0&&o<1?(s=i,u=a):o>=1&&o<2?(s=a,u=i):o>=2&&o<3?(u=i,c=a):o>=3&&o<4?(u=a,c=i):o>=4&&o<5?(s=a,c=i):o>=5&&o<6&&(s=i,c=a);var l=n-i/2;return r(s+l,u+l,c+l)}var nn={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var rn=/^#[a-fA-F0-9]{6}$/,on=/^#[a-fA-F0-9]{8}$/,an=/^#[a-fA-F0-9]{3}$/,sn=/^#[a-fA-F0-9]{4}$/,un=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,cn=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ln=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,fn=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function dn(e){if("string"!=typeof e)throw new Vt(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return nn[t]?"#"+nn[t]:e}(e);if(t.match(rn))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(on)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(an))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(sn)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var o=un.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var i=cn.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var a=ln.exec(t);if(a){var s="rgb("+tn(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",u=un.exec(s);if(!u)throw new Vt(4,t,s);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var c=fn.exec(t);if(c){var l="rgb("+tn(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",f=un.exec(l);if(!f)throw new Vt(4,t,l);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+c[4])}}throw new Vt(5)}function pn(e){return function(e){var t,n=e.red/255,r=e.green/255,o=e.blue/255,i=Math.max(n,r,o),a=Math.min(n,r,o),s=(i+a)/2;if(i===a)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var u=i-a,c=s>.5?u/(2-i-a):u/(i+a);switch(i){case n:t=(r-o)/u+(r<o?6:0);break;case r:t=(o-n)/u+2;break;default:t=(n-r)/u+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:s,alpha:e.alpha}:{hue:t,saturation:c,lightness:s}}(dn(e))}var hn=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function gn(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function vn(e){return gn(Math.round(255*e))}function mn(e,t,n){return hn("#"+vn(e)+vn(t)+vn(n))}function yn(e,t,n){return tn(e,t,n,mn)}function bn(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return yn(e,t,n);if("object"==typeof e&&void 0===t&&void 0===n)return yn(e.hue,e.saturation,e.lightness);throw new Vt(1)}function wn(e,t,n,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?yn(e,t,n):"rgba("+tn(e,t,n)+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?yn(e.hue,e.saturation,e.lightness):"rgba("+tn(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new Vt(2)}function Sn(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return hn("#"+gn(e)+gn(t)+gn(n));if("object"==typeof e&&void 0===t&&void 0===n)return hn("#"+gn(e.red)+gn(e.green)+gn(e.blue));throw new Vt(6)}function In(e,t,n,r){if("string"==typeof e&&"number"==typeof t){var o=dn(e);return"rgba("+o.red+","+o.green+","+o.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?Sn(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?Sn(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Vt(7)}function On(e){if("object"!=typeof e)throw new Vt(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return In(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return Sn(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return wn(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return bn(e);throw new Vt(8)}function En(e){return function e(t,n,r){return function(){var o=r.concat(Array.prototype.slice.call(arguments));return o.length>=n?t.apply(this,o):e(t,n,o)}}(e,e.length,[])}function xn(e,t,n){return Math.max(e,Math.min(t,n))}function Cn(e,t){if("transparent"===t)return t;var n=pn(t);return On(D({},n,{lightness:xn(0,1,n.lightness-parseFloat(e))}))}var Tn=En(Cn);function jn(e){if("transparent"===e)return 0;var t=dn(e),n=Object.keys(t).map((function(e){var n=t[e]/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)})),r=n[0],o=n[1],i=n[2];return parseFloat((.2126*r+.7152*o+.0722*i).toFixed(3))}function An(e,t){var n=jn(e),r=jn(t);return parseFloat((n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)).toFixed(2))}function Pn(e,t){if("transparent"===t)return t;var n=pn(t);return On(D({},n,{lightness:xn(0,1,n.lightness+parseFloat(e))}))}var _n=En(Pn);function Dn(e,t,n){if("transparent"===t)return n;if("transparent"===n)return t;if(0===e)return n;var r=dn(t),o=D({},r,{alpha:"number"==typeof r.alpha?r.alpha:1}),i=dn(n),a=D({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),s=o.alpha-a.alpha,u=2*parseFloat(e)-1,c=((u*s==-1?u:u+s)/(1+u*s)+1)/2,l=1-c;return In({red:Math.floor(o.red*c+a.red*l),green:Math.floor(o.green*c+a.green*l),blue:Math.floor(o.blue*c+a.blue*l),alpha:o.alpha*(parseFloat(e)/1)+a.alpha*(1-parseFloat(e)/1)})}var kn=En(Dn);var Rn=n(69),Mn=n(40),Nn=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r},Ln=n(58),Un=n.n(Ln),Fn=n(141),Vn=n.n(Fn),Bn={debounce:Un.a,throttle:Vn.a},Gn=function(e){return"function"==typeof e},Wn=function(){return"undefined"==typeof window},zn=function(e){return e instanceof Element||e instanceof HTMLDocument};function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qn(e);if(t){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kn(this,n)}}function Kn(e,t){return!t||"object"!==qn(t)&&"function"!=typeof t?Xn(e):t}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(i,e);var t,n,r,o=Yn(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Zn(Xn(t=o.call(this,e)),"cancelHandler",(function(){t.resizeHandler&&t.resizeHandler.cancel&&(t.resizeHandler.cancel(),t.resizeHandler=null)})),Zn(Xn(t),"rafClean",(function(){t.raf&&t.raf.cancel&&(t.raf.cancel(),t.raf=null)})),Zn(Xn(t),"attachObserver",(function(){var e=t.props.targetRef;e&&e.current&&(t.targetRef.current=e.current);var n=t.getElement();n&&(t.observableElement&&t.observableElement===n||(t.observableElement=n,t.resizeObserver.observe(n)))})),Zn(Xn(t),"getElement",(function(){var e=t.props,n=e.querySelector,r=e.targetDomEl;if(!Wn()){if(n)return document.querySelector(n);if(r&&zn(r))return r;if(t.targetRef&&zn(t.targetRef.current))return t.targetRef.current;var o=Object(x.findDOMNode)(Xn(t));if(o)switch(t.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}}})),Zn(Xn(t),"createUpdater",(function(){return t.rafClean(),t.raf=Nn((function(e){var n=e.width,r=e.height,o=t.props.onResize;Gn(o)&&o(n,r),t.setState({width:n,height:r})})),t.raf})),Zn(Xn(t),"createResizeHandler",(function(e){var n=t.state,r=n.width,o=n.height,i=t.props,a=i.handleWidth,s=i.handleHeight;if(a||s){var u=t.createUpdater();e.forEach((function(e){var n=e&&e.contentRect||{},i=n.width,c=n.height,l=a&&r!==i||s&&o!==c;!t.skipOnMount&&l&&!Wn()&&u({width:i,height:c}),t.skipOnMount=!1}))}})),Zn(Xn(t),"getRenderType",(function(){var e=t.props,n=e.render,r=e.children;return Gn(n)?"renderProp":Gn(r)?"childFunction":Object(O.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"}));var n=e.skipOnMount,r=e.refreshMode,a=e.refreshRate,s=e.refreshOptions;t.state={width:void 0,height:void 0},t.skipOnMount=n,t.raf=null,t.unmounted=!1,t.targetRef=Object(O.createRef)(),t.observableElement=null;var u=Bn[r];return t.resizeHandler=u?u(t.createResizeHandler,a,s):t.createResizeHandler,t.resizeObserver=new Mn.a(t.resizeHandler),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.attachObserver()}},{key:"componentDidUpdate",value:function(){this.attachObserver()}},{key:"componentWillUnmount",value:function(){this.resizeObserver.disconnect(),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){var e=this.props,t=e.render,n=e.children,r=e.nodeType,o=this.state,i={width:o.width,height:o.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return t(i);case"childFunction":return n(i);case"child":if("string"==typeof n.type){var a=Hn(i,["targetRef"]);return Object(O.cloneElement)(n,a)}return Object(O.cloneElement)(n,i);case"childArray":return n.map((function(e){return!!e&&Object(O.cloneElement)(e,i)}));default:return E.a.createElement(r,null)}}}])&&Jn(t.prototype,n),r&&Jn(t,r),i}(O.PureComponent);er.defaultProps={handleWidth:!0,handleHeight:!0,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,targetDomEl:null,targetRef:null,onResize:null,render:void 0,children:null,nodeType:"div"};var tr=er;const nr={arr:Array.isArray,obj:e=>"[object Object]"===Object.prototype.toString.call(e),fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,nul:e=>null===e,set:e=>e instanceof Set,map:e=>e instanceof Map,equ(e,t){if(typeof e!=typeof t)return!1;if(nr.str(e)||nr.num(e))return e===t;if(nr.obj(e)&&nr.obj(t)&&Object.keys(e).length+Object.keys(t).length===0)return!0;let n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!nr.und(n)||e===t}};function rr(){const e=Object(O.useState)(!1)[1];return Object(O.useCallback)(()=>e(e=>!e),[])}function or(e,t){return nr.und(e)||nr.nul(e)?t:e}function ir(e){return nr.und(e)?[]:nr.arr(e)?e:[e]}function ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return nr.fun(e)?e(...n):e}function sr(e){const t=function(e){return e.to,e.from,e.config,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.delay,e.attach,e.destroyed,e.interpolateTo,e.ref,e.lazy,k(e,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}(e);if(nr.und(t))return D({to:t},e);const n=Object.keys(e).reduce((n,r)=>nr.und(t[r])?D({},n,{[r]:e[r]}):n,{});return D({to:t},n)}class ur{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){0===this.children.length&&this.attach(),this.children.push(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()}}class cr extends ur{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof ur&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof ur&&e.removeChild(this))}}class lr extends ur{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof ur&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof ur&&e.removeChild(this))}getValue(e){void 0===e&&(e=!1);const t={};for(const n in this.payload){const r=this.payload[n];(!e||r instanceof ur)&&(t[n]=r instanceof ur?r[e?"getAnimatedValue":"getValue"]():r)}return t}getAnimatedValue(){return this.getValue(!0)}}let fr,dr;function pr(e,t){fr={fn:e,transform:t}}function hr(e){dr=e}let gr,vr=e=>"undefined"!=typeof window?window.requestAnimationFrame(e):-1,mr=e=>{"undefined"!=typeof window&&window.cancelAnimationFrame(e)};function yr(e){gr=e}let br,wr=()=>Date.now();function Sr(e){br=e}let Ir,Or,Er=e=>e.current;function xr(e){Ir=e}var Cr=Object.freeze({get applyAnimatedValues(){return fr},injectApplyAnimatedValues:pr,get colorNames(){return dr},injectColorNames:hr,get requestFrame(){return vr},get cancelFrame(){return mr},injectFrame:function(e,t){vr=e,mr=t},get interpolation(){return gr},injectStringInterpolator:yr,get now(){return wr},injectNow:function(e){wr=e},get defaultElement(){return br},injectDefaultElement:Sr,get animatedApi(){return Er},injectAnimatedApi:function(e){Er=e},get createAnimatedStyle(){return Ir},injectCreateAnimatedStyle:xr,get manualFrameloop(){return Or},injectManualFrameloop:function(e){Or=e}});class Tr extends lr{constructor(e,t){super(),this.update=void 0,this.payload=e.style?D({},e,{style:Ir(e.style)}):e,this.update=t,this.attach()}}let jr=!1;const Ar=new Set,Pr=()=>{if(!jr)return!1;let e=wr();for(let t of Ar){let n=!1;for(let r=0;r<t.configs.length;r++){let o,i,a=t.configs[r];for(let t=0;t<a.animatedValues.length;t++){let r=a.animatedValues[t];if(r.done)continue;let s=a.fromValues[t],u=a.toValues[t],c=r.lastPosition,l=u instanceof ur,f=Array.isArray(a.initialVelocity)?a.initialVelocity[t]:a.initialVelocity;if(l&&(u=u.getValue()),a.immediate)r.setValue(u),r.done=!0;else if("string"!=typeof s&&"string"!=typeof u){if(void 0!==a.duration)c=s+a.easing((e-r.startTime)/a.duration)*(u-s),o=e>=r.startTime+a.duration;else if(a.decay)c=s+f/(1-.998)*(1-Math.exp(-(1-.998)*(e-r.startTime))),o=Math.abs(r.lastPosition-c)<.1,o&&(u=c);else{i=void 0!==r.lastTime?r.lastTime:e,f=void 0!==r.lastVelocity?r.lastVelocity:a.initialVelocity,e>i+64&&(i=e);let t=Math.floor(e-i);for(let e=0;e<t;++e){f+=1*((-a.tension*(c-u)+-a.friction*f)/a.mass)/1e3,c+=1*f/1e3}let n=!(!a.clamp||0===a.tension)&&(s<u?c>u:c<u),l=Math.abs(f)<=a.precision,d=0===a.tension||Math.abs(u-c)<=a.precision;o=n||l&&d,r.lastVelocity=f,r.lastTime=e}l&&!a.toValues[t].done&&(o=!1),o?(r.value!==u&&(c=u),r.done=!0):n=!0,r.setValue(c),r.lastPosition=c}else r.setValue(u),r.done=!0}t.props.onFrame&&(t.values[a.name]=a.interpolation.getValue())}t.props.onFrame&&t.props.onFrame(t.values),n||(Ar.delete(t),t.stop(!0))}return Ar.size?Or?Or():vr(Pr):jr=!1,jr};function _r(e,t,n){if("function"==typeof e)return e;if(Array.isArray(e))return _r({range:e,output:t,extrapolate:n});if(gr&&"string"==typeof e.output[0])return gr(e);const r=e,o=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,a,s,u){let c=u?u(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=i(c),r===-1/0?c=-c:o===1/0?c+=r:c=c*(o-r)+r;return c}(e,i[t],i[t+1],o[t],o[t+1],u,a,s,r.map)}}class Dr extends cr{constructor(e,t,n,r){super(),this.calc=void 0,this.payload=e instanceof cr&&!(e instanceof Dr)?e.getPayload():Array.isArray(e)?e:[e],this.calc=_r(t,n,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,t,n){this.calc=_r(e,t,n)}interpolate(e,t,n){return new Dr(this,e,t,n)}}const kr=(e,t,n)=>e&&new Dr(e,t,n),Rr={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}};function Mr(e,t,n){void 0===n&&(n=1e3);const r=Object(O.useRef)();Object(O.useEffect)(()=>{nr.equ(e,r.current)?e.forEach(e=>{let t=e.current;return t&&t.start()}):t?e.forEach((e,r)=>{let o=e.current;if(o){const e=o.controllers;if(e.length){const o=n*t[r];e.forEach(e=>{e.queue=e.queue.map(e=>D({},e,{delay:e.delay+o})),e.start()})}}}):e.reduce((e,t,n)=>{let r=t.current;return e.then(()=>r.start())},Promise.resolve()),r.current=e})}class Nr extends ur{constructor(e){var t;super(),t=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(e,n){void 0===n&&(n=!0),t.value=e,n&&t.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){0===this.animatedStyles.size&&function e(t,n){"update"in t?n.add(t):t.getChildren().forEach(t=>e(t,n))}(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,t,n){return new Dr(this,e,t,n)}}class Lr extends cr{constructor(e){super(),this.payload=e.map(e=>new Nr(e))}setValue(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((e,n)=>this.payload[n].setValue(e,t)):this.payload.forEach(n=>n.setValue(e,t))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,t){return new Dr(this,e,t)}}let Ur=0;class Fr{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=Ur++}update(e){if(!e)return this;const t=sr(e),n=t.delay,r=void 0===n?0:n,o=t.to,i=k(t,["delay","to"]);if(nr.arr(o)||nr.fun(o))this.queue.push(D({},i,{delay:r,to:o}));else if(o){let e={};Object.entries(o).forEach(t=>{let n=t[0];const o=D({to:{[n]:t[1]},delay:ar(r,n)},i),a=e[o.delay]&&e[o.delay].to;e[o.delay]=D({},e[o.delay],o,{to:D({},a,o.to)})}),this.queue=Object.values(e)}return this.queue=this.queue.sort((e,t)=>e.delay-t.delay),this.diff(i),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(e=>{let t=e.from,n=void 0===t?{}:t,r=e.to,o=void 0===r?{}:r;nr.obj(n)&&(this.merged=D({},n,this.merged)),nr.obj(o)&&(this.merged=D({},this.merged,o))});const t=this.local=++this.guid,n=this.localQueue=this.queue;this.queue=[],n.forEach((r,o)=>{let i=r.delay,a=k(r,["delay"]);const s=r=>{o===n.length-1&&t===this.guid&&r&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let u=nr.arr(a.to)||nr.fun(a.to);i?setTimeout(()=>{t===this.guid&&(u?this.runAsync(a,s):this.diff(a).start(s))},i):u?this.runAsync(a,s):this.diff(a).start(s)})}else nr.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),t=this,Ar.has(t)||Ar.add(t),jr||(jr=!0,vr(Or||Pr));var t;return this}stop(e){return this.listeners.forEach(t=>t(e)),this.listeners=[],this}pause(e){var t;return this.stop(!0),e&&(t=this,Ar.has(t)&&Ar.delete(t)),this}runAsync(e,t){var n=this;e.delay;let r=k(e,["delay"]);const o=this.local;let i=Promise.resolve(void 0);if(nr.arr(r.to))for(let e=0;e<r.to.length;e++){const t=e,n=D({},r,sr(r.to[t]));nr.arr(n.config)&&(n.config=n.config[t]),i=i.then(()=>{if(o===this.guid)return new Promise(e=>this.diff(n).start(e))})}else if(nr.fun(r.to)){let e,t=0;i=i.then(()=>r.to(n=>{const i=D({},r,sr(n));if(nr.arr(i.config)&&(i.config=i.config[t]),t++,o===this.guid)return e=new Promise(e=>this.diff(i).start(e))},(function(e){return void 0===e&&(e=!0),n.stop(e)})).then(()=>e))}i.then(t)}diff(e){this.props=D({},this.props,e);let t=this.props,n=t.from,r=void 0===n?{}:n,o=t.to,i=void 0===o?{}:o,a=t.config,s=void 0===a?{}:a,u=t.reverse,c=t.attach,l=t.reset,f=t.immediate;if(u){var d=[i,r];r=d[0],i=d[1]}this.merged=D({},r,this.merged,i),this.hasChanged=!1;let p=c&&c(this);if(this.animations=Object.entries(this.merged).reduce((e,t)=>{let n=t[0],o=t[1],i=e[n]||{};const a=nr.num(o),u=nr.str(o)&&!o.startsWith("#")&&!/\d/.test(o)&&!dr[o],c=nr.arr(o),d=!a&&!c&&!u;let h=nr.und(r[n])?o:r[n],g=a||c||u?o:1,v=ar(s,n);p&&(g=p.animations[n].parent);let m,y=i.parent,b=i.interpolation,w=ir(p?g.getPayload():g),S=o;d&&(S=gr({range:[0,1],output:[o,o]})(1));let I=b&&b.getValue();const O=!nr.und(y)&&i.animatedValues.some(e=>!e.done),E=!nr.equ(S,I),x=!nr.equ(S,i.previous),C=!nr.equ(v,i.config);if(l||x&&E||C){if(a||u)y=b=i.parent||new Nr(h);else if(c)y=b=i.parent||new Lr(h);else if(d){let e=i.interpolation&&i.interpolation.calc(i.parent.value);e=void 0===e||l?h:e,i.parent?(y=i.parent,y.setValue(0,!1)):y=new Nr(0);const t={output:[e,o]};i.interpolation?(b=i.interpolation,i.interpolation.updateConfig(t)):b=y.interpolate(t)}return w=ir(p?g.getPayload():g),m=ir(y.getPayload()),l&&!d&&y.setValue(h,!1),this.hasChanged=!0,m.forEach(e=>{e.startPosition=e.value,e.lastPosition=e.value,e.lastVelocity=O?e.lastVelocity:void 0,e.lastTime=O?e.lastTime:void 0,e.startTime=wr(),e.done=!1,e.animatedStyles.clear()}),ar(f,n)&&y.setValue(d?g:o,!1),D({},e,{[n]:D({},i,{name:n,parent:y,interpolation:b,animatedValues:m,toValues:w,previous:S,config:v,fromValues:ir(y.getValue()),immediate:ar(f,n),initialVelocity:or(v.velocity,0),clamp:or(v.clamp,!1),precision:or(v.precision,.01),tension:or(v.tension,170),friction:or(v.friction,26),mass:or(v.mass,1),duration:v.duration,easing:or(v.easing,e=>e),decay:v.decay})})}return E?e:(d&&(y.setValue(1,!1),b.updateConfig({output:[S,S]})),y.done=!0,this.hasChanged=!0,D({},e,{[n]:D({},e[n],{previous:S})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let e in this.animations)this.interpolations[e]=this.animations[e].interpolation,this.values[e]=this.animations[e].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}}const Vr=(e,t)=>{const n=Object(O.useRef)(!1),r=Object(O.useRef)(),o=nr.fun(t),i=Object(O.useMemo)(()=>{let n;return r.current&&(r.current.map(e=>e.destroy()),r.current=void 0),[new Array(e).fill().map((e,r)=>{const i=new Fr,a=o?ar(t,r,i):t[r];return 0===r&&(n=a.ref),i.update(a),n||i.start(),i}),n]},[e]),a=i[0],s=i[1];r.current=a;Object(O.useImperativeHandle)(s,()=>({start:()=>Promise.all(r.current.map(e=>new Promise(t=>e.start(t)))),stop:e=>r.current.forEach(t=>t.stop(e)),get controllers(){return r.current}}));const u=Object(O.useMemo)(()=>e=>r.current.map((t,n)=>{t.update(o?ar(e,n,t):e[n]),s||t.start()}),[e]);Object(O.useEffect)(()=>{n.current?o||u(t):s||r.current.forEach(e=>e.start())}),Object(O.useEffect)(()=>(n.current=!0,()=>r.current.forEach(e=>e.destroy())),[]);const c=r.current.map(e=>e.getValues());return o?[c,u,e=>r.current.forEach(t=>t.pause(e))]:c},Br=e=>{const t=nr.fun(e),n=Vr(1,t?e:[e]),r=n[0],o=n[1],i=n[2];return t?[r[0],o,i]:r},Gr=(e,t)=>{const n=Object(O.useRef)(!1),r=nr.fun(t),o=ar(t),i=Object(O.useRef)(),a=Vr(e,(e,t)=>(0===e&&(i.current=[]),i.current.push(t),D({},o,{config:ar(o.config,e),attach:e>0&&(()=>i.current[e-1])}))),s=a[0],u=a[1],c=a[2],l=Object(O.useMemo)(()=>e=>u((t,n)=>{e.reverse;const r=e.reverse?t+1:t-1,a=i.current[r];return D({},e,{config:ar(e.config||o.config,t),attach:a&&(()=>a)})}),[e,o.reverse]);return Object(O.useEffect)(()=>{n.current&&!r&&l(t)}),Object(O.useEffect)(()=>{n.current=!0},[]),r?[s,l,c]:s};let Wr=0;const zr=(e,t)=>("function"==typeof t?e.map(t):ir(t)).map(String),qr=e=>{let t=e.items,n=e.keys,r=void 0===n?e=>e:n,o=k(e,["items","keys"]);return t=ir(void 0!==t?t:null),D({items:t,keys:zr(t,r)},o)};function Hr(e,t,n){const r=D({items:e,keys:t||(e=>e)},n),o=qr(r),i=o.lazy,a=void 0!==i&&i,s=(o.unique,o.reset),u=void 0!==s&&s,c=(o.enter,o.leave,o.update,o.onDestroyed),l=(o.keys,o.items,o.onFrame),f=o.onRest,d=o.onStart,p=o.ref,h=k(o,["lazy","unique","reset","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","ref"]),g=rr(),v=Object(O.useRef)(!1),m=Object(O.useRef)({mounted:!1,first:!0,deleted:[],current:{},transitions:[],prevProps:{},paused:!!r.ref,instances:!v.current&&new Map,forceUpdate:g});return Object(O.useImperativeHandle)(r.ref,()=>({start:()=>Promise.all(Array.from(m.current.instances).map(e=>{let t=e[1];return new Promise(e=>t.start(e))})),stop:e=>Array.from(m.current.instances).forEach(t=>t[1].stop(e)),get controllers(){return Array.from(m.current.instances).map(e=>e[1])}})),m.current=function(e,t){let n=e.first,r=e.prevProps,o=k(e,["first","prevProps"]),i=qr(t),a=i.items,s=i.keys,u=i.initial,c=i.from,l=i.enter,f=i.leave,d=i.update,p=i.trail,h=void 0===p?0:p,g=i.unique,v=i.config,m=i.order,y=void 0===m?["enter","leave","update"]:m,b=qr(r),w=b.keys,S=b.items,I=D({},o.current),O=[...o.deleted],E=Object.keys(I),x=new Set(E),C=new Set(s),T=s.filter(e=>!x.has(e)),j=o.transitions.filter(e=>!e.destroyed&&!C.has(e.originalKey)).map(e=>e.originalKey),A=s.filter(e=>x.has(e)),P=-h;for(;y.length;){switch(y.shift()){case"enter":T.forEach((e,t)=>{g&&O.find(t=>t.originalKey===e)&&(O=O.filter(t=>t.originalKey!==e));const r=s.indexOf(e),o=a[r],i=n&&void 0!==u?"initial":"enter";I[e]={slot:i,originalKey:e,key:g?String(e):Wr++,item:o,trail:P+=h,config:ar(v,o,i),from:ar(n&&void 0!==u?u||{}:c,o),to:ar(l,o)}});break;case"leave":j.forEach(e=>{const t=w.indexOf(e),n=S[t];O.unshift(D({},I[e],{slot:"leave",destroyed:!0,left:w[Math.max(0,t-1)],right:w[Math.min(w.length,t+1)],trail:P+=h,config:ar(v,n,"leave"),to:ar(f,n)})),delete I[e]});break;case"update":A.forEach(e=>{const t=s.indexOf(e),n=a[t];I[e]=D({},I[e],{item:n,slot:"update",trail:P+=h,config:ar(v,n,"update"),to:ar(d,n)})})}}let _=s.map(e=>I[e]);return O.forEach(e=>{let t,n=e.left,r=(e.right,k(e,["left","right"]));-1!==(t=_.findIndex(e=>e.originalKey===n))&&(t+=1),t=Math.max(0,t),_=[..._.slice(0,t),r,..._.slice(t)]}),D({},o,{changed:T.length||j.length||A.length,first:n&&0===T.length,transitions:_,current:I,deleted:O,prevProps:t})}(m.current,r),m.current.changed&&m.current.transitions.forEach(e=>{const t=e.slot,n=e.from,r=e.to,o=e.config,i=e.trail,s=e.key,g=e.item;m.current.instances.has(s)||m.current.instances.set(s,new Fr);const v=m.current.instances.get(s),y=D({},h,{to:r,from:n,config:o,ref:p,onRest:n=>{if(m.current.mounted){e.destroyed&&(p||a||Jr(m,s),c&&c(g));!Array.from(m.current.instances).some(e=>!e[1].idle)&&(p||a)&&m.current.deleted.length>0&&Jr(m),f&&f(g,t,n)}},onStart:d&&(()=>d(g,t)),onFrame:l&&(e=>l(g,t,e)),delay:i,reset:u&&"enter"===t});v.update(y),m.current.paused||v.start()}),Object(O.useEffect)(()=>(m.current.mounted=v.current=!0,()=>{m.current.mounted=v.current=!1,Array.from(m.current.instances).map(e=>e[1].destroy()),m.current.instances.clear()}),[]),m.current.transitions.map(e=>{let t=e.item,n=e.slot,r=e.key;return{item:t,key:r,state:n,props:m.current.instances.get(r).getValues()}})}function Jr(e,t){const n=e.current.deleted;for(let r of n){let n=r.key;const o=e=>e.key!==n;(nr.und(t)||t===n)&&(e.current.instances.delete(n),e.current.transitions=e.current.transitions.filter(o),e.current.deleted=e.current.deleted.filter(o))}e.current.forceUpdate()}class $r extends lr{constructor(e){void 0===e&&(e={}),super(),!e.transform||e.transform instanceof ur||(e=fr.transform(e)),this.payload=e}}const Yr={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Kr="[-+]?\\d*\\.?\\d+";function Xr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Qr=new RegExp("rgb"+Xr(Kr,Kr,Kr)),Zr=new RegExp("rgba"+Xr(Kr,Kr,Kr,Kr)),eo=new RegExp("hsl"+Xr(Kr,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),to=new RegExp("hsla"+Xr(Kr,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",Kr)),no=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ro=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,oo=/^#([0-9a-fA-F]{6})$/,io=/^#([0-9a-fA-F]{8})$/;function ao(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function so(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=ao(o,r,e+1/3),a=ao(o,r,e),s=ao(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function uo(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function co(e){return(parseFloat(e)%360+360)%360/360}function lo(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function fo(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function po(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=oo.exec(e))?parseInt(t[1]+"ff",16)>>>0:Yr.hasOwnProperty(e)?Yr[e]:(t=Qr.exec(e))?(uo(t[1])<<24|uo(t[2])<<16|uo(t[3])<<8|255)>>>0:(t=Zr.exec(e))?(uo(t[1])<<24|uo(t[2])<<16|uo(t[3])<<8|lo(t[4]))>>>0:(t=no.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=io.exec(e))?parseInt(t[1],16)>>>0:(t=ro.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=eo.exec(e))?(255|so(co(t[1]),fo(t[2]),fo(t[3])))>>>0:(t=to.exec(e))?(so(co(t[1]),fo(t[2]),fo(t[3]))|lo(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const ho=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,go=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,vo=new RegExp(`(${Object.keys(Yr).join("|")})`,"g");let mo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const yo=["Webkit","Ms","Moz","O"];function bo(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||mo.hasOwnProperty(e)&&mo[e]?(""+t).trim():t+"px"}mo=Object.keys(mo).reduce((e,t)=>(yo.forEach(n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t]),e),mo);const wo={};xr(e=>new $r(e)),Sr("div"),yr(e=>{const t=e.output.map(e=>e.replace(go,po)).map(e=>e.replace(vo,po)),n=t[0].match(ho).map(()=>[]);t.forEach(e=>{e.match(ho).forEach((e,t)=>n[t].push(+e))});const r=t[0].match(ho).map((t,r)=>_r(D({},e,{output:n[r]})));return e=>{let n=0;return t[0].replace(ho,()=>r[n++](e)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`)}}),hr(Yr),pr((e,t)=>{if(!e.nodeType||void 0===e.setAttribute)return!1;{const o=t.style,i=t.children,a=t.scrollTop,s=t.scrollLeft,u=k(t,["style","children","scrollTop","scrollLeft"]),c="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;void 0!==a&&(e.scrollTop=a),void 0!==s&&(e.scrollLeft=s),void 0!==i&&(e.textContent=i);for(let t in o)if(o.hasOwnProperty(t)){var n=0===t.indexOf("--"),r=bo(t,o[t],n);"float"===t&&(t="cssFloat"),n?e.style.setProperty(t,r):e.style[t]=r}for(let t in u){const n=c?t:wo[t]||(wo[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase()));void 0!==e.getAttribute(n)&&e.setAttribute(n,u[t])}}},e=>e);const So=(Io=e=>Object(O.forwardRef)((t,n)=>{const r=rr(),o=Object(O.useRef)(!0),i=Object(O.useRef)(null),a=Object(O.useRef)(null),s=Object(O.useCallback)(e=>{const t=i.current;i.current=new Tr(e,()=>{let e=!1;a.current&&(e=fr.fn(a.current,i.current.getAnimatedValue())),a.current&&!1!==e||r()}),t&&t.detach()},[]);Object(O.useEffect)(()=>()=>{o.current=!1,i.current&&i.current.detach()},[]),Object(O.useImperativeHandle)(n,()=>Er(a,o,r)),s(t);const u=i.current.getValue(),c=(u.scrollTop,u.scrollLeft,k(u,["scrollTop","scrollLeft"])),l=(f=e,!nr.fun(f)||f.prototype instanceof E.a.Component?e=>a.current=function(e,t){return t&&(nr.fun(t)?t(e):nr.obj(t)&&(t.current=e)),e}(e,n):void 0);var f;return E.a.createElement(e,D({},c,{ref:l}))}),void 0===(Oo=!1)&&(Oo=!0),e=>(nr.arr(e)?e:Object.keys(e)).reduce((e,t)=>{const n=Oo?t[0].toLowerCase()+t.substring(1):t;return e[n]=Io(n),e},Io));var Io,Oo;const Eo=So(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);var xo=n(14),Co=n(57),To=n(140),jo=n(7),Ao=n(30);var Po,_o,Do=Function.prototype,ko=Object.prototype,Ro=Do.toString,Mo=ko.hasOwnProperty,No=Ro.call(Object),Lo=ko.toString,Uo=(Po=Object.getPrototypeOf,_o=Object,function(e){return Po(_o(e))});var Fo=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Lo.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Uo(e);if(null===t)return!0;var n=Mo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ro.call(n)==No};function Vo(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function Bo(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var Go=/javascript\s*\:/gim;var Wo={whiteList:Bo(),getDefaultWhiteList:Bo,onAttr:function(e,t,n){},onIgnoreAttr:function(e,t,n){},safeAttrValue:function(e,t){return Go.test(t)?"":t}},zo=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},qo=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var Ho=function(e,t){";"!==(e=qo(e))[e.length-1]&&(e+=";");var n=e.length,r=!1,o=0,i=0,a="";function s(){if(!r){var n=zo(e.slice(o,i)),s=n.indexOf(":");if(-1!==s){var u=zo(n.slice(0,s)),c=zo(n.slice(s+1));if(u){var l=t(o,a.length,u,c,n);l&&(a+=l+"; ")}}}o=i+1}for(;i<n;i++){var u=e[i];if("/"===u&&"*"===e[i+1]){var c=e.indexOf("*/",i+2);if(-1===c)break;o=(i=c+1)+1,r=!1}else"("===u?r=!0:")"===u?r=!1:";"===u?r||s():"\n"===u&&s()}return zo(a)};function Jo(e){return null==e}function $o(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||Wo.whiteList,e.onAttr=e.onAttr||Wo.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Wo.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Wo.safeAttrValue,this.options=e}$o.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,o=t.onIgnoreAttr,i=t.safeAttrValue;return Ho(e,(function(e,t,a,s,u){var c=n[a],l=!1;if(!0===c?l=c:"function"==typeof c?l=c(s):c instanceof RegExp&&(l=c.test(s)),!0!==l&&(l=!1),s=i(a,s)){var f,d={position:t,sourcePosition:e,source:u,isWhite:l};return l?Jo(f=r(a,s,d))?a+":"+s:f:Jo(f=o(a,s,d))?void 0:f}}))};var Yo=$o,Ko=Vo((function(e,t){for(var n in(t=e.exports=function(e,t){return new Yo(t).process(e)}).FilterCSS=Yo,Wo)t[n]=Wo[n]})),Xo=function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Qo=function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},Zo=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},ei=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},ti=Ko.FilterCSS,ni=Ko.getDefaultWhiteList;function ri(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var oi=new ti;function ii(e){return e.replace(ai,"&lt;").replace(si,"&gt;")}var ai=/</g,si=/>/g,ui=/"/g,ci=/&quot;/g,li=/&#([a-zA-Z0-9]*);?/gim,fi=/&colon;?/gim,di=/&newline;?/gim,pi=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,hi=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,gi=/u\s*r\s*l\s*\(.*/gi;function vi(e){return e.replace(ui,"&quot;")}function mi(e){return e.replace(ci,'"')}function yi(e){return e.replace(li,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function bi(e){return e.replace(fi,":").replace(di," ")}function wi(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Zo(t)}function Si(e){return e=wi(e=bi(e=yi(e=mi(e))))}function Ii(e){return e=ii(e=vi(e))}var Oi=/<!--[\s\S]*?-->/g;var Ei={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},getDefaultWhiteList:ri,onTag:function(e,t,n){},onIgnoreTag:function(e,t,n){},onTagAttr:function(e,t,n){},onIgnoreTagAttr:function(e,t,n){},safeAttrValue:function(e,t,n,r){if(n=Si(n),"href"===t||"src"===t){if("#"===(n=Zo(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(pi.lastIndex=0,pi.test(n))return""}else if("style"===t){if(hi.lastIndex=0,hi.test(n))return"";if(gi.lastIndex=0,gi.test(n)&&(pi.lastIndex=0,pi.test(n)))return"";!1!==r&&(n=(r=r||oi).process(n))}return n=Ii(n)},escapeHtml:ii,escapeQuote:vi,unescapeQuote:mi,escapeHtmlEntities:yi,escapeDangerHtml5Entities:bi,clearNonPrintableCharacter:wi,friendlyAttrValue:Si,escapeAttrValue:Ii,onIgnoreTagStripAll:function(){return""},StripTagBody:function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(i,a,s){if(function(t){return!!n||-1!==Xo(e,t)}(i)){if(s.isClosing){var u="[/removed]",c=s.position+u.length;return r.push([!1!==o?o:s.position,c]),o=!1,u}return o||(o=s.position),"[removed]"}return t(i,a,s)},remove:function(e){var t="",n=0;return Qo(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},stripCommentTag:function(e){return e.replace(Oi,"")},stripBlankChar:function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},cssFilter:oi,getDefaultCSSWhiteList:ni};function xi(e){var t=ei(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=Zo(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function Ci(e){return"</"===e.slice(0,2)}var Ti=/[^a-zA-Z0-9_:\.\-]/gim;function ji(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function Ai(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function Pi(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var _i={parseTag:function(e,t,n){var r="",o=0,i=!1,a=!1,s=0,u=e.length,c="",l="";e:for(s=0;s<u;s++){var f=e.charAt(s);if(!1===i){if("<"===f){i=s;continue}}else if(!1===a){if("<"===f){r+=n(e.slice(o,s)),i=s,o=s;continue}if(">"===f){r+=n(e.slice(o,i)),c=xi(l=e.slice(i,s+1)),r+=t(i,r.length,c,l,Ci(l)),o=s+1,i=!1;continue}if('"'===f||"'"===f)for(var d=1,p=e.charAt(s-d);" "===p||"="===p;){if("="===p){a=f;continue e}p=e.charAt(s-++d)}}else if(f===a){a=!1;continue}}return o<e.length&&(r+=n(e.substr(o))),r},parseAttr:function(e,t){var n=0,r=[],o=!1,i=e.length;function a(e,n){if(!((e=(e=Zo(e)).replace(Ti,"").toLowerCase()).length<1)){var o=t(e,n||"");o&&r.push(o)}}for(var s=0;s<i;s++){var u,c=e.charAt(s);if(!1!==o||"="!==c)if(!1===o||s!==n||'"'!==c&&"'"!==c||"="!==e.charAt(s-1))if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(u=ji(e,s))){a(Zo(e.slice(n,s))),o=!1,n=s+1;continue}s=u-1;continue}if(-1===(u=Ai(e,s-1))){a(o,Pi(Zo(e.slice(n,s)))),o=!1,n=s+1;continue}}else;else{if(-1===(u=e.indexOf(c,s+1)))break;a(o,Zo(e.slice(n+1,u))),o=!1,n=(s=u)+1}else o=e.slice(n,s),n=s+1}return n<e.length&&(!1===o?a(e.slice(n)):a(o,Pi(Zo(e.slice(n))))),Zo(r.join(" "))}},Di=Ko.FilterCSS,ki=_i.parseTag,Ri=_i.parseAttr;function Mi(e){return null==e}function Ni(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ei.onIgnoreTagStripAll),e.whiteList=e.whiteList||Ei.whiteList,e.onTag=e.onTag||Ei.onTag,e.onTagAttr=e.onTagAttr||Ei.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ei.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ei.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ei.safeAttrValue,e.escapeHtml=e.escapeHtml||Ei.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Di(e.css))}Ni.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,o=t.onIgnoreTag,i=t.onTagAttr,a=t.onIgnoreTagAttr,s=t.safeAttrValue,u=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=Ei.stripBlankChar(e)),t.allowCommentTag||(e=Ei.stripCommentTag(e));var l=!1;if(t.stripIgnoreTagBody){l=Ei.StripTagBody(t.stripIgnoreTagBody,o);o=l.onIgnoreTag}var f=ki(e,(function(e,t,l,f,d){var p,h={sourcePosition:e,position:t,isClosing:d,isWhite:n.hasOwnProperty(l)};if(!Mi(p=r(l,f,h)))return p;if(h.isWhite){if(h.isClosing)return"</"+l+">";var g=function(e){var t=ei(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=Zo(e.slice(t+1,-1)))[e.length-1];return n&&(e=Zo(e.slice(0,-1))),{html:e,closing:n}}(f),v=n[l],m=Ri(g.html,(function(e,t){var n,r=-1!==Xo(v,e);return Mi(n=i(l,e,t,r))?r?(t=s(l,e,t,c))?e+'="'+t+'"':e:Mi(n=a(l,e,t,r))?void 0:n:n}));f="<"+l;return m&&(f+=" "+m),g.closing&&(f+=" /"),f+=">"}return Mi(p=o(l,f,h))?u(f):p}),u);return l&&(f=l.remove(f)),f};var Li,Ui,Fi,Vi,Bi,Gi,Wi,zi,qi=Ni,Hi=Vo((function(e,t){function n(e,t){return new qi(t).process(e)}for(var r in(t=e.exports=n).filterXSS=n,t.FilterXSS=qi,Ei)t[r]=Ei[r];for(var r in _i)t[r]=_i[r];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)})),Ji=function(){function e(e,t){var n,r=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,n,o){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(n):Hi.safeAttrValue(e,t,n,o)}},e&&!t?n=e:e&&t?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[t]=e[t]}))):(n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=n,this._xssFilter=new Hi.FilterXSS(n)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?Hi.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,n,r){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,n,r):Hi.safeAttrValue(e,t,n,r)},e.prototype.validate=function(e,t){void 0===t&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]}))})),t},e.prototype._iterateOverObject=function(e,t){var n=this;void 0===t&&(t={});try{var r=!1,o=void 0;if(Array.isArray(e))o=e.reduce((function(e,o){var i=n.validate(o,t);return i.isValid?e.concat([o]):(r=!0,e.concat([i.sanitized]))}),[]);else{if(!Fo(e)){if(t.allowUndefined&&void 0===e)return;return null}o=Object.keys(e).reduce((function(o,i){var a=e[i],s=n.validate(a,t);return s.isValid?o[i]=a:(r=!0,o[i]=s.sanitized),o}),{})}return r?o:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(Li||(Li={})),function(e){e.String="STRING",e.Number="NUMBER",e.Date="DATE"}(Ui||(Ui={})),function(e){e.Blob="esriFieldTypeBlob",e.Date="esriFieldTypeDate",e.Double="esriFieldTypeDouble",e.Geometry="esriFieldTypeGeometry",e.GlobalID="esriFieldTypeGlobalID",e.GUID="esriFieldTypeGUID",e.Integer="esriFieldTypeInteger",e.OID="esriFieldTypeOID",e.Raster="esriFieldTypeRaster",e.Single="esriFieldTypeSingle",e.SmallInteger="esriFieldTypeSmallInteger",e.String="esriFieldTypeString",e.XML="esriFieldTypeXML"}(Fi||(Fi={})),function(e){e.Fetching="FETCHING",e.Success="SUCCESS",e.Error="ERROR"}(Vi||(Vi={})),function(e){e.Design="DESIGN",e.Run="RUN"}(Bi||(Bi={})),function(e){e.Opened="OPENED",e.Active="ACTIVE",e.Closed="CLOSED"}(Gi||(Gi={})),function(e){e.None="NONE",e.Page="PAGE",e.Dialog="DIALOG",e.View="VIEW",e.WebAddress="WEB_ADDRESS"}(Wi||(Wi={})),function(e){e.Normal="NORMAL",e.Layout="LAYOUT"}(zi||(zi={}));var $i,Yi,Ki=["shortDate","shortDateLE","longMonthDayYear","dayShortMonthYear","longDate","shortDateShortTime","shortDateLEShortTime","shortDateShortTime24","shortDateLEShortTime24","shortDateLongTime","shortDateLELongTime","shortDateLongTime24","shortDateLELongTime24","longMonthYear","shortMonthYear","year"];!function(e){e.Header="HEADER",e.Footer="FOOTER",e.Body="BODY"}($i||($i={})),function(e){e.Http="http:",e.Https="https:"}(Yi||(Yi={}));var Xi,Qi,Zi="_appWindow";!function(e){e.Image="IMAGE",e.Config="CONFIG"}(Xi||(Xi={})),function(e){e.Primary="PRIMARY",e.Secondary="SECONDARY",e.Image="IMAGE",e.Donut="DONUT"}(Qi||(Qi={}));var ea=n(2),ta=Array.isArray,na=n(10),ra=na.a.Symbol,oa=Object.prototype,ia=oa.hasOwnProperty,aa=oa.toString,sa=ra?ra.toStringTag:void 0;var ua=function(e){var t=ia.call(e,sa),n=e[sa];try{e[sa]=void 0;var r=!0}catch(e){}var o=aa.call(e);return r&&(t?e[sa]=n:delete e[sa]),o},ca=Object.prototype.toString;var la=function(e){return ca.call(e)},fa=ra?ra.toStringTag:void 0;var da=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":fa&&fa in Object(e)?ua(e):la(e)};var pa=function(e){return null!=e&&"object"==typeof e};var ha=function(e){return"symbol"==typeof e||pa(e)&&"[object Symbol]"==da(e)},ga=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,va=/^\w*$/;var ma=function(e,t){if(ta(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ha(e))||(va.test(e)||!ga.test(e)||null!=t&&e in Object(t))};var ya=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var ba,wa=function(e){if(!ya(e))return!1;var t=da(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Sa=na.a["__core-js_shared__"],Ia=(ba=/[^.]+$/.exec(Sa&&Sa.keys&&Sa.keys.IE_PROTO||""))?"Symbol(src)_1."+ba:"";var Oa=function(e){return!!Ia&&Ia in e},Ea=Function.prototype.toString;var xa=function(e){if(null!=e){try{return Ea.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ca=/^\[object .+?Constructor\]$/,Ta=Function.prototype,ja=Object.prototype,Aa=Ta.toString,Pa=ja.hasOwnProperty,_a=RegExp("^"+Aa.call(Pa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Da=function(e){return!(!ya(e)||Oa(e))&&(wa(e)?_a:Ca).test(xa(e))};var ka=function(e,t){return null==e?void 0:e[t]};var Ra=function(e,t){var n=ka(e,t);return Da(n)?n:void 0},Ma=Ra(Object,"create");var Na=function(){this.__data__=Ma?Ma(null):{},this.size=0};var La=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ua=Object.prototype.hasOwnProperty;var Fa=function(e){var t=this.__data__;if(Ma){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ua.call(t,e)?t[e]:void 0},Va=Object.prototype.hasOwnProperty;var Ba=function(e){var t=this.__data__;return Ma?void 0!==t[e]:Va.call(t,e)};var Ga=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ma&&void 0===t?"__lodash_hash_undefined__":t,this};function Wa(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Wa.prototype.clear=Na,Wa.prototype.delete=La,Wa.prototype.get=Fa,Wa.prototype.has=Ba,Wa.prototype.set=Ga;var za=Wa;var qa=function(){this.__data__=[],this.size=0};var Ha=function(e,t){return e===t||e!=e&&t!=t};var Ja=function(e,t){for(var n=e.length;n--;)if(Ha(e[n][0],t))return n;return-1},$a=Array.prototype.splice;var Ya=function(e){var t=this.__data__,n=Ja(t,e);return!(n<0)&&(n==t.length-1?t.pop():$a.call(t,n,1),--this.size,!0)};var Ka=function(e){var t=this.__data__,n=Ja(t,e);return n<0?void 0:t[n][1]};var Xa=function(e){return Ja(this.__data__,e)>-1};var Qa=function(e,t){var n=this.__data__,r=Ja(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Za(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Za.prototype.clear=qa,Za.prototype.delete=Ya,Za.prototype.get=Ka,Za.prototype.has=Xa,Za.prototype.set=Qa;var es=Za,ts=Ra(na.a,"Map");var ns=function(){this.size=0,this.__data__={hash:new za,map:new(ts||es),string:new za}};var rs=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var os=function(e,t){var n=e.__data__;return rs(t)?n["string"==typeof t?"string":"hash"]:n.map};var is=function(e){var t=os(this,e).delete(e);return this.size-=t?1:0,t};var as=function(e){return os(this,e).get(e)};var ss=function(e){return os(this,e).has(e)};var us=function(e,t){var n=os(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function cs(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cs.prototype.clear=ns,cs.prototype.delete=is,cs.prototype.get=as,cs.prototype.has=ss,cs.prototype.set=us;var ls=cs;function fs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(fs.Cache||ls),n}fs.Cache=ls;var ds=fs;var ps=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hs=/\\(\\)?/g,gs=function(e){var t=ds(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ps,(function(e,n,r,o){t.push(r?o.replace(hs,"$1"):n||e)})),t}));var vs=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},ms=ra?ra.prototype:void 0,ys=ms?ms.toString:void 0;var bs=function e(t){if("string"==typeof t)return t;if(ta(t))return vs(t,e)+"";if(ha(t))return ys?ys.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var ws=function(e){return null==e?"":bs(e)};var Ss=function(e,t){return ta(e)?e:ma(e,t)?[e]:gs(ws(e))};var Is=function(e){if("string"==typeof e||ha(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Os=function(e,t){for(var n=0,r=(t=Ss(t,e)).length;null!=e&&n<r;)e=e[Is(t[n++])];return n&&n==r?e:void 0};var Es=function(e,t,n){var r=null==e?void 0:Os(e,t);return void 0===r?n:r};var xs=function(){this.__data__=new es,this.size=0};var Cs=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Ts=function(e){return this.__data__.get(e)};var js=function(e){return this.__data__.has(e)};var As=function(e,t){var n=this.__data__;if(n instanceof es){var r=n.__data__;if(!ts||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ls(r)}return n.set(e,t),this.size=n.size,this};function Ps(e){var t=this.__data__=new es(e);this.size=t.size}Ps.prototype.clear=xs,Ps.prototype.delete=Cs,Ps.prototype.get=Ts,Ps.prototype.has=js,Ps.prototype.set=As;var _s=Ps;var Ds=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var ks=function(e){return this.__data__.has(e)};function Rs(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ls;++t<n;)this.add(e[t])}Rs.prototype.add=Rs.prototype.push=Ds,Rs.prototype.has=ks;var Ms=Rs;var Ns=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var Ls=function(e,t){return e.has(t)};var Us=function(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var f=-1,d=!0,p=2&n?new Ms:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var h=e[f],g=t[f];if(r)var v=a?r(g,h,f,t,e,i):r(h,g,f,e,t,i);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!Ns(t,(function(e,t){if(!Ls(p,t)&&(h===e||o(h,e,n,r,i)))return p.push(t)}))){d=!1;break}}else if(h!==g&&!o(h,g,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d},Fs=na.a.Uint8Array;var Vs=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var Bs=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Gs=ra?ra.prototype:void 0,Ws=Gs?Gs.valueOf:void 0;var zs=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Fs(e),new Fs(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ha(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Vs;case"[object Set]":var u=1&r;if(s||(s=Bs),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=Us(s(e),s(t),r,o,i,a);return a.delete(e),l;case"[object Symbol]":if(Ws)return Ws.call(e)==Ws.call(t)}return!1};var qs=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e};var Hs=function(e,t,n){var r=t(e);return ta(e)?r:qs(r,n(e))};var Js=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var $s=function(){return[]},Ys=Object.prototype.propertyIsEnumerable,Ks=Object.getOwnPropertySymbols,Xs=Ks?function(e){return null==e?[]:(e=Object(e),Js(Ks(e),(function(t){return Ys.call(e,t)})))}:$s;var Qs=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Zs=function(e){return pa(e)&&"[object Arguments]"==da(e)},eu=Object.prototype,tu=eu.hasOwnProperty,nu=eu.propertyIsEnumerable,ru=Zs(function(){return arguments}())?Zs:function(e){return pa(e)&&tu.call(e,"callee")&&!nu.call(e,"callee")},ou=n(39),iu=/^(?:0|[1-9]\d*)$/;var au=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&iu.test(e))&&e>-1&&e%1==0&&e<t};var su=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},uu={};uu["[object Float32Array]"]=uu["[object Float64Array]"]=uu["[object Int8Array]"]=uu["[object Int16Array]"]=uu["[object Int32Array]"]=uu["[object Uint8Array]"]=uu["[object Uint8ClampedArray]"]=uu["[object Uint16Array]"]=uu["[object Uint32Array]"]=!0,uu["[object Arguments]"]=uu["[object Array]"]=uu["[object ArrayBuffer]"]=uu["[object Boolean]"]=uu["[object DataView]"]=uu["[object Date]"]=uu["[object Error]"]=uu["[object Function]"]=uu["[object Map]"]=uu["[object Number]"]=uu["[object Object]"]=uu["[object RegExp]"]=uu["[object Set]"]=uu["[object String]"]=uu["[object WeakMap]"]=!1;var cu=function(e){return pa(e)&&su(e.length)&&!!uu[da(e)]};var lu=function(e){return function(t){return e(t)}},fu=n(60),du=fu.a&&fu.a.isTypedArray,pu=du?lu(du):cu,hu=Object.prototype.hasOwnProperty;var gu=function(e,t){var n=ta(e),r=!n&&ru(e),o=!n&&!r&&Object(ou.a)(e),i=!n&&!r&&!o&&pu(e),a=n||r||o||i,s=a?Qs(e.length,String):[],u=s.length;for(var c in e)!t&&!hu.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||au(c,u))||s.push(c);return s},vu=Object.prototype;var mu=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vu)};var yu=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),bu=Object.prototype.hasOwnProperty;var wu=function(e){if(!mu(e))return yu(e);var t=[];for(var n in Object(e))bu.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Su=function(e){return null!=e&&su(e.length)&&!wa(e)};var Iu=function(e){return Su(e)?gu(e):wu(e)};var Ou=function(e){return Hs(e,Iu,Xs)},Eu=Object.prototype.hasOwnProperty;var xu=function(e,t,n,r,o,i){var a=1&n,s=Ou(e),u=s.length;if(u!=Ou(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:Eu.call(t,l)))return!1}var f=i.get(e),d=i.get(t);if(f&&d)return f==t&&d==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++c<u;){var g=e[l=s[c]],v=t[l];if(r)var m=a?r(v,g,l,t,e,i):r(g,v,l,e,t,i);if(!(void 0===m?g===v||o(g,v,n,r,i):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p},Cu=Ra(na.a,"DataView"),Tu=Ra(na.a,"Promise"),ju=Ra(na.a,"Set"),Au=Ra(na.a,"WeakMap"),Pu=xa(Cu),_u=xa(ts),Du=xa(Tu),ku=xa(ju),Ru=xa(Au),Mu=da;(Cu&&"[object DataView]"!=Mu(new Cu(new ArrayBuffer(1)))||ts&&"[object Map]"!=Mu(new ts)||Tu&&"[object Promise]"!=Mu(Tu.resolve())||ju&&"[object Set]"!=Mu(new ju)||Au&&"[object WeakMap]"!=Mu(new Au))&&(Mu=function(e){var t=da(e),n="[object Object]"==t?e.constructor:void 0,r=n?xa(n):"";if(r)switch(r){case Pu:return"[object DataView]";case _u:return"[object Map]";case Du:return"[object Promise]";case ku:return"[object Set]";case Ru:return"[object WeakMap]"}return t});var Nu=Mu,Lu=Object.prototype.hasOwnProperty;var Uu=function(e,t,n,r,o,i){var a=ta(e),s=ta(t),u=a?"[object Array]":Nu(e),c=s?"[object Array]":Nu(t),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d=u==c;if(d&&Object(ou.a)(e)){if(!Object(ou.a)(t))return!1;a=!0,l=!1}if(d&&!l)return i||(i=new _s),a||pu(e)?Us(e,t,n,r,o,i):zs(e,t,u,n,r,o,i);if(!(1&n)){var p=l&&Lu.call(e,"__wrapped__"),h=f&&Lu.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,v=h?t.value():t;return i||(i=new _s),o(g,v,n,r,i)}}return!!d&&(i||(i=new _s),xu(e,t,n,r,o,i))};var Fu=function e(t,n,r,o,i){return t===n||(null==t||null==n||!pa(t)&&!pa(n)?t!=t&&n!=n:Uu(t,n,r,o,e,i))};var Vu=function(e,t){return Fu(e,t)},Bu=[576,992],Gu={DESKTOP:{width:1280,height:800},PAD:{width:768,height:1024},PHONE:{width:414,height:896}},Wu=960,zu={};zu[Li.Large]=[{width:1024,height:768},{width:1280,height:800},{width:1280,height:1024},{width:1366,height:768},{width:1440,height:900},{width:1536,height:864},{width:1600,height:900},{width:1920,height:1080}],zu[Li.Medium]=[{width:601,height:962},{width:600,height:1024},{width:768,height:1024},{width:800,height:1280},{width:834,height:1112}],zu[Li.Small]=[{width:360,height:640},{width:360,height:720},{width:360,height:740},{width:375,height:667},{width:414,height:736}];var qu,Hu,Ju=zu,$u="themes/shared-theme/",Yu="selection",Ku="no_selection",Xu="output",Qu="repeat_context",Zu=["widgets/common/list/"],ec="current_page",tc=100,nc="exb_user_locale",rc=function(){return(rc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.Today="TODAY",e.Tomorrow="TOMORROW",e.Yesterday="YESTERDAY",e.ThisWeek="THIS_WEEK",e.ThisMonth="THIS_MONTH",e.ThisQuarter="THIS_QUARTER",e.ThisYear="THIS_YEAR"}(qu||(qu={})),function(e){e.Minute="MINUTE",e.Hour="HOUR",e.Day="DAY",e.Week="WEEK",e.Month="MONTH",e.Year="YEAR"}(Hu||(Hu={}));var oc={shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},ic={common:" ",de:" , ",el:" , ",fi:" klo ",fr:"  ",he:" , ",hi:" , ",it:" , ",nb:" , ",pl:" , ",ro:" , ",ru:" , ",vi:" , "},ac={date:"yyyy/MM/dd",time:"H:mm",dateTime:"yyyy/MM/dd H:mm"};function sc(e){var t=oc[e];return t||(console.warn("Invalid data format "+e),null)}function uc(e,t,n){if(!t&&!n)return ac.date;var r="";if(t){if(Ki.includes(t)){var o=sc(t);t=o.datePattern,n=n||o.timePattern}r=t}if(n){var i=e.locale||"en";r=r+(t?ic[i]||ic.common:"")+n}return r}function cc(e,t,n){if(!e)return"";"number"==typeof e&&(e=new Date(e));var r=sc(t);return lc(e,n,r.datePattern,r.timePattern)}function lc(e,t,n,r){if(!e)return"";if("number"==typeof e&&(e=new Date(e)),!n&&!r)return t.formatDate(e);var o=hc(e,n,t);if(r){var i=gc(e,r,t),a=t.locale||"en";o=o+(ic[a]||ic.common)+i}return o}var fc=function(e){var t=sc(e);if(t){var n=dc(t.datePattern),r=dc(t.timePattern);return rc(rc({},n),r)}},dc=function(e){var t={};if(e.includes("y")&&(t.year="numeric"),e.includes("MMMM")?t.month="long":e.includes("MMM")?t.month="short":e.includes("MM")?t.month="2-digit":e.includes("M")&&(t.month="numeric"),e.includes("d")&&(t.day="numeric"),e.includes("EEEE")&&(t.weekday="long"),0!==Object.keys(t).length)return t;console.warn("Invalid date pattern "+e)},pc=function(e,t){var n={};if(e.toLowerCase().includes("h")&&(n.hour="numeric"),e.includes("mm")&&(n.minute="2-digit"),e.includes("ss")&&(n.second="2-digit"),t&&e.includes("a")&&(n.hour12=!0),0!==Object.keys(n).length)return n;console.warn("Not support time pattern "+e)};function hc(e,t,n){if(!e)return null;var r=dc(t);return n.formatDate(e,r)}function gc(e,t,n){if(!e)return null;var r=pc(t,!1);return n.formatDate(e,r)}var vc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},mc=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function yc(e,t){return Ec(e,t)}function bc(e,t){return Ec(e,t)}function wc(){return"undefined"!=typeof window&&Boolean("ontouchstart"in window||window.navigator&&window.navigator.maxTouchPoints>0||window.navigator&&window.navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch)}function Sc(e){return e.width<=Bu[0]?Li.Small:e.width<=Bu[1]?Li.Medium:Li.Large}function Ic(e,t){var n=Es(e,"forBuilderAttributes.viewPortSize."+t);return n||(n=Es(Ju[t],"[1]")),n||{width:0,height:0}}function Oc(e){return e===Li.Small?Bu[0]:e===Li.Medium?Bu[1]:1e5}function Ec(e,t){switch(e){case"opened":switch(t){case"opened":return null;case"closed":return"onOpen";case"active":return"onDeActive"}case"closed":switch(t){case"opened":return"onClose";case"closed":return null;case"active":return["onDeActive","onClose"]}case"active":switch(t){case"opened":return"onDeActive";case"closed":return["onOpen","onActive"];case"active":return null}}}function xc(e,t){return vc(this,void 0,void 0,(function(){return mc(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var r;r=t?document.getElementById(t):document.getElementsByTagName("head")[0];var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),o.onload=function(){n(null)},r.appendChild(o)}))];case 1:return[2,n.sent()]}}))}))}function Cc(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){e.prototype[n]=t.prototype[n]}))}))}function Tc(e,t){return e.length===t.length&&(e=e.sort((function(e,t){return e>t?-1:1})),t=t.sort((function(e,t){return e>t?-1:1})),Vu(e,t))}var jc=/([A-Z])/g,Ac=/^ms-/;function Pc(e){return e.replace(jc,"-$1").toLowerCase().replace(Ac,"-ms-")}function _c(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t?t+=";"+Pc(n)+":"+r:t=Pc(n)+":"+r)}return t||""}function Dc(e,t,n){return void 0===t&&(t=1e3),void 0===n&&(n=100),vc(this,void 0,void 0,(function(){var r;return mc(this,(function(o){return r=(new Date).getDate(),[2,new Promise((function(o,i){!function o(i){var a=(new Date).getDate(),s=e();if(s)i(null,s);else{if(r+t>=a)return void i("Timeout",null);setTimeout((function(){o(i)}),n)}}((function(e,t){e?i(e):o(t)}))}))]}))}))}function kc(){return window.jimuConfig.isBuilder?"exb-"+(Jf().getState().appStateInBuilder.appId||Jf().getState().appStateInBuilder.appPath):"exb-"+(Jf().getState().appId||Jf().getState().appPath)}var Rc=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},Mc=function(){return Rc()+Rc()+"_"+Rc()+"_"+Rc()+"_"+Rc()+"_"+Rc()+Rc()+Rc()},Nc=function(e){return e.toString().includes(".")?e.toString().split(".")[1].length:0},Lc=function(e,t){void 0===t&&(t=xe([]));var n=new RegExp("^"+e+"\\_(\\d+)$"),r=-1;return t.forEach((function(e){var t=e.match(n);t&&(r=Math.max(r,parseInt(t[1],10)))})),e+"_"+(r+1)};function Uc(e,t,n){var r=/\$\{\w*\}/g,o=function(o){if("string"==typeof e[o]){var i=e[o].match(r);if(i&&i.length>0){var a=e[o];i.forEach((function(e){var r=e.substring(2,e.length-1);if("appResourceUrl"!==r){var o=t.formatMessage({id:r,defaultMessage:n&&n[r]});a=a.replace(e,o)}})),e[o]=a}}else"object"==typeof e[o]&&Uc(e[o],t,n)};for(var i in e)o(i);return e}function Fc(){return vc(this,void 0,void 0,(function(){return mc(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve(!1)];case 1:return[2,e.sent()]}}))}))}function Vc(){document.getElementById("loading").style.display="none",document.getElementById("app").style.display="block"}var Bc=function(e){if(null==e?void 0:e.format){if(e.type===Ui.Date)return fc(e.format.dateFormat);if(e.type===Ui.Number){var t=e.format.places,n=e.format.digitSeparator,r={style:"decimal",notation:"standard"};return"number"==typeof t&&(r.minimumFractionDigits=t,r.maximumFractionDigits=t),"boolean"==typeof n&&(r.useGrouping=n),r}}};function Gc(e){var t={props:null,result:null};return function(n){if("object"!=typeof n)return console.error("Memorize object param only."),n;if(Object.keys(n).find((function(e){var r;return n[e]!==(null===(r=t.props)||void 0===r?void 0:r[e])}))){var r=e.call(this,n);return t.props=n,t.result=r,r}return t.result}}function Wc(e){try{return localStorage.getItem(e)}catch(e){return console.error("Read Local storage error.",e),null}}function zc(e,t){try{localStorage.setItem(e,t)}catch(e){console.error("Set Local storage error.",e)}}function qc(e){try{return sessionStorage.getItem(e)}catch(e){return console.error("Read session storage error.",e),null}}function Hc(e,t){try{sessionStorage.setItem(e,t)}catch(e){console.error("Set session storage error.",e)}}function Jc(e){try{localStorage.removeItem(e)}catch(e){console.error("Remove from Local storage error.",e)}}function $c(e){try{sessionStorage.removeItem(e)}catch(e){console.error("Remove from session storage error.",e)}}var Yc,Kc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Xc=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Qc(e){var t=window.SystemJS.get(tl(e));return t?t.__useDefault?t.default:t:null}function Zc(e,t){return Kc(this,void 0,void 0,(function(){var n,r;return Xc(this,(function(o){return n=(window._cachedModules||{})[e],r=!!t&&!!n&&t.every((function(e){return e in n})),[2,Promise.resolve(r?n:window.SystemJS.import(e)).then((function(e){return e=e.__useDefault?e.default:e})).catch((function(e){console.error("Load module error.",e),Fc().then((function(e){e&&Jf().dispatch(_p(!0))}))}))]}))}))}function el(e){return Kc(this,void 0,void 0,(function(){var t=this;return Xc(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return Kc(t,void 0,void 0,(function(){return Xc(this,(function(t){switch(t.label){case 0:return[4,Zc(e)];case 1:return[2,t.sent()]}}))}))})))];case 1:return[2,n.sent()]}}))}))}function tl(e){return window.SystemJS.resolve(e)}function nl(e){var t=tl(e);return/^file:/.test(t)?t:t.substring((window.location.protocol+"//"+window.location.host).length,t.length)}function rl(){return Qc("jimu-for-builder")}function ol(e){window.SystemJS.delete(tl(e))}!function(e){e.AppConfigProcessor="APP_CONFIG_PROCESSOR",e.WidgetClassWrapper="WIDGET_CLASS_WRAPPER",e.AppConfigService="APP_CONFIG_SERVICE",e.ReduxStore="REDUX_STORE",e.DependencyDefine="DEPENDENCY_DEFINE",e.DataSourceFactoryUri="DATA_SOURCE_FACTORY_URI",e.ContextTool="CONTEXT_TOOL",e.LayoutTransformer="LAYOUT_TRANSFORMER"}(Yc||(Yc={}));var il,al,sl=[Yc.ReduxStore,Yc.DataSourceFactoryUri,Yc.DependencyDefine,Yc.ContextTool,Yc.LayoutTransformer],ul=function(){},cl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ll=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},fl=function(){function e(){this.extensions={},this.extensionClasses={}}return e.getInstance=function(){return e.instance||(e.instance=new e,window._extensionManager=e.instance),e.instance},e.prototype.getExtensions=function(e){return this.extensions[e]||[]},e.prototype.getAllExtensions=function(){var e=this,t=[];return Object.keys(this.extensions).forEach((function(n){e.extensions[n].forEach((function(e){t.push(e)}))})),t},e.prototype.registerExtension=function(e){if(this.getExtensionById(e.extension.id))console.log("Extension "+e.extension.id+" has been registered.");else{if(this.extensions[e.epName]){if(!sl.includes(e.epName))return;this.extensions[e.epName].push(e.extension),this.extensions[e.epName]=this.extensions[e.epName].sort((function(e,t){return e.index-t.index}))}else this.extensions[e.epName]=[e.extension];e.epName===Yc.ReduxStore&&Jf().dispatch(Yd(e.extension.id))}},e.prototype.destryAllExtensions=function(){var e=this;Object.keys(this.extensions).forEach((function(t){e.extensions[t].forEach((function(t){delete e.extensionClasses[t.name],t.destroy&&t.destroy()}))})),this.extensions={}},e.prototype.destryWidgetExtensions=function(e){var t=this;Object.keys(this.extensions).forEach((function(n){t.extensions[n].forEach((function(n){n.widgetId===e&&(delete t.extensionClasses[n.name],n.destroy&&n.destroy())})),t.extensions[n]=t.extensions[n].filter((function(t){return t.widgetId!==e}))}))},e.prototype.registerWidgetExtensions=function(e){return cl(this,void 0,void 0,(function(){var t,n=this;return ll(this,(function(r){return t=[],e.manifest.extensions&&e.manifest.extensions.forEach((function(r){(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||r.point!==Yc.ContextTool)&&t.push(n.registerWidgetExtension(e,r))})),[2,Promise.all(t)]}))}))},e.prototype.registerWidgetExtension=function(e,t){return cl(this,void 0,void 0,(function(){var n=this;return ll(this,(function(r){if(this.extensions[t.point]){if(!sl.includes(t.point))return[2,Promise.resolve()];if(this.extensions[t.point].filter((function(n){return n.name===e.manifest.name+"-"+t.name&&n.widgetId===e.id})).length>0)return[2,Promise.resolve()]}return[2,this.loadWidgetExtensionClass(e,t).then((function(r){var o=new r;o.name=e.manifest.name+"-"+t.name,o.widgetId=e.id,o.id=o.widgetId+"-"+t.name,o.label=e.manifest.i18nMessages["_ext_"+t.name+"_label"]||t.label,n.registerExtension({epName:t.point,extension:o})})).catch((function(t){return cl(n,void 0,void 0,(function(){return ll(this,(function(t){switch(t.label){case 0:return console.error("Register widget extension error.",e.label),[4,Promise.resolve()];case 1:return[2,t.sent()]}}))}))}))]}))}))},e.prototype.loadWidgetExtensionClass=function(e,t){return cl(this,void 0,void 0,(function(){var n,r;return ll(this,(function(o){switch(o.label){case 0:return n=e.manifest.name+"-"+t.name,this.extensionClasses[n]?[4,this.extensionClasses[n]]:[3,2];case 1:return[2,o.sent()];case 2:return r=e.uri+"dist/"+t.uri,this.extensionClasses[n]=Zc(r,["default"]).then((function(e){return e.default})),[2,this.extensionClasses[n]]}}))}))},e.prototype.getExtensionById=function(e){var t=this.getAllExtensions();for(var n in t)if(t[n].id===e)return t[n]},e}();function dl(e){var t="",n=e||"";return(n=yl(n))&&(t=n+"/sharing/rest/portals/self"),t}function pl(){var e=window.location.protocol+"//"+window.location.host+function(){var e=window.location.href.split("?")[0],t=e.indexOf("/home/");t<0&&(t=e.indexOf("/apps/"));var n=e.substring(e.indexOf(window.location.host)+window.location.host.length+1,t);"/"!==n&&(n="/"+n+"/");return n}();return e.substr(0,e.length-1)}function hl(e){return/\/$/.test(e)?e+"sharing/rest/":e+"/sharing/rest/"}function gl(e){var t=/\/$/.test(e)?"/sharing/rest/":"/sharing/rest";return e.substr(0,e.length-t.length)}function vl(e,t){var n=/^http(s?):\/\//gi,r=/^\/\//gi;return(e=yl(e).toLowerCase().replace(n,"").replace(r,""))===(t=yl(t).toLowerCase().replace(n,"").replace(r,""))}function ml(e){return Pf(e).includes(".arcgis.com")}function yl(e){var t=Pf(e);return""===t?"":ml(t)?Af(t,Yi.Https):Af(e=(e||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""),Yi.Https)}function bl(e){var t="",n=yl(e);return n&&(t=n+"/sharing/rest/content/items"),t}function wl(e,t){var n="",r=bl(e);return r&&t&&(n=r+"/"+t),n}function Sl(e){var t="",n=yl(e);return n&&(t=n+"/sharing/rest/community/users"),t}function Il(e,t){var n="",r=Sl(e);return e&&t&&(n=r+"/"+t),n}function Ol(e){var t="";return e&&(t=(e=yl(e))+"/sharing/rest/content"),t}function El(e,t,n){var r="",o="";return e&&t&&(r=Ol(e),o=n?r+"/users/"+t+"/"+n:r+"/users/"+t),o}function xl(e,t,n){var r="";return e&&t&&(r=El(e,t,n)+"/items"),r}function Cl(e,t,n,r){var o="";return e&&t&&(o=xl(e,t,r)+"/"+n+"/share"),o}function Tl(e){var t="",n=yl(e);return n&&(t=n+"/home/index.html"),t}function jl(e,t){var n="",r=yl(e);return r&&(n=r+"/home/webmap/viewer.html",n+=t?"?webmap="+t:"?useExisting=1"),n}function Al(e){var t=window.location.protocol,n=jf(e);return jf(e)?t!==n&&t===Yi.Https?Af(e,Yi.Https):e:Af(e,t)}function Pl(e){return e+"/sharing/proxy"}function _l(e){if(!e)return e;if(ml(e)){var t=Pf(e),n=jf(e),r=t.split("."),o=r[0];r.splice(0,1);var i=r.join("."),a=void 0;return"devext"===o||"mapsdevext.arcgis.com"===i?a="devext.arcgis.com":"qaext"===o||"mapsqa.arcgis.com"===i?a="qaext.arcgis.com":"www"!==o&&"maps.arcgis.com"!==i||(a="www.arcgis.com"),a=a&&(n?n+"//":"")+a}return e}!function(e){e.Unkown="UNKNOWN",e.Widget="WIDGET",e.Section="SECTION",e.ScreenGroup="SCREEN_GROUP"}(il||(il={})),function(e){e.FixedLayout="FIXED",e.FlowLayout="FLOW",e.GridLayout="GRID",e.ColumnLayout="COLUMN"}(al||(al={}));var Dl,kl,Rl,Ml,Nl,Ll,Ul,Fl,Vl,Bl,Gl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Wl=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function zl(){if(window.jimuConfig.packagesInAppFolder)return"./resources";var e=null,t=(e=window.jimuConfig.isBuilder?Jf().getState().appStateInBuilder:Jf().getState())&&e.appId;return window.jimuConfig.isDevEdition?window.location.origin+"/apps/"+t+"/resources":_l(Jf().getState().portalUrl)+"/sharing/rest/content/items/"+t+"/resources"}function ql(e,t){return Gl(this,void 0,void 0,(function(){function n(e){return a.test(e)||i.test(e)}function r(e){var n=e.obj,r=e.key,i=null;i=(i=t?e.value+"?token="+t:e.value).replace("${appResourceUrl}",o);n=e.obj,r=e.key;"number"==typeof e.i?n[r][e.i]=i:n[r]=i}var o,i,a;return Wl(this,(function(t){return o=zl(),i=new RegExp("^"+o),a=new RegExp("^\\$\\{appResourceUrl\\}+(.)"),[2,Jl(e,{matchFunction:n,matchHandle:r})]}))}))}function Hl(e){var t=zl(),n=new RegExp("^"+t),r=new RegExp("^(.)+?token=");return Jl(e,{matchFunction:function(e){return r.test(e)||n.test(e)},matchHandle:function(e){var n=e.obj,r=e.key,o=e.value.split("?")[0];o=o.replace(t,"${appResourceUrl}"),"number"==typeof e.i?n[r][e.i]=o:n[r]=o}}),e}function Jl(e,t){return Gl(this,void 0,void 0,(function(){function n(e){var t=e.obj,n=e.key,r={obj:t,key:n};return"number"==typeof e.i?(r.i=e.i,r.value=t[n][e.i]):r.value=t[n],r}function r(e){for(var t in e)"object"==typeof e[t]?Array.isArray(e[t])?i(e,t):r(e[t]):"string"==typeof e[t]&&o(e,t)}function o(e,r,o){"number"==typeof o?t.matchFunction(e[r][o])&&((u=t.matchHandle(n({obj:e,key:r,i:o})))&&"function"==typeof u.then?s.push(u):a.push(u),a.push(u)):t.matchFunction(e[r])&&((u=t.matchHandle(n({obj:e,key:r})))&&"function"==typeof u.then?s.push(u):a.push(u),a.push(u))}function i(e,t){for(var n=0;n<e[t].length;n++)"string"==typeof e[t][n]?o(e,t,n):"object"==typeof e[t][n]&&r(e[t][n])}var a,s,u,c=this;return Wl(this,(function(t){switch(t.label){case 0:return a=[],s=[],r(e),s.length>0?[2,Promise.all(s).then((function(){return Gl(c,void 0,void 0,(function(){return Wl(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve(e)];case 1:return[2,t.sent()]}}))}))})).catch((function(e){return Gl(this,void 0,void 0,(function(){return Wl(this,(function(e){switch(e.label){case 0:return[4,Promise.reject(null)];case 1:return[2,e.sent()]}}))}))}))]:[3,1];case 1:return[4,Promise.resolve(e)];case 2:return[2,t.sent()]}}))}))}function $l(e){var t={};return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?(t.isRemote=!0,t.folderUrl=e):(t.isRemote=!1,t.folderUrl=window.location.protocol+"//"+window.location.host+Sf()+e),t}function Yl(e){var t=xe(e).asMutable({deep:!0});void 0===e.properties&&(t.properties={});["hasVersionManager","supportInlineEditing","supportRepeat","hasBuilderSupportModule","hasEmbeddedLayout","lockChildren","flipIcon","coverLayoutBackground","canCrossLayoutBoundary","needActiveState","canConsumeDataAction"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!1)}));return["hasMainClass","hasConfig","hasSettingPage","hasConfigInSettingPage","passDataSourceToChildren","deactivateOtherWidgets"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!0)})),t}function Kl(e,t){t.icon=t.icon?t.icon:t.context.folderUrl+"icon.svg",t.label=t.label?t.label:Zl(e,"widget",t.manifest?t.manifest.i18nMessages._widgetLabel||t.manifest.label||t.manifest.name:"")}function Xl(e){e.widgets&&Object.keys(e.widgets).forEach((function(t){var n=e.widgets[t];n.layouts&&Object.keys(n.layouts).forEach((function(t){Object.keys(n.layouts[t]).forEach((function(r){var o,i=n.layouts[t][r];if(e.layouts[i]&&!e.layouts[i].label){var a=null===(o=n.manifest.layouts)||void 0===o?void 0:o.find((function(e){return e.name===t}));e.layouts[i].label=n.manifest.i18nMessages["_layout_"+t+"_label"]||(null==a?void 0:a.label)||(null==a?void 0:a.name)}}))}))}))}function Ql(e,t){var n=0,r="y"===t.charAt(t.length-1)?t.slice(0,t.length-1)+"ies":t+"s";return e[r]?(Object.keys(e[r]).forEach((function(e){var r=e.substring((t+"_").length,e.length);/^\d+$/.test(r)&&(n=Math.max(n,parseInt(r)))})),t+"_"+(n+1)):t+"_"+(n+1)}function Zl(e,t,n){var r,o=0,i=n.lastIndexOf(" "),a=n.substr(i+1);return/^\d+$/.test(a)?(o=Math.max(parseInt(a),o),r=n.substr(0,i)):r=n,e[t+"s"]?(Object.keys(e[t+"s"]).filter((function(n){var o=e[t+"s"][n].label;return o&&new RegExp("^"+r).test(o)})).forEach((function(n){var i=e[t+"s"][n].label,a=i.substring((r+" ").length,i.length);/^\d+$/.test(a)&&(o=Math.max(o,parseInt(a)))})),r+" "+(o+1)):n+" "+(o+1)}function ef(e){var t=[];return Object.keys(e.widgets).forEach((function(n){t.push(e.widgets[n])})),t}function tf(e,t,n){var r=[];return e.messageConfigs&&Object.entries(e.messageConfigs).forEach((function(e){e[0];var o=e[1];r=r.concat(o.actions&&o.actions.filter((function(e){return e.widgetId===t&&e.actionName===n})))})),r}function nf(e,t,n){return e.sections&&Object.keys(e.sections).some((function(r){var o=e.sections[r].views;return(null==o?void 0:o.includes(t))&&(null==o?void 0:o.includes(n))}))}function rf(e){(null==e?void 0:e.layouts)&&Object.keys(e.layouts).forEach((function(t){var n=e.layouts[t];return n.content&&Object.keys(n.content).forEach((function(e){isNaN(parseInt(e))?console.error("Layout item MUST be integer string"):n.content[e].id=e})),n.id=t,n}))}function of(e,t){var n,r,o,i,a=e.appConfig,s=t,u=Object.keys(a.widgets||{}).filter((function(e){return!s.widgets[e]}));if(e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.without.apply(e.widgetsRuntimeInfo,u)).set("widgetsState",e.widgetsState.without.apply(e.widgetsState,u)).set("widgetsMutableStateVersion",e.widgetsMutableStateVersion.without.apply(e.widgetsMutableStateVersion,u)),Object.keys(s.widgets||{}).filter((function(e){return!a.widgets[e]})).forEach((function(t){var n=s.widgets[t];e.widgetsClassStatus[n.uri]&&(e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0))})),Object.keys(a.views).filter((function(e){return!s.views[e]})).forEach((function(t){var n,r,o,i,s,u,c=Object.keys(a.sections||{}).find((function(e){return a.sections[e].views.includes(t)}));(null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[c])&&((null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[c].currentViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",c,"currentViewId"],null)),(null===(o=e.appRuntimeInfo.sectionNavInfos)||void 0===o?void 0:o[c].previousViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",c,"previousViewId"],null)),(null===(s=null===(i=e.appRuntimeInfo.sectionNavInfos)||void 0===i?void 0:i[c].visibleViews)||void 0===s?void 0:s.find((function(e){return e===t})))&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",c,"visibleViews"],null===(u=e.appRuntimeInfo.sectionNavInfos)||void 0===u?void 0:u[c].visibleViews.filter((function(e){return e!==t})))))})),Object.keys(a.sections||{}).filter((function(e){return!s.sections[e]})).forEach((function(t){var n;(null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[t])&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos"],e.appRuntimeInfo.sectionNavInfos.without(t)))})),e.appRuntimeInfo.currentPageId&&!s.pages[e.appRuntimeInfo.currentPageId]){var c=Object.keys(s.pages).find((function(e){return s.pages[e].isDefault}));e=e.setIn(["appRuntimeInfo","currentPageId"],c)}if(e.appRuntimeInfo.currentDialogId&&!s.dialogs[e.appRuntimeInfo.currentDialogId]&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],null)),e.appRuntimeInfo.clipboard){var l=e.appRuntimeInfo.clipboard,f=l.layoutId,d=l.layoutItemId;(null===(r=null===(n=s.layouts[f])||void 0===n?void 0:n.content)||void 0===r?void 0:r[d])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("clipboard")))}if(e.appRuntimeInfo.selection){var p=e.appRuntimeInfo.selection;f=p.layoutId,d=p.layoutItemId;(null===(i=null===(o=s.layouts[f])||void 0===o?void 0:o.content)||void 0===i?void 0:i[d])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("selection")))}return e=e.set("appConfig",s)}function af(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var i=null==e?void 0:e[t],a=null==e?void 0:e[n];return!(!(null==i?void 0:i.parent)||!(null==a?void 0:a.parent))&&i.parent.some((function(e){return a.parent.some((function(t){return(r||!t.isPending)&&(o||e.sizeMode===t.sizeMode)&&t.type===e.type&&t.id===e.id}))}))}function sf(e,t,n){var r;return null!==(r=e[t])&&void 0!==r?r:e[n]}function uf(e,t){var n,r,o,i;void 0===t&&(t=null);var a={};if(Object.keys(null!==(n=e.pages)&&void 0!==n?n:{}).forEach((function(n){var r=e.pages[n];if(r.layout)if(null!=t){var o=sf(r.layout,t,e.mainSizeMode);cf(e,t,a,o,"page",r.id)}else Object.keys(r.layout).forEach((function(t){cf(e,t,a,r.layout[t],"page",r.id)}))})),Object.keys(null!==(r=e.dialogs)&&void 0!==r?r:{}).forEach((function(n){var r=e.dialogs[n];if(null!=t){var o=sf(r.layout,t,e.mainSizeMode);cf(e,t,a,o,"dialog",r.id)}else Object.keys(r.layout).forEach((function(t){cf(e,t,a,r.layout[t],"dialog",r.id)}))})),null===(o=e.header)||void 0===o?void 0:o.layout)if(null!=t){var s=sf(e.header.layout,t,e.mainSizeMode);cf(e,t,a,s,"header","header")}else Object.keys(e.header.layout).forEach((function(t){cf(e,t,a,e.header.layout[t],"header","header")}));if(null===(i=e.footer)||void 0===i?void 0:i.layout)if(null!=t){var u=sf(e.footer.layout,t,e.mainSizeMode);cf(e,t,a,u,"footer","footer")}else Object.keys(e.footer.layout).forEach((function(t){cf(e,t,a,e.footer.layout[t],"footer","footer")}));return a}function cf(e,t,n,r,o,i){for(var a=[r],s=function(){var r=a.pop(),s=e.layouts[r];if(!s||!s.content)return"continue";Object.keys(s.content).forEach((function(r){var u,c,l,f,d,p,h=s.content[r];if(h.type===il.Widget&&null!=h.widgetId){var g=e.widgets[h.widgetId],v=(null===(c=null===(u=g.manifest)||void 0===u?void 0:u.dataActions)||void 0===c?void 0:c.length)>0,m=null!==(d=null===(f=null===(l=g.manifest)||void 0===l?void 0:l.properties)||void 0===f?void 0:f.canConsumeDataAction)&&void 0!==d&&d;if(v||m){var y=null!==(p=h.isPending)&&void 0!==p&&p;if(n[h.widgetId])n[h.widgetId].parent.find((function(e){return e.type===o&&e.id===i&&e.isPending===y&&e.sizeMode===t}))||n[h.widgetId].parent.push({type:o,id:i,isPending:y,sizeMode:t});else n[h.widgetId]={parent:[{type:o,id:i,isPending:y,sizeMode:t}]}}else g.layouts&&Object.keys(g.layouts).forEach((function(n){var r=sf(g.layouts[n],t,e.mainSizeMode);a.push(r)}))}else if(h.type===il.Section&&h.sectionId){e.sections[h.sectionId].views.forEach((function(n){var r=sf(e.views[n].layout,t,e.mainSizeMode);a.push(r)}))}else if(h.type===il.ScreenGroup&&h.screenGroupId){e.screenGroups[h.screenGroupId].screens.forEach((function(n){var r=e.screens[n],o=sf(r.main.layout,t,e.mainSizeMode);if(a.push(o),r.panel){var i=sf(r.panel.layout,t,e.mainSizeMode);a.push(i)}}))}}))};a.length>0;)s()}function lf(e){var t;return(null===(t=function(e){var t,n;if(!e)return null;var r=(null===(t=null===window||void 0===window?void 0:window.jimuConfig)||void 0===t?void 0:t.isBuilder)?Jf().getState().appStateInBuilder:Jf().getState(),o=null===(n=null==r?void 0:r.appConfig)||void 0===n?void 0:n.widgets;return o&&Object.values(o).find((function(t){var n;return null===(n=null==t?void 0:t.outputDataSources)||void 0===n?void 0:n.some((function(t){return t===e.mainDataSourceId}))}))||null}(e))||void 0===t?void 0:t.id)||null}function ff(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function df(e){return/(^http:)|(^https:)|(^\/\/)/.test(e)}function pf(e){var t={},n=e.data_id&&hf(e.data_id,(function(e){return e.split("+")}))||[],r=e.data_index&&hf(e.data_index,(function(t){var n=t.split("+"),r=[];return n.forEach((function(t){var n=t.split("-");if(1===n.length)r.push(parseInt(n[0]));else if(2===n.length)for(var o=parseInt(n[0]),i=parseInt(n[1]),a=o;a<=i;a++)r.push(a);else console.error("Bad URL format:",e.data_index)})),r}))||[],o=e.data_filter&&hf(e.data_filter,(function(e){return{where:e}}))||[],i=e.data_version&&hf(e.data_version,(function(e){return e}))||[];return n.concat(r,o,i).forEach((function(e){t[e.dsId]={}})),r.forEach((function(e){t[e.dsId].selectionType="index",t[e.dsId].selection=e.data})),n.forEach((function(e){t[e.dsId].selectionType="id",t[e.dsId].selection=e.data})),o.forEach((function(e){t[e.dsId].query=e.data})),i.forEach((function(e){t[e.dsId].gdbVersion=e.data})),t}function hf(e,t){return e.split(",").map((function(e){var n=e.split(":");return{dsId:n[0],data:t(n[1])}}))}function gf(e,t){if(!e.views)return{};var n=e.views.split(","),r={};return Object.keys(t.sections||{}).forEach((function(e){var o,i=null===(o=t.sections[e].views)||void 0===o?void 0:o.find((function(e){return n.includes(e)}));i&&(r[e]={currentViewId:i})})),r}function vf(e){if(e||(e=window.location),window.jimuConfig.useStructuralUrl)return mf(e.pathname);var t=Ee.parse(e.search);return{appId:t.id,pageId:t.page}}function mf(e){void 0===e&&(e=window.location.pathname);var t=e.substr(window.jimuConfig.rootPath.length),n={pageId:null,appId:null},r=t.split("/").filter((function(e){return e}));return""===t?n:1===r.length?(t.includes(".")||"page"===r[0]||(n.appId=r[0]),n):2===r.length?/^page\/page\//.test(t)?(n.pageId="page",n):/^page/.test(t)?(n.pageId=r[1],n):(n.appId=r[0],n):r.length>=3?(n.appId=r[0],n.pageId=r[2],n):(console.log("URL pattern is not correct.",e),n)}function yf(e){if(window.jimuConfig.useStructuralUrl){var t=mf();return{path:t.appId?""+window.jimuConfig.rootPath+t.appId+"/page/"+e+"/":window.jimuConfig.rootPath+"page/"+e+"/",qo:null}}return{path:window.jimuConfig.rootPath,qo:{page:e}}}function bf(e,t){e===ec&&(e=Jf().getState().appRuntimeInfo.currentPageId);var n,r=yf(e);return(n=t&&r.qo?Object.assign({},t,r.qo):t||r.qo)&&!Vu(n,{})?r.path+"?"+Ee.stringify(n):r.path}function wf(e){if(/\/$/.test(e))return e;if(!([".js",".css",".scss",".html"].filter((function(t){return new RegExp(t+"$").test(e)})).length>0))return e;var t=e.split("/");return t.pop(),t.join("/")}function Sf(){var e;return e=window.jimuConfig.packagesInAppFolder||window.jimuConfig.rootPath===window.jimuConfig.mountPath?window.jimuConfig.rootPath:window.jimuConfig.rootPath+"../",window.jimuConfig.buildNumber?e+"cdn/"+window.jimuConfig.buildNumber+"/":e}function If(){return window.location.protocol+"//"+window.location.host+Sf()}function Of(e,t){var n=ff(t);return"/"===n.pathname.charAt(0)?n:""===n.pathname?(n.pathname=e.pathname,n):"."===n.pathname.charAt(0)?(n.pathname=e.pathname+"/"+n.pathname.substr(2),n):(n.pathname=e.pathname+"/"+n.pathname,n)}function Ef(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function xf(e,t,n,r){var o;if(void 0===n&&(n=window.location),void 0===r&&(r=!1),"string"==typeof e)return df(e)?e:/^www./.test(e)?"//"+e:Ef(Of(n,e));if(!e.linkType)return Ef(e);var i,a=e.linkType,s=e,u=t,c=Jf().getState().appConfig;switch(a){case Wi.Page:return t=r?t:null==t?void 0:t.without("dlg"),bf(s.value,t);case Wi.Dialog:(null===(o=c.dialogs[s.value])||void 0===o?void 0:o.mode)===Ul.Fixed&&(u=u?u.set("dlg",s.value):{dlg:s.value}),i=Of(n,"?"+Ee.stringify(u));break;case Wi.View:var l=s.value.split(",")[0],f=s.value.split(",").slice(1);if(null==u?void 0:u.views){var d=u.views.split(",");f.forEach((function(e){(d=d.filter((function(t){return!nf(c,e,t)}))).push(e)})),u=u.set("views",d.join(","))}else u=u?u.set("views",f.join(",")):{views:f.join(",")};return bf(l,u);case Wi.WebAddress:var p=s.value;if(df(p))return p;if(/^www./.test(p))return"//"+p;case Wi.None:return null;default:console.error("Unknown type:",a)}return i?Ef(i):void 0}function Cf(e){if(!e)return{linkType:Wi.None};if(/^http/.test(e))return{linkType:Wi.WebAddress,value:e};var t=ff(e),n=vf(t).pageId,r=Ee.parse(t.search);return r.views?{linkType:Wi.View,value:n+","+r.views}:r.dlg?{linkType:Wi.Dialog,value:r.dlg}:{linkType:Wi.Page,value:n}}function Tf(e,t,n){if(!n)return e;var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n}function jf(e){var t;return 0===(e=e.toLowerCase()).indexOf("https://")?t="https:":0===e.indexOf("http://")&&(t="http:"),t}function Af(e,t){return jf(e)?e.replace(/^https?:\/\//,t+"//"):t+"//"+e}function Pf(e){return 0===(e=(e=(e||"").trim()).replace(/^(http(s?):?)\/\//gi,"")).indexOf("//")&&(e=e.slice(2)),e.split("/")[0].toLocaleLowerCase()}function _f(e){return(e=(e||"").trim()).split("?")[0]}function Df(e,t,n){var r=(e=(e||"").trim()).indexOf("#"),o="";return r>-1&&(o=e.substring(r),e=e.substring(0,r)),e=e.includes("?")?e+"&"+t+"="+n+o:e+"?"+t+"="+n+o}function kf(e){return new URL(e).href}function Rf(e){var t,n=e.appId,r=e.isTemplate,o=e.isArcGisOnlineTemplate,i=e.isPortalRequest,a=e.isDraft,s=e.defaultTemplateName,u=Jf().getState().portalUrl,c=r?"template":"experience",l=window.jimuConfig.isDevEdition&&i,f=ml(u),d=l&&f,p="";return a&&(p=window.jimuConfig.useStructuralUrl?"?draft=true":"&draft=true"),t=window.jimuConfig.useStructuralUrl?""+window.jimuConfig.mountPath+c+"/"+n+"/"+p:""+window.jimuConfig.mountPath+c+"/?id="+n+p,(o||d)&&(t=Mf()+"/"+c+"/"+n+"/"),l&&!d&&(t=u+"/apps/experiencebuilder/"+c+"?id="+n),s&&(t=window.jimuConfig.mountPath+"template/?config="+Sf()+"templates/"+s+".json"),t}function Mf(){var e=Jf().getState().portalUrl;return(null==e?void 0:e.endsWith("mapsdevext.arcgis.com"))||(null==e?void 0:e.endsWith("mapsdevext.arcgis.com/"))?"https://experiencedev.arcgis.com":(null==e?void 0:e.endsWith("mapsqa.arcgis.com"))||(null==e?void 0:e.endsWith("mapsqa.arcgis.com/"))?"https://experienceqa.arcgis.com":"https://experience.arcgis.com"}function Nf(){var e=Jf().getState().portalUrl;return(null==e?void 0:e.endsWith("mapsdevext.arcgis.com"))||(null==e?void 0:e.endsWith("mapsdevext.arcgis.com/"))?"https://devext.arcgis.com":(null==e?void 0:e.endsWith("mapsqa.arcgis.com"))||(null==e?void 0:e.endsWith("mapsqa.arcgis.com/"))?"https://qaext.arcgis.com":"https://www.arcgis.com"}function Lf(e,t){var n,r,o,i,a;if(!e)return a={appConfig:null,portalUrl:null,portalSelf:null,widgetsRuntimeInfo:xe({}),widgetsPreloadProps:xe({}),widgetsClassStatus:xe({}),dataSourcesPreloadData:{},appContext:null,appRuntimeInfo:xe({}),isNetworkOffLine:null,browserSizeMode:null,appPath:window.location.pathname,appId:null,appInfo:xe({}),appI18nMessages:xe({}),queryObject:null,dataSourcesInfo:xe({}),jimuMapViewsInfo:xe({}),mapWidgetsInfo:xe({}),widgetsState:xe({}),widgetsMutableStateVersion:xe({}),theme:xe({}),token:null,user:null,overlays:xe([]),userLocaleChanged:!1,hasPrivilege:!0,privilegeError:null},xe(a);if(t.type.includes("@@"))return e;switch(t.type){case id.InitStoreExtensionState:return function(e,t){var n=fl.getInstance().getExtensionById(t.extensionId),r=n.getStoreKey().split(".");if(e.getIn(r))return e;return e=e.setIn(r,n.getInitLocalState())}(e,t);case id.AppConfigLoaded:return function(e,t){var n=e.set("appConfig",t.appConfig);if(!n.appRuntimeInfo.currentPageId){var r=Object.keys(t.appConfig.pages).find((function(e){return t.appConfig.pages[e].isDefault}));n=n.setIn(["appRuntimeInfo","currentPageId"],r)}n.appConfig.dataSources&&Object.keys(n.appConfig.dataSources).forEach((function(e){n=n.setIn(["dataSourcesInfo",e,"instanceStatus"],ea.b.NotCreated)}));return n}(e,t);case id.SetPortalUrl:return e.set("portalUrl",t.portalUrl);case id.SetPortalInfo:return e=e.set("portalUrl",t.portalUrl),t.clientId&&(e=e.set("clientId",t.clientId)),e;case id.SetPortalSelf:return e.set("portalSelf",t.portalSelf);case id.AppConfigChanged:return Uf(e,t);case id.AppPathChanged:return function(e,t){var n;e=e.set("appPath",t.path);var r=mf(location.pathname).pageId;!r&&(null===(n=null==e?void 0:e.appConfig)||void 0===n?void 0:n.pages)&&(r=e.appConfig&&Object.keys(e.appConfig.pages).find((function(t){return e.appConfig.pages[t].isDefault})));r&&(e=Ff(e=e.setIn(["appRuntimeInfo","currentPageId"],r),r));return e}(e,t);case id.AppInfoChanged:return e.set("appInfo",e.appInfo.merge(t.appInfo));case id.AppContextInit:return e.set("appContext",t.appContext);case id.AppIdChanged:return e.set("appId",t.appId);case id.I18nMessagesLoaded:return function(e,t){0;return e.set("appI18nMessages",e.appI18nMessages.merge(t.messages))}(e,t);case id.QueryObjectChanged:return function(e,t){var n,r,o,i=function(e){var t,n,r,o,i,a,s;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId)&&((null===(r=null===(n=e.appConfig.dialogs)||void 0===n?void 0:n[e.appRuntimeInfo.currentDialogId])||void 0===r?void 0:r.isSplash)||(null===(i=null===(o=e.appConfig.dialogs)||void 0===o?void 0:o[e.appRuntimeInfo.currentDialogId])||void 0===i?void 0:i.mode)===Ul.Anchored||(null===(s=null===(a=e.appConfig.pages)||void 0===a?void 0:a[e.appRuntimeInfo.currentPageId])||void 0===s?void 0:s.autoOpenDialogId)===e.appRuntimeInfo.currentDialogId)}(e=e.set("queryObject",xe(t.query)));if(t.query.dlg){if(!i&&t.query.dlg!==(null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.currentDialogId)&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],t.query.dlg)).appConfig){var a=null===(r=e.appConfig.dialogs)||void 0===r?void 0:r[t.query.dlg],s=(e.appRuntimeInfo.dialogInfos||xe({})).setIn([t.query.dlg,"canClose"],!(null==a?void 0:a.interactionType)||!(null==a?void 0:a.confirmBeforeClose)).setIn([t.query.dlg,"checked"],!1).setIn([t.query.dlg,"isClosed"],!1);e=e.setIn(["appRuntimeInfo","dialogInfos"],s)}}else i||(e=e.setIn(["appRuntimeInfo","currentDialogId"],null));if(t.query.views&&e.appConfig){var u=gf(t.query,e.appConfig);Object.keys(u).forEach((function(t){var n,r,o;if((null===(o=null===(r=null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.sectionNavInfos)||void 0===r?void 0:r[t])||void 0===o?void 0:o.currentViewId)!==u[t].currentViewId){var i=zf(e,t,u[t]);e=e.setIn(["appRuntimeInfo","sectionNavInfos",t],i)}}))}if(!window.jimuConfig.useStructuralUrl){var c=t.query.page;!c&&(null===(o=null==e?void 0:e.appConfig)||void 0===o?void 0:o.pages)&&(c=e.appConfig&&Object.keys(e.appConfig.pages).find((function(t){return e.appConfig.pages[t].isDefault}))),c&&c!==e.appRuntimeInfo.currentPageId&&(e=Ff(e=e.setIn(["appRuntimeInfo","currentPageId"],c),c))}return e}(e,t);case id.SetAppInBuilder:return e.set("appContext",e.appContext.merge({isInBuilder:!0}));case id.WidgetClassLoaded:return function(e,t){var n=e.appConfig.widgets||{},r=Object.keys(n).filter((function(e){return n[e].uri===t}));return e=e.setIn(["widgetsClassStatus",t],!0),r.forEach((function(t){e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0)})),e}(e,t.widgetUri);case id.WidgetConfigLoaded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config);case id.WidgetConfigUpgraded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config).setIn(["appConfig","widgets",t.widgetId,"version"],e.appConfig.widgets[t.widgetId].manifest.version);case id.OpenWidget:return Bf(e,t.widgetId);case id.OpenWidgets:return function(e,t){return t.forEach((function(t){e=Bf(e,t)})),e}(e,t.widgetIds);case id.CloseWidget:return Gf(e,t.widgetId);case id.CloseWidgets:return function(e,t){return t.forEach((function(t){e=Gf(e,t)})),e}(e,t.widgetIds);case id.ActivateWidget:return function(e,t){var n,r;if(!(null===(r=null===(n=e.appConfig.widgets[t])||void 0===n?void 0:n.manifest)||void 0===r?void 0:r.properties.needActiveState))return e;var o=Object.keys(e.widgetsRuntimeInfo).filter((function(t){return e.widgetsRuntimeInfo[t].state===Gi.Active}));e.appConfig.widgets[t].manifest.properties.deactivateOtherWidgets&&o.forEach((function(t){e=e.setIn(["widgetsRuntimeInfo",t,"state"],Gi.Opened)}));return e.setIn(["widgetsRuntimeInfo",t,"state"],Gi.Active)}(e,t.widgetId);case id.SetWidgetIsInlineEditingState:return t.isInlineEditing?(Object.keys(e.widgetsRuntimeInfo).forEach((function(t){e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!0)):e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!1);case id.SetWidgetPreloadProps:return e.setIn(["widgetsPreloadProps",t.widgetId],t.props);case id.SetDataSourcePreloadData:return e.setIn(["dataSourcesPreloadData",t.dataSourceId],t.data);case id.LayoutClassLoaded:return e.setIn(["isLayoutClassLoaded",t.layoutName],!0);case id.DataSourceInstanceStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"instanceStatus"],t.status);case id.DataSourceStatusChanged:return Vf(e,t.dataSourceId,"status",t.status,t.dataSourceManager);case id.DataSourceCountStatusChanged:return Vf(e,t.dataSourceId,"countStatus",t.countStatus,t.dataSourceManager);case id.DataSourceSaveStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"saveStatus"],t.saveStatus);case id.DataSourceVersionAdded:var s=e.dataSourcesInfo[t.dataSourceId]&&e.dataSourcesInfo[t.dataSourceId].version?e.dataSourcesInfo[t.dataSourceId].version:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"version"],s+1);case id.DataSourceSourceVersionAdded:var u=null!==(o=null===(r=null===(n=e.dataSourcesInfo)||void 0===n?void 0:n[t.dataSourceId])||void 0===r?void 0:r.sourceVersion)&&void 0!==o?o:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"sourceVersion"],u+1);case id.ChangeDataSourceGDBVersion:return e.setIn(["dataSourcesInfo",t.dataSourceId,"gdbVersion"],t.gdbVersion);case id.ClearDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.without(t.dataSourceId));case id.UpdateDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.set(t.dataSourceId,t.dataSourceInfo));case id.JimuMapViewAdded:case id.JimuMapViewUpdated:return e.setIn(["jimuMapViewsInfo",t.jimuMapViewId],t.jimuMapViewInfo);case id.JimuMapViewRemoved:var c;return c=e.jimuMapViewsInfo.without(t.jimuMapViewId),e.setIn(["jimuMapViewsInfo"],c);case id.RequestAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],t.autoControlWidgetId);case id.ReleaseAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],null);case id.MapWidgetInfoAdded:case id.MapWidgetInfoUpdated:return e.setIn(["mapWidgetsInfo",t.mapWidgetId],t.mapWidgetInfo);case id.MapWidgetInfoRemoved:var l;return l=e.mapWidgetsInfo.without(t.mapWidgetId),e.setIn(["mapWidgetsInfo"],l);case id.DataSourceSelectedIndexesChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],t.selectedIndexes).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],null);case id.DataSourceSelectedIdsChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],t.selectedIds).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],null);case id.SetDataNeedRefresh:return e.setIn(["dataSourcesInfo",t.dataSourceId,"needRefresh"],t.refresh);case id.UpdateWidgetQuery:return e.setIn(["dataSourcesInfo",t.dataSourceId,"widgetQueries",t.widgetId],t.query);case id.WidgetStatePropChange:return function(e,t){var n=t.propKey.split(".");return e.setIn(["widgetsState",t.widgetId].concat(n),t.value)}(e,t);case id.WidgetMutableStatePropChange:return function(e,t){var n,r,o=null!==(r=null===(n=e.widgetsMutableStateVersion[t.widgetId])||void 0===n?void 0:n[t.propKey])&&void 0!==r?r:0;return e.setIn(["widgetsMutableStateVersion",t.widgetId,t.propKey],++o)}(e,t);case id.SessionStart:return e.set("token",t.token);case id.UserSignIn:return e.set("user",xe(t.user));case id.UserSignOut:return e.merge({token:null,user:null});case id.BrowserSizeModeChanged:return e.set("browserSizeMode",t.browserSizeMode);case id.NetworkStatusChanged:return e.set("isNetworkOffLine",t.isOffLine);case id.CurrentPageChanged:return Ff(e=e.setIn(["appRuntimeInfo","currentPageId"],t.pageId),t.pageId);case id.CurrentDialogChanged:return(e=e.setIn(["appRuntimeInfo","currentDialogId"],t.dialogId)).setIn(["appRuntimeInfo","currentDialogId"],t.dialogId);case id.SelectionChanged:return Wf(e,t.selection);case id.AppModeChanged:return e.setIn(["appRuntimeInfo","appMode"],t.mode).setIn(["appRuntimeInfo","animationPreview"],null);case id.AppRuntimeInfoInit:return e.set("appRuntimeInfo",t.info);case id.UpdateStoreState:return t.state;case id.ThemeVariablesChanged:return e.set("theme",xe(t.theme));case id.ActivePagePartChanged:return e.setIn(["appRuntimeInfo","activePagePart"],t.part);case id.OpenOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e:e.set("overlays",e.overlays.concat([t.id]));case id.CloseOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e.set("overlays",e.overlays.filter((function(e){return e!==t.id}))):e;case id.ActiveOverlay:var f=null==e?void 0:e.overlays;return(null==f?void 0:f.includes(t.id))?(null==f?void 0:f.indexOf(t.id))===(null==f?void 0:f.length)-1?e:(f=(f=f.filter((function(e){return e!==t.id}))).concat([t.id]),e.set("overlays",f)):e;case id.SetIsBusy:return e.setIn(["appRuntimeInfo","isBusy"],t.isBusy).setIn(["appRuntimeInfo","loadingType"],t.loadingType);case id.ZoomScaleChanged:return e.setIn(["appRuntimeInfo","zoomScale"],t.zoomScale);case id.LayoutChanged:return Wf(Uf(e,{appConfig:t.appConfig,type:id.AppConfigChanged}),t.selection);case id.ClipboardChanged:return e.setIn(["appRuntimeInfo","clipboard"],t.item);case id.SectionNavInfoChanged:var d=zf(e,t.sectionId,t.navInfo),p=e;if(!(null===(i=e.queryObject)||void 0===i?void 0:i.views)||!e.queryObject.views.includes(d.currentViewId)){var h=e.queryObject.views?e.queryObject.views.split(","):[];(h=h.filter((function(n){return!e.appConfig.sections[t.sectionId].views.includes(n)}))).push(d.currentViewId),p=e.setIn(["queryObject","views"],h.join(","))}return p.setIn(["appRuntimeInfo","sectionNavInfos",t.sectionId],d);case id.ScreenGroupNavInfoChanged:return e.setIn(["appRuntimeInfo","screenGroupNavInfos",t.screenGroupId],{activeIndex:t.activeIndex,scrollIntoView:t.scrollIntoView});case id.DialogInfosChanged:return e.setIn(["appRuntimeInfo","dialogInfos"],t.dialogInfos);case id.SetupAnimationPreview:return e.setIn(["appRuntimeInfo","animationPreview"],t.data);case id.ClearAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview"));case id.SetHasNewVersion:return e.set("hasNewVersion",t.hasNew);case id.UserLocaleChanged:return e.set("userLocaleChanged",t.isChanged);case id.HasPrivilegeChanged:return e.set("hasPrivilege",!1).set("privilegeError",t.error);case id.ScreenPanelVisibleChange:return e.setIn(["appRuntimeInfo","screenPanelStates",t.screenId],t.visible);default:return function(e,t){for(var n=fl.getInstance().getExtensions(Yc.ReduxStore),r=0;r<n.length;r++){var o=n[r];if(o.getActions().includes(t.type)){var i=o.getStoreKey().split("."),a=e.getIn(i);return e.setIn(i,o.getReducer()(a,t,e))}}return e}(e,t)}}function Uf(e,t){return of(e,t.appConfig)}function Ff(e,t){var n;return n=e.appConfig&&e.appConfig.pages?e.appConfig.pages[t]:{},e.setIn(["appRuntimeInfo","activeLayout"],n.layout||null).setIn(["appRuntimeInfo","selection"],null)}function Vf(e,t,n,r,o){var i,a=e.setIn(["dataSourcesInfo",t,n],r),s=null==o?void 0:o.getDataSource(t);return(null===(i=null==s?void 0:s.getDataSourceJson())||void 0===i?void 0:i.isOutputFromWidget)&&(r!==ea.b.Unloaded&&r!==ea.b.NotReady||s.getAllDerivedDataSources().forEach((function(e){a=a.setIn(["dataSourcesInfo",e.id,n],r)}))),a}function Bf(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],Gi.Opened)}function Gf(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],Gi.Closed)}function Wf(e,t){var n,r;if(Object.keys(e.widgetsRuntimeInfo).forEach((function(t){e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),t){var o=t.layoutId,i=t.layoutItemId;if(!(null===(r=null===(n=e.appConfig.layouts[o])||void 0===n?void 0:n.content)||void 0===r?void 0:r[i]))return e=e.setIn(["appRuntimeInfo","selection"],null)}return e=e.setIn(["appRuntimeInfo","selection"],t)}function zf(e,t,n){var r,o,i,a,s,u,c,l;if((null===(r=n.visibleViews)||void 0===r?void 0:r.length)>0?(l=n.visibleViews,c=n.visibleViews.length):c=null!==(a=null==(l=null!==(i=null===(o=e.appConfig.sections[t])||void 0===o?void 0:o.views)&&void 0!==i?i:[])?void 0:l.length)&&void 0!==a?a:0,n.useProgress&&(!n.currentViewId||!n.previousViewId)){var f=function(e,t){var n,r,o=qf(e,0,1)*(t-1),i=Math.floor(o);r=i,r=function(e){return Math.abs(e-Math.round(e))<1e-7}(o)?Math.round(o)-1:i;return n=qf(n=r+1,0,t-1),{previousIndex:r=qf(r,0,t-1),progress:o,currentIndex:n}}(n.progress,c),d=f.currentIndex,p=f.previousIndex;n.currentViewId=l[d],n.previousViewId=l[p]}if(null==n.progress){d=l.indexOf(n.currentViewId);n.progress=l.length>1?d/(l.length-1):1}if(null==n.previousViewId){var h=null===(u=null===(s=e.appRuntimeInfo)||void 0===s?void 0:s.sectionNavInfos)||void 0===u?void 0:u[t];if(null==h?void 0:h.currentViewId)n.previousViewId=h.currentViewId;else{d=l.indexOf(n.currentViewId);n.previousViewId=d>0?l[d-1]:l[c-1]}}return n}function qf(e,t,n){return Math.max(t,Math.min(e,n))}function Hf(e){return Bl||(Bl=Q(Lf,e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),window._appStore=Bl,Bl)}function Jf(){return Bl}function $f(e,t){var n;function r(){var r=Bl.getState();t?(r=r.getIn(t))!==n&&(e(n,r),n=r):r!==n&&(e(n,r),n=r)}var o=Bl.subscribe(r);return r(),o}!function(e){e.Page="pages",e.View="views",e.ScreenPanel="screens_panel",e.ScreenMain="screens_main",e.Dialog="dialogs",e.Header="header",e.Footer="footer"}(Dl||(Dl={})),function(e){e.Page="pages",e.View="view",e.Widget="widget",e.Screen="screen",e.Dialog="dialog",e.Header="header",e.Footer="footer"}(kl||(kl={})),function(e){e.Fade="FADE",e.Cover="COVER",e.Push="PUSH"}(Rl||(Rl={})),function(e){e.Top="TOP",e.Upper="UPPER",e.Lower="LOWER",e.Bottom="BOTTOM"}(Ml||(Ml={})),function(e){e.Normal="NORMAL",e.Folder="FOLDER",e.Link="LINK"}(Nl||(Nl={})),function(e){e.FitWindow="FIT_WINDOW",e.AutoScroll="AUTO_SCROLL"}(Ll||(Ll={})),function(e){e.Fixed="FIXED",e.Anchored="ANCHORED"}(Ul||(Ul={})),function(e){e.Center="CENTER",e.Left="LEFT",e.Right="RIGHT",e.Top="TOP",e.Bottom="BOTTOM"}(Fl||(Fl={})),function(e){e.NoButton="NO_BUTTON",e.ButtonInline="BUTTON_INLINE",e.ButtonBlock="BUTTON_BLOCK"}(Vl||(Vl={}));var Yf=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)};var Kf=function(e){return e};var Xf=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Qf=Math.max;var Zf=function(e,t,n){return t=Qf(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Qf(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Xf(e,this,s)}};var ed=function(e){return function(){return e}},td=function(){try{var e=Ra(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),nd=td?function(e,t){return td(e,"toString",{configurable:!0,enumerable:!1,value:ed(t),writable:!0})}:Kf,rd=Date.now;var od=function(e){var t=0,n=0;return function(){var r=rd(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(nd);var id,ad=function(e,t){return od(Zf(e,t,Kf),e+"")},sd=ad((function(e,t){return Yf(e,1,t)})),ud=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},cd=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ld=function(){function e(){if(this.dataSources={},this.dataSourcesCreatePromise={},this.dataSourceFactories={},window.jimuConfig.isBuilder)console.error("DataSourceManager should not be created in builder");else{$f(this.onStoreChange.bind(this),["appConfig","dataSources"])}}return e.getInstance=function(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._dataSourceManager:(e.instance||(e.instance=new e,window._dataSourceManager=e.instance),e.instance)},e.prototype.getDataSource=function(e){return this.dataSources[e]},e.prototype.getDataViewDataSource=function(e,t){return this.dataSources[this.getDataViewDataSourceId(e,t)]},e.prototype.getDataSources=function(){return this.dataSources},e.prototype.getDataSourcesAsArray=function(){var e=this;return Object.keys(this.dataSources).map((function(t){return e.dataSources[t]}))},e.prototype.setDataSource=function(e,t){this.dataSources[e]=t},e.prototype.destroyAllDataSources=function(){var e=this;Object.keys(this.dataSources).forEach((function(t){return e.destroyDataSource(t)})),this.dataSourcesCreatePromise={}},e.prototype.destroyDataSource=function(e){var t=this;this.dataSources[e]?(Jf().dispatch(Ld(e)),this.dataSources[e].getDataViews().forEach((function(e){return t.destroyDataSource(e.id)})),this.dataSources[e].getLocalDataSources().forEach((function(e){return t.destroyDataSource(e.id)})),this.getDataSourcesAsArray().forEach((function(n){n.getOriginDataSources().find((function(n){return n===t.dataSources[e]}))&&t.destroyDataSource(n.id)})),this.dataSources[e].destroy(),delete this.dataSources[e],delete this.dataSourcesCreatePromise[e]):this.dataSourcesCreatePromise[e]&&(Jf().dispatch(Ld(e)),delete this.dataSourcesCreatePromise[e])},e.prototype.getConfiguredDataSources=function(){var e=this;return Object.keys(this.dataSources).filter((function(t){return!e.dataSources[t].getDataSourceJson().isOutputFromWidget})).map((function(t){return e.getDataSource(t)}))},e.prototype.getWidgetGeneratedDataSources=function(){var e=this,t={},n=this.getAppConfig();return Object.keys(n.widgets).filter((function(e){return n.widgets[e].outputDataSources})).map((function(r){t[r]=n.widgets[r].outputDataSources.asMutable().map((function(t){return e.getDataSource(t)}))})),t},e.prototype.createAllDataSources=function(){return ud(this,void 0,void 0,(function(){var e,t,n=this;return cd(this,(function(r){return e=this.getAppConfig()&&this.getAppConfig().dataSources,t=[],e&&Object.keys(e).forEach((function(e){n.dataSources[e]||t.push(n.createDataSource(e).then((function(e){return ud(n,void 0,void 0,(function(){return cd(this,(function(t){switch(t.label){case 0:return[4,this.createDataViews(e).then((function(){return e}))];case 1:return[2,t.sent()]}}))}))})).catch((function(t){console.error("Create data source failed",e,t),Promise.resolve(null)})))})),[2,Promise.all(t)]}))}))},e.prototype.createDataViews=function(e){return ud(this,void 0,void 0,(function(){var t=this;return cd(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.getDataSourceJson().dataViews&&Object.keys(e.getDataSourceJson().dataViews).map((function(n){return ud(t,void 0,void 0,(function(){return cd(this,(function(t){switch(t.label){case 0:return[4,this.createDataSource(e.id,n)];case 1:return[2,t.sent()]}}))}))}))||[])];case 1:return[2,n.sent()]}}))}))},e.prototype.createDataSource=function(e,t,n){var r;return ud(this,void 0,void 0,(function(){var o,i,a,s,u,c,l=this;return cd(this,(function(f){switch(f.label){case 0:if("string"==typeof e){if(!(a=this.getAppConfig().dataSources[e]))throw Error("Can not create data source."+e);o={dataSourceJson:a,dataSourceManager:this,id:i=e}}else e.dataSourceJson||e.belongToDataSource?(i=(o=e).dataSourceJson?o.dataSourceJson.id:o.belongToDataSource.getMainDataSource().id,o.dataViewId&&(t=o.dataViewId,delete o.dataViewId),o.localId&&(n=o.localId,delete o.localId),o.dataSourceManager=this,o.id=i):(i=(a=e).id,o={dataSourceJson:a,dataSourceManager:this,id:i});return s=function(e){return ud(l,void 0,void 0,(function(){return cd(this,(function(t){switch(t.label){case 0:return this.dataSourcesCreatePromise[e]?[4,this.dataSourcesCreatePromise[e]]:[3,2];case 1:return[2,t.sent()];case 2:return[4,this.createDataSource(e)];case 3:return[2,t.sent()]}}))}))},u=function(e,t){return ud(l,void 0,void 0,(function(){var n,r=this;return cd(this,(function(o){switch(o.label){case 0:return n=this.getDataViewDataSourceId(e,t),this.getDataSource(n)?[4,Promise.resolve(this.getDataSource(n))]:[3,2];case 1:return[2,o.sent()];case 2:return this.dataSourcesCreatePromise[e]=s(i),[4,this.dataSourcesCreatePromise[e].then((function(e){return r.createDataView(e,t)}))];case 3:return[2,o.sent()]}}))}))},t&&n?(c=this.getDataViewDataSourceId(i,t),this.getLocalDataSourceId(c,n),[2,u(i,t).then((function(e){return l.createLocalDataSource(e,n)}))]):t?[2,u(i,t)]:n?(this.dataSourcesCreatePromise[i]=s(i),[2,this.dataSourcesCreatePromise[i].then((function(e){return l.createLocalDataSource(e,n)}))]):this.dataSourcesCreatePromise[i]?[2,this.dataSourcesCreatePromise[i]]:((null===(r=Jf().getState().dataSourcesInfo[i])||void 0===r?void 0:r.instanceStatus)!==ea.b.NotCreated&&Jf().dispatch(Dd(i,ea.b.NotCreated)),this.dataSourcesCreatePromise[i]=this.createOriginDataSources(o.dataSourceJson).then((function(){return ud(l,void 0,void 0,(function(){return cd(this,(function(e){switch(e.label){case 0:return[4,this.createDataSourceObj(o)];case 1:return[2,e.sent()]}}))}))})).then((function(e){return ud(l,void 0,void 0,(function(){var t,n=this;return cd(this,(function(r){switch(r.label){case 0:return(t=Jf().getState().dataSourcesPreloadData[i])&&e.setJsonData(t.asMutable()),[4,e.ready().then((function(){return ud(n,void 0,void 0,(function(){return cd(this,(function(t){switch(t.label){case 0:return[4,e.fetchSchema()];case 1:return[2,t.sent()]}}))}))})).then((function(t){var r,o;n.initSchema(e,t),n.afterCreate(e);var i=[];if(!e.isDataSourceSet){var a=n.createDataViewObj(e,Yu);if(i=i.concat(a.ready()),!!(null===(o=null===(r=e.getDataSourceJson())||void 0===r?void 0:r.dataViews)||void 0===o?void 0:o[Ku])){var s=n.createDataViewObj(e,Ku);i=i.concat(s.ready())}}return e.getDataSourceJson().isOutputFromWidget&&n.createDataViewObj(e,Xu),Promise.allSettled(i).then((function(){return e}))}))];case 1:return[2,r.sent()]}}))}))})).catch((function(t){return ud(l,void 0,void 0,(function(){return cd(this,(function(n){switch(n.label){case 0:return console.error("Create datasource error.",e,t),Jf().dispatch(Dd(i,ea.b.CreateError)),[4,Promise.reject(new ea.a(i,t))];case 1:return[2,n.sent()]}}))}))})),[4,this.dataSourcesCreatePromise[o.dataSourceJson.id]]);case 1:return[2,f.sent()]}}))}))},e.prototype.createDataView=function(e,t){var n=this.getDataViewDataSourceId(e.id,t);return this.getDataSource(n)?this.getDataSource(n):this.createDataViewObj(e,t)},e.prototype.createLocalDataSource=function(e,t){var n=this.getLocalDataSourceId(e.id,t);return this.getDataSource(n)?this.getDataSource(n):this.createLocalDataSourceObj(e,t)},e.prototype.afterCreate=function(e){this.dataSources[e.id]=e,Jf().dispatch(Dd(e.id,ea.b.Created));var t=e.getMainDataSource().id;if(e.id!==t&&e.dataViewId!==Yu&&e.dataViewId!==Ku){var n=e.getMainDataSource().getSelectedRecordIds();n&&n.length>0&&e.setSelectedRecordIdsToInfo(n,e.getMainDataSource())}},e.prototype.getDataViewDataSourceId=function(e,t){return e+"-"+t},e.prototype.getLocalDataSourceId=function(e,t){return e+"-"+t},e.prototype.createDataSourceByUseDataSource=function(e,t){return ud(this,void 0,void 0,(function(){var n,r=this;return cd(this,(function(o){switch(o.label){case 0:return(n=this.getAppConfig().dataSources)[e.mainDataSourceId]?e.dataViewId?e.dataViewId===Yu||e.dataViewId===Xu||n[e.mainDataSourceId].dataViews[e.dataViewId]?[4,this.createDataSource(e.mainDataSourceId,e.dataViewId,t)]:(console.error("Can not find data view: "+e.mainDataSourceId+", "+e.dataViewId),[2,Promise.reject(new ea.a(e.dataSourceId,"Can not find data source."))]):[3,2]:[3,5];case 1:return[2,o.sent()];case 2:return[4,this.createDataSource(e.mainDataSourceId,null,t)];case 3:return[2,o.sent()];case 4:return[3,8];case 5:return n[e.rootDataSourceId]?[4,this.createDataSource(e.rootDataSourceId).then((function(n){var o=r.getDataSource(e.mainDataSourceId);return o?e.dataViewId?e.dataViewId===Yu||o.getDataSourceJson().dataViews[e.dataViewId]?r.createDataSource(o.getDataSourceJson(),e.dataViewId,t):(console.error("Can not find data view: "+e.mainDataSourceId+", "+e.dataViewId),Promise.reject(new ea.a(e.dataSourceId,"Can not find data source."))):t?r.createDataSource(o.getDataSourceJson(),null,t):o:(console.error("Can not find data source:",e.dataSourceId),Promise.reject(new ea.a(e.dataSourceId,"Can not find data source.")))}))]:[3,7];case 6:return[2,o.sent()];case 7:return console.error("Can not find data source:",e.dataSourceId),[2,Promise.reject(new ea.a(e.dataSourceId,"Can not find data source."))];case 8:return[2]}}))}))},e.prototype.createOriginDataSources=function(e){return ud(this,void 0,void 0,(function(){var t=this;return cd(this,(function(n){switch(n.label){case 0:return e.isOutputFromWidget&&e.originDataSources&&e.originDataSources.length>0?[4,Promise.all(e.originDataSources.asMutable().map((function(e){return ud(t,void 0,void 0,(function(){return cd(this,(function(t){switch(t.label){case 0:return[4,this.createDataSourceByUseDataSource(e)];case 1:return[2,t.sent()]}}))}))}))).then((function(){return ud(t,void 0,void 0,(function(){return cd(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:return[2,e.sent()]}}))}))}))]:[3,2];case 1:return[2,n.sent()];case 2:return[4,Promise.resolve()];case 3:return[2,n.sent()]}}))}))},e.prototype.initSchema=function(e,t){e.setFetchedSchema(t);var n=e.getDataSourceJson().schema;if(e.getDataSourceJson().isOutputFromWidget)if(e.getDataSourceJson().schema)e.setSchema(e.getDataSourceJson().schema);else if(e.getDataSourceJson().originDataSources&&e.getDataSourceJson().originDataSources.length>0)if(1===e.getDataSourceJson().originDataSources.length){var r=this.getDataSource(e.getDataSourceJson().originDataSources[0].dataSourceId);e.setSchema(r&&r.getSchema())}else console.error("Datasource created from more than one data source must save the schema in app config.");else console.error("Datasource without origin data source must save the schema in app config.");else{var o=this.mergeSchema(e,n,t);e.setSchema(o)}},e.prototype.mergeSchema=function(e,t,n){if(e.isDataSourceSet){if(!t)return n;var r=t;return Object.keys(n.childSchemas).forEach((function(o){if(e.getReversedConfigSchema().childSchemas[o])e.getReversedConfigSchema().childSchemas[o].forEach((function(t){r=r.setIn(["childSchemas",t.jimuChildId],e.getChildDataSource(t.jimuChildId).getSchema())}));else{if(t.childSchemas[o])return void console.warn("Layer existed, please re-map the data source.",e.id,o);r=r.setIn(["childSchemas",o],n.childSchemas[o])}})),Object.keys(t.childSchemas).forEach((function(e){var r=t.childSchemas[e].childId;n.childSchemas[r]||console.error("Used data is not found.",r)})),r}return this.mergeOneSchema(e,t,n)},e.prototype.mergeOneSchema=function(e,t,n){if(!t)return n;var r=t;return(null==n?void 0:n.fields)&&Object.keys(n.fields).forEach((function(o){if(e.getReversedConfigSchema().fields[o])e.getReversedConfigSchema().fields[o].forEach((function(e){r.fields[e.jimuName].alias||(r=r.setIn(["fields",e.jimuName,"alias"],n.fields[o].alias))}));else{if(t.fields[o])return void console.warn("Field name existed, please re-map the data source.",e.id,o);var i=n.fields[o];r=r.setIn(["fields",o],i)}})),(null==t?void 0:t.fields)&&Object.keys(t.fields).forEach((function(e){var r,o=t.fields[e].name;(null===(r=null==n?void 0:n.fields)||void 0===r?void 0:r[o])||console.error("Used field is not found.",o)})),r},e.prototype.getDataSourceFactory=function(e){return ud(this,void 0,void 0,(function(){var t,n,r=this;return cd(this,(function(o){switch(o.label){case 0:return(t=this.getDataSourceFactorySync(e))?[4,Promise.resolve(t)]:[3,2];case 1:return[2,o.sent()];case 2:return[4,Zc(n=this.getDataSourceFactoryUri(e),["default"]).then((function(o){try{t=new o.default,r.dataSourceFactories[n]=t}catch(t){throw console.error("Load data source factory error.",e,t),t}return t}))];case 3:return[2,o.sent()]}}))}))},e.prototype.getDataSourceFactoryUri=function(e){var t=fl.getInstance().getExtensions(Yc.DataSourceFactoryUri).filter((function(t){return t.getFactoryUri(e)}))[0];if(!t)throw console.error("Unknown data source type:"+e),Error("Unknown data source type:"+e);return t.getFactoryUri(e)},e.prototype.getDataSourceFactorySync=function(e){var t=this.getDataSourceFactoryUri(e),n=this.dataSourceFactories[t];if(n)return n},e.prototype.createDataSourceObj=function(e){return ud(this,void 0,void 0,(function(){var t=this;return cd(this,(function(n){switch(n.label){case 0:return[4,this.getDataSourceFactory(e.dataSourceJson.type).then((function(n){return ud(t,void 0,void 0,(function(){var t,r;return cd(this,(function(o){switch(o.label){case 0:return o.trys.push([0,1,,3]),t=n.createDataSource(e),[3,3];case 1:return r=o.sent(),console.error("Create data source error.",e.dataSourceJson,r),[4,Promise.reject(r)];case 2:return[2,o.sent()];case 3:return[4,Promise.resolve(t)];case 4:return[2,o.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.createDataViewObj=function(e,t){var n=this.getDataSourceFactoryUri(e.type),r=this.dataSourceFactories[n];if(!r)throw Error("Data source is not created");var o=null;try{o=r.createDataSource({id:this.getDataViewDataSourceId(e.id,t),dataViewId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(n){console.error("Create data view error.",e.id,t,n),Jf().dispatch(Dd(this.getDataViewDataSourceId(e.id,t),ea.b.CreateError))}return o},e.prototype.createLocalDataSourceObj=function(e,t){var n=this.getDataSourceFactoryUri(e.type),r=this.dataSourceFactories[n];if(!r)throw Error("Data source is not created");var o=null;try{o=r.createDataSource({id:this.getLocalDataSourceId(e.id,t),dataViewId:e.isDataView?e.dataViewId:null,localId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(n){console.error("Create local data source error.",e.id,t,n),Jf().dispatch(Dd(this.getLocalDataSourceId(e.id,t),ea.b.CreateError))}return o},e.prototype.getAppConfig=function(){return Jf().getState().appConfig},e.prototype.onStoreChange=function(e,t){var n=this;e&&t&&Object.keys(e).forEach((function(r){if(t[r]){if(t[r]&&e[r]){var o=t[r],i=n.getDataSource(r);i&&(i.type!==o.type?sd((function(){n.destroyDataSource(r),n.createDataSource(r).then((function(e){n.createDataViews(e)}))})):n.updateDataSourceByDataSourceJson(i,o))}}else sd((function(){n.destroyDataSource(r)}))})),window.jimuConfig.isInBuilder&&e&&t&&Object.keys(t).forEach((function(t){var r,o=Jf().getState();e[t]||(null===(r=o.dataSourcesInfo[t])||void 0===r?void 0:r.instanceStatus)||n.createDataSource(t).then((function(e){n.createDataViews(e)}))}))},e.prototype.updateDataSourceByDataSourceJson=function(e,t){var n,r,o=this;if(e.getDataSourceJson()!==t){if(e.getDataSourceJson().query!==(null==t?void 0:t.query)&&sd((function(){e.clearRecords(),e.clearSelection()})),e.getDataSourceJson().dataViews!==(null==t?void 0:t.dataViews)){var i=e.getDataSourceJson().dataViews,a=null==t?void 0:t.dataViews;i&&a&&Object.keys(i).forEach((function(n){if(a[n]){if(a[n]&&i[n]){var r=o.getDataViewDataSourceId(e.id,n),s=o.getDataSource(r);s&&(Vu(s.getDataSourceJson().dataViews[n],t.dataViews[n])||sd((function(){s.clearRecords(),s.clearSelection()})))}}else sd((function(){o.destroyDataSource(o.getDataViewDataSourceId(e.id,n))}))}))}e.getDataSourceJson().childDataSourceJsons!==(null==t?void 0:t.childDataSourceJsons)&&e.getChildDataSources().forEach((function(e){var n;o.updateDataSourceByDataSourceJson(e,null===(n=null==t?void 0:t.childDataSourceJsons)||void 0===n?void 0:n[e.jimuChildId])}));var s=void 0;if((null===(n=e.getDataSourceJson().originDataSources)||void 0===n?void 0:n.length)===(null===(r=null==t?void 0:t.originDataSources)||void 0===r?void 0:r.length))s=!e.getDataSourceJson().originDataSources||e.getDataSourceJson().originDataSources.every((function(e){return(null==t?void 0:t.originDataSources)&&(null==t?void 0:t.originDataSources.some((function(t){return t.dataSourceId===e.dataSourceId})))}));else s=!1;var u=e.getDataSourceJson().schema!==(null==t?void 0:t.schema)||!s||e.getDataSourceJson().itemId!==(null==t?void 0:t.itemId)||e.getDataSourceJson().portalUrl!==(null==t?void 0:t.portalUrl)||e.getDataSourceJson().url!==(null==t?void 0:t.url);e.setDataSourceJson(t),u&&(e.getDataSourceJson().isDataInDataSourceInstance?(e.clearSourceRecordsNotAddVersion(),this.initSchema(e,null)):(e.clearRecordsNotAddVersion(),e.fetchSchema().then((function(t){o.initSchema(e,t),e.addVersion()})))),sd((function(){e.addVersion()}))}},e}();function fd(e){return{type:id.AppConfigLoaded,appConfig:e}}function dd(e){return{type:id.AppConfigChanged,appConfig:e}}function pd(e){return{type:id.AppPathChanged,path:e}}function hd(e){return{type:id.AppInfoChanged,appInfo:e}}function gd(e){return{type:id.AppIdChanged,appId:e}}function vd(e){return{type:id.WidgetClassLoaded,widgetUri:e}}function md(e,t){return{type:id.WidgetConfigUpgraded,widgetId:e,config:t}}function yd(e,t){return{type:id.WidgetConfigLoaded,widgetId:e,config:t}}function bd(e){return{type:id.OpenWidget,widgetId:e}}function wd(e){return{type:id.OpenWidgets,widgetIds:e}}function Sd(e){return{type:id.CloseWidget,widgetId:e}}function Id(e){return{type:id.CloseWidgets,widgetIds:e}}function Od(e){return{type:id.ActivateWidget,widgetId:e}}function Ed(e){return{type:id.AppContextInit,appContext:e}}function xd(e,t){return{type:id.I18nMessagesLoaded,key:e,messages:t}}function Cd(e){return{type:id.QueryObjectChanged,query:e}}function Td(){return{type:id.SetAppInBuilder}}function jd(e){return{type:id.AppModeChanged,mode:e}}function Ad(e){return{type:id.LayoutClassLoaded,layoutName:e}}function Pd(e,t){var n,r=null===(n=ld.getInstance())||void 0===n?void 0:n.getDataSource(e);return r&&t===ea.b.NotReady&&(r.clearSourceRecordsNotAddVersion(),r.getAllDerivedDataSources().forEach((function(e){e.clearSourceRecordsNotAddVersion()}))),r&&t===ea.b.Unloaded&&(r.clearRecordsNotAddVersion(),r.getAllDerivedDataSources().forEach((function(e){e.clearRecordsNotAddVersion()}))),{type:id.DataSourceStatusChanged,dataSourceId:e,status:t,dataSourceManager:ld.getInstance()}}function _d(e,t){return{type:id.DataSourceCountStatusChanged,dataSourceId:e,countStatus:t,dataSourceManager:ld.getInstance()}}function Dd(e,t){return{type:id.DataSourceInstanceStatusChanged,dataSourceId:e,status:t}}function kd(e,t){return{type:id.DataSourceSaveStatusChanged,dataSourceId:e,saveStatus:t}}function Rd(e){return{type:id.DataSourceVersionAdded,dataSourceId:e}}function Md(e){return{type:id.DataSourceSourceVersionAdded,dataSourceId:e}}function Nd(e,t){return{type:id.ChangeDataSourceGDBVersion,dataSourceId:e,gdbVersion:t}}function Ld(e){return{type:id.ClearDataSourceInfo,dataSourceId:e}}function Ud(e,t){return{type:id.UpdateDataSourceInfo,dataSourceId:e,dataSourceInfo:t}}function Fd(e,t){return{type:id.SetDataNeedRefresh,dataSourceId:e,refresh:t}}function Vd(e,t,n){return{type:id.UpdateWidgetQuery,dataSourceId:e,widgetId:t,query:n}}function Bd(e,t){return{type:id.JimuMapViewAdded,jimuMapViewId:e,jimuMapViewInfo:t}}function Gd(e,t){return{type:id.JimuMapViewUpdated,jimuMapViewId:e,jimuMapViewInfo:t}}function Wd(e){return{type:id.JimuMapViewRemoved,jimuMapViewId:e}}function zd(e,t){return{type:id.RequestAutoControlMapWidget,mapWidgetId:e,autoControlWidgetId:t}}function qd(e){return{type:id.ReleaseAutoControlMapWidget,mapWidgetId:e}}function Hd(e,t){return{type:id.MapWidgetInfoAdded,mapWidgetId:e,mapWidgetInfo:t}}function Jd(e,t){return{type:id.MapWidgetInfoUpdated,mapWidgetId:e,mapWidgetInfo:t}}function $d(e){return{type:id.MapWidgetInfoRemoved,mapWidgetId:e}}function Yd(e){return{type:id.InitStoreExtensionState,extensionId:e}}function Kd(e,t,n){return{type:id.WidgetStatePropChange,widgetId:e,propKey:t,value:n}}function Xd(e,t){return{type:id.WidgetMutableStatePropChange,widgetId:e,propKey:t}}function Qd(e){return{type:id.SetPortalUrl,portalUrl:e}}function Zd(e,t){return{type:id.SetPortalInfo,portalUrl:e,clientId:t}}function ep(e,t){return{type:id.DataSourceSelectedIndexesChanged,dataSourceId:e,selectedIndexes:t}}function tp(e,t){return{type:id.DataSourceSelectedIdsChanged,dataSourceId:e,selectedIds:t}}function np(e){return{type:id.SessionStart,token:e}}function rp(e){return{type:id.UserSignIn,user:e}}function op(){return{type:id.UserSignOut}}function ip(e){var t=window.document&&window.document.documentElement;return t&&(t.classList.remove("size-mode-"+Li.Large),t.classList.remove("size-mode-"+Li.Medium),t.classList.remove("size-mode-"+Li.Small),t.classList.add("size-mode-"+e)),{type:id.BrowserSizeModeChanged,browserSizeMode:e}}function ap(e,t){return{type:id.SetWidgetIsInlineEditingState,widgetId:e,isInlineEditing:t}}function sp(e,t){return{type:id.SetWidgetPreloadProps,widgetId:e,props:t}}function up(e,t){return{type:id.SetDataSourcePreloadData,dataSourceId:e,data:t}}function cp(e){return{type:id.NetworkStatusChanged,isOffLine:e}}function lp(e){return{type:id.CurrentPageChanged,pageId:e}}function fp(e){return{type:id.CurrentDialogChanged,dialogId:e}}function dp(e){return{type:id.DialogInfosChanged,dialogInfos:e}}function pp(e){return{type:id.SelectionChanged,selection:e}}function hp(e){return{type:id.ClipboardChanged,item:e}}function gp(e){return{type:id.UpdateStoreState,state:e}}function vp(e){return{type:id.AppRuntimeInfoInit,info:e}}function mp(e){return{type:id.ThemeVariablesChanged,theme:e}}function yp(e){return{type:id.SetPortalSelf,portalSelf:e}}function bp(e){return{part:e,type:id.ActivePagePartChanged}}function wp(e){return{type:id.OpenOverlay,id:e}}function Sp(e){return{type:id.CloseOverlay,id:e}}function Ip(e){return{type:id.ActiveOverlay,id:e}}function Op(e){return{type:id.ZoomScaleChanged,zoomScale:e}}function Ep(e,t){return{type:id.SetIsBusy,isBusy:e,loadingType:t}}function xp(e,t){return{type:id.LayoutChanged,appConfig:e,selection:t}}function Cp(e,t){return{type:id.SectionNavInfoChanged,sectionId:e,navInfo:t}}function Tp(e,t,n){return void 0===n&&(n=!0),{type:id.ScreenGroupNavInfoChanged,screenGroupId:e,activeIndex:t,scrollIntoView:n}}function jp(e,t){return{type:id.ScreenPanelVisibleChange,screenId:e,visible:t}}function Ap(e){return{type:id.SetupAnimationPreview,data:e}}function Pp(){return{type:id.ClearAnimationPreview}}function _p(e){return{type:id.SetHasNewVersion,hasNew:e}}function Dp(e){return{type:id.UserLocaleChanged,isChanged:e}}function kp(e){return{type:id.HasPrivilegeChanged,error:e}}!function(e){e.InitStoreExtensionState="INIT_STORE_EXTENSION_STATE",e.AppConfigLoaded="APPCONFIG_LOADED",e.AppConfigChanged="APPCONFIG_CHANGED",e.ThemeVariablesChanged="THEME_VARIABLES_CHANGED",e.SetPortalUrl="SET_PORTAL_URL",e.SetPortalInfo="SET_PORTAL_INFO",e.SetPortalSelf="SET_PORTAL_SELF",e.WidgetClassLoaded="WIDGET_CLASS_LOADED",e.WidgetConfigLoaded="WIDGET_CONFIG_LOADED",e.WidgetConfigUpgraded="WIDGET_CONFIG_UPGRADED",e.OpenWidget="OPEN_WIDGET",e.OpenWidgets="OPEN_WIDGETS",e.CloseWidget="CLOSE_WIDGET",e.CloseWidgets="CLOSE_WIDGETS",e.SetWidgetIsInlineEditingState="SET_WIDGET_IS_INLINE_EDITING_STATE",e.SetWidgetPreloadProps="SET_WIDGET_PRELOAD_PROPS",e.ActivateWidget="ACTIVATE_WIDGET",e.SetAppInBuilder="SET_APP_IN_BUILDER",e.LayoutClassLoaded="LAYOUT_CLASS_LOADED",e.AppContextInit="APP_CONTEXT_INIT",e.I18nMessagesLoaded="I18N_MESSAGES_LOADED",e.QueryObjectChanged="QUERY_OBJECT_CHANGED",e.AppModeChanged="APP_MODE_CHANGED",e.SelectionChanged="SELECTION_CHANGED",e.AppRuntimeInfoInit="APP_RUNTIME_INFO_INIT",e.CurrentPageChanged="CURRENT_PAGE_CHANGED",e.CurrentDialogChanged="CURRENT_DIALOG_CHANGED",e.DialogInfosChanged="DIALOG_INFOS_CHANGED",e.ClipboardChanged="CLIPBOARD_CHANGED",e.AppPathChanged="APP_PATH_CHANGED",e.AppIdChanged="APP_ID_CHANGED",e.AppInfoChanged="APP_INFO_CHANGED",e.NetworkStatusChanged="NETWORK_STATUS_CHANGED",e.DataSourceStatusChanged="DATA_SOURCE_STATUS_CHANGED",e.DataSourceCountStatusChanged="DATA_SOURCE_COUNT_STATUS_CHANGED",e.DataSourceInstanceStatusChanged="DATA_SOURCE_INSTANCE_STATUS_CHANGED",e.DataSourceSaveStatusChanged="DATA_SOURCE_SAVE_STATUS_CHANGED",e.DataSourceVersionAdded="DATA_SOURCE_VERSION_ADDED",e.DataSourceSourceVersionAdded="DATA_SOURCE_SOURCE_VERSION_ADDED",e.DataSourceSelectedIndexesChanged="DATA_SOURCE_SELECTED_INDEXES_CHANGED",e.DataSourceSelectedIdsChanged="DATA_SOURCE_SELECTED_IDS_CHANGED",e.SetDataSourcePreloadData="SET_DATA_SOURCE_PRELOAD_DATA",e.SetDataNeedRefresh="SET_DATA_NEED_REFRESH",e.UpdateWidgetQuery="UPDATE_WIDGET_QUERY",e.ChangeDataSourceGDBVersion="CHANGE_DATA_SOURCE_GDB_VERSION",e.ClearDataSourceInfo="CLEARE_DATA_SOURCE_INFO",e.UpdateDataSourceInfo="UPDATE_DATA_SOURCE_INFO",e.JimuMapViewAdded="JIMU_MAPVIEW_ADDED",e.JimuMapViewRemoved="JIMU_MAPVIEW_REMOVED",e.JimuMapViewUpdated="JIMU_MAPVIEW_UPDATED",e.MapWidgetInfoAdded="MAP_WIDGET_INFO_ADDED",e.MapWidgetInfoRemoved="MAP_WIDGET_INFO_REMOVED",e.MapWidgetInfoUpdated="MAP_WIDGET_INFO_UPDATED",e.RequestAutoControlMapWidget="REQUEST_AUTO_CONTROL_MAP_WIDGET",e.ReleaseAutoControlMapWidget="RELEASE_AUTO_CONTROL_MAP_WIDGET",e.WidgetStatePropChange="WIDGET_STATE_PROP_CHANGE",e.WidgetMutableStatePropChange="WIDGET_MUTABLE_STATE_PROP_CHANGE",e.SessionStart="SESSION_START",e.UserSignIn="USER_SIGN_IN",e.UserSignOut="USER_SIGN_OUT",e.BrowserSizeModeChanged="BROWSER_SIZE_MODE_CHANGED",e.UpdateStoreState="UPDATE_STORE_STATE",e.ActivePagePartChanged="ACTIVE_PAGE_PART_CHANGED",e.OpenOverlay="OPEN_OVERLAY",e.CloseOverlay="CLOSE_OVERLAY",e.ActiveOverlay="ACTIVE_OVERLAY",e.SetIsBusy="SET_IS_BUSY",e.ZoomScaleChanged="ZOOM_SCALE_CHANGED",e.LayoutChanged="LAYOUT_CHANGED",e.SectionNavInfoChanged="SECTION_NAV_INFO_CHANGED",e.SetupAnimationPreview="SETUP_ANIMATION_PREVIEW",e.ClearAnimationPreview="CLEAR_ANIMATION_PREVIEW",e.SetHasNewVersion="SET_HAS_NEW_VERSION",e.ScreenGroupNavInfoChanged="SCREEN_GROUP_NAV_INFO_CHANGE",e.UserLocaleChanged="USER_LOCALE_CHANGED",e.HasPrivilegeChanged="HAS_PRIVILEGE_CHANGED",e.ScreenPanelVisibleChange="SCREEN_PANEL_VISIBLE_CHANGE"}(id||(id={}));var Rp,Mp=n(5),Np=n(70),Lp=n(136),Up=n(139),Fp=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Vp=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e.ArcGISJSSync="ARCGIS_JS",e.OtherWindowSync="OTHER_WINDOW",e.AddOrUpdate="ADD_OR_UPDATE",e.Remove="REMOVE"}(Rp||(Rp={}));var Bp=function(){function e(){var e=this;this._isMainSession=function(t){var n,r;if(!t)return!1;if(!e._isSessionExpired(t))return!1;var o=e.getSessionKeyFromUrl(t.portal);return!(!(null===(n=e._mainPortalInfo)||void 0===n?void 0:n.portalUrl)||o!==e.getSessionKeyFromUrl(null===(r=e._mainPortalInfo)||void 0===r?void 0:r.portalUrl))},this._processInvalidSignInSession=function(){e.removeAuthInfo(),e.clearSessions()},this.gotoLoginInPage=function(){var t;if(window.jimuConfig.isDevEdition)t=location.protocol+"//"+location.host+"/page/set-portalurl";else{if(window.jimuConfig.isInPortal)return void e.signIn(""+window.location.pathname+window.location.search,!1);t=location.protocol+"//"+location.host+"/page/landing"}0!==window.location.href.indexOf(t)&&(window.location.href=t)},this.handleAuthError=function(t,n){return void 0===n&&(n=!0),Fp(e,void 0,void 0,(function(){var e,r;return Vp(this,(function(o){switch(o.label){case 0:return e=t.options,!(t instanceof Mp.a&&e)||e.authentication&&498!==t.code&&"AUTHENTICATION_ERROR_CODE"!==t.code?[3,2]:(r=this.getSessionKeyFromUrl(t.url),this._sessions&&this._sessions[r]&&delete this._sessions[r],[4,this.signIn(window.location&&window.location.href,n,t.url)]);case 1:return[2,o.sent()];case 2:throw t}}))}))},this.onSessionRequestMessage=this.onSessionRequestMessage.bind(this)}return e.prototype.getMainSession=function(){var e;if(!this._sessions||!this._mainPortalInfo)return null;var t=this._sessions[this.getSessionKeyFromUrl(null===(e=this._mainPortalInfo)||void 0===e?void 0:e.portalUrl)];return this._isSessionExpired(t)?t:null},e.prototype.getSessions=function(){var e=this;if(!this._sessions)return[];var t={};return Object.keys(this._sessions).forEach((function(n){var r=e._sessions[n];e._isSessionExpired(r)&&(t[n]=r)})),this._sessions=t,Object.keys(this._sessions).map((function(t){return e._sessions[t]}))},e.prototype.clearSessions=function(){delete this._sessions},e.prototype._onSessionChanged=function(e){if(this._onSessionChangedCallbacks){var t=this.getSessions();this._onSessionChangedCallbacks.forEach((function(n){n(t,e)}))}},e.getInstance=function(){return e.instance||(e.instance=new e,window._sessionManager=e.instance,this.instance._isSigning=!1,this.instance._signInQueue=[],this.instance._onSessionChangedCallbacks=[]),e.instance},e.prototype.initSession=function(e){return void 0===e&&(e=this._mainPortalInfo),Fp(this,void 0,void 0,(function(){var t,n,r,o=this;return Vp(this,(function(i){switch(i.label){case 0:return this._mainPortalInfo=e,t=window.location.pathname,/^\/page\/set-portalurl/.test(t)||/^\/page\/landing/.test(t)?[4,Promise.resolve()]:[3,2];case 1:return[2,i.sent()];case 2:return n=Jf().getState().queryObject,(r=n["arcgis-auth-origin"])&&this.canReadSessionFromParent(window.location.origin)?[4,this.readSessionFromParent(r).then((function(e){if(e){var t=o.getSessionKeyFromUrl(e.portal);o._setSession(t,e)}}))]:[3,4];case 3:return[2,i.sent()];case 4:return window.addEventListener("message",this.onSessionRequestMessage,!1),window.jimuConfig.isDevEdition?(this.initSessionFromStorage(),[4,Promise.resolve()]):[3,6];case 5:return[2,i.sent()];case 6:return[4,this.initSessionFromCookieOrStorage(e)];case 7:return[2,i.sent()]}}))}))},e.prototype.initSessionFromStorage=function(){var e=this.getSessionFromStorage();if(e){var t=this.getSessionKeyFromUrl(e.portal);this._setSession(t,e)}else(window.jimuConfig.isSite||window.jimuConfig.isBuilder)&&this.gotoLoginInPage()},e.prototype.initSessionFromCookieOrStorage=function(e){return Fp(this,void 0,void 0,(function(){var t,n,r,o,i;return Vp(this,(function(a){switch(a.label){case 0:return jf(t=hl(e.portalUrl))||(t=Af(t,Yi.Https)),[4,this.isValidTokenFromStorage(e.portalUrl)];case 1:return n=a.sent(),[4,Object(Np.b)(null==e?void 0:e.clientId,t,t).then((function(e){return e})).catch((function(){return null}))];case 2:return r=a.sent(),(o=this.getSessionFromStorage())?(i=this.getSessionKeyFromUrl(o.portal),n&&r?o.username===r.username?this._setSession(i,o):this.setSesssionByPlatformSelfResponse(r,e):!n&&r?this.setSesssionByPlatformSelfResponse(r,e):n&&!r&&(!ml(window.location.host)||this.readCookie("esri_locale"))?this._setSession(i,o):this.failedToInitSession()):r?this.setSesssionByPlatformSelfResponse(r,e):this.failedToInitSession(),[2]}}))}))},e.prototype.failedToInitSession=function(){if(this._processInvalidSignInSession(),window.jimuConfig.isSite||window.jimuConfig.isBuilder)throw this.gotoLoginInPage(),new Error("Should signIn")},e.prototype.setSesssionByPlatformSelfResponse=function(e,t){var n=hl(t.portalUrl);jf(n)||(n=Af(n,Yi.Https));var r={expires:(new Date).getTime()+1e3*e.expires_in,server:n,ssl:!0,token:e.token,userId:e.username},o=Lp.a.fromCredential(r),i=o.toJSON();i.clientId=t.clientId,o=new Lp.a(i);var a=this.getSessionKeyFromUrl(o.portal);this._setSession(a,o)},e.prototype.isValidTokenFromStorage=function(e){return Fp(this,void 0,void 0,(function(){var t,n;return Vp(this,(function(r){switch(r.label){case 0:return(null==(t=this.getSessionFromStorage())?void 0:t.token)?(n=e+"/sharing/rest",[4,Object(Mp.d)(n,{authentication:t,httpMethod:"GET"}).then((function(e){return!!(null==e?void 0:e.currentVersion)})).catch((function(e){return console.warn(null==e?void 0:e.message),!1}))]):[3,2];case 1:return[2,r.sent()];case 2:return[2,Promise.resolve(!1)]}}))}))},e.prototype.getUserInfo=function(){return Fp(this,void 0,void 0,(function(){var e=this;return Vp(this,(function(t){switch(t.label){case 0:return Jf().getState().user?[4,Promise.resolve(Jf().getState().user.asMutable({deep:!0}))]:[3,2];case 1:return[2,t.sent()];case 2:return this.getMainSession()?[4,this.getMainSession().getUser().then((function(t){return e.afterGetUserInfo(t),t}))]:[3,4];case 3:return[2,t.sent()];case 4:return[2,Promise.resolve(null)]}}))}))},e.prototype.afterGetUserInfo=function(e){Jf().dispatch(rp(e));var t=e.culture||"en-us";Wc(nc)?Wc(nc)!==t&&(zc(nc,t),Jf().dispatch(Dp(!0))):zc(nc,t)},e.prototype.setClientId=function(e){var t;if(this._mainPortalInfo.clientId=e,this.getMainSession()){var n=this.getMainSession().toJSON();n.clientId=e,this._setSession(this.getSessionKeyFromUrl(null===(t=this._mainPortalInfo)||void 0===t?void 0:t.portalUrl),new Lp.a(n))}},e.prototype.setMainPortalUrl=function(e){this._mainPortalInfo.portalUrl=e},e.prototype.setMainPortal=function(e){this._mainPortalInfo=e},e.prototype.getMainPortal=function(){return this._mainPortalInfo},e.prototype.getTrustedServers=function(){var e,t=Jf().getState(),n=null===(e=null==t?void 0:t.portalSelf)||void 0===e?void 0:e.authorizedCrossOriginDomains;return!this._trustedServers&&n&&(this._trustedServers=n.map((function(e){return Af(Pf(e),Yi.Https)}))),this._trustedServers||[]},e.prototype.isTrustedServer=function(e){return this.getTrustedServers().some((function(t){return e.includes(t)}))},e.prototype.removeSession=function(e){if(!e)return!1;var t=this.getSessionKeyFromUrl(e.portal);return!!this._removeSessionByKey(t)&&(this._syncToOtherWindowSessionManager(),this._onSessionChanged(Rp.Remove),!0)},e.prototype._removeSessionByKey=function(e){return!!e&&(this._sessions&&this._sessions[e]&&delete this._sessions[e],!0)},e.prototype.addOrReplaceSession=function(e){return!!e&&(!!this._addOrReplaceSession(e)&&(this._syncToOtherWindowSessionManager(),this._onSessionChanged(Rp.AddOrUpdate),!0))},e.prototype._addOrReplaceSession=function(e){if(!e)return!1;var t=this.getSessionKeyFromUrl(e.portal);return!!t&&(this._setSession(t,e),!0)},e.prototype._setSession=function(e,t){var n;this._isSessionExpired(t)&&(this._sessions||(this._sessions={}),this._sessions[e]=t,e===this.getSessionKeyFromUrl(null===(n=this._mainPortalInfo)||void 0===n?void 0:n.portalUrl)&&(Jf().dispatch(np(t.token)),Jf().getState().user||this.getUserInfo(),this.writeAuthInfo(t)))},e.prototype.getSessionByUrl=function(e){if(this._sessions){var t=this.getSessionKeyFromUrl(e),n=this._sessions[t];if(!n&&ml(e)&&!this._getStandardAGOLSessionKey(e)){var r=void 0,o=void 0,i=Pf(e).split(".");r=i[0],i.splice(0,1),o=i.join(".");var a="www.arcgis.com";r.indexOf("dev")>-1||o.indexOf("dev")>-1?a="devext.arcgis.com":(r.indexOf("qa")>-1||o.indexOf("qa")>-1)&&(a="qaext.arcgis.com"),n=this._sessions[a]}return n}},e.prototype.getSessionKeyFromUrl=function(e){var t,n;if(!e)return null;if(ml(e))return this._getStandardAGOLSessionKey(e);var r=this._getPortalUrlInfo(e),o=r.customBaseUrl,i=r.urlKey;if(null===(t=this._mainPortalInfo)||void 0===t?void 0:t.portalUrl){var a=this._getPortalUrlInfo(null===(n=this._mainPortalInfo)||void 0===n?void 0:n.portalUrl);if(i===a.urlKey&&0===o.indexOf(a.customBaseUrl))return a.urlKey+"."+a.customBaseUrl}return i+"."+o},e.prototype._getPortalUrlInfo=function(e){if(!e)return null;var t=e.toLowerCase(),n="",r=t.indexOf("https://");0===r?n="https://":0===(r=t.indexOf("http://"))&&(n="http://"),r=n.length;var o,i=t.indexOf("/sharing/rest",r);i=i<0?t.length:i;var a=(t=t.substring(r,i)).split(".");return o=a[0],a.splice(0,1),{urlKey:o,customBaseUrl:a.join("."),schema:n}},e.prototype.getSessionFromAuthInfo=function(e){var t;if(!this.checkAuthInfo(e))return null;var n=this.getPortalFromAuthInfo(e);return new Lp.a({clientId:null===(t=this._mainPortalInfo)||void 0===t?void 0:t.clientId,token:e.token,tokenExpires:new Date(e.expires),portal:n,username:e.email})},e.prototype.getSessionFromStorage=function(){var e,t=null===(e=this.readAuthInfo("exb_auth"))||void 0===e?void 0:e.authInfo,n=this.getSessionFromAuthInfo(t);return n&&this._isMainSession(n)?n:n?(this._processInvalidSignInSession(),null):void 0},e.prototype.readCookie=function(e){try{return Up.get(e)}catch(e){console.error("Read cookieerror.",e)}},e.prototype.getPortalFromAuthInfo=function(e){var t;if(window.jimuConfig.isInPortal)return(null===(t=this._mainPortalInfo)||void 0===t?void 0:t.portalUrl)+"/sharing/rest/";var n=e.urlKey?e.urlKey+".":"",r=e.schema,o=""+(r=r||"https://")+n+e.customBaseUrl+"/sharing/rest/";return"maps.arcgis.com"===e.customBaseUrl?o=r+"www.arcgis.com/sharing/rest/":"mapsdevext.arcgis.com"===e.customBaseUrl?o=r+"devext.arcgis.com/sharing/rest/":"mapsqa.arcgis.com"===e.customBaseUrl&&(o=r+"qaext.arcgis.com/sharing/rest/"),o},e.prototype._isSessionExpired=function(e){return!!e&&!(new Date(e.tokenExpires)<new Date)},e.prototype._getAuthInfoFromSession=function(e){var t=this._getPortalUrlInfo(e.portal),n=t.urlKey,r=t.customBaseUrl,o=t.schema;return{portalApp:!1,email:e.username,token:e.token,expires:e.tokenExpires,urlKey:n,customBaseUrl:r,schema:o}},e.prototype.checkAuthInfo=function(e){return!!e&&!(new Date(e.expires)<new Date)},e.prototype.readAuthInfo=function(e){var t,n;try{n=JSON.parse(Wc(e))}catch(e){console.error("Parse localStorage auth error")}if(n)t={authInfo:n,from:"LocalStorage"};else{try{n=JSON.parse(qc(e))}catch(e){console.error("Parse sessionStorage auth error")}t={authInfo:n,from:"SessionStorage"}}return t},e.prototype.writeAuthInfo=function(e){var t=this.readAuthInfo("exb_auth");this.removeAuthInfo(),"SessionStorage"===t.from?Hc("exb_auth",JSON.stringify(this._getAuthInfoFromSession(e))):zc("exb_auth",JSON.stringify(this._getAuthInfoFromSession(e)))},e.prototype.removeAuthInfo=function(){Jc("exb_auth"),$c("exb_auth")},e.prototype._getStandardAGOLSessionKey=function(e){var t,n,r,o=Pf(e).split(".");return t=o[0],o.splice(0,1),n=o.join("."),"devext"===t||"mapsdevext.arcgis.com"===n?r="devext.arcgis.com":"qaext"===t||"mapsqa.arcgis.com"===n?r="qaext.arcgis.com":"www"!==t&&"maps.arcgis.com"!==n||(r="www.arcgis.com"),r},e.prototype.getOrgUrl=function(e,t){var n;return"www.arcgis.com"===e?n=t+".maps.arcgis.com":"devext.arcgis.com"===e?n=t+".mapsdevext.arcgis.com":"qaext.arcgis.com"===e?n=t+".mapsqa.arcgis.com":(n=e,console.error("Bad params.",e,t)),Af(n,Yi.Https)},e.prototype._getHostedService=function(e){return Fp(this,void 0,void 0,(function(){var t,n=this;return Vp(this,(function(r){switch(r.label){case 0:return(t=e.split(/\/rest(\/admin)?\/services\//)[0])?[3,2]:[4,Promise.resolve(null)];case 1:return[2,r.sent()];case 2:return[4,Object(Mp.d)(t+"/rest/info",{httpMethod:"GET"}).then((function(e){return Fp(n,void 0,void 0,(function(){var t;return Vp(this,(function(n){switch(n.label){case 0:return e.owningSystemUrl?[3,2]:[4,Promise.resolve(null)];case 1:return[2,n.sent()];case 2:return/https?:\/\/(www|services)\.arcgis\.com/.test(e.owningSystemUrl)?t="www.arcgis.com":/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsdevext\.arcgis\.com\/?$/.test(Jf().getState().portalUrl)?t="devext.arcgis.com":/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsqa\.arcgis\.com\/?$/.test(Jf().getState().portalUrl)&&(t="qaext.arcgis.com"),[4,Promise.resolve(t)];case 3:return[2,n.sent()]}}))}))}))];case 3:return[2,r.sent()]}}))}))},e.prototype._getHostedServiceArcgisKey=function(e){return Fp(this,void 0,void 0,(function(){var t,n,r,o;return Vp(this,(function(i){switch(i.label){case 0:return t=Pf(e),n=t.split("."),r=n[0],n.splice(0,1),r.includes("servicesdev")?o="devext.arcgis.com":r.includes("servicesqa")?o="qaext.arcgis.com":r.includes("services")&&(o="www.arcgis.com"),o?[3,2]:[4,this._getHostedService(e)];case 1:return[2,i.sent()];case 2:return[4,Promise.resolve(o)];case 3:return[2,i.sent()]}}))}))},e.prototype.getLoginDomain=function(e,t){return Fp(this,void 0,void 0,(function(){var n,r,o,i;return Vp(this,(function(a){switch(a.label){case 0:return e?ml(e)?(n=this._getStandardAGOLSessionKey(e))?[3,2]:[4,this._getHostedServiceArcgisKey(e)]:[3,3]:[2,null];case 1:n=(n=a.sent())||Pf(e),a.label=2;case 2:return t?[2,this.getOrgUrl(n,t)]:[2,"https://"+n];case 3:return r=this._getPortalUrlInfo(e),o=r.customBaseUrl,i=r.urlKey,[2,""+(r.schema||"https://")+i+"."+o];case 4:return[2]}}))}))},e.prototype.signIn=function(e,t,n){var r,o;return void 0===e&&(e="/"),void 0===t&&(t=!0),void 0===n&&(n=null===(r=this._mainPortalInfo)||void 0===r?void 0:r.portalUrl),Fp(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,f,d,p,h,g=this;return Vp(this,(function(v){switch(v.label){case 0:return"/"==e&&window.jimuConfig.isInPortal&&(e=window.location.pathname),(r=this.getSessionByUrl(n))?(this._executSignIn(),t||(i=0===e.indexOf("/"),window.location.href=location.protocol+"//"+location.host+(i?"":"/")+e),[4,Promise.resolve(r)]):[3,2];case 1:return[2,v.sent()];case 2:return a=Jf().getState(),s=a.queryObject,this._isSigning?(u=this.defer(),this._signInQueue.push({desUrl:n,fromUrl:e,popup:t,sessionDefer:u}),[4,u.promise]):[3,4];case 3:return[2,v.sent()];case 4:return c=a.clientId,[4,this.getLoginDomain(n,null==s?void 0:s.org)];case 5:return l=v.sent(),f=hl(l),d=wf(nl("jimu-core")),p=""+window.location.origin+d+"/oauth-callback.html?clientId="+c+"&portal="+f+"&popup="+t+"&isInPortal="+window.jimuConfig.isInPortal+"&fromUrl="+e,p=new URL(p).toString(),h={portal:f,clientId:c,redirectUri:p,popup:t,params:{showSignupOption:!0,signupType:"esri"}},this._isSigning=!0,[4,null===(o=Lp.a.beginOAuth2(h))||void 0===o?void 0:o.then((function(e){return Fp(g,void 0,void 0,(function(){return Vp(this,(function(t){switch(t.label){case 0:return this.addOrReplaceSession(e),this._isSigning=!1,this._executSignIn(),[4,Promise.resolve(e)];case 1:return[2,t.sent()]}}))}))}))];case 6:return[2,v.sent()]}}))}))},e.prototype.addSessionChangeListener=function(e){if("function"!=typeof e)throw new Error("callback must be a function");this._onSessionChangedCallbacks.includes(e)||this._onSessionChangedCallbacks.push(e)},e.prototype._executSignIn=function(){if(!this._isSigning&&this._signInQueue){var e=this._signInQueue.pop();e&&this.signIn(e.fromUrl,e.popup,e.desUrl).then((function(t){e.sessionDefer.resolve(t)}))}},e.prototype.signOut=function(){var e,t,n=this.getMainSession(),r=null==n?void 0:n.portal;r||(r=(r=null===(e=this._mainPortalInfo)||void 0===e?void 0:e.portalUrl)&&hl(r));var o=(null==n?void 0:n.clientId)||(null===(t=this._mainPortalInfo)||void 0===t?void 0:t.clientId);this.clearSessions(),Jf().dispatch(op());var i,a=window&&window.location;if(i=window.jimuConfig.isDevEdition?a.protocol+"//"+a.host+"/page/set-portalurl":window.jimuConfig.isInPortal?window.location.href:a.protocol+"//"+a.host+"/page/landing",this.removeAuthInfo(),this._arcgisJSIM&&this._arcgisJSIM.destroyCredentials(),r&&o){var s=r+"/oauth2/signout?client_id="+o+"&redirect_uri="+(i=encodeURIComponent(i));a.href=s}else a.href="/"},e.prototype.switchAccount=function(){var e=this.getMainPortal(),t=(null==e?void 0:e.portalUrl)+"/home/pages/Account/manage_accounts.html#client_id="+(null==e?void 0:e.clientId)+"&redirect_uri="+window.location.href+"#";this.removeAuthInfo(),window.location.href=t},e.prototype.defer=function(){var e={promise:null,resolve:null,reject:null};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},e.prototype._generateToken=function(e,t){return Fp(this,void 0,void 0,(function(){var n,r=this;return Vp(this,(function(o){switch(o.label){case 0:return n=Af(hl(e)+"generateToken?f=json",Yi.Https),[4,fetch(n+"&"+(t||""),{cache:"no-cache",credentials:"include"}).then((function(e){return Fp(r,void 0,void 0,(function(){return Vp(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))})).then((function(e){return e}),(function(e){return null}))];case 1:return[2,o.sent()]}}))}))},e.prototype._getPortalSelfInfo=function(e){return Fp(this,void 0,void 0,(function(){var t,n=this;return Vp(this,(function(r){switch(r.label){case 0:return t=Af(hl(e)+"portals/self?f=json",Yi.Https),[4,fetch(t,{cache:"no-cache",credentials:"include"}).then((function(e){return Fp(n,void 0,void 0,(function(){return Vp(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,r.sent()]}}))}))},e.prototype.getSessionFromWebTierPortal=function(e,t,n){var r,o=this;return(n?Promise.resolve(n):this._getPortalSelfInfo(e)).then((function(n){return Fp(o,void 0,void 0,(function(){return Vp(this,(function(o){switch(o.label){case 0:return r=n,[4,this._generateToken(e,t)];case 1:return[2,o.sent()]}}))}))})).then((function(t){if(t&&t.token){var n={token:t.token,expires:t.expires,userId:r.user?r.user.username:"",ssl:t.ssl,server:hl(e)};return Lp.a.fromCredential(n)}return null})).catch((function(){return null}))},e.prototype.getSessionFromTrustedServer=function(e){return Fp(this,void 0,void 0,(function(){var t,n,r,o=this;return Vp(this,(function(i){switch(i.label){case 0:return t=(e||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),(n=this.getSessionByUrl(t))?[4,Promise.resolve(n)]:[3,2];case 1:return[2,i.sent()];case 2:return r=Af(Pf(window.location.href),Yi.Https),[4,fetch(t+"/rest/info?f=json",{cache:"no-cache",credentials:"include"}).then((function(e){return Fp(o,void 0,void 0,(function(){return Vp(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))})).then((function(e){var n=e.owningSystemUrl;if(n){var i="request=getToken&serverUrl="+t+"&referer="+r;return o.getSessionFromWebTierPortal(n,i).then((function(e){var n=e,r=e.toJSON();r.portal=t;var i=new Lp.a(r);return o.addOrReplaceSession(n),o.addOrReplaceSession(i),e}))}return null})).catch((function(e){return console.warn("Failed to get session from trusted server."),null}))];case 3:return[2,i.sent()]}}))}))},e.prototype.addFromArcGisJSCredential=function(e){var t=Lp.a.fromCredential(e);return!!this._addOrReplaceSession(t)&&(this._syncToOtherWindowSessionManager(),this._onSessionChanged(Rp.ArcGISJSSync),!0)},e.prototype._syncToOtherWindowSessionManager=function(){if(window.jimuConfig.isBuilder)Qc("jimu-for-builder").builderAppSync.publishChangeSessionToApp();else if(window.jimuConfig.isInBuilder){Qc("jimu-for-builder").appBuilderSync.publishAppSessionChangeToBuilder()}},e.prototype.syncSessionsFromOtherWindow=function(e){var t=this;this.clearSessions(),e.forEach((function(e){t._addOrReplaceSession(e)})),this._onSessionChanged(Rp.OtherWindowSync)},e.prototype.readSessionFromParent=function(e){return Fp(this,void 0,void 0,(function(){return Vp(this,(function(t){switch(t.label){case 0:return[4,Lp.a.fromParent(e).then((function(e){return console.log("fromparent session:",e),e})).catch((function(e){return console.error("Get session from parent error. Please check this link for details: https://esri.github.io/arcgis-rest-js/guides/embedded-apps/",e),null}))];case 1:return[2,t.sent()]}}))}))},e.prototype.canReadSessionFromParent=function(e){return e.endsWith(".arcgis.com")},e.prototype.onSessionRequestMessage=function(e){var t,n,r=e.origin===window.location.origin||this.canReadSessionFromParent(e.origin),o="arcgis:auth:requestCredential"===e.data.type;if(r&&o)try{var i=void 0;i=e.origin.endsWith("dev.arcgis.com")?"https://devext.arcgis.com":e.origin.endsWith("qa.arcgis.com")?"https://qaext.arcgis.com":e.origin.endsWith(".arcgis.com")?"https://www.arcgis.com":e.origin;var a=this.getSessionByUrl(i);if(!a)return void e.source.postMessage({type:"arcgis:auth:error",error:{name:"NoCredential",message:"Does not find credential."}},e.origin);var s=a.toCredential();s.server=s.server.replace("/sharing/rest",""),null===(t=e.source)||void 0===t||t.postMessage({type:"arcgis:auth:credential",credential:s},e.origin)}catch(t){null===(n=e.source)||void 0===n||n.postMessage({type:"arcgis:auth:error",error:{name:t.name,message:t.message}},e.origin),console.error("Response requestCredential error.",t)}},e.prototype.enablePostMessageAuth=function(){},e}(),Gp=n(72),Wp=function(){return(Wp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zp=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},qp=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Hp=null;function Jp(e){return zp(this,void 0,void 0,(function(){var t,n;return qp(this,(function(r){return t=Bp.getInstance(),n=t.handleAuthError.bind(t),Hp||(Hp=Object(Mp.d)(hl(e)+"portals/self",{authentication:t.getMainSession(),httpMethod:"GET"}).then((function(t){if(!t.isPortal){var n="https://"+t.urlKey+"."+t.customBaseUrl;t.urlKey&&!vl(e,n)&&Jf().dispatch(Zd(n))}return Jf().dispatch(yp(t)),t})).catch((function(e){n(e,!1)}))),[2,Hp]}))}))}function $p(){Hp=null}var Yp={};function Kp(e){return void 0===e&&(e=vf().appId),zp(this,void 0,void 0,(function(){return qp(this,(function(t){return Yp[e]||(window.jimuConfig.isDevEdition?Yp[e]=function(e){return zp(this,void 0,void 0,(function(){var t=this;return qp(this,(function(n){switch(n.label){case 0:return[4,window.fetch("/apps/"+e+"/info.json").then((function(e){return zp(t,void 0,void 0,(function(){return qp(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))})).then((function(e){return Wp(Wp({},e),{name:e.title})}))];case 1:return[2,n.sent()]}}))}))}(e):Yp[e]=function(e){return zp(this,void 0,void 0,(function(){var t,n,r=this;return qp(this,(function(o){switch(o.label){case 0:return t=Bp.getInstance(),n=Jf().getState().portalUrl,[4,Object(Gp.a)(e,{portal:hl(n),authentication:t.getSessionByUrl(n)}).then((function(e){return Wp(Wp({},e),{name:e.title})})).catch((function(e){return zp(r,void 0,void 0,(function(){return qp(this,(function(e){switch(e.label){case 0:return[4,Promise.reject({})];case 1:return[2,e.sent()]}}))}))}))];case 1:return[2,o.sent()]}}))}))}(e)),[2,Yp[e]]}))}))}function Xp(e){delete Yp[e]}var Qp,Zp,eh,th,nh,rh,oh,ih=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ah=function(){return(ah=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},sh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},uh=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ch=function(){function e(){this.jimuThemeStyleModule={},this.jimuComponentStyles={},this.jimuThemeVariablesGenerators={},this.themeLoadPromises={},this.themeModules={},$f(this.onThemeChange.bind(this),["appConfig","theme"]),$f(this.onCustomThemeChange.bind(this),["appConfig","customTheme"]),$f(this.onPortalSelfChange.bind(this),["portalSelf"])}return e.getInstance=function(){return e.instance||(e.instance=new e,window._themeManager=e.instance),e.instance},e.getInAppInstance=function(){var e;return(null===(e=null===window||void 0===window?void 0:window._appWindow)||void 0===e?void 0:e._themeManager)?window._appWindow._themeManager:this.getInstance()},e.prototype.registerJimuThemeStyleModule=function(e,t){var n=this;this.jimuThemeStyleModule[e]||(this.jimuThemeStyleModule[e]=t,t.variablesGenerator&&(this.jimuThemeVariablesGenerators[e]=t.variablesGenerator),Object.entries(t.componentStyles).forEach((function(e){var t=e[0],r=e[1];n.jimuComponentStyles[t]?console.error("Component name conflicts.",t):n.jimuComponentStyles[t]=r})))},e.prototype.loadTheme=function(e){return sh(this,void 0,void 0,(function(){var t,n,r,o,i,a,s;return uh(this,(function(u){switch(u.label){case 0:return t=Jf().getState().appConfig,this.themeModules[e]?(this.updateThemeVariablesInState(t),[4,Promise.resolve(this.themeModules[e])]):[3,2];case 1:return[2,u.sent()];case 2:return this.themeLoadPromises[e]={},"themes/default/"!==e?[3,3]:(n={manifest:xe({}),styleModule:null,variables:{themeVariables:xe({}),mergedToJimuVariables:this.mergeThemeVarsToJimuVars(xe({})),customVariables:xe({})}},[3,10]);case 3:return t.theme===e&&t.themeManifest?(o=t.themeManifest,[3,6]):[3,4];case 4:return[4,this.loadThemeManifest(e)];case 5:o=u.sent(),u.label=6;case 6:return r=o,[4,this.loadThemeVariables(e)];case 7:return i=u.sent(),s={manifest:r},(a=r.styleFiles&&r.styleFiles.js)?[4,Zc(e+"/style.js")]:[3,9];case 8:a=u.sent(),u.label=9;case 9:s.styleModule=a,s.variables={themeVariables:i,mergedToJimuVariables:this.mergeThemeVarsToJimuVars(i),customVariables:xe({})},n=s,u.label=10;case 10:return this.themeModules[e]=n,this.updateThemeVariablesInState(t),[4,Promise.resolve(n)];case 11:return[2,u.sent()]}}))}))},e.prototype.updateThemeVariablesInState=function(e){e.customTheme&&!Vu(e.customTheme,{})?this.updateThemeCustomVariables(e.theme,e.customTheme):Jf().dispatch(mp(this.getThemeVariables(e.theme)))},e.prototype.isThemeLoaded=function(e){return!!this.themeModules[e]},e.prototype.loadThemeVariables=function(e){return sh(this,void 0,void 0,(function(){var t=this;return uh(this,(function(n){switch(n.label){case 0:return this.themeLoadPromises[e]||(this.themeLoadPromises[e]={}),this.themeLoadPromises[e].variables?[4,this.themeLoadPromises[e].variables]:[3,2];case 1:return[2,n.sent()];case 2:return this.themeLoadPromises[e].variables=window.fetch(""+If()+e+"/variables.json").then((function(e){return sh(t,void 0,void 0,(function(){return uh(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))})).then((function(e){return xe(e)})),[2,this.themeLoadPromises[e].variables]}}))}))},e.prototype.loadThemeManifest=function(e){return sh(this,void 0,void 0,(function(){var t=this;return uh(this,(function(n){switch(n.label){case 0:return this.themeLoadPromises[e]||(this.themeLoadPromises[e]={}),this.themeLoadPromises[e].manifest?[4,this.themeLoadPromises[e].manifest]:[3,2];case 1:return[2,n.sent()];case 2:return this.themeLoadPromises[e].manifest=fetch(""+If()+e+"/manifest.json").then((function(e){return sh(t,void 0,void 0,(function(){return uh(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))})).then((function(e){return sh(t,void 0,void 0,(function(){var t;return uh(this,(function(n){switch(n.label){case 0:return t=xe(e),[4,Promise.resolve(t)];case 1:return[2,n.sent()]}}))}))})),[4,this.themeLoadPromises[e].manifest];case 3:return[2,n.sent()]}}))}))},e.prototype.refreshSharedTheme=function(){var e,t,n,r=null===(t=null===(e=Jf().getState())||void 0===e?void 0:e.appConfig)||void 0===t?void 0:t.theme,o=this.getThemeModule(r),i=null===(n=null==o?void 0:o.variables)||void 0===n?void 0:n.themeVariables;r&&i&&!i.sharedThemeVariables&&(o.variables.mergedToJimuVariables=this.mergeThemeVarsToJimuVars(o.variables.themeVariables),Jf().dispatch(mp(this.getThemeVariables(r))))},e.prototype.loadSharedTheme=function(e){e&&!Vu(this.sharedThemeJson,e)&&(this.sharedThemeJson=e)},e.prototype.getSharedThemeJson=function(){return this.sharedThemeJson},e.prototype.updateThemeCustomVariables=function(e,t){this.themeModules[e]&&this.themeModules[e].variables&&(this.themeModules[e].variables.customVariables=t,Jf().getState().appConfig.theme===e&&Jf().dispatch(mp(this.getThemeVariables(e))))},e.prototype.addThemeCustomVariables=function(e,t){if(this.themeModules[e]&&this.themeModules[e].variables){var n=this.themeModules[e].variables.customVariables,r=Object.assign({},ah({},function e(t,n){return[].concat.apply([],Object.keys(t).map((function(r){var o;return"object"==typeof t[r]?e(t[r],n?n+"/"+r:r):((o={})[n?n+"/"+r:r]=t[r],o)})))}(t)));return Object.keys(r).some((function(e){var t,o=null===(t=Object.keys(r[e]))||void 0===t?void 0:t[0];return n.getIn(o.split("/"))!==r[e][o]}))?(this.themeModules[e].variables.customVariables=this.themeModules[e].variables.customVariables.merge(t,{deep:!0}),Jf().getState().appConfig.theme===e&&Jf().dispatch(mp(this.getThemeVariables(e))),this.themeModules[e].variables.customVariables):null}},e.prototype.removeThemeCustomVariables=function(e,t){var n=this;this.themeModules[e]&&this.themeModules[e].variables&&(t.forEach((function(t){var r=t.split(".");if(r.length>1){var o=r.concat([]),i=o.pop(),a=n.themeModules[e].variables.customVariables.getIn(o);a&&(n.themeModules[e].variables.customVariables=n.themeModules[e].variables.customVariables.setIn(o,a.without(i)))}else n.themeModules[e].variables.customVariables=n.themeModules[e].variables.customVariables.without(r[0])})),Jf().getState().appConfig.theme===e&&Jf().dispatch(mp(this.getThemeVariables(e))))},e.prototype.clearAllThemeCustomVariables=function(){for(var e in this.themeModules)this.themeModules[e].variables.customVariables=xe({})},e.prototype.getGlobalStyles=function(e){return this.getComponentStyles("Global",Object.assign({theme:e}))},e.prototype.getComponentStyles=function(e,t){var n,r,o=Jf()&&Jf().getState().appConfig&&Jf().getState().appConfig.theme;return n=this.jimuComponentStyles[e],r=this.themeModules[o]&&this.themeModules[o].styleModule&&this.themeModules[o].styleModule[e],_t(Qp||(Qp=ih(["\n      ","\n      ","\n    "],["\n      ","\n      ","\n    "])),n&&n(t),r&&r(t))},e.prototype.getThemeVariables=function(e){var t=this.getRawThemeVariables(e);return this.parseVars(t)},e.prototype.getRawThemeVariables=function(e){if(!this.themeModules[e]||!this.themeModules[e].variables)return xe({});var t=this.themeModules[e].variables.themeVariables,n=this.themeModules[e].variables.customVariables,r=this.mergeThemeVarsToJimuVars(t,n);return this.themeModules[e].variables.mergedToJimuVariables=r,r},e.prototype.getCustomVariables=function(e){return this.themeModules[e]&&this.themeModules[e].variables&&this.themeModules[e].variables.customVariables},e.prototype.getThemeManifest=function(e){return this.themeModules[e]&&this.themeModules[e].manifest},e.prototype.getThemeModule=function(e){return this.themeModules[e]},e.prototype.mergeThemeVarsToJimuVars=function(e,t){var n=this;if(Object.keys(this.jimuThemeVariablesGenerators).find((function(e){return"jimu-ui"===e}))){var r=this.jimuThemeVariablesGenerators["jimu-ui"].generate(e,t);return Object.keys(this.jimuThemeVariablesGenerators).forEach((function(o){"jimu-ui"!==o&&(r=r.merge(n.jimuThemeVariablesGenerators[o].generate(e,t),{deep:!0}))})),r}console.error("Does not find jimu-ui theme.")},e.prototype.parseVars=function(e,t){if(!e)return xe({});t||(t=e.merge({}));var n=/\$\{([^<]+)\}/;for(var r in e){var o=e[r],i=Object.prototype.toString.call(o);if("[object Object]"===i)e=e.setIn([r],this.parseVars(o,t));else if("[object String]"===i&&n.test(o)){var a=o.match(n)[1];e=e.setIn([r],Es(t,a))}}return e},e.prototype.onThemeChange=function(e,t){var n=this;sd((function(){e&&t&&e!==t&&n.loadTheme(t)}))},e.prototype.onCustomThemeChange=function(e,t){var n=this;sd((function(){Vu(e,t)||n.updateThemeCustomVariables(Jf().getState().appConfig.theme,t)}))},e.prototype.onPortalSelfChange=function(e,t){var n=this;sd((function(){var r,o,i,a,s;if(!Vu(null===(r=null==e?void 0:e.portalProperties)||void 0===r?void 0:r.sharedTheme,null===(o=null==t?void 0:t.portalProperties)||void 0===o?void 0:o.sharedTheme)){if(window.jimuConfig.isBuilder){var u=null===(i=null===window||void 0===window?void 0:window._appWindow)||void 0===i?void 0:i._themeManager;u&&(u.loadSharedTheme(null===(a=null==t?void 0:t.portalProperties)||void 0===a?void 0:a.sharedTheme),u.refreshSharedTheme())}n.loadSharedTheme(null===(s=null==t?void 0:t.portalProperties)||void 0===s?void 0:s.sharedTheme),n.refreshSharedTheme()}}))},e}();!function(e){e.Display1="display1",e.Display2="display2",e.Display3="display3",e.Display4="display4",e.Display5="display5",e.Display6="display6",e.Body1="body1",e.Body2="body2",e.Caption1="caption1",e.Caption2="caption2"}(Zp||(Zp={})),function(e){e.White="white",e.Black="black",e.Transparent="transparent"}(eh||(eh={})),function(e){e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(th||(th={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark"}(nh||(nh={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark",e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(rh||(rh={})),function(e){e.Color="color",e.Background="bg",e.Border="border",e.BorderRadius="borderRadius",e.Shadow="shadow"}(oh||(oh={}));var lh,fh,dh,ph={navigation:["nav","pagination","slider","navButtonGroup"]},hh=n(51),gh=n.n(hh),vh=function(){return(vh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mh=(fh=Ah(),dh=(null===(lh=null==fh?void 0:fh.appContext)||void 0===lh?void 0:lh.isRTL)?{stylisPlugins:[gh.a],key:"emotion-cache-rtl"}:{key:"emotion-cache-ltr"},Ke(dh)),yh=/^var\(--(.+?)\)$/;function bh(e,t){var n,r;void 0===t&&(t="");var o=""!==t?t:null!==(r=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==r?r:"";return jt(e)((function(e){return ch.getInstance().getComponentStyles(o,e)}))}function wh(e){if(void 0===e&&(e=""),""===e)return null;var t=e.split("/"),n=null;return t.length>1?n=t.pop():1===t.length&&(n=t[0]),n}function Sh(e,t,n){var r,o;if(null==e||""===e||null==t||0===t||null==n)return null;var i=null!==(r=Es(n,e))&&void 0!==r?r:"";if(""===i)return null;var a=Es(n,["palette",e]);if(null==a)return null;var s=Object.keys(a).find((function(e){if(Vu(dn(a[e]),dn(i)))return e}));return null!==s&&""!==s&&(o=parseInt(s)+100*t),o}function Ih(e,t,n){if(null==e||""===e||null==t||0===t||null==n)return null;var r=Es(n,["palette",e]),o=Sh(e,-t,n);return o<100?n.white:r[o]}function Oh(e,t,n){if(null==e||""===e||null==t||0===t||null==n)return null;var r=Es(n,["palette",e]),o=Sh(e,t,n);return o>900?n.black:r[o]}function Eh(e,t){var n;if("string"!=typeof e)return null;if(null==t){var r=null===(n=Jf().getState().appConfig)||void 0===n?void 0:n.theme;t=window.jimuConfig.isInBuilder?ch.getInAppInstance().getThemeVariables(r):ch.getInstance().getThemeVariables(r)}return Es(t,e)}function xh(e,t,n){var r;if("string"!=typeof e)return e;if(/^var\(--(.+?)\)$/.test(e))return e;if(null==n){var o=null===(r=Jf().getState().appConfig)||void 0===r?void 0:r.theme;n=window.jimuConfig.isInBuilder?ch.getInAppInstance().getThemeVariables(o):ch.getInstance().getThemeVariables(o)}var i=n.colors.palette;if(null==i)return e;var a=e,s=[100,200,300,400,500,600,700,800,900],u=!1;return Object.keys(rh).some((function(n){n=n.toLowerCase();var r=i[n];return s.some((function(o){return r[o]===e&&(u=!0,a=t?"var(--"+n+"-"+o+")":"colors.palette."+n+"."+o,!0)})),u})),a}function Ch(e,t){var n;return void 0===t&&(t=""),""===t&&(t=null===(n=Jf().getState().appConfig)||void 0===n?void 0:n.theme),(window.jimuConfig.isInBuilder?ch.getInAppInstance().getRawThemeVariables(t):ch.getInstance().getRawThemeVariables(t)).getIn(["components",e])}function Th(e){return yh.test(e)}function jh(e,t){var n;if("string"!=typeof e)return null;var r,o="colors";Th(e)?r=e.match(yh)[1].split("-"):r=e.split(".");return r.length>1&&parseInt(r[1])%100==0?o="colors.palette":"org"===(null==r?void 0:r[0])&&(o="colors.orgSharedColors",r=r.slice(1)),null!==(n=Eh(o+"."+r.join("."),t))&&void 0!==n?n:e}function Ah(){if(window.jimuConfig.isInBuilder)return window.parent._appState}function Ph(e,t){var n,r;if(!window.jimuConfig.isInBuilder)return e;var o=function(){if(window.jimuConfig.isInBuilder)return window.parent._themeManager}(),i=Ah(),a=""!==t?t:null!==(r=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==r?r:"",s=jt(e)((function(e){return o.getComponentStyles(a,e)}));return function(e){return O.createElement(yt,{theme:o.getThemeVariables(i.appConfig.theme)},O.createElement(ht,{value:mh},O.createElement(s,vh({},e))))}}function _h(e,t){if(!window.jimuConfig.isInBuilder)return e;var n=Ah(),r=bt(e);return function(e){return O.createElement(yt,{theme:n.theme},O.createElement(ht,{value:mh},O.createElement(r,vh({},e))))}}function Dh(){return window.jimuConfig.isInBuilder?Ah().theme:null}function kh(e){var t,n=ch.getInstance().getSharedThemeJson();if(window.jimuConfig.isInBuilder&&(n=ch.getInAppInstance().getSharedThemeJson()),null!=n){var r=n.header,o=n.body,i=n.button,a=n.logo,s=n.fonts;t=xe({sharedThemeVariables:{header:vh({},Nh(r)),body:vh({},Nh(o)),button:vh({},Nh(i)),logo:a,fonts:s}}),e&&(t=xe({colors:vh({},Lh(null==i?void 0:i.background)&&{primary:i.background}),header:t.sharedThemeVariables.header,body:t.sharedThemeVariables.body,components:vh({},Lh(null==i?void 0:i.text)&&{button:{variants:{primary:{default:{color:i.text}}}}}),link:Lh(null==o?void 0:o.link)?{color:null==o?void 0:o.link,hover:{color:null==o?void 0:o.link}}:{}}))}return t}function Rh(e,t){var n,r,o,i,a,s,u,c,l,f=ph[e];return window.jimuConfig.isBuilder&&!t?(c=null===(i=null===(o=null===(r=null===(n=Jf())||void 0===n?void 0:n.getState())||void 0===r?void 0:r.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===i?void 0:i.theme,l=ch.getInAppInstance().getThemeVariables(c)):(c=null===(u=null===(s=null===(a=Jf())||void 0===a?void 0:a.getState())||void 0===s?void 0:s.appConfig)||void 0===u?void 0:u.theme,l=ch.getInstance().getThemeVariables(c)),f.map((function(e){var t,n=l.getIn(["components",e]),r=null!==(t=null==n?void 0:n.variants)&&void 0!==t?t:xe({default:n});if("navButtonGroup"===e){var o=xe({});return["default","primary","tertiary"].forEach((function(e){var t,n=null===(t=null==r?void 0:r[e])||void 0===t?void 0:t.item,i=l.getIn(["components","button","variants",e]).merge(null!=n?n:{},{deep:!0});o=o.set(e,vh(vh({},r[e]),{item:i}))})),{component:e,styles:o}}return{component:e,styles:r}}))}function Mh(e){var t,n=(null==e?void 0:e.theme)===$u,r=this.getMappedShareThemeVariables(n);return(null==e?void 0:e.theme)===$u||!Vu(null===(t=null==e?void 0:e.customTheme)||void 0===t?void 0:t.sharedThemeVariables,null==r?void 0:r.sharedThemeVariables)?vh(vh({},null==e?void 0:e.customTheme),r):null==e?void 0:e.customTheme}function Nh(e){return null==e?{}:vh(vh(vh({},Lh(e.background)&&{bg:e.background}),Lh(e.text)&&{color:e.text}),Lh(e.link)&&{link:e.link})}function Lh(e){return"string"==typeof e&&"no-color"!==e}var Uh={ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",ControlLeft:"control",ControlRight:"control"},Fh=function(e){return"code"in e?!!Uh[e.code]:16===e.which||17===e.which||18===e.which||91===e.which},Vh={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function Bh(e){if("undefined"!=typeof window){var t=e.key;navigator.userAgent.includes("Edge")&&(Fh(e)||Vh[e.keyCode]||(t="key"+t));var n=new KeyboardEvent(e.type,{key:t+"-manual",code:e.code,location:e.location,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat,charCode:e.charCode,keyCode:e.keyCode,which:e.which});document.dispatchEvent(n)}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gh=function(e,t){return(Gh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Wh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Gh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var zh=function(){return(zh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;function qh(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}Object.create;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Hh=function(e,t){return(Hh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Jh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Hh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $h=function(){return($h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;function Yh(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}Object.create;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Kh=function(e,t){return(Kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var Xh=function(){return(Xh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;var Qh,Zh;Object.create;function eg(e){return e.type===Qh.literal}function tg(e){return e.type===Qh.argument}function ng(e){return e.type===Qh.number}function rg(e){return e.type===Qh.date}function og(e){return e.type===Qh.time}function ig(e){return e.type===Qh.select}function ag(e){return e.type===Qh.plural}function sg(e){return e.type===Qh.pound}function ug(e){return e.type===Qh.tag}function cg(e){return!(!e||"object"!=typeof e||0!==e.type)}function lg(e){return!(!e||"object"!=typeof e||1!==e.type)}!function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(Qh||(Qh={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(Zh||(Zh={}));var fg=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;var dg=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,pg=/^(@+)?(\+|#+)?$/g;function hg(e){var t={};return e.replace(pg,(function(e,n,r){return"string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function gg(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":return{currencySign:"accounting"};case"sign-always":return{signDisplay:"always"};case"sign-accounting-always":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":return{signDisplay:"never"}}}function vg(e){var t=gg(e);return t||{}}function mg(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n];switch(o.stem){case"percent":t.style="percent";continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=Xh(Xh(Xh({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return Xh(Xh({},e),vg(t))}),{}));continue;case"engineering":t=Xh(Xh(Xh({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return Xh(Xh({},e),vg(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue}if(dg.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(dg,(function(e,n,r,o,i,a){return"*"===r?t.minimumFractionDigits=n.length:o&&"#"===o[0]?t.maximumFractionDigits=o.length:i&&a?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+a.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""})),o.options.length&&(t=Xh(Xh({},t),hg(o.options[0])))}else if(pg.test(o.stem))t=Xh(Xh({},t),hg(o.stem));else{var i=gg(o.stem);i&&(t=Xh(Xh({},t),i))}}return t}var yg=function(e){function t(n,r,o,i){var a=e.call(this)||this;return a.message=n,a.expected=r,a.found=o,a.location=i,a.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(a,t),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Kh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.buildMessage=function(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){switch(e.type){case"literal":return'"'+r(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,n,r=e.map(i);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+(((a=t)?'"'+r(a)+'"':"end of input")+" found.");var a},t}(Error);var bg=function(e,t){t=void 0!==t?t:{};var n,r={},o={start:Te},i=Te,a=we("<",!1),s=function(e){return e.join("")},u=we("#",!1),c=Ie("tagElement"),l=we("/>",!1),f=we(">",!1),d=we("</",!1),p=Ie("argumentElement"),h=we("{",!1),g=we("}",!1),v=Ie("numberSkeletonId"),m=/^['\/{}]/,y=Se(["'","/","{","}"],!1,!1),b={type:"any"},w=Ie("numberSkeletonTokenOption"),S=we("/",!1),I=Ie("numberSkeletonToken"),O=we("::",!1),E=function(e){return Ze.pop(),e.replace(/\s*$/,"")},x=we(",",!1),C=we("number",!1),T=function(e,t,n){return Xh({type:"number"===t?Qh.number:"date"===t?Qh.date:Qh.time,style:n&&n[2],value:e},tt())},j=we("'",!1),A=/^[^']/,P=Se(["'"],!0,!1),_=/^[^a-zA-Z'{}]/,D=Se([["a","z"],["A","Z"],"'","{","}"],!0,!1),k=/^[a-zA-Z]/,R=Se([["a","z"],["A","Z"]],!1,!1),M=we("date",!1),N=we("time",!1),L=we("plural",!1),U=we("selectordinal",!1),F=we("offset:",!1),V=we("select",!1),B=we("=",!1),G=Ie("whitespace"),W=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,z=Se([["\t","\r"]," ","","","",["",""],"\u2028","\u2029","","",""],!1,!1),q=Ie("syntax pattern"),H=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,J=Se([["!","/"],[":","@"],["[","^"],"`",["{","~"],["",""],"","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","","",""],!1,!1),$=Ie("optional whitespace"),Y=Ie("number"),K=we("-",!1),X=(Ie("apostrophe"),Ie("double apostrophes")),Q=we("''",!1),Z=function(e){return!("<"===e||"{"===e||et()&&"#"===e||Ze.length>1&&"}"===e)},ee=we("\n",!1),te=Ie("argNameOrNumber"),ne=Ie("validTag"),re=Ie("argNumber"),oe=we("0",!1),ie=/^[1-9]/,ae=Se([["1","9"]],!1,!1),se=/^[0-9]/,ue=Se([["0","9"]],!1,!1),ce=Ie("argName"),le=Ie("tagName"),fe=0,de=0,pe=[{line:1,column:1}],he=0,ge=[],ve=0;if(void 0!==t.startRule){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=o[t.startRule]}function me(){return e.substring(de,fe)}function ye(){return Ee(de,fe)}function be(e,t){throw function(e,t){return new yg(e,[],"",t)}(e,t=void 0!==t?t:Ee(de,fe))}function we(e,t){return{type:"literal",text:e,ignoreCase:t}}function Se(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Ie(e){return{type:"other",description:e}}function Oe(t){var n,r=pe[t];if(r)return r;for(n=t-1;!pe[n];)n--;for(r={line:(r=pe[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return pe[t]=r,r}function Ee(e,t){var n=Oe(e),r=Oe(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function xe(e){fe<he||(fe>he&&(he=fe,ge=[]),ge.push(e))}function Ce(e,t,n){return new yg(yg.buildMessage(e,t),e,t,n)}function Te(){return je()}function je(){var e,t;for(e=[],t=Ae();t!==r;)e.push(t),t=Ae();return e}function Ae(){var t,n;return t=fe,de=fe,(!nt?void 0:r)!==r&&(n=function(){var e,t,n,o;ve++,(e=De())===r&&(e=fe,(t=ke())!==r&&(n=je())!==r&&(o=Re())!==r?(de=e,t=function(e,t,n){return e!==n&&be('Mismatch tag "'+e+'" !== "'+n+'"',ye()),Xh({type:Qh.tag,value:e,children:t},tt())}(t,n,o),e=t):(fe=e,e=r));ve--,e===r&&(t=r,0===ve&&xe(c));return e}())!==r?(de=t,t=n):(fe=t,t=r),t===r&&(t=function(){var e,t;e=fe,(t=Pe())!==r&&(de=e,n=t,t=Xh({type:Qh.literal,value:n},tt()));var n;return e=t}())===r&&(t=function(){var t,n,o,i;ve++,t=fe,123===e.charCodeAt(fe)?(n="{",fe++):(n=r,0===ve&&xe(h));n!==r&&ze()!==r&&(o=Ye())!==r&&ze()!==r?(125===e.charCodeAt(fe)?(i="}",fe++):(i=r,0===ve&&xe(g)),i!==r?(de=t,a=o,n=Xh({type:Qh.argument,value:a},tt()),t=n):(fe=t,t=r)):(fe=t,t=r);var a;ve--,t===r&&(n=r,0===ve&&xe(p));return t}())===r&&(t=function(){var t;(t=function(){var t,n,o,i,a,s,u,c,l;t=fe,123===e.charCodeAt(fe)?(n="{",fe++):(n=r,0===ve&&xe(h));n!==r&&ze()!==r&&(o=Ye())!==r&&ze()!==r?(44===e.charCodeAt(fe)?(i=",",fe++):(i=r,0===ve&&xe(x)),i!==r&&ze()!==r?("number"===e.substr(fe,6)?(a="number",fe+=6):(a=r,0===ve&&xe(C)),a!==r&&ze()!==r?(s=fe,44===e.charCodeAt(fe)?(u=",",fe++):(u=r,0===ve&&xe(x)),u!==r&&(c=ze())!==r&&(l=function(){var t,n,o;t=fe,"::"===e.substr(fe,2)?(n="::",fe+=2):(n=r,0===ve&&xe(O));n!==r&&(o=function(){var e,t,n;if(e=fe,t=[],(n=Le())!==r)for(;n!==r;)t.push(n),n=Le();else t=r;t!==r&&(de=e,t=Xh({type:0,tokens:o=t,parsedOptions:rt?mg(o):{}},tt()));var o;return e=t}())!==r?(de=t,t=n=o):(fe=t,t=r);t===r&&(t=fe,de=fe,Ze.push("numberArgStyle"),(n=(n=!0)?void 0:r)!==r&&(o=Pe())!==r?(de=t,n=E(o),t=n):(fe=t,t=r));return t}())!==r?s=u=[u,c,l]:(fe=s,s=r),s===r&&(s=null),s!==r&&(u=ze())!==r?(125===e.charCodeAt(fe)?(c="}",fe++):(c=r,0===ve&&xe(g)),c!==r?(de=t,n=T(o,a,s),t=n):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r);return t}())===r&&(t=function(){var t,n,o,i,a,s,u,c,l;t=fe,123===e.charCodeAt(fe)?(n="{",fe++):(n=r,0===ve&&xe(h));n!==r&&ze()!==r&&(o=Ye())!==r&&ze()!==r?(44===e.charCodeAt(fe)?(i=",",fe++):(i=r,0===ve&&xe(x)),i!==r&&ze()!==r?("date"===e.substr(fe,4)?(a="date",fe+=4):(a=r,0===ve&&xe(M)),a===r&&("time"===e.substr(fe,4)?(a="time",fe+=4):(a=r,0===ve&&xe(N))),a!==r&&ze()!==r?(s=fe,44===e.charCodeAt(fe)?(u=",",fe++):(u=r,0===ve&&xe(x)),u!==r&&(c=ze())!==r&&(l=function(){var t,n,o;t=fe,"::"===e.substr(fe,2)?(n="::",fe+=2):(n=r,0===ve&&xe(O));n!==r&&(o=function(){var t,n,o,i;t=fe,n=fe,o=[],(i=Ue())===r&&(i=Fe());if(i!==r)for(;i!==r;)o.push(i),(i=Ue())===r&&(i=Fe());else o=r;n=o!==r?e.substring(n,fe):o;n!==r&&(de=t,n=Xh({type:1,pattern:a=n,parsedOptions:rt?(s=a,u={},s.replace(fg,(function(e){var t=e.length;switch(e[0]){case"G":u.era=4===t?"long":5===t?"narrow":"short";break;case"y":u.year=2===t?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":u.month=["numeric","2-digit","short","long","narrow"][t-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":u.day=["numeric","2-digit"][t-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":u.weekday=4===t?"short":5===t?"narrow":"short";break;case"e":if(t<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");u.weekday=["short","long","narrow","short"][t-4];break;case"c":if(t<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");u.weekday=["short","long","narrow","short"][t-4];break;case"a":u.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":u.hourCycle="h12",u.hour=["numeric","2-digit"][t-1];break;case"H":u.hourCycle="h23",u.hour=["numeric","2-digit"][t-1];break;case"K":u.hourCycle="h11",u.hour=["numeric","2-digit"][t-1];break;case"k":u.hourCycle="h24",u.hour=["numeric","2-digit"][t-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":u.minute=["numeric","2-digit"][t-1];break;case"s":u.second=["numeric","2-digit"][t-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":u.timeZoneName=t<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),u):{}},tt()));var a,s,u;return t=n}())!==r?(de=t,t=n=o):(fe=t,t=r);t===r&&(t=fe,de=fe,Ze.push("dateOrTimeArgStyle"),(n=(n=!0)?void 0:r)!==r&&(o=Pe())!==r?(de=t,n=E(o),t=n):(fe=t,t=r));return t}())!==r?s=u=[u,c,l]:(fe=s,s=r),s===r&&(s=null),s!==r&&(u=ze())!==r?(125===e.charCodeAt(fe)?(c="}",fe++):(c=r,0===ve&&xe(g)),c!==r?(de=t,n=T(o,a,s),t=n):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r);return t}());return t}())===r&&(t=function(){var t,n,o,i,a,s,u,c,l,f,d;t=fe,123===e.charCodeAt(fe)?(n="{",fe++):(n=r,0===ve&&xe(h));if(n!==r)if(ze()!==r)if((o=Ye())!==r)if(ze()!==r)if(44===e.charCodeAt(fe)?(i=",",fe++):(i=r,0===ve&&xe(x)),i!==r)if(ze()!==r)if("plural"===e.substr(fe,6)?(a="plural",fe+=6):(a=r,0===ve&&xe(L)),a===r&&("selectordinal"===e.substr(fe,13)?(a="selectordinal",fe+=13):(a=r,0===ve&&xe(U))),a!==r)if(ze()!==r)if(44===e.charCodeAt(fe)?(s=",",fe++):(s=r,0===ve&&xe(x)),s!==r)if(ze()!==r)if(u=fe,"offset:"===e.substr(fe,7)?(c="offset:",fe+=7):(c=r,0===ve&&xe(F)),c!==r&&(l=ze())!==r&&(f=qe())!==r?u=c=[c,l,f]:(fe=u,u=r),u===r&&(u=null),u!==r)if((c=ze())!==r){if(l=[],(f=Be())!==r)for(;f!==r;)l.push(f),f=Be();else l=r;l!==r&&(f=ze())!==r?(125===e.charCodeAt(fe)?(d="}",fe++):(d=r,0===ve&&xe(g)),d!==r?(de=t,n=function(e,t,n,r){return Xh({type:Qh.plural,pluralType:"plural"===t?"cardinal":"ordinal",value:e,offset:n?n[2]:0,options:r.reduce((function(e,t){var n=t.id,r=t.value,o=t.location;return n in e&&be('Duplicate option "'+n+'" in plural element: "'+me()+'"',ye()),e[n]={value:r,location:o},e}),{})},tt())}(o,a,u,l),t=n):(fe=t,t=r)):(fe=t,t=r)}else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;return t}())===r&&(t=function(){var t,n,o,i,a,s,u,c,l;t=fe,123===e.charCodeAt(fe)?(n="{",fe++):(n=r,0===ve&&xe(h));if(n!==r)if(ze()!==r)if((o=Ye())!==r)if(ze()!==r)if(44===e.charCodeAt(fe)?(i=",",fe++):(i=r,0===ve&&xe(x)),i!==r)if(ze()!==r)if("select"===e.substr(fe,6)?(a="select",fe+=6):(a=r,0===ve&&xe(V)),a!==r)if(ze()!==r)if(44===e.charCodeAt(fe)?(s=",",fe++):(s=r,0===ve&&xe(x)),s!==r)if(ze()!==r){if(u=[],(c=Ve())!==r)for(;c!==r;)u.push(c),c=Ve();else u=r;u!==r&&(c=ze())!==r?(125===e.charCodeAt(fe)?(l="}",fe++):(l=r,0===ve&&xe(g)),l!==r?(de=t,n=function(e,t){return Xh({type:Qh.select,value:e,options:t.reduce((function(e,t){var n=t.id,r=t.value,o=t.location;return n in e&&be('Duplicate option "'+n+'" in select element: "'+me()+'"',ye()),e[n]={value:r,location:o},e}),{})},tt())}(o,u),t=n):(fe=t,t=r)):(fe=t,t=r)}else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;else fe=t,t=r;return t}())===r&&(t=function(){var t,n;t=fe,35===e.charCodeAt(fe)?(n="#",fe++):(n=r,0===ve&&xe(u));n!==r&&(de=t,n=Xh({type:Qh.pound},tt()));return t=n}()),t}function Pe(){var t,n,o,i;if(t=fe,de=fe,(n=(n=nt)?void 0:r)!==r){if(o=[],(i=He())===r&&(i=Je())===r&&(i=$e())===r&&(60===e.charCodeAt(fe)?(i="<",fe++):(i=r,0===ve&&xe(a))),i!==r)for(;i!==r;)o.push(i),(i=He())===r&&(i=Je())===r&&(i=$e())===r&&(60===e.charCodeAt(fe)?(i="<",fe++):(i=r,0===ve&&xe(a)));else o=r;o!==r?(de=t,t=n=s(o)):(fe=t,t=r)}else fe=t,t=r;if(t===r){if(t=fe,n=[],(o=He())===r&&(o=Je())===r&&(o=$e())===r&&(o=_e()),o!==r)for(;o!==r;)n.push(o),(o=He())===r&&(o=Je())===r&&(o=$e())===r&&(o=_e());else n=r;n!==r&&(de=t,n=s(n)),t=n}return t}function _e(){var t,n,o;return t=fe,n=fe,ve++,(o=ke())===r&&(o=Re())===r&&(o=De()),ve--,o===r?n=void 0:(fe=n,n=r),n!==r?(60===e.charCodeAt(fe)?(o="<",fe++):(o=r,0===ve&&xe(a)),o!==r?(de=t,t=n="<"):(fe=t,t=r)):(fe=t,t=r),t}function De(){var t,n,o,i,s,u,c;return t=fe,n=fe,60===e.charCodeAt(fe)?(o="<",fe++):(o=r,0===ve&&xe(a)),o!==r&&(i=Ke())!==r&&(s=ze())!==r?("/>"===e.substr(fe,2)?(u="/>",fe+=2):(u=r,0===ve&&xe(l)),u!==r?n=o=[o,i,s,u]:(fe=n,n=r)):(fe=n,n=r),n!==r&&(de=t,c=n,n=Xh({type:Qh.literal,value:c.join("")},tt())),t=n}function ke(){var t,n,o,i;return t=fe,60===e.charCodeAt(fe)?(n="<",fe++):(n=r,0===ve&&xe(a)),n!==r&&(o=Ke())!==r?(62===e.charCodeAt(fe)?(i=">",fe++):(i=r,0===ve&&xe(f)),i!==r?(de=t,t=n=o):(fe=t,t=r)):(fe=t,t=r),t}function Re(){var t,n,o,i;return t=fe,"</"===e.substr(fe,2)?(n="</",fe+=2):(n=r,0===ve&&xe(d)),n!==r&&(o=Ke())!==r?(62===e.charCodeAt(fe)?(i=">",fe++):(i=r,0===ve&&xe(f)),i!==r?(de=t,t=n=o):(fe=t,t=r)):(fe=t,t=r),t}function Me(){var t,n,o,i,a;if(ve++,t=fe,n=[],o=fe,i=fe,ve++,(a=Ge())===r&&(m.test(e.charAt(fe))?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(y))),ve--,a===r?i=void 0:(fe=i,i=r),i!==r?(e.length>fe?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(b)),a!==r?o=i=[i,a]:(fe=o,o=r)):(fe=o,o=r),o!==r)for(;o!==r;)n.push(o),o=fe,i=fe,ve++,(a=Ge())===r&&(m.test(e.charAt(fe))?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(y))),ve--,a===r?i=void 0:(fe=i,i=r),i!==r?(e.length>fe?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(b)),a!==r?o=i=[i,a]:(fe=o,o=r)):(fe=o,o=r);else n=r;return t=n!==r?e.substring(t,fe):n,ve--,t===r&&(n=r,0===ve&&xe(v)),t}function Ne(){var t,n,o;return ve++,t=fe,47===e.charCodeAt(fe)?(n="/",fe++):(n=r,0===ve&&xe(S)),n!==r&&(o=Me())!==r?(de=t,t=n=o):(fe=t,t=r),ve--,t===r&&(n=r,0===ve&&xe(w)),t}function Le(){var e,t,n,o;if(ve++,e=fe,ze()!==r)if((t=Me())!==r){for(n=[],o=Ne();o!==r;)n.push(o),o=Ne();n!==r?(de=e,e=function(e,t){return{stem:e,options:t}}(t,n)):(fe=e,e=r)}else fe=e,e=r;else fe=e,e=r;return ve--,e===r&&(r,0===ve&&xe(I)),e}function Ue(){var t,n,o,i;if(t=fe,39===e.charCodeAt(fe)?(n="'",fe++):(n=r,0===ve&&xe(j)),n!==r){if(o=[],(i=He())===r&&(A.test(e.charAt(fe))?(i=e.charAt(fe),fe++):(i=r,0===ve&&xe(P))),i!==r)for(;i!==r;)o.push(i),(i=He())===r&&(A.test(e.charAt(fe))?(i=e.charAt(fe),fe++):(i=r,0===ve&&xe(P)));else o=r;o!==r?(39===e.charCodeAt(fe)?(i="'",fe++):(i=r,0===ve&&xe(j)),i!==r?t=n=[n,o,i]:(fe=t,t=r)):(fe=t,t=r)}else fe=t,t=r;if(t===r)if(t=[],(n=He())===r&&(_.test(e.charAt(fe))?(n=e.charAt(fe),fe++):(n=r,0===ve&&xe(D))),n!==r)for(;n!==r;)t.push(n),(n=He())===r&&(_.test(e.charAt(fe))?(n=e.charAt(fe),fe++):(n=r,0===ve&&xe(D)));else t=r;return t}function Fe(){var t,n;if(t=[],k.test(e.charAt(fe))?(n=e.charAt(fe),fe++):(n=r,0===ve&&xe(R)),n!==r)for(;n!==r;)t.push(n),k.test(e.charAt(fe))?(n=e.charAt(fe),fe++):(n=r,0===ve&&xe(R));else t=r;return t}function Ve(){var t,n,o,i,a,s,u;return t=fe,ze()!==r&&(n=Qe())!==r&&ze()!==r?(123===e.charCodeAt(fe)?(o="{",fe++):(o=r,0===ve&&xe(h)),o!==r?(de=fe,Ze.push("select"),(!0?void 0:r)!==r&&(i=je())!==r?(125===e.charCodeAt(fe)?(a="}",fe++):(a=r,0===ve&&xe(g)),a!==r?(de=t,s=n,u=i,Ze.pop(),t=Xh({id:s,value:u},tt())):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r),t}function Be(){var t,n,o,i,a,s,u;return t=fe,ze()!==r&&(n=function(){var t,n,o,i;return t=fe,n=fe,61===e.charCodeAt(fe)?(o="=",fe++):(o=r,0===ve&&xe(B)),o!==r&&(i=qe())!==r?n=o=[o,i]:(fe=n,n=r),(t=n!==r?e.substring(t,fe):n)===r&&(t=Qe()),t}())!==r&&ze()!==r?(123===e.charCodeAt(fe)?(o="{",fe++):(o=r,0===ve&&xe(h)),o!==r?(de=fe,Ze.push("plural"),(!0?void 0:r)!==r&&(i=je())!==r?(125===e.charCodeAt(fe)?(a="}",fe++):(a=r,0===ve&&xe(g)),a!==r?(de=t,s=n,u=i,Ze.pop(),t=Xh({id:s,value:u},tt())):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r),t}function Ge(){var t;return ve++,W.test(e.charAt(fe))?(t=e.charAt(fe),fe++):(t=r,0===ve&&xe(z)),ve--,t===r&&(r,0===ve&&xe(G)),t}function We(){var t;return ve++,H.test(e.charAt(fe))?(t=e.charAt(fe),fe++):(t=r,0===ve&&xe(J)),ve--,t===r&&(r,0===ve&&xe(q)),t}function ze(){var t,n,o;for(ve++,t=fe,n=[],o=Ge();o!==r;)n.push(o),o=Ge();return t=n!==r?e.substring(t,fe):n,ve--,t===r&&(n=r,0===ve&&xe($)),t}function qe(){var t,n,o,i,a;return ve++,t=fe,45===e.charCodeAt(fe)?(n="-",fe++):(n=r,0===ve&&xe(K)),n===r&&(n=null),n!==r&&(o=Xe())!==r?(de=t,i=n,t=n=(a=o)?i?-a:a:0):(fe=t,t=r),ve--,t===r&&(n=r,0===ve&&xe(Y)),t}function He(){var t,n;return ve++,t=fe,"''"===e.substr(fe,2)?(n="''",fe+=2):(n=r,0===ve&&xe(Q)),n!==r&&(de=t,n="'"),ve--,(t=n)===r&&(n=r,0===ve&&xe(X)),t}function Je(){var t,n,o,i,a,s;if(t=fe,39===e.charCodeAt(fe)?(n="'",fe++):(n=r,0===ve&&xe(j)),n!==r)if((o=function(){var t,n,o,i;t=fe,n=fe,e.length>fe?(o=e.charAt(fe),fe++):(o=r,0===ve&&xe(b));o!==r?(de=fe,(i=(i="<"===(a=o)||">"===a||"{"===a||"}"===a||et()&&"#"===a)?void 0:r)!==r?n=o=[o,i]:(fe=n,n=r)):(fe=n,n=r);var a;t=n!==r?e.substring(t,fe):n;return t}())!==r){for(i=fe,a=[],"''"===e.substr(fe,2)?(s="''",fe+=2):(s=r,0===ve&&xe(Q)),s===r&&(A.test(e.charAt(fe))?(s=e.charAt(fe),fe++):(s=r,0===ve&&xe(P)));s!==r;)a.push(s),"''"===e.substr(fe,2)?(s="''",fe+=2):(s=r,0===ve&&xe(Q)),s===r&&(A.test(e.charAt(fe))?(s=e.charAt(fe),fe++):(s=r,0===ve&&xe(P)));(i=a!==r?e.substring(i,fe):a)!==r?(39===e.charCodeAt(fe)?(a="'",fe++):(a=r,0===ve&&xe(j)),a===r&&(a=null),a!==r?(de=t,t=n=o+i.replace("''","'")):(fe=t,t=r)):(fe=t,t=r)}else fe=t,t=r;else fe=t,t=r;return t}function $e(){var t,n,o,i;return t=fe,n=fe,e.length>fe?(o=e.charAt(fe),fe++):(o=r,0===ve&&xe(b)),o!==r?(de=fe,(i=(i=Z(o))?void 0:r)!==r?n=o=[o,i]:(fe=n,n=r)):(fe=n,n=r),n===r&&(10===e.charCodeAt(fe)?(n="\n",fe++):(n=r,0===ve&&xe(ee))),t=n!==r?e.substring(t,fe):n}function Ye(){var t,n;return ve++,t=fe,(n=Xe())===r&&(n=Qe()),t=n!==r?e.substring(t,fe):n,ve--,t===r&&(n=r,0===ve&&xe(te)),t}function Ke(){var t,n;return ve++,t=fe,(n=Xe())===r&&(n=function(){var t,n,o,i,a;ve++,t=fe,n=[],45===e.charCodeAt(fe)?(o="-",fe++):(o=r,0===ve&&xe(K));o===r&&(o=fe,i=fe,ve++,(a=Ge())===r&&(a=We()),ve--,a===r?i=void 0:(fe=i,i=r),i!==r?(e.length>fe?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(b)),a!==r?o=i=[i,a]:(fe=o,o=r)):(fe=o,o=r));if(o!==r)for(;o!==r;)n.push(o),45===e.charCodeAt(fe)?(o="-",fe++):(o=r,0===ve&&xe(K)),o===r&&(o=fe,i=fe,ve++,(a=Ge())===r&&(a=We()),ve--,a===r?i=void 0:(fe=i,i=r),i!==r?(e.length>fe?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(b)),a!==r?o=i=[i,a]:(fe=o,o=r)):(fe=o,o=r));else n=r;t=n!==r?e.substring(t,fe):n;ve--,t===r&&(n=r,0===ve&&xe(le));return t}()),t=n!==r?e.substring(t,fe):n,ve--,t===r&&(n=r,0===ve&&xe(ne)),t}function Xe(){var t,n,o,i,a;if(ve++,t=fe,48===e.charCodeAt(fe)?(n="0",fe++):(n=r,0===ve&&xe(oe)),n!==r&&(de=t,n=0),(t=n)===r){if(t=fe,n=fe,ie.test(e.charAt(fe))?(o=e.charAt(fe),fe++):(o=r,0===ve&&xe(ae)),o!==r){for(i=[],se.test(e.charAt(fe))?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(ue));a!==r;)i.push(a),se.test(e.charAt(fe))?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(ue));i!==r?n=o=[o,i]:(fe=n,n=r)}else fe=n,n=r;n!==r&&(de=t,n=parseInt(n.join(""),10)),t=n}return ve--,t===r&&(n=r,0===ve&&xe(re)),t}function Qe(){var t,n,o,i,a;if(ve++,t=fe,n=[],o=fe,i=fe,ve++,(a=Ge())===r&&(a=We()),ve--,a===r?i=void 0:(fe=i,i=r),i!==r?(e.length>fe?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(b)),a!==r?o=i=[i,a]:(fe=o,o=r)):(fe=o,o=r),o!==r)for(;o!==r;)n.push(o),o=fe,i=fe,ve++,(a=Ge())===r&&(a=We()),ve--,a===r?i=void 0:(fe=i,i=r),i!==r?(e.length>fe?(a=e.charAt(fe),fe++):(a=r,0===ve&&xe(b)),a!==r?o=i=[i,a]:(fe=o,o=r)):(fe=o,o=r);else n=r;return t=n!==r?e.substring(t,fe):n,ve--,t===r&&(n=r,0===ve&&xe(ce)),t}var Ze=["root"];function et(){return"plural"===Ze[Ze.length-1]}function tt(){return t&&t.captureLocation?{location:ye()}:{}}var nt=t&&t.ignoreTag,rt=t&&t.shouldParseSkeleton;if((n=i())!==r&&fe===e.length)return n;throw n!==r&&fe<e.length&&xe({type:"end"}),Ce(ge,he<e.length?e.charAt(he):null,he<e.length?Ee(he,he+1):Ee(he,he))},wg=/(^|[^\\])#/g;function Sg(e){e.forEach((function(e){(ag(e)||ig(e))&&Object.keys(e.options).forEach((function(t){for(var n,r=e.options[t],o=-1,i=void 0,a=0;a<r.value.length;a++){var s=r.value[a];if(eg(s)&&wg.test(s.value)){o=a,i=s;break}}if(i){var u=i.value.replace(wg,"$1{"+e.value+", number}"),c=bg(u);(n=r.value).splice.apply(n,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([o,1],c))}Sg(r.value)}))}))}function Ig(e,t){t=Xh({normalizeHashtagInPlural:!0,shouldParseSkeleton:!0},t||{});var n=bg(e,t);return t.normalizeHashtagInPlural&&Sg(n),n}var Og,Eg=n(34),xg=n.n(Eg);!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(Og||(Og={}));var Cg,Tg=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.code=n,o.originalMessage=r,o}return Jh(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),jg=function(e){function t(t,n,r,o){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',"INVALID_VALUE",o)||this}return Jh(t,e),t}(Tg),Ag=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,"INVALID_VALUE",r)||this}return Jh(t,e),t}(Tg),Pg=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',"MISSING_VALUE",n)||this}return Jh(t,e),t}(Tg);function _g(e){return"function"==typeof e}function Dg(e,t){return t?Object.keys(e).reduce((function(n,r){var o,i;return n[r]=(o=e[r],(i=t[r])?$h($h($h({},o||{}),i||{}),Object.keys(o).reduce((function(e,t){return e[t]=$h($h({},o[t]),i[t]||{}),e}),{})):o),n}),$h({},e)):e}function kg(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Cg||(Cg={}));var Rg=xg.a||Eg;var Mg,Ng=function(){function e(t,n,r,o){var i,a=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=a.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&0===t.type&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return function e(t,n,r,o,i,a,s){if(1===t.length&&eg(t[0]))return[{type:0,value:t[0].value}];for(var u=[],c=0,l=t;c<l.length;c++){var f=l[c];if(eg(f))u.push({type:0,value:f.value});else if(sg(f))"number"==typeof a&&u.push({type:0,value:r.getNumberFormat(n).format(a)});else{var d=f.value;if(!i||!(d in i))throw new Pg(d,s);var p=i[d];if(tg(f))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),u.push({type:"string"==typeof p?0:1,value:p});else if(rg(f)){var h="string"==typeof f.style?o.date[f.style]:lg(f.style)?f.style.parsedOptions:void 0;u.push({type:0,value:r.getDateTimeFormat(n,h).format(p)})}else if(og(f)){h="string"==typeof f.style?o.time[f.style]:lg(f.style)?f.style.parsedOptions:void 0;u.push({type:0,value:r.getDateTimeFormat(n,h).format(p)})}else if(ng(f)){(h="string"==typeof f.style?o.number[f.style]:cg(f.style)?f.style.parsedOptions:void 0)&&h.scale&&(p*=h.scale||1),u.push({type:0,value:r.getNumberFormat(n,h).format(p)})}else{if(ug(f)){var g=f.children,v=f.value,m=i[v];if(!_g(m))throw new Ag(v,"function",s);var y=m(e(g,n,r,o,i,a).map((function(e){return e.value})));Array.isArray(y)||(y=[y]),u.push.apply(u,y.map((function(e){return{type:"string"==typeof e?0:1,value:e}})))}if(ig(f)){if(!(b=f.options[p]||f.options.other))throw new jg(f.value,p,Object.keys(f.options),s);u.push.apply(u,e(b.value,n,r,o,i))}else if(ag(f)){var b;if(!(b=f.options["="+p])){if(!Intl.PluralRules)throw new Tg('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',"MISSING_INTL_API",s);var w=r.getPluralRules(n,{type:f.pluralType}).select(p-(f.offset||0));b=f.options[w]||f.options.other}if(!b)throw new jg(f.value,p,Object.keys(f.options),s);u.push.apply(u,e(b.value,n,r,o,i,p-(f.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&0===n.type&&0===t.type?n.value+=t.value:e.push(t),e}),[])}(u)}(a.ast,a.locales,a.formatters,a.formats,e,void 0,a.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{normalizeHashtagInPlural:!1,ignoreTag:null==o?void 0:o.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Dg(e.formats,r),this.locales=n,this.formatters=o&&o.formatters||(void 0===(i=this.formatterCache)&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Rg((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Yh([void 0],t)))}),{cache:kg(i.number),strategy:Rg.strategies.variadic}),getDateTimeFormat:Rg((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Yh([void 0],t)))}),{cache:kg(i.dateTime),strategy:Rg.strategies.variadic}),getPluralRules:Rg((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Yh([void 0],t)))}),{cache:kg(i.pluralRules),strategy:Rg.strategies.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=Ig,e.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Mg||(Mg={}));var Lg=function(e){function t(n,r,o){var i=e.call(this,"[@formatjs/intl Error "+n+"] "+r+" \n"+(o?"\n"+o.message+"\n"+o.stack:""))||this;return i.code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return Wh(t,e),t}(Error),Ug=function(e){function t(t,n){return e.call(this,"UNSUPPORTED_FORMATTER",t,n)||this}return Wh(t,e),t}(Lg),Fg=function(e){function t(t,n){return e.call(this,"INVALID_CONFIG",t,n)||this}return Wh(t,e),t}(Lg),Vg=function(e){function t(t,n){return e.call(this,"MISSING_DATA",t,n)||this}return Wh(t,e),t}(Lg),Bg=function(e){function t(t,n,r,o){var i=e.call(this,"FORMAT_ERROR",t+" \nLocale: "+n+"\nMessageID: "+(null==r?void 0:r.id)+"\nDefault Message: "+(null==r?void 0:r.defaultMessage)+"\nDescription: "+(null==r?void 0:r.description)+" \n",o)||this;return i.descriptor=r,i}return Wh(t,e),t}(Lg),Gg=function(e){function t(t,n){var r=e.call(this,"MISSING_TRANSLATION",'Missing message: "'+t.id+'" for locale "'+n+'", using '+(t.defaultMessage?"default message":"id")+" as fallback.")||this;return r.descriptor=t,r}return Wh(t,e),t}(Lg);function Wg(e,t,n){return void 0===n&&(n={}),t.reduce((function(t,r){return r in e?t[r]=e[r]:r in n&&(t[r]=n[r]),t}),{})}var zg={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},onError:function(e){0}};function qg(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Hg(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}var Jg=xg.a||Eg;function $g(e,t,n,r){var o,i=e&&e[t];if(i&&(o=i[n]),o)return o;r(new Ug("No "+t+" format named: "+n))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yg=function(e,t){return(Yg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Kg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Yg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Xg=function(){return(Xg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Qg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;function Zg(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}function ev(e){Zg(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var tv=Xg(Xg({},zg),{textComponent:O.Fragment});var nv=M.a.default||M.a;var rv=O.createContext(null),ov=rv.Consumer,iv=rv.Provider,av=rv;function sv(e,t){var n,r=t||{},o=r.intlPropName,i=void 0===o?"intl":o,a=r.forwardRef,s=void 0!==a&&a,u=r.enforceContext,c=void 0===u||u,l=function(t){return O.createElement(ov,null,(function(n){var r;c&&ev(n);var o=((r={})[i]=n,r);return O.createElement(e,Xg({},t,o,{ref:s?t.forwardedRef:null}))}))};return l.displayName="injectIntl("+(((n=e).displayName||n.name||"Component")+")"),l.WrappedComponent=e,nv(s?O.forwardRef((function(e,t){return O.createElement(l,Xg({},e,{forwardedRef:t}))})):l,e)}function uv(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=zh({timeZone:t},e[r]),n}),{})}function cv(e,t){return Object.keys(zh(zh({},e),t)).reduce((function(n,r){return n[r]=zh(zh({},e[r]||{}),t[r]||{}),n}),{})}function lv(e,t){if(!t)return e;var n=Ng.formats;return zh(zh(zh({},n),e),{date:cv(uv(n.date,t),uv(e.date||{},t)),time:cv(uv(n.time,t),uv(e.time||{},t))})}function fv(e,t,n,r,o){var i=e.locale,a=e.formats,s=e.messages,u=e.defaultLocale,c=e.defaultFormats,l=e.onError,f=e.timeZone,d=e.defaultRichTextElements;void 0===n&&(n={id:""});var p=n.id,h=n.defaultMessage;Zg(!!p,"[@formatjs/intl] An `id` must be provided to format a message.");var g=String(p),v=s&&Object.prototype.hasOwnProperty.call(s,g)&&s[g];if(Array.isArray(v)&&1===v.length&&v[0].type===Qh.literal)return v[0].value;if(!r&&v&&"string"==typeof v&&!d)return v.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=zh(zh({},d),r||{}),a=lv(a,f),c=lv(c,f),!v){if((!h||i&&i.toLowerCase()!==u.toLowerCase())&&l(new Gg(n,i)),h)try{return t.getMessageFormat(h,u,c,o).format(r)}catch(e){return l(new Bg('Error formatting default message for: "'+g+'", rendering default message verbatim',i,n,e)),"string"==typeof h?h:g}return g}try{return t.getMessageFormat(v,i,a,zh({formatters:t},o||{})).format(r)}catch(e){l(new Bg('Error formatting message: "'+g+'", using '+(h?"default message":"id")+" as fallback.",i,n,e))}if(h)try{return t.getMessageFormat(h,u,c,o).format(r)}catch(e){l(new Bg('Error formatting the default message for: "'+g+'", rendering message verbatim',i,n,e))}return"string"==typeof v?v:"string"==typeof h?h:g}var dv=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay"];function pv(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var a=n.format,s=a&&$g(o,"number",a,i)||{};return t(r,Wg(n,dv,s))}function hv(e,t,n,r){void 0===r&&(r={});try{return pv(e,t,r).format(n)}catch(t){e.onError(new Lg("FORMAT_ERROR","Error formatting number.",t))}return String(n)}function gv(e,t,n,r){void 0===r&&(r={});try{return pv(e,t,r).formatToParts(n)}catch(t){e.onError(new Lg("FORMAT_ERROR","Error formatting number.",t))}return[]}var vv=["numeric","style"];function mv(e,t,n,r,o){void 0===o&&(o={}),r||(r="second"),Intl.RelativeTimeFormat||e.onError(new Tg('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',"MISSING_INTL_API"));try{return function(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var a=n.format,s=!!a&&$g(o,"relative",a,i)||{};return t(r,Wg(n,vv,s))}(e,t,o).format(n,r)}catch(t){e.onError(new Bg("Error formatting relative time.",t))}return String(n)}var yv=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","fractionalSecondDigits","calendar","numberingSystem"];function bv(e,t,n,r){var o=e.locale,i=e.formats,a=e.onError,s=e.timeZone;void 0===r&&(r={});var u=r.format,c=zh(zh({},s&&{timeZone:s}),u&&$g(i,t,u,a)),l=Wg(r,yv,c);return"time"!==t||l.hour||l.minute||l.second||l.timeStyle||l.dateStyle||(l=zh(zh({},l),{hour:"numeric",minute:"numeric"})),n(o,l)}function wv(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return bv(e,"date",t,a).format(s)}catch(t){e.onError(new Lg("FORMAT_ERROR","Error formatting date.",t))}return String(s)}function Sv(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return bv(e,"time",t,a).format(s)}catch(t){e.onError(new Lg("FORMAT_ERROR","Error formatting time.",t))}return String(s)}function Iv(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=n[2],s=void 0===a?{}:a,u=e.timeZone,c=e.locale,l=e.onError,f=Wg(s,yv,u?{timeZone:u}:{});try{return t(c,f).formatRange(o,i)}catch(e){l(new Lg("FORMAT_ERROR","Error formatting date time range.",e))}return String(o)}function Ov(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return bv(e,"date",t,a).formatToParts(s)}catch(t){e.onError(new Lg("FORMAT_ERROR","Error formatting date.",t))}return[]}function Ev(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return bv(e,"time",t,a).formatToParts(s)}catch(t){e.onError(new Lg("FORMAT_ERROR","Error formatting time.",t))}return[]}var xv=["localeMatcher","type"];function Cv(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.PluralRules||i(new Tg('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',"MISSING_INTL_API"));var a=Wg(r,xv);try{return t(o,a).select(n)}catch(e){i(new Bg("Error formatting plural.",e))}return"other"}var Tv=["localeMatcher","type","style"],jv=Date.now();function Av(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.ListFormat||i(new Tg('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',"MISSING_INTL_API"));var a=Wg(r,Tv);try{var s={},u=n.map((function(e,t){if("object"==typeof e){var n=function(e){return jv+"_"+e+"_"+jv}(t);return s[n]=e,n}return String(e)}));return Object.keys(s).length?t(o,a).formatToParts(u).reduce((function(e,t){var n=t.value;return s[n]?e.push(s[n]):"string"==typeof e[e.length-1]?e[e.length-1]+=n:e.push(n),e}),[]):t(o,a).format(u)}catch(e){i(new Lg("FORMAT_ERROR","Error formatting list.",e))}return n}var Pv=["localeMatcher","style","type","fallback"];function _v(e,t,n,r){var o=e.locale,i=e.onError;Intl.DisplayNames||i(new Tg('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',"MISSING_INTL_API"));var a=Wg(r,Pv);try{return t(o,a).of(n)}catch(e){i(new Lg("FORMAT_ERROR","Error formatting display name.",e))}}function Dv(e){var t=e?e[Object.keys(e)[0]]:void 0;return"object"==typeof t&&!!t}function kv(e,t){var n=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,o=Jg((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,qh([void 0],t)))}),{cache:Hg(e.dateTime),strategy:Jg.strategies.variadic}),i=Jg((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,qh([void 0],t)))}),{cache:Hg(e.number),strategy:Jg.strategies.variadic}),a=Jg((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,qh([void 0],t)))}),{cache:Hg(e.pluralRules),strategy:Jg.strategies.variadic});return{getDateTimeFormat:o,getNumberFormat:i,getMessageFormat:Jg((function(e,t,n,r){return new Ng(e,t,n,zh({formatters:{getNumberFormat:i,getDateTimeFormat:o,getPluralRules:a}},r||{}))}),{cache:Hg(e.message),strategy:Jg.strategies.variadic}),getRelativeTimeFormat:Jg((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,qh([void 0],e)))}),{cache:Hg(e.relativeTime),strategy:Jg.strategies.variadic}),getPluralRules:a,getListFormat:Jg((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,qh([void 0],e)))}),{cache:Hg(e.list),strategy:Jg.strategies.variadic}),getDisplayNames:Jg((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,qh([void 0],e)))}),{cache:Hg(e.displayNames),strategy:Jg.strategies.variadic})}}(t),r=zh(zh({},zg),e),o=r.locale,i=r.defaultLocale,a=r.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&a?a(new Vg('Missing locale data for locale: "'+o+'" in Intl.NumberFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&a&&a(new Vg('Missing locale data for locale: "'+o+'" in Intl.DateTimeFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):(a&&a(new Fg('"locale" was not configured, using "'+i+'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details')),r.locale=r.defaultLocale||"en"),function(e){e.defaultRichTextElements&&!Dv(e.messages||{})&&console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}(r),zh(zh({},r),{formatters:n,formatNumber:hv.bind(null,r,n.getNumberFormat),formatNumberToParts:gv.bind(null,r,n.getNumberFormat),formatRelativeTime:mv.bind(null,r,n.getRelativeTimeFormat),formatDate:wv.bind(null,r,n.getDateTimeFormat),formatDateToParts:Ov.bind(null,r,n.getDateTimeFormat),formatTime:Sv.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:Iv.bind(null,r,n.getDateTimeFormat),formatTimeToParts:Ev.bind(null,r,n.getDateTimeFormat),formatPlural:Cv.bind(null,r,n.getPluralRules),formatMessage:fv.bind(null,r,n),formatList:Av.bind(null,r,n.getListFormat),formatDisplayName:_v.bind(null,r,n.getDisplayNames),__addMessages:function(t){var n=Dv(r.messages),o=Dv(t);e.onError&&(n&&!o||!n&&o)&&e.onError(new Fg("Cannot mix AST & non-AST messages for locale "+r.locale)),r.messages=zh(zh({},r.messages),t)}})}var Rv=n(35),Mv=n.n(Rv),Nv=Mv.a||Rv;function Lv(e){return{locale:e.locale,timeZone:e.timeZone,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function Uv(e){return e?Object.keys(e).reduce((function(t,n){var r,o=e[n];return t[n]=_g(o)?(r=o,function(e){return r(O.Children.toArray(e))}):o,t}),{}):e}var Fv=function(e,t,n,r){var o=fv(e,t,n,Uv(r));return Array.isArray(o)?O.Children.toArray(o):o},Vv=function(e,t){var n=e.defaultRichTextElements,r=Qg(e,["defaultRichTextElements"]),o=Uv(n),i=kv(Xg(Xg(Xg({},tv),r),{defaultRichTextElements:o}),t);return Xg(Xg({},i),{formatMessage:Fv.bind(null,{locale:i.locale,timeZone:i.timeZone,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:o},i.formatters)})},Bv=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:Vv(Lv(t.props),t.cache),prevConfig:Lv(t.props)},t}return Kg(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.prevConfig,r=t.cache,o=Lv(e);return Nv(n,o)?null:{intl:Vv(o,r),prevConfig:o}},t.prototype.render=function(){return ev(this.state.intl),O.createElement(iv,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=tv,t}(O.PureComponent),Gv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Wv=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function zv(e,t){var n=Hv(e=e.toLowerCase(),t);if(n&&n!==(t&&t[0]))return n}function qv(e){if(e){var t,n,r=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(e.languages)&&e.languages.length>0&&(n=e.languages[0])&&n.length)return n;for(t=0;t<r.length;t++)if((n=e[r[t]])&&n.length)return n}}function Hv(e,t){if(void 0===t&&(t=[]),e)return Zv(e,t)}function Jv(e,t){return e.split("-")[0]===t.split("-")[0]}function $v(e,t){return Gv(this,void 0,void 0,(function(){return Wv(this,(function(n){switch(n.label){case 0:return[4,Zc(e+"/"+t)];case 1:return[2,n.sent()]}}))}))}function Yv(e){for(var t=!1,n=["ar","he"],r=0;r<n.length;r++)Jv(n[r],e)&&(t=!0);return t}var Kv={};function Xv(e,t){var n,r,o,i,a,s,u,c;void 0===e&&(e="_jimu"),void 0===t&&(t="runtime");var l=e+"-"+t;if(Kv[l])return Kv[l];var f,d={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},p=Jf().getState();if(!p)return null;if("_jimu"===e)f=Vv({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:p.appI18nMessages},d);else if("runtime"===t){var h=window.jimuConfig.isBuilder?null===(n=p.appStateInBuilder)||void 0===n?void 0:n.appConfig:p.appConfig,g=null===(o=null===(r=null==h?void 0:h.widgets)||void 0===r?void 0:r[e])||void 0===o?void 0:o.manifest.i18nMessages,v=Object.assign({},g,p.appI18nMessages);f=Vv({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:v},d)}else{var m=void 0;if(window.jimuConfig.isBuilder){var y=null===(u=null===(s=null===(a=null===(i=p.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===a?void 0:a.widgets)||void 0===s?void 0:s[e])||void 0===u?void 0:u.manifest.name;m=null===(c=p.builder.widgetSettingI18nMessages)||void 0===c?void 0:c[y]}else m={};v=Object.assign({},m,p.appI18nMessages);f=Vv({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:v},d)}return Kv[l]=f,f}function Qv(e){return Zv(e,["ar","en","he","ja","ko","es-mx","th","zh","it-ch","de-ch"])?".":","}function Zv(e,t){var n;if(void 0===t&&(t=[]),e=e.toLowerCase(),t.includes(e))n=e;else{var r=e.split("-")[0];if(t.includes(r))n=r;else{var o=t.find((function(t){return t.split("-")[0]===e}));o&&(n=o)}}return n}var em,tm,nm={loading:"Loading",apply:"Apply",ok:"OK",publish:"Publish",cancel:"Cancel",yes:"Yes",no:"No",open:"Open",close:"Close",widgetLoadError:"Fail to load",notPublishError:"This item is not published. Please open this item in Experience Builder, then click <b>&nbsp;Publish&nbsp;</b> to publish it.",versionUpdateMsg:"New updates are available. Click Reload to get the latest updates.",userLocaleChangeMsg:"The user locale has changed. Click Reload to refresh the page.",doUpdate:"Reload",search:"Search",delete:"Delete",about:"About",neverUnsupportedBrowserTitle:"Unsupported browser",neverUnsupportedBrowserOnlineContent:"You are using a browser that is not supported by [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>. Provide your feedback through <feedback-link>GeoNet, the Esri Community</feedback-link>.",neverUnsupportedBrowserEnterpriseContent:"You are using a browser that is not supported [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>.",message_StringSelectionChange:"String Selection Changes",message_ExtentChange:"Extent Changes",message_DataRecordsSelectionChange:"Record Selection Changes",message_DataRecordSetChange:"Records Created",message_SelectDataRecord:"Select Data Record",actions:"Actions",noActions:"No available actions",export:"Export",exportAll:"Export all",exportSelected:"Export selected",largeWarningTitle:"Are you sure you want to export all data records? ",largeWarningContent:"Exporting large dataset will take time.",tooLargeWarningTitle:"You can only export the first {max} records.",tooLargeWarningContent:"Dataset export is limited to the first {max} records.",dataAction_ExportJson:"Export to JSON",dataAction_ExportCSV:"Export to CSV",dataAction_ExportGeoJson:"Export to GeoJSON",messageAction_SelectDataRecord:"Select Data Records",messageAction_FilterDataRecord:"Filter Data Records",icon:"Icon",small:"Small",low:"Low",medium:"Medium",high:"High",large:"Large",experience:"Experience",template:"Template",widget:"Widget",section:"Section",view:"View",page:"Page",dialog:"Window",layout:"Layout",theme:"Theme",dataSource:"Datasource",block:"Block",screenGroup:"Screen group",screen:"Screen",dialogConfirmationDefaultText:"I agree to the above terms and conditions",dialogPreventDisplayAgainDefaultText:"Don't show this again",noEditPrivilegesError:"Your account does not have permission to create or modify data.",noEditContentPrivilegesError:"Your account does not have permission to create or modify content.",essentialAppsLicenseErrorForApp:"Your account is not licensed to use an app that is not public. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",essentialAppsLicenseErrorForBuilder:"Your account is not licensed for Experience Builder. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",roleError:"Experience Builder Developer Edition requires a level 2 ArcGIS account to work. Please login with an account that has level 2 privileges.",roleError2:"Experience Builder Developer Edition requires an ArcGIS organization account with a user type that includes privileges to create content.",invalidResourceExperience:"This is not a supported item.",invalidResourceItem:"Item does not exist or is inaccessible.",invalidResourcePermission:"You do not have permissions to access this resource.",dataSourceCreateError:"Data is inaccessible.",blockedByAdminErrorForApp:"Your organization has blocked access to this application. Please contact your administrator for details.",blockedByAdminErrorForBuilder:"Your organization has blocked access to Experience Builder. Please contact your administrator for details.",upgradedFrom:"Upgraded from previous config",versionIsHigh:"Oops.. It seems this experience is built with a higher version of ArcGIS Experience Builder. Please upgrade to the latest version to view.",badVersion:"Oops.. It seems the version of this experience is incorrect. Please check its configuration file."},rm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},om=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e.AppList="AppList",e.Builder="Builder",e.Experience="Experience"}(em||(em={})),function(e){e.InvalidUserLevel="InvalidUserLevel",e.InvalidPrivilege="InvalidPrivilege",e.InvalidLicense="InvalidLicense",e.InvalidAppBlockedByOrg="InvalidAppBlockedByOrg",e.InvalidResourceExperience="InvalidResourceExperience",e.InvalidResourceItem="InvalidResourceItem",e.InvalidResourcePermission="InvalidResourcePermission",e.NullInfo=""}(tm||(tm={}));function im(e){return rm(this,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return[4,sm(e).then((function(e){return e.valid}))];case 1:return[2,t.sent()]}}))}))}function am(e){return rm(this,void 0,void 0,(function(){var t=this;return om(this,(function(n){switch(n.label){case 0:return[4,Sm(e).then((function(e){return rm(t,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return[4,dm(e)];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))}function sm(e){return rm(this,void 0,void 0,(function(){var t=this;return om(this,(function(n){switch(n.label){case 0:return[4,Sm(e).then((function(n){return rm(t,void 0,void 0,(function(){var t,r,o,i,a;return om(this,(function(s){switch(s.label){case 0:return t=function(e){return rm(this,void 0,void 0,(function(){var t,n,r,o;return om(this,(function(i){switch(i.label){case 0:return t=Jf().getState(),n=t.portalUrl,r=function(){var e=Jf().getState();return e.appId||e.queryObject.id||e.queryObject.template}(),o={valid:!0,isExperience:!0,isValidItem:!0,hasPermissionToAccess:!0},e===em.AppList||window.jimuConfig.isDevEdition?[4,Promise.resolve(o)]:[3,2];case 1:return[2,i.sent()];case 2:return r?[3,4]:[4,Promise.resolve(o)];case 3:return[2,i.sent()];case 4:return/\.json$/.test(r)||/^https/.test(r)?[4,Promise.resolve(o)]:[3,6];case 5:return[2,i.sent()];case 6:return[4,mm(n,r).then((function(e){return!e||"Web Experience"!==e.type&&"Web Experience Template"!==e.type?(o.valid=!1,o.isExperience=!1,o):o})).catch((function(e){return e&&"CONT_0001"===e.code?(o.valid=!1,o.isValidItem=!1):(o.valid=!1,o.hasPermissionToAccess=!1),o}))];case 7:return[2,i.sent()]}}))}))}(e),r=function(e){return rm(this,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return window.jimuConfig.isDevEdition||e!==em.Builder&&e!==em.AppList?[3,2]:[4,hm().then((function(e){return!(!e||!e.orgId)})).catch((function(){return!1}))];case 1:return[2,t.sent()];case 2:return[2,Promise.resolve(!0)]}}))}))}(e),o=function(e){return rm(this,void 0,void 0,(function(){var t=this;return om(this,(function(n){switch(n.label){case 0:return[4,lm().then((function(n){return rm(t,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return!window.jimuConfig.isDevEdition||!n||e!==em.Builder&&e!==em.AppList?[3,2]:[4,vm()];case 1:return[2,t.sent()];case 2:return[4,Promise.resolve(!0)];case 3:return[2,t.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))}(e),i=function(e,t){return rm(this,void 0,void 0,(function(){return om(this,(function(n){switch(n.label){case 0:return[4,dm(t).then((function(t){var n={valid:!1,capabilities:t,invalidInfo:tm.NullInfo,invalidMessage:""};if(window.jimuConfig.isDevEdition){if(e===em.AppList)return n.valid=t.canCreateExperience,n;if(e===em.Builder)return n.valid=t.canCreateExperience,n;if(e===em.Experience)return n.valid=!0,n}else{if(e===em.AppList)return n.valid=!0,n;if(e===em.Builder)return n.valid=t.canCreateExperience,n;if(e===em.Experience)return n.valid=!0,n}}))];case 1:return[2,n.sent()]}}))}))}(e,n),a=function(e,t){return rm(this,void 0,void 0,(function(){var n,r;return om(this,(function(o){switch(o.label){case 0:return n=Jf().getState(),r=n.portalUrl,window.jimuConfig.isDevEdition?[4,Promise.resolve({valid:!0,viewOnly:!1})]:[3,2];case 1:return[2,o.sent()];case 2:return e!==em.Builder&&e!==em.AppList?[3,4]:[4,Promise.resolve(t)];case 3:return[2,o.sent()];case 4:return n.appId?/^\/templates\/.*\.json$/.test(n.appId)?[4,Promise.resolve({valid:!0,viewOnly:!1})]:[3,6]:[3,8];case 5:return[2,o.sent()];case 6:return[4,ym(r,n.appId).then((function(e){return e&&(t.valid||"OAUTH_0070"!==t.messageCode)?{valid:!0,viewOnly:!1}:t})).catch((function(e){return{valid:!0,viewOnly:!1}}))];case 7:return[2,o.sent()];case 8:return[2,Promise.resolve({valid:!0,viewOnly:!1})]}}))}))}(e,n),[4,Promise.all([t,r,o,i,a])];case 1:return[2,s.sent()]}}))}))})).then((function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s={valid:n.valid&&r&&o&&i.valid&&a.valid&&(e!==em.Builder||!a.viewOnly),capabilities:{canViewExperience:o&&i.capabilities.canViewExperience&&a.valid,canCreateExperience:o&&i.capabilities.canCreateExperience&&a.valid&&!a.viewOnly,canUpdateExperience:o&&i.capabilities.canUpdateExperience&&a.valid&&!a.viewOnly,canDeleteExperience:o&&i.capabilities.canDeleteExperience&&a.valid&&!a.viewOnly,canShareExperience:o&&i.capabilities.canShareExperience&&a.valid&&!a.viewOnly},invalidInfo:tm.NullInfo,invalidMessage:""};return s.invalidInfo=function(e,t,n,r,o,i){var a=tm.NullInfo;a=r?i.valid?!o.valid||!n||e===em.Builder&&i.viewOnly?tm.InvalidPrivilege:t.valid?tm.NullInfo:t.isExperience?t.isValidItem?tm.InvalidResourcePermission:tm.InvalidResourceItem:tm.InvalidResourceExperience:"OAUTH_0070"===i.messageCode?tm.InvalidAppBlockedByOrg:tm.InvalidLicense:tm.InvalidUserLevel;return a}(e,n,r,o,i,a),s.invalidMessage=function(e,t){var n=Xv(),r=pm(),o="";r?t===tm.InvalidLicense?e===em.Builder||e===em.AppList?o=n.formatMessage({id:"essentialAppsLicenseErrorForBuilder",defaultMessage:nm.essentialAppsLicenseErrorForBuilder}):e===em.Experience&&(o=n.formatMessage({id:"essentialAppsLicenseErrorForApp",defaultMessage:nm.essentialAppsLicenseErrorForApp})):t===tm.InvalidAppBlockedByOrg?e===em.Builder||e===em.AppList?o=n.formatMessage({id:"blockedByAdminErrorForBuilder",defaultMessage:nm.blockedByAdminErrorForBuilder}):e===em.Experience&&(o=n.formatMessage({id:"blockedByAdminErrorForApp",defaultMessage:nm.blockedByAdminErrorForApp})):t===tm.InvalidPrivilege?o=window.jimuConfig.isDevEdition?n.formatMessage({id:"roleError2",defaultMessage:nm.roleError2}):n.formatMessage({id:"noEditContentPrivilegesError",defaultMessage:nm.noEditContentPrivilegesError}):t===tm.InvalidUserLevel?o=n.formatMessage({id:"roleError",defaultMessage:nm.roleError}):t===tm.InvalidResourceExperience?o=n.formatMessage({id:"invalidResourceExperience",defaultMessage:nm.invalidResourceExperience}):t===tm.InvalidResourceItem?o=n.formatMessage({id:"invalidResourceItem",defaultMessage:nm.invalidResourceItem}):t===tm.InvalidResourcePermission&&(o=n.formatMessage({id:"invalidResourcePermission",defaultMessage:nm.invalidResourcePermission})):o="";return o}(e,s.invalidInfo),s}))];case 1:return[2,n.sent()]}}))}))}function um(){return rm(this,void 0,void 0,(function(){var e,t,n;return om(this,(function(r){switch(r.label){case 0:return e=Jf().getState(),t=e.portalSelf,n=e.portalUrl,t?[4,Promise.resolve(t)]:[3,2];case 1:return[2,r.sent()];case 2:return n?[4,Jp(n)]:[3,4];case 3:return[2,r.sent()];case 4:return[4,Promise.resolve(null)];case 5:return[2,r.sent()]}}))}))}function cm(){return rm(this,void 0,void 0,(function(){return om(this,(function(e){switch(e.label){case 0:return[4,um().then((function(e){return e&&e.isPortal?e.currentVersion:null})).catch((function(e){return null}))];case 1:return[2,e.sent()]}}))}))}function lm(){return rm(this,void 0,void 0,(function(){var e;return om(this,(function(t){switch(t.label){case 0:return[4,cm()];case 1:return[2,!!(e=t.sent())&&Number(e)<=6.1]}}))}))}function fm(){return rm(this,void 0,void 0,(function(){var e;return om(this,(function(t){switch(t.label){case 0:return[4,cm()];case 1:return[2,!!(e=t.sent())&&Number(e)<=7.3]}}))}))}function dm(e){return rm(this,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return[4,gm().then((function(t){var n=t&&e.valid&&!e.viewOnly;return{canViewExperience:!0,canCreateExperience:n,canUpdateExperience:n,canDeleteExperience:n,canShareExperience:n}}))];case 1:return[2,t.sent()]}}))}))}function pm(){return Bp.getInstance().getMainSession()}function hm(){return rm(this,void 0,void 0,(function(){var e,t=this;return om(this,(function(n){switch(n.label){case 0:return(e=pm())?[3,2]:(console.log("The user has not signed in."),[4,Promise.reject()]);case 1:return[2,n.sent()];case 2:return[4,e.getUser().then((function(e){return e})).catch((function(n){return rm(t,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return console.log(n&&n.message,"You are currently signed in as: '"+e.username+"'."),[4,Promise.reject()];case 1:return[2,t.sent()]}}))}))}))];case 3:return[2,n.sent()]}}))}))}function gm(){return rm(this,void 0,void 0,(function(){return om(this,(function(e){switch(e.label){case 0:return[4,hm().then((function(e){return!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:user:createItem"))})).catch((function(){return!1}))];case 1:return[2,e.sent()]}}))}))}function vm(){return rm(this,void 0,void 0,(function(){return om(this,(function(e){switch(e.label){case 0:return[4,hm().then((function(e){return!(!e||"2"!==e.level)})).catch((function(){return!1}))];case 1:return[2,e.sent()]}}))}))}function mm(e,t){return rm(this,void 0,void 0,(function(){var e,n,r,o=this;return om(this,(function(i){switch(i.label){case 0:return e=pm(),n=Jf().getState(),(r=n.appInfo)&&r.name?[4,Promise.resolve(r)]:[3,2];case 1:return[2,i.sent()];case 2:return[4,Kp(t).then((function(e){return e})).catch((function(t){return rm(o,void 0,void 0,(function(){return om(this,(function(n){switch(n.label){case 0:return console.log(t&&t.message,"You are currently signed in as: '"+(null==e?void 0:e.username)+"'."),[4,Promise.reject(t)];case 1:return[2,n.sent()]}}))}))}))];case 3:return[2,i.sent()]}}))}))}function ym(e,t){return rm(this,void 0,void 0,(function(){return om(this,(function(e){switch(e.label){case 0:return[4,mm(0,t).then((function(e){return e&&"public"===e.access}))];case 1:return[2,e.sent()]}}))}))}function bm(e){return rm(this,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return window.jimuConfig.isDevEdition?e!==em.Builder&&e!==em.AppList?[3,2]:[4,lm()]:[3,4];case 1:return t.sent()?[2,!1]:[2,!0];case 2:return[2,!1];case 3:return[3,5];case 4:return[2,!0];case 5:return[2]}}))}))}var wm=null;function Sm(e){return rm(this,void 0,void 0,(function(){var t,n,r;return om(this,(function(o){switch(o.label){case 0:return t=Jf().getState(),n=t.portalUrl,[4,fm()];case 1:return r=o.sent()?"arcgisWebApps":"experienceBuilder",wm?[3,6]:[4,bm(e)];case 2:return o.sent()?[4,Im(n,r)]:[3,4];case 3:return wm=o.sent(),[3,6];case 4:return[4,Promise.resolve({valid:!0,viewOnly:!1})];case 5:wm=o.sent(),o.label=6;case 6:return[2,wm]}}))}))}function Im(e,t,n){return rm(this,void 0,void 0,(function(){var n,r,o,i,a=this;return om(this,(function(s){switch(s.label){case 0:return n={valid:!1,viewOnly:!1,messageCode:""},r=Bp.getInstance(),(o=r.getSessionByUrl(e))?(i=o.portal+"/oauth2/validateAppAccess?client_id="+t,[4,Object(Mp.d)(i,{authentication:o}).then((function(e){return!1===e.valid?(n.messageCode=e.messageCode||"",console.log("not-authorized","You are currently signed in as: '"+o.username+"'.")):(n.valid=!0,n.viewOnly=!!e.viewOnlyUserTypeApp),n})).catch((function(e){return rm(a,void 0,void 0,(function(){return om(this,(function(t){switch(t.label){case 0:return console.log(e&&e.message,"You are currently signed in as: '"+o.username+"'."),[4,Promise.resolve(n)];case 1:return[2,t.sent()]}}))}))}))]):[3,2];case 1:return[2,s.sent()];case 2:return[4,Promise.resolve(n)];case 3:return[2,s.sent()]}}))}))}var Om=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Em=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function xm(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=null),Om(this,void 0,void 0,(function(){var o;return Em(this,(function(i){return[2,(o=function(e,i){return void 0===i&&(i=0),t(e).catch((function(t){if(i>=n)return Promise.reject(t);var a=t.options;return"ArcGISAuthError"!==t.name||!a||a.authentication&&498!==t.code&&"AUTHENTICATION_ERROR_CODE"!==t.code&&"GWM_0003"!==t.code?o(e,i+1):Bp.getInstance().signIn(window.location&&window.location.href,!0,r||t.url).then((function(e){return o(e,i+1)}))}))})(Bp.getInstance().getSessionByUrl(r||e))]}))}))}var Cm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Tm=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},jm=function(){function e(){this.servicesInfo={},this.servicesInfoPromise={},this.arcGISServersInfo={},this.arcGISServersInfoPromise={}}return e.getInstance=function(){if(window.jimuConfig&&window.jimuConfig.isBuilder){if(window._appWindow&&window._appWindow._serviceManager)return window._appWindow._serviceManager;console.error("No window._appWindow._serviceDefinitionManager.")}return e.instance||(e.instance=new e),e.instance},e.prototype.getServiceInfo=function(e){return this.servicesInfo[e]},e.prototype.setServiceInfo=function(e,t){this.servicesInfo[e]=t},e.prototype.getServerInfo=function(e){return this.arcGISServersInfo[e]},e.prototype.getServerInfoByServiceUrl=function(e){return this.arcGISServersInfo[this.getArcGISServerUrlFromServiceUrl(e)]},e.prototype.fetchServiceInfo=function(e){return Cm(this,void 0,void 0,(function(){var t=this;return Tm(this,(function(n){switch(n.label){case 0:return this.getServiceInfo(e)?[4,Promise.resolve(this.getServiceInfo(e))]:[3,2];case 1:return[2,n.sent()];case 2:return this.servicesInfoPromise[e]?[4,this.servicesInfoPromise[e]]:[3,4];case 3:return[2,n.sent()];case 4:return this.servicesInfoPromise[e]=this.isHostedServiceInSamePortal(e).then((function(n){return Cm(t,void 0,void 0,(function(){var t,r,o,i=this;return Tm(this,(function(a){switch(a.label){case 0:return t=this.getArcGISServerUrlFromServiceUrl(e),r=null===(o=this.arcGISServersInfo[t])||void 0===o?void 0:o.owningSystemUrl,[4,xm(e,(function(t){return Cm(i,void 0,void 0,(function(){return Tm(this,(function(r){switch(r.label){case 0:return[4,Object(Mp.d)(e,{authentication:t,httpMethod:"GET"}).then((function(e){return{definition:e,isHostedInSamePortal:n}}))];case 1:return[2,r.sent()]}}))}))}),1,r)];case 1:return[2,a.sent()]}}))}))})).then((function(n){return t.servicesInfo[e]=n,n})),[2,this.servicesInfoPromise[e]]}}))}))},e.prototype.isHostedServiceInSamePortal=function(e){return Cm(this,void 0,void 0,(function(){return Tm(this,(function(t){switch(t.label){case 0:return[4,this.fetchArcGISServerInfo(e).then((function(t){return(null==t?void 0:t.owningSystemUrl)?!(!/https?:\/\/(www|services)\.arcgis\.com/.test(t.owningSystemUrl)||!/maps\.arcgis\.com\/?$/.test(Jf().getState().portalUrl))||(!(!/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsdevext\.arcgis\.com\/?$/.test(Jf().getState().portalUrl))||(!(!/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsqa\.arcgis\.com\/?$/.test(Jf().getState().portalUrl))||vl(Jf().getState().portalUrl,t.owningSystemUrl))):!!Bp.getInstance().getSessionByUrl(e)}))];case 1:return[2,t.sent()]}}))}))},e.prototype.fetchArcGISServerInfo=function(e){return Cm(this,void 0,void 0,(function(){var t,n=this;return Tm(this,(function(r){switch(r.label){case 0:return(t=this.getArcGISServerUrlFromServiceUrl(e))?[3,2]:[4,Promise.resolve(null)];case 1:return[2,r.sent()];case 2:return this.arcGISServersInfoPromise[t]?[4,this.arcGISServersInfoPromise[t]]:[3,4];case 3:return[2,r.sent()];case 4:return this.arcGISServersInfoPromise[t]=Object(Mp.d)(t,{httpMethod:"GET"}).then((function(e){return n.arcGISServersInfo[t]=e,e})).catch((function(e){return Cm(n,void 0,void 0,(function(){return Tm(this,(function(e){switch(e.label){case 0:return console.warn("Failed to fetch ArcGIS server info."),[4,Promise.resolve(null)];case 1:return[2,e.sent()]}}))}))})),[4,this.arcGISServersInfoPromise[t]];case 5:return[2,r.sent()]}}))}))},e.prototype.getArcGISServerUrlFromServiceUrl=function(e){var t=e.split(/\/rest(\/admin)?\/services\/|\/appservices\//)[0];return t?t+"/rest/info":null},e.prototype.isHostedService=function(e){return Cm(this,void 0,void 0,(function(){var t;return Tm(this,(function(n){switch(n.label){case 0:return(t=e.split(/\/rest(\/admin)?\/services\//)[0])?[3,2]:[4,Promise.resolve(!1)];case 1:return[2,n.sent()];case 2:return[4,Object(Mp.d)(t+"/rest/info",{httpMethod:"GET"}).then((function(e){return!!e.owningSystemUrl}))];case 3:return[2,n.sent()]}}))}))},e.prototype.fetchChildLayerDefinitionsFromUrls=function(e){return Cm(this,void 0,void 0,(function(){var t=this;return Tm(this,(function(n){switch(n.label){case 0:return[4,Promise.allSettled(e.map((function(e){return Cm(t,void 0,void 0,(function(){return Tm(this,(function(t){switch(t.label){case 0:return[4,this.fetchServiceInfo(e).then((function(e){return e.definition}))];case 1:return[2,t.sent()]}}))}))}))).then((function(t){var n,r={};return t.forEach((function(t,o){var i="fulfilled"===t.status?t.value:null;i&&(n=e[o],r[n]=i)})),r})).then((function(e){var n=Object.keys(e).map((function(t){return e[t]})),r=t._getAllChildLayerIdsOfGroupLayer(n),o={};return Object.keys(e).forEach((function(t){r.some((function(n){var r;return n===""+(null===(r=e[t])||void 0===r?void 0:r.id)}))||(o[t]=e[t])})),o}))];case 1:return[2,n.sent()]}}))}))},e.prototype._getAllChildLayerIdsOfGroupLayer=function(e){if(!e||0===e.length)return[];var t=e.filter((function(e){return e.type===ea.f.GroupLayer}));return this._getChildLayerIdsFromGroupLayerDefinitions(t)},e.prototype._getChildLayerIdsFromGroupLayerDefinitions=function(e){return 0===e.length?[]:Array.prototype.concat.apply([],e.map((function(e){return(null==e?void 0:e.subLayers.map((function(e){return""+e.id})))||[]})))},e}(),Am=jm;window.jimuConfig&&!window.jimuConfig.isBuilder&&(window._serviceManager=jm.getInstance());var Pm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},_m=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Dm={},km={};function Rm(e){return Pm(this,void 0,void 0,(function(){var t,n,r,o;return _m(this,(function(i){switch(i.label){case 0:return km[e]?[4,km[e]]:[3,2];case 1:return[2,i.sent()];case 2:return t=fl.getInstance().getExtensions(Yc.DependencyDefine),n=[],(r=t.filter((function(t){return t.getDependencyKey()===e}))[0])?n=n.concat(r.getResources()):/^http/.test(e)?n.push({url:e}):console.error("Unknown dependency.",e),o=[],n.forEach((function(e){Dm[e.url]?o.push(Dm[e.url]):o.push(function e(t){return Pm(this,void 0,void 0,(function(){var n=this;return _m(this,(function(r){switch(r.label){case 0:return t.dependencies&&t.dependencies.length>0?[4,Promise.all(t.dependencies.map((function(t){return Pm(n,void 0,void 0,(function(){return _m(this,(function(n){switch(n.label){case 0:return[4,e(t)];case 1:return[2,n.sent()]}}))}))}))).then((function(){return Pm(n,void 0,void 0,(function(){return _m(this,(function(n){switch(n.label){case 0:return delete t.dependencies,[4,e(t)];case 1:return[2,n.sent()]}}))}))}))]:[3,2];case 1:return[2,r.sent()];case 2:return Dm[t.url]=Zc(t.url),[4,Dm[t.url]];case 3:return[2,r.sent()]}}))}))}(e))})),[2,km[e]=Promise.all(o).then((function(e){}))]}}))}))}function Mm(e){return Pm(this,void 0,void 0,(function(){var t=this;return _m(this,(function(n){switch(n.label){case 0:return[4,e.reduce((function(e,n){return Pm(t,void 0,void 0,(function(){var t=this;return _m(this,(function(r){switch(r.label){case 0:return[4,e.then((function(){return Pm(t,void 0,void 0,(function(){return _m(this,(function(e){switch(e.label){case 0:return[4,Rm(n)];case 1:return[2,e.sent()]}}))}))}))];case 1:return[2,r.sent()]}}))}))}),Rm(e[0]))];case 1:return[2,n.sent()]}}))}))}var Nm,Lm,Um,Fm,Vm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Bm=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Gm(e){return Vm(this,void 0,void 0,(function(){var t=this;return Bm(this,(function(n){switch(n.label){case 0:return[4,Rm("jimu-arcgis").then((function(){return Nm||(Nm=function(){return Vm(this,void 0,void 0,(function(){return Bm(this,(function(e){switch(e.label){case 0:return[4,el(["esri/identity/IdentityManager","esri/identity/OAuthInfo","esri/config"]).then((function(e){Um=e[0],Lm=e[1],Fm=e[2];var t=Bp.getInstance(),n=Jf().getState().portalUrl,r=t.getMainPortal();(null==r?void 0:r.isWebTier)||Wm(n),Wm("https://devext.arcgis.com"),Wm("https://qaext.arcgis.com"),Wm("https://www.arcgis.com"),zm(t.getSessions()),t.addSessionChangeListener(qm),Um.on("credential-create",(function(e){var t=e.credential;Bp.getInstance().addFromArcGisJSCredential(t)}))}))];case 1:return[2,e.sent()]}}))}))}().then((function(){return Vm(t,void 0,void 0,(function(){return Bm(this,(function(e){switch(e.label){case 0:return[4,el(["dojo/promise/Promise","esri/config"])];case 1:return[2,e.sent()]}}))}))})).then((function(e){e[0];var t,n,r,o=e[1],i=Jf().getState().portalUrl;o.request.proxyUrl=Pl(i),o.portalUrl=i;var a=null===(r=null===(n=null===(t=Jf().getState().portalSelf)||void 0===t?void 0:t.helperServices)||void 0===n?void 0:n.geometry)||void 0===r?void 0:r.url;a&&(o.geometryServiceUrl=a)}))),Nm.then((function(){return Vm(t,void 0,void 0,(function(){return Bm(this,(function(t){switch(t.label){case 0:return[4,el(e)];case 1:return[2,t.sent()]}}))}))}))}))];case 1:return[2,n.sent()]}}))}))}function Wm(e){var t=Um.findOAuthInfo(e);if(!t){var n=Jf().getState().clientId,r=kf(""+window.location.origin+wf(nl("jimu-arcgis"))+"/oauth-callback.html");t=new Lm({appId:n,expiration:20159,portalUrl:e,authNamespace:"/",popup:!0,popupCallbackUrl:r}),Um.registerOAuthInfos([t])}}function zm(e){Um.destroyCredentials(),function(){var e=Bp.getInstance().getMainPortal(),t=Bp.getInstance().getTrustedServers();(null==e?void 0:e.isWebTier)&&Fm.request.trustedServers.push(e.portalUrl);t.forEach((function(e){Fm.request.trustedServers.includes(e)||Fm.request.trustedServers.push(e)}))}(),e&&e.forEach((function(e){var t=e.toCredential();Um.registerToken(t),(t=Um.findCredential(t.server))&&!Um.findOAuthInfo(t.server)&&(t.scope="server")}))}function qm(e,t){t!==Rp.ArcGISJSSync&&zm(e)}var Hm=function(){return(Hm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Jm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},$m=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Ym(e,t,n){return Jm(this,void 0,void 0,(function(){var r=this;return $m(this,(function(o){switch(o.label){case 0:return[4,Km(e,t).then((function(e){return Jm(r,void 0,void 0,(function(){var t=this;return $m(this,(function(r){switch(r.label){case 0:return e?[3,2]:[4,Promise.reject("Feaure layer data source error: failed to create feature layer with source records.")];case 1:return[2,r.sent()];case 2:return[4,Gm(["esri/layers/FeatureLayer"]).then((function(r){return Jm(t,void 0,void 0,(function(){var t,o;return $m(this,(function(i){switch(i.label){case 0:return t=r[0],o=new t(e),[4,Promise.resolve({layer:o,sourceVersion:n})];case 1:return[2,i.sent()]}}))}))}))];case 3:return[2,r.sent()]}}))}))}))];case 1:return[2,o.sent()]}}))}))}function Km(e,t){return Jm(this,void 0,void 0,(function(){var n,r,o,i,a,s,u;return $m(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Xm(t)];case 1:return(n=c.sent())&&(r=e.getIdField())?(o=e.getSchema(),(i=function(e,t){if(!e)return null;return Object.keys(e).map((function(n){var r,o={name:(r=e[n]).name,alias:r.alias,type:Qm(r.type)};return o.name===t&&(o.type="oid"),o}))}(null==o?void 0:o.fields,r))?(a=e.getGeometryType(),(s={esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}[a])||0!==n.length?[2,{fields:i,objectIdField:r,source:n,geometryType:s}]:[2,null]):[2,null]):[2,null];case 2:return u=c.sent(),console.error("Failed to get constructor options of JS API client-side feature layer.",u),[2,null];case 3:return[2]}}))}))}function Xm(e){return Jm(this,void 0,void 0,(function(){var t=this;return $m(this,(function(n){switch(n.label){case 0:return e?[3,2]:[4,Promise.resolve(null)];case 1:return[2,n.sent()];case 2:return[4,Promise.allSettled(e.filter((function(e){return null==e?void 0:e.feature})).map((function(e){return Jm(t,void 0,void 0,(function(){var t;return $m(this,(function(n){switch(n.label){case 0:return"esri.Graphic"!==e.feature.declaredClass?[3,2]:[4,Promise.resolve(e.feature)];case 1:return t=n.sent(),[3,4];case 2:return[4,ty(e.feature)];case 3:t=n.sent(),n.label=4;case 4:return[2,t]}}))}))}))).then((function(e){return e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}))}))];case 3:return[2,n.sent()]}}))}))}function Qm(e){switch(e){case Ui.Number:return"double";case Ui.Date:return"date";default:return"string"}}function Zm(e){return"esri.Graphic"===e.declaredClass?e.toJSON():e}function ey(e){return Jm(this,void 0,void 0,(function(){return $m(this,(function(t){switch(t.label){case 0:return"esri.Graphic"!==e.declaredClass?[3,2]:[4,Promise.resolve(e)];case 1:return[2,t.sent()];case 2:return[4,ty(e)];case 3:return[2,t.sent()]}}))}))}function ty(e){return Jm(this,void 0,void 0,(function(){return $m(this,(function(t){switch(t.label){case 0:return[4,Gm(["esri/Graphic"]).then((function(t){return t[0].fromJSON(e)}))];case 1:return[2,t.sent()]}}))}))}function ny(e){var t,n,r=this;if(!e)return Promise.resolve(null);if(e.isDataView&&e.dataViewId===Yu)return e.getMainDataSource().getPopupInfo();if(e.getDataSourceJson().isOutputFromWidget){if(1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){var o=e.getOriginDataSources()[0];if((null==o?void 0:o.type)===ea.c.FeatureLayer||(null==o?void 0:o.type)===ea.c.SceneLayer)return null===(n=o)||void 0===n?void 0:n.getPopupInfo().then((function(t){var n,r;if(!t)return null;if(null===(n=e.getDataSourceJson().schema)||void 0===n?void 0:n.fields){var o=Object.values(e.getDataSourceJson().schema.fields),i=null===(r=t.fieldInfos)||void 0===r?void 0:r.filter((function(e){return o.some((function(t){return(null==t?void 0:t.name)===(null==e?void 0:e.fieldName)}))}));return Hm(Hm({},t),{fieldInfos:i})}return t}))}return Promise.resolve(null)}if(e.layer){if(!e.layer.popupTemplate)return Promise.resolve(null);var i=e.layer.popupTemplate;return Promise.resolve({title:""+i.title,fieldInfos:i.fieldInfos.map((function(e){return function(e){var t;if(!e)return null;return{fieldName:e.fieldName,label:e.label,stringFieldOption:null===(t=e.stringFieldOption)||void 0===t?void 0:t.replace("-",""),tooltip:e.tooltip,visible:e.visible,format:cy(e.format)}}(e)}))})}var a=e.getRootDataSource()||e,s=a.getDataSourceJson().itemId;if(!s)return Promise.resolve(null);var u=a.getDataSourceJson().portalUrl;return xm(u,(function(t){return Jm(r,void 0,void 0,(function(){return $m(this,(function(n){return[2,Object(Gp.c)(s,{portal:hl(u),authentication:t}).then((function(t){var n,r=null===(n=null==t?void 0:t.layers)||void 0===n?void 0:n.find((function(t){return""+t.id===e.getDataSourceJson().layerId}));return(null==r?void 0:r.popupInfo)?r.popupInfo:null}))]}))}))}))}var ry,oy,iy,ay,sy,uy={default:"shortDateShortTime24","short-date":"shortDate","short-date-short-time":"shortDateShortTime","short-date-long-time":"shortDateLongTime","short-date-long-time-24":"shortDateLongTime24","long-month-day-year":"longMonthDayYear","day-short-month-year":"dayShortMonthYear","long-date":"longDate","long-month-year":"longMonthYear","short-month-year":"shortMonthYear",year:"year"};function cy(e){return e?{digitSeparator:e.digitSeparator,places:e.places,dateFormat:uy[e.dateFormat]||null}:null}function ly(e,t){return Jm(this,void 0,void 0,(function(){var n,r,o;return $m(this,(function(i){switch(i.label){case 0:return(n=(null==e?void 0:e.type)===ea.c.FeatureLayer?e:null==e?void 0:e.getAssociatedDataSource())&&t?(r=n.fixQueryParam(t),o=r.asMutable({deep:!0}),[4,Gm(["esri/geometry/support/jsonUtils"]).then((function(e){var t,i=e[0];if("number"==typeof r.pageSize){var a=null!==(t=r.page)&&void 0!==t?t:1;o.start=(a-1)*r.pageSize,o.num=r.pageSize,null!==n.getMaxRecordCount()&&(1===a?o.num=Math.min(n.getMaxRecordCount(),r.pageSize):a*r.pageSize>n.getMaxRecordCount()&&(o.num=n.getMaxRecordCount()-(a-1)*r.pageSize)),delete o.page,delete o.pageSize}return o.geometry&&(o.geometry=i.fromJSON(o.geometry)),delete o.key,n.getGDBVersion()&&(o.gdbVersion=n.getGDBVersion()),o.outFields=o.outFields&&o.outFields.length>0?o.outFields:["*"],o}))]):[2,null];case 1:return[2,i.sent()]}}))}))}!function(e){e.All="ALL",e.Simple="SIMPLE"}(ry||(ry={})),function(e){e.And="AND",e.Or="OR"}(oy||(oy={})),function(e){e.None="NONE",e.Previous="PREVIOUS",e.All="ALL"}(iy||(iy={})),function(e){e.StringOperatorIs="STRING_OPERATOR_IS",e.StringOperatorIsNot="STRING_OPERATOR_IS_NOT",e.StringOperatorContains="STRING_OPERATOR_CONTAINS",e.StringOperatorDoesNotContain="STRING_OPERATOR_DOES_NOT_CONTAIN",e.StringOperatorStartsWith="STRING_OPERATOR_STARTS_WITH",e.StringOperatorDoesNotStartWith="STRING_OPERATOR_DOES_NOT_START_WITH",e.StringOperatorEndsWith="STRING_OPERATOR_ENDS_WITH",e.StringOperatorDoesNotEndWith="STRING_OPERATOR_DOES_NOT_END_WITH",e.StringOperatorIsAnyOf="STRING_OPERATOR_IS_ANY_OF",e.StringOperatorIsNoneOf="STRING_OPERATOR_IS_NONE_OF",e.StringOperatorIsBlank="STRING_OPERATOR_IS_BLANK",e.StringOperatorIsNotBlank="STRING_OPERATOR_IS_NOT_BLANK",e.NumberOperatorIs="NUMBER_OPERATOR_IS",e.NumberOperatorIsNot="NUMBER_OPERATOR_IS_NOT",e.NumberOperatorIsAtLeast="NUMBER_OPERATOR_IS_AT_LEAST",e.NumberOperatorIsAtMost="NUMBER_OPERATOR_IS_AT_MOST",e.NumberOperatorIsLessThan="NUMBER_OPERATOR_IS_LESS_THAN",e.NumberOperatorIsGreaterThan="NUMBER_OPERATOR_IS_GREATER_THAN",e.NumberOperatorIsBetween="NUMBER_OPERATOR_IS_BETWEEN",e.NumberOperatorIsNotBetween="NUMBER_OPERATOR_IS_NOT_BETWEEN",e.NumberOperatorIsAnyOf="NUMBER_OPERATOR_IS_ANY_OF",e.NumberOperatorIsNoneOf="NUMBER_OPERATOR_IS_NONE_OF",e.NumberOperatorIsBlank="NUMBER_OPERATOR_IS_BLANK",e.NumberOperatorIsNotBlank="NUMBER_OPERATOR_IS_NOT_BLANK",e.DateOperatorIsOn="DATE_OPERATOR_IS_ON",e.DateOperatorIsNotOn="DATE_OPERATOR_IS_NOT_ON",e.DateOperatorIsIn="DATE_OPERATOR_IS_IN",e.DateOperatorIsNotIn="DATE_OPERATOR_IS_NOT_IN",e.DateOperatorIsBefore="DATE_OPERATOR_IS_BEFORE",e.DateOperatorIsAfter="DATE_OPERATOR_IS_AFTER",e.DateOperatorIsOnOrBefore="DATE_OPERATOR_IS_ON_OR_BEFORE",e.DateOperatorIsOnOrAfter="DATE_OPERATOR_IS_ON_OR_AFTER",e.DateOperatorIsInTheLast="DATE_OPERATOR_IS_IN_THE_LAST",e.DateOperatorIsNotInTheLast="DATE_OPERATOR_IS_NOT_IN_THE_LAST",e.DateOperatorIsBetween="DATE_OPERATOR_IS_BETWEEN",e.DateOperatorIsNotBetween="DATE_OPERATOR_IS_NOT_BETWEEN",e.DateOperatorIsBlank="DATE_OPERATOR_IS_BLANK",e.DateOperatorIsNotBlank="DATE_OPERATOR_IS_NOT_BLANK"}(ay||(ay={})),function(e){e.UserInput="USER_INPUT",e.Field="FIELD",e.SingleSelectFromUnique="UNIQUE",e.MultipleSelectFromUnique="MULTIPLE",e.SingleSelectFromPredefined="UNIQUE_PREDEFINED",e.MultipleSelectFromPredefined="MULTIPLE_PREDEFINED"}(sy||(sy={}));var fy,dy,py,hy,gy="-empty-";function vy(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function my(e){vy(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function yy(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function by(e,t){vy(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:yy(o),a=null==n.weekStartsOn?i:yy(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=my(e),u=s.getDay(),c=(u<a?7:0)+u-a;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function wy(e,t){vy(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:yy(o),a=null==n.weekStartsOn?i:yy(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=my(e),u=s.getDay(),c=6+(u<a?-7:0)-(u-a);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function Sy(e){vy(1,arguments);var t=my(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Iy(e){vy(1,arguments);var t=my(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Oy(e){vy(1,arguments);var t=my(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function Ey(e){vy(1,arguments);var t=my(e),n=t.getMonth(),r=n-n%3+3;return t.setMonth(r,0),t.setHours(23,59,59,999),t}function xy(e){vy(1,arguments);var t=my(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Cy(e){vy(1,arguments);var t=my(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}!function(e){e.Single="SINGLE",e.Set="SET"}(fy||(fy={})),function(e){e.Inline="INLINE",e.Block="BLOCK"}(dy||(dy={})),function(e){e.None="NONE",e.UseAskForValue="USE_ASK_FOR_VALUE",e.UseLabel="USE_LABEL"}(py||(py={})),function(e){e.Asc="ASC",e.Desc="DESC"}(hy||(hy={}));var Ty={equals:{op:"= ?"},doesNotEqual:{op:"<> ?"},isAtLeast:{op:">= ?"},isAtMost:{op:"<= ?"},isLessThan:{op:"< ?"},isGreaterThan:{op:"> ?"},isBetween:{op:"BETWEEN ?",sep:" AND "},isNotBetween:{op:"NOT BETWEEN ?",sep:" AND "},contains:{op:"LIKE ?",mod:"%{0}%"},doesNotContain:{op:"NOT LIKE ?",mod:"%{0}%"},startsWith:{op:"LIKE ?",mod:"{0}%"},doesNotStartWith:{op:"NOT LIKE ?",mod:"{0}%"},endsWith:{op:"LIKE ?",mod:"%{0}"},doesNotEndWith:{op:"NOT LIKE ?",mod:"%{0}"},isAnyOf:{op:"IN ?",mod:"[{0}]",type:"IN"},isNoneOf:{op:"NOT IN ?",mod:"[{0}]",type:"IN"}};function jy(e){var t="";switch(e){case ay.NumberOperatorIs:case ay.StringOperatorIs:case ay.DateOperatorIsOn:case ay.NumberOperatorIsBlank:case ay.StringOperatorIsBlank:case ay.DateOperatorIsBlank:t="equals";break;case ay.NumberOperatorIsNot:case ay.StringOperatorIsNot:case ay.DateOperatorIsNotOn:case ay.NumberOperatorIsNotBlank:case ay.StringOperatorIsNotBlank:case ay.DateOperatorIsNotBlank:t="doesNotEqual";break;case ay.NumberOperatorIsAtLeast:case ay.DateOperatorIsOnOrAfter:t="isAtLeast";break;case ay.NumberOperatorIsAtMost:case ay.DateOperatorIsOnOrBefore:t="isAtMost";break;case ay.NumberOperatorIsLessThan:case ay.DateOperatorIsBefore:t="isLessThan";break;case ay.DateOperatorIsAfter:case ay.NumberOperatorIsGreaterThan:t="isGreaterThan";break;case ay.NumberOperatorIsBetween:case ay.DateOperatorIsBetween:t="isBetween";break;case ay.NumberOperatorIsNotBetween:case ay.DateOperatorIsNotBetween:t="isNotBetween";break;case ay.NumberOperatorIsAnyOf:case ay.StringOperatorIsAnyOf:case ay.DateOperatorIsIn:t="isAnyOf";break;case ay.NumberOperatorIsNoneOf:case ay.StringOperatorIsNoneOf:case ay.DateOperatorIsNotIn:t="isNoneOf";break;case ay.StringOperatorContains:t="contains";break;case ay.StringOperatorDoesNotContain:t="doesNotContain";break;case ay.StringOperatorStartsWith:t="startsWith";break;case ay.StringOperatorEndsWith:t="endsWith";break;case ay.StringOperatorDoesNotStartWith:t="doesNotStartWith";break;case ay.StringOperatorDoesNotEndWith:t="doesNotEndWith"}return t}function Ay(e,t,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),e.includes("BLANK"))return n.fieldAlias+(e.includes("NOT")?" IS NOT NULL":" IS NULL");var i=jy(e);if(e.includes("DATE"))switch(e){case ay.DateOperatorIsOn:i=o?"is":r?"isAt":"isOn";break;case ay.DateOperatorIsNotOn:i=o?"isNot":r?"isNotAt":"isNotOn";break;case ay.DateOperatorIsIn:i="isIn";break;case ay.DateOperatorIsNotIn:i="isNotIn";break;case ay.DateOperatorIsBefore:i="isBefore";break;case ay.DateOperatorIsAfter:i="isAfter";break;case ay.DateOperatorIsOnOrBefore:i=r?"isAtOrBefore":"isOnOrBefore";break;case ay.DateOperatorIsOnOrAfter:i=r?"isAtOrAfter":"isOnOrAfter";break;case ay.DateOperatorIsInTheLast:i="isInTheLast";break;case ay.DateOperatorIsNotInTheLast:i="isNotInTheLast"}return t.formatMessage({id:i+"ForDisplaySQL"},n)}function Py(e,t){var n=null,r=new Date,o=r.getTime();switch(e){case qu.Today:n=r;break;case qu.Yesterday:n=new Date(o-864e5);break;case qu.Tomorrow:n=new Date(o+864e5);break;case qu.ThisWeek:n=[by(r,{locale:t.locale}),wy(r,{locale:t.locale})];break;case qu.ThisMonth:n=[Sy(r),Iy(r)];break;case qu.ThisQuarter:n=[Oy(r),Ey(r)];break;case qu.ThisYear:n=[xy(r),Cy(r)]}return n}function _y(e,t,n){n=n||Xv();var r={sql:"",displaySQL:"(1=1)"};if(!e)return r;var o=t.getSchema().fields,i=pb(t.url),a=function e(t){if(!t.parts)return r;var a=t.logicalOperator?t.logicalOperator:oy.And,s=[],u=[];t.parts.forEach((function(t){var r,a,c,l,f,d,p,h,g,v,m,y;if(t.type===fy.Set){var b=e(t);s.push("("+b.sql+")"),u.push("( "+b.displaySQL+" )")}else{var w=t,S=!1,I=Ty[jy(w.operator)],O=sy.MultipleSelectFromPredefined===w.valueOptions.sourceType&&[ay.StringOperatorStartsWith,ay.StringOperatorDoesNotStartWith,ay.StringOperatorEndsWith,ay.StringOperatorDoesNotEndWith,ay.StringOperatorContains,ay.StringOperatorDoesNotContain].includes(w.operator),E="",x="",C=w.valueOptions.value?w.valueOptions.value.asMutable({deep:!0}):null,T=o[w.jimuFieldName],j=T?T.type:null;if(!j)return;var A={fieldAlias:T.alias||T.name,value:"?",endValue:"?"};if(j===Ui.Date&&w.valueOptions.sourceType!==sy.Field){var P=!1,_=!1,D=w.valueOptions.inputEditor;if(null===C){if(w.operator.indexOf("BLANK")>0){var k=w.operator.indexOf("NOT")>0?"NOT ":"";s.push("("+T.name+" IS "+k+"NULL)")}"SIMPLE_SELECT"===D?(null===(r=T.format)||void 0===r?void 0:r.dateFormat)&&T.format.dateFormat.includes("Time")&&(P=!0):P=D.includes("TIME")}else if("NUMBER_LIST_SELECTOR"===D&&null===C[0].value)A.endValue=n.formatMessage({id:C[0].label.toLowerCase()});else{var R=i?"":"timestamp ",M=null===(a=C[0])||void 0===a?void 0:a.value,N=void 0;if("SIMPLE_SELECT"===D){var L=Fy.Date;D="DATE_PICKER",(null===(c=T.format)||void 0===c?void 0:c.dateFormat)&&T.format.dateFormat.includes("Time")&&(P=!0,D="DATE_TIME_PICKER",L=T.format.dateFormat.includes("ShortTime")?Fy.DateTimeShort:Fy.DateTimeLong),A.value=qy(new Date(M),D,null===(l=T.format)||void 0===l?void 0:l.dateFormat,n),N=M=Hy(M,L)}else if("NUMBER_LIST_SELECTOR"===D)M=null,A.value=C[0].value,A.endValue=n.formatMessage({id:C[0].label.toLowerCase()});else{var U=null===(f=C[1])||void 0===f?void 0:f.value;if(null===C[0])M=null;else if("string"==typeof M){_=!0,A.value=n.formatMessage({id:Ry(C[0].value)}),M=Hy((F=Py(M,n))[0]||F,Fy.Date),void 0!==F.length?N=Hy(F[1],Fy.Date):U||(N=M,D="DATE_PICKER")}else P=D.includes("TIME"),A.value=zy(new Date(M),D,null===(d=T.format)||void 0===d?void 0:d.dateFormat,n),N=M;if(null===C[1])_=!1,N=null;else if(U){_=!1;var F,V=void 0;if("string"==typeof U)V=n.formatMessage({id:Ry(C[1].value)}),N=Hy((F=Py(U,n))[0]||F,Fy.Date),D="DATE_PICKER";else V=zy(new Date(U),D,null===(p=T.format)||void 0===p?void 0:p.dateFormat,n),N=U;A.endValue=V}}var B=M?R+"'"+Vy(M)+"'":null,G=N?R+"'"+function(e,t,n){"number"==typeof e&&(e=new Date(e));var r;"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t||"DATE_RANGE_SELECTOR"===t?r=new Date(e.getTime()+864e5):"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(r=n&&n.includes("LongTime")?function(e){return new Date(e.getTime()+1e3)}(e):function(e){return new Date(e.getTime()+6e4)}(e));return Vy(r)}(N,D,null===(h=T.format)||void 0===h?void 0:h.dateFormat)+"'":null;switch(w.operator){case ay.DateOperatorIsOn:E=T.name+" BETWEEN "+B+" AND "+G+" AND ("+T.name+" <> "+G+")";break;case ay.DateOperatorIsNotOn:E=T.name+" < "+B+" OR "+T.name+" >= "+G;break;case ay.DateOperatorIsBefore:E=T.name+" < "+B;break;case ay.DateOperatorIsAfter:E=T.name+" >= "+G;break;case ay.DateOperatorIsOnOrBefore:E=T.name+" < "+G;break;case ay.DateOperatorIsOnOrAfter:E=T.name+" >= "+B;break;case ay.DateOperatorIsInTheLast:E=T.name+" BETWEEN CURRENT_TIMESTAMP - "+ky(C[0].value,null===(g=C[0])||void 0===g?void 0:g.label)+" AND CURRENT_TIMESTAMP";break;case ay.DateOperatorIsNotInTheLast:E=T.name+" NOT BETWEEN CURRENT_TIMESTAMP - "+ky(C[0].value,null===(v=C[0])||void 0===v?void 0:v.label)+" AND CURRENT_TIMESTAMP";break;case ay.DateOperatorIsBetween:case ay.DateOperatorIsIn:E=B&&G?"("+T.name+" BETWEEN "+B+" AND "+G+") AND ("+T.name+" <> "+G+")":"";break;case ay.DateOperatorIsNotBetween:case ay.DateOperatorIsNotIn:E=B&&G?"("+T.name+" < "+B+") OR ("+T.name+" >= "+G+")":""}""!==E&&s.push("("+E+")")}return x=Ay(w.operator,n,A,P,_),void u.push("("+x+")")}var W=[],z=[],q=[sy.SingleSelectFromPredefined,sy.MultipleSelectFromPredefined].includes(w.valueOptions.sourceType);if(q&&C&&(C=(C=C.filter((function(e){return e.selected}))).length>0?C:null),null===C)"IN"===I.type&&(A.value="(?)");else{for(var H=!1,J=0;J<C.length;J++){null!==C[J]&&C[J].value!==gy||(H=!0,C[J]={value:null,label:"?",alias:"?"});var $=C[J].value,Y=q?C[J].alias:C[J].label;if(w.valueOptions.sourceType===sy.Field){var K=o[$];Y=K.alias?K.alias:K.name}else{if(j===Ui.String&&($=null!==$?Ny($):null,S=!(i||w.caseSensitive)),Y=Ny(Y),I.mod&&"IN"!==I.type&&($=null!==$?Ly(I.mod,[$]):null),j===Ui.String&&null!==$)$=(i&&Uy($)?"N":"")+"'"+$+"'";Y=j===Ui.String&&null!==$?"'"+Y+"'":Y,S&&($=null!==$?$.toUpperCase():null,Y=Y.toUpperCase())}null!==$&&W.push($),z.push(Y)}if(H&&(W=[]),(O=O&&W.length>1)||!I.sep&&I.mod&&"IN"===I.type){var X=(m=W.length,y=[],new Array(m).fill(1).map((function(e,t){y.push("{"+t+"}")})),"("+y.join(",")+")");E=O?"predefined":Ly(X,W),A.value=Ly(X,z)}else W.map((function(e,t){t>0&&(E+=I.sep),E+=e})),A.value=z[0],A.endValue=z[1]||A.endValue}var Q=T.name;if(""!==E){var Z=S?"UPPER("+Q+")":Q;if(O){var ee=w.operator.includes("_NOT_")?" AND ":" OR ",te=W.map((function(e){return"("+Z+" "+My(I.op,e)+")"})).join(ee);s.push(te)}else{var ne=My(I.op,E);s.push("("+Z+" "+ne+")")}}else if(w.operator.indexOf("BLANK")>0){k=w.operator.indexOf("NOT")>0?"NOT ":"";s.push("("+Q+" IS "+k+"NULL)"),x="Null"}x=Ay(w.operator,n,A),u.push("("+x+")")}}));var c=n.formatMessage({id:a.toLowerCase()+"LowerCase"});return{sql:s.join(" "+a+" "),displaySQL:u.join(" "+c+" ")}}(e);return{sql:""===a.sql||"()"===a.sql?"":"("+a.sql+")",displaySQL:a.displaySQL}}function Dy(e){return null}function ky(e,t){var n=e;return t===Hu.Year?n=365*e:t===Hu.Month?n=30*e:t===Hu.Week?n=7*e:t===Hu.Hour?n=e/24:t===Hu.Minute&&(n=e/1440),n=Math.round(1e6*n)/1e6}function Ry(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function My(e,t){return e.replace("?",(function(){return t}))}function Ny(e){return e.replace(/\'/g,"''")}function Ly(e,t){return e.replace(/{([0-9]+)}/g,(function(e,n){return t[parseInt(n)]}))}function Uy(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}var Fy;function Vy(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}function By(e){var t=e.getTimezoneOffset();return(t<0?1:-1)*(t<0?Math.abs(t)/60:t/60)*60*60*1e3}function Gy(e){return e.getTime()-By(e)}function Wy(e){return e.getTime()+By(e)}function zy(e,t,n,r){return qy(new Date(Wy(e)),t,n,r)}function qy(e,t,n,r){var o="";if(r){var i=ac.date,a=ac.time;if(n){var s=sc(n);i=s.datePattern,a=t.includes("DATE_TIME_PICKER")?s.timePattern||a:""}else"DATE_PICKER"!==t&&"DOUBLE_DATE_PICKER"!==t||(a="");o=lc(e,r,i,a)}else"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t?o=e.toLocaleDateString():"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(o=e.toLocaleDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2));return o}function Hy(e,t){return"number"!=typeof e&&"string"!=typeof e||(e=new Date(e)),e.setMilliseconds(0),t===Fy.Date?(e.setHours(0),e.setMinutes(0),e.setSeconds(0)):t===Fy.DateTimeShort&&e.setSeconds(0),Gy(e)}!function(e){e.Date="DATE",e.DateTimeShort="DATE_TIME_SHORT",e.DateTimeLong="DATE_TIME_LONG"}(Fy||(Fy={}));var Jy=function(){return(Jy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Yy=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ky=["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"];function Xy(e){return $y(this,void 0,void 0,(function(){var t=this;return Yy(this,(function(n){switch(n.label){case 0:return[4,Am.getInstance().fetchArcGISServerInfo(e.url).then((function(n){return $y(t,void 0,void 0,(function(){var t=this;return Yy(this,(function(r){switch(r.label){case 0:return[4,xm(e.url,(function(n){return $y(t,void 0,void 0,(function(){var t,r=this;return Yy(this,(function(o){switch(o.label){case 0:return t=(null==n?void 0:n.token)?{httpMethod:"GET",params:{token:null==n?void 0:n.token}}:{httpMethod:"GET"},e.url?[4,Object(Mp.d)(e.url+"/"+e.featureId+"/attachments",t).then((function(e){return $y(r,void 0,void 0,(function(){return Yy(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve(e.attachmentInfos)];case 1:return[2,t.sent()]}}))}))}))]:[3,2];case 1:return[2,o.sent()];case 2:return[4,Promise.reject(null)];case 3:return[2,o.sent()]}}))}))}),1,null==n?void 0:n.owningSystemUrl)];case 1:return[2,r.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))}function Qy(e,t){return $y(this,void 0,void 0,(function(){var n=this;return Yy(this,(function(r){switch(r.label){case 0:return[4,Am.getInstance().fetchArcGISServerInfo(t.url).then((function(r){return $y(n,void 0,void 0,(function(){var n=this;return Yy(this,(function(o){switch(o.label){case 0:return[4,xm(t.url,(function(r){return $y(n,void 0,void 0,(function(){var n,o;return Yy(this,(function(i){switch(i.label){case 0:if(!(t&&t.attachmentTypes&&t.attachmentTypes.length>0))return[3,2];for(n=[],o=0;o<e.length;o++)t.attachmentTypes.includes(e[o].contentType)&&(e[o].url=t.url+"/"+t.featureId+"/attachments/"+e[o].id+((null==r?void 0:r.token)?"?token="+(null==r?void 0:r.token):""),n.push(e[o]));return[4,Promise.resolve(n)];case 1:return[2,i.sent()];case 2:for(o=0;o<e.length;o++)e[o].url=t.url+"/"+t.featureId+"/attachments/"+e[o].id+((null==r?void 0:r.token)?"?token="+(null==r?void 0:r.token):"");return[4,Promise.resolve(e)];case 3:return[2,i.sent()]}}))}))}),1,null==r?void 0:r.owningSystemUrl)];case 1:return[2,o.sent()]}}))}))}))];case 1:return[2,r.sent()]}}))}))}function Zy(e,t){var n;return n=Ky.includes(e.type)?Ui.Number:"esriFieldTypeDate"===e.type?Ui.Date:Ui.String,{jimuName:e.name,name:e.name,type:n,esriType:e.type,alias:e.alias,format:t&&t.format}}function eb(e){return Ky.includes(e)}function tb(e,t){var n=null;return e&&e.length>0&&e.some((function(e){return e.name===t&&(n=e,!0)})),n}function nb(e,t,n){var r,o=n[t],i=e.typeIdField;n.hasOwnProperty(i)&&(r=n[i]);var a=tb(e.fields,t),s=sb(o,null!=r?ub(e,t,r,a):lb(e,a));if(e.typeIdField===t){var u=[{value:n[t],label:s.displayValue}];s.displayValue=fb(e,u)[0].label}return s}function rb(e,t,n){if(1===n.length)return[h=nb(e,t,n[0])];var r=e.typeIdField,o=null,i=null,a=[],s=[];for(var u in n){var c=n[u],l=c[t];if(r===t)a=o||ib(e);else{var f=tb(e.fields,t);if(c.hasOwnProperty(r)){if(!i)for(var d in i={},o=ib(e)){var p=o[d].value;i[p]=ub(e,t,p,f)}(a=i[c[r]])||(a=ab(f))}else a=lb(e,f)}var h=sb(l,a);s.push(h)}return s}function ob(e,t,n){var r=null;if(!e)return r;var o=tb(e.fields,t);if(!o)return r;var i=n?n[e.typeIdField]:null,a=n&&null!=i;if(e.typeIdField&&e.typeIdField.toUpperCase()===t.toUpperCase()){if(r=ib(e),a){var s=sb(i,r);r=[{value:s.value,label:s.displayValue}]}}else r=a?ub(e,t,i,o):lb(e,o);return r}function ib(e){return fb(e,function(e){var t=null;return e.typeIdField&&e.types&&e.types.length>0&&(t=[],Object.keys(e.types).map((function(n){t.push({value:e.types[n].id,label:e.types[n].name})}))),t}(e))}function ab(e){var t=null;if(!e)return t;var n=e.domain;return n&&"codedValue"===n.type&&n.codedValues&&n.codedValues.length>0&&(t=[],n.codedValues.map((function(e){t.push({value:e.code,label:e.name})}))),t}function sb(e,t){var n={isCodedValueOrSubtype:!1,displayValue:e+""};return t&&t.length>0&&t.some((function(t){return t.value===e&&(n={isCodedValueOrSubtype:!0,displayValue:t.label},!0)})),Object.assign(n,{value:e})}function ub(e,t,n,r){var o=null;return(r=r||tb(e.fields,t))?(e.typeIdField&&e.types&&e.types.length>0?(e.types.some((function(i){if(i.id===n){if(t===e.typeIdField)o=[{value:i.id,label:i.name}];else if(i.domains&&i.domains[t]){var a=i.domains[t];"inherited"===a.type?o=ab(r):a.codedValues&&a.codedValues.length>0&&(o=[],a.codedValues.map((function(e){o.push({value:e.code,label:e.name})})))}else i.domains&&(o=ab(r));return!0}})),o||(o=ab(r))):o=ab(r),o):o}function cb(e,t,n){return e[t]?n===e[t]||(e[t]=e[t]+", "+n):e[t]=n,e}function lb(e,t){var n=null;if(!t)return n;var r=t.name,o={},i=!0;e.typeIdField&&e.types&&e.types.length>0?(Object.keys(e.types).map((function(n){var a=e.types[n];if(a.domains&&a.domains[r]){var s=a.domains[r];if("inherited"===s.type){if(i){i=!1;var u=ab(t);null==u||u.map((function(e){o=cb(o,e.value,e.label)}))}}else s.codedValues&&s.codedValues.length>0&&s.codedValues.map((function(e){o=cb(o,e.code,e.name)}))}})),n||(n=ab(t))):n=ab(t);var a=[];for(var s in o){var u=eb(t.type)?parseFloat(s):s;a.push({value:u,label:o[s]})}return a.length>0&&(n=a),n}function fb(e,t){var n=function(e){var t=null,n=null,r=db(e);if(r)t={},n=r.uniqueValueInfos;else{var o=e;if(o.renderer){var i=db(o.sourceJSON),a=o.renderer.toJson();"uniqueValue"===a.type&&i&&i.field1===a.field1?(t={},n=a.uniqueValueInfos):i&&(t={},n=i.uniqueValueInfos)}}if(n)for(var s=0;s<n.length;s++){var u=n[s];t[u.value]=u.label}return t}(e);if(n&&t)for(var r=0;r<t.length;r++){var o=t[r];n[o.value]&&(o.label=n[o.value])}return t}function db(e){var t=null;return e.drawingInfo&&e.drawingInfo.renderer&&"uniqueValue"===e.drawingInfo.renderer.type&&(t=e.drawingInfo.renderer),t}function pb(e){if(!e)return!1;var t=e.includes(".arcgis.com/"),n=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return t&&n}function hb(e){return null==e?void 0:e.replace(/\s/g,"_")}function gb(e){var t,n;if(!e)return null;var r=null!==(n=null!==(t=e.id)&&void 0!==t?t:e.title)&&void 0!==n?n:e.name;return void 0===r?null:hb(""+r)}function vb(e){var t;if(!e)return null;var n=null!==(t=e.name)&&void 0!==t?t:e.id;return void 0===n?null:hb(""+n)}function mb(e){var t=(null==e?void 0:e.layerType)||(null==e?void 0:e.type);return t===ea.f.FeatureLayer?!!e.fields:!!t&&Object.keys(ea.f).some((function(e){return ea.f[e]===t}))}function yb(e){return(null==e?void 0:e.type)&&Object.values(ea.g).some((function(t){return t===e.type}))}function bb(e,t,n){if(!e||t&&!n)return null;var r=e.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"").split("/"),o=r.findIndex((function(e){return Object.values(ea.h).some((function(t){return t===e}))}));if(-1===o)return null;var i=r.slice(0,o+1).join("/");return t?!!i.split("/").find((function(e){return e===ea.h.SceneService}))?i+"/layers/"+n.id:i+"/"+n.id:i}function wb(e,t,n,r){return e&&n&&mb(n)?(o=n.type===ea.f.GroupLayer?function(e,t,n){return e&&t?xe({id:e,type:ea.c.GroupLayer,url:bb(n,!0,t),layerId:""+t.id}):null}(e,n,t):n.layerType===ea.f.SceneLayer3DObject||n.layerType===ea.f.SceneLayerPoint?function(e,t,n){return e&&t?xe({id:e,type:ea.c.SceneLayer,url:bb(n,!0,t),layerId:""+t.id}):null}(e,n,t):function(e,t,n){return e&&t?xe({id:e,type:ea.c.FeatureLayer,url:bb(n,!0,t),layerId:""+t.id,geometryType:t.geometryType}):null}(e,n,t),r?o.merge(r.asMutable({deep:!0})):o):null;var o}function Sb(e,t,n,r){if(!e||!t||!n)return null;var o=Ib(t);if(!o)return null;var i=xe({id:e,type:o,url:bb(t,!1)});return r?i.merge(r.asMutable({deep:!0})):i}function Ib(e){var t;if(!jb(e))return null;var n=e.split("?")[0].split("/"),r=Object.keys(ea.h).find((function(e){return n.some((function(t){return ea.h[e]===t}))}));return null!==(t=ea.c[r])&&void 0!==t?t:null}function Ob(e,t,n){return $y(this,void 0,void 0,(function(){var r=this;return Yy(this,(function(o){switch(o.label){case 0:return[4,Am.getInstance().fetchChildLayerDefinitionsFromUrls(e).then((function(e){var t={},n={};return Object.keys(e).forEach((function(r){e[r].layerType===ea.f.SceneLayer3DObject||e[r].layerType===ea.f.SceneLayerPoint?n[r]=e[r]:mb(e[r])&&(t[r]=e[r])})),{sceneLayerDefinitions:n,otherSupportedLayerDefinitions:t}})).then((function(e){var o=e.sceneLayerDefinitions,i=e.otherSupportedLayerDefinitions;return $y(r,void 0,void 0,(function(){var e=this;return Yy(this,(function(r){switch(r.label){case 0:return[4,Promise.allSettled(Object.keys(o).map((function(r){return $y(e,void 0,void 0,(function(){var e;return Yy(this,(function(o){switch(o.label){case 0:return[4,Fb(r,null===(e=r.replace(/\/$/,"").match(/\d+$/))||void 0===e?void 0:e[0],t,n).then((function(e){return{associatedLayerUrl:e,sceneLayerUrl:r}}))];case 1:return[2,o.sent()]}}))}))}))).then((function(e){return{associatedLayerUrls:e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),sceneLayerDefinitions:o,otherSupportedLayerDefinitions:i}}))];case 1:return[2,r.sent()]}}))}))})).then((function(e){var t=e.associatedLayerUrls,n=e.sceneLayerDefinitions,r=e.otherSupportedLayerDefinitions,o={};return t.forEach((function(e){e.associatedLayerUrl&&(o[e.sceneLayerUrl]=n[e.sceneLayerUrl])})),Jy(Jy({},r),o)}))];case 1:return[2,o.sent()]}}))}))}function Eb(e,t){return $y(this,void 0,void 0,(function(){var n,r;return Yy(this,(function(o){return n=t.subLayers||[],r=bb(e,!1),[2,Ob(n.map((function(e){return r+"/"+e.id})))]}))}))}function xb(e,t){return $y(this,void 0,void 0,(function(){var n,r,o;return Yy(this,(function(i){return n=(null==t?void 0:t.layers)||[],r=(null==t?void 0:t.tables)||[],o=n.concat(r),[2,Ob(o.map((function(t){return""+bb(e,!0,t)})))]}))}))}function Cb(e,t){return $y(this,void 0,void 0,(function(){var n;return Yy(this,(function(r){switch(r.label){case 0:return e&&t?[3,2]:[4,Promise.resolve({})];case 1:return[2,r.sent()];case 2:return Tb(e)?(n=t).type!==ea.f.GroupLayer?[3,4]:[4,Eb(e,n)]:[3,7];case 3:return[2,r.sent()];case 4:return[4,Promise.resolve({})];case 5:return[2,r.sent()];case 6:return[3,11];case 7:return jb(e)?[4,xb(e,t)]:[3,9];case 8:return[2,r.sent()];case 9:return[4,Promise.resolve({})];case 10:return[2,r.sent()];case 11:return[2]}}))}))}function Tb(e){return!!Pb(e)&&(!!e.split("/").find((function(e){return e===ea.h.SceneService}))?/\/layers\/\d+\/?$/.test(e):/\/\d+\/?$/.test(e))}function jb(e){return!(!Pb(e)||Tb(e))}function Ab(e){if(!Pb(e))return"";var t=e.split("/"),n=t.findIndex((function(e){return Object.values(ea.h).some((function(t){return t===e}))}))-1;return t[n]}function Pb(e){if(!e||!/^(http(s)?:)?\/\//.test(e))return!1;var t=bb(e,!1),n=null==t?void 0:t.split("/");return!(!n||!Object.values(ea.h).some((function(e){return n[n.length-1]===e})))}function _b(e){return e.sort((function(e,t){var n;return null===(n=null==e?void 0:e.getLabel())||void 0===n?void 0:n.localeCompare(null==t?void 0:t.getLabel())}))}function Db(e,t){return e+"-"+t}function kb(e,t,n,r,o){void 0===r&&(r=ea.d.InConfigView);var i={queryParams:{where:n||"(1=1)",returnGeometry:!1,outFields:[e],orderByFields:[e],returnDistinctValues:!0},queryOptions:{scope:r,widgetId:o||"advanced_select_query"}};return o&&(i.queryOptions.excludeQuery={dataSourceId:t,widgetId:o}),i}function Rb(e,t,n,r,o){return void 0===r&&(r=ea.d.InConfigView),$y(this,void 0,void 0,(function(){var i,a;return Yy(this,(function(s){switch(s.label){case 0:return e?(i=t,a=kb(e.name,i.belongToDataSource.id,n,r,o),[4,i.loadCount(a.queryParams,a.queryOptions).then((function(e){return e}))]):[2,0];case 1:return[2,s.sent()]}}))}))}function Mb(e,t,n,r,o,i,a){return void 0===i&&(i=ea.d.InConfigView),$y(this,void 0,void 0,(function(){var s,u,c,l,f;return Yy(this,(function(d){switch(d.label){case 0:return s=[],u=0,e?(c=["undefined","nan","null",""],l=t,(f=kb(e.name,t.belongToDataSource.id,o,i,a)).queryParams.page=1,f.queryParams.pageSize=n,[4,l.load(f.queryParams,f.queryOptions).then((function(t){var n={},o={};return t.map((function(t){var i=t,a=i.feature.attributes[e.jimuName];if(!(a in n)&&(n[a]=!0,0===c.filter((function(e){return(a+"").trim().toLowerCase()===e})).length)){var u=i.getFormattedFieldValue(e.jimuName,r);e.type===Ui.Date?(u in o||s.push({value:a,label:u}),o[u]=!0):s.push({value:a,label:u})}})),u=t.length-s.length,{list:s,reducedCount:u}}))]):[2,{list:s,reducedCount:u}];case 1:return[2,d.sent()]}}))}))}function Nb(e){var t,n=null===(t=e)||void 0===t?void 0:t.url;return n?n=(n=null!==e.layerId&&void 0!==e.layerId?e.type===ea.g.SceneLayer?e.url+"/layers/"+e.layerId:e.url+"/"+e.layerId:e.url).replace(/^http:/,"https:"):null}function Lb(e,t){var n=ld.getInstance();return t?e.dataViewId?n.getLocalDataSourceId(n.getDataViewDataSourceId(e.mainDataSourceId,e.dataViewId),t):n.getLocalDataSourceId(e.mainDataSourceId,t):e.dataSourceId}function Ub(e,t,n,r){return $y(this,void 0,void 0,(function(){var o=this;return Yy(this,(function(i){switch(i.label){case 0:return[4,Fb(e,t,n,r).then((function(e){return $y(o,void 0,void 0,(function(){return Yy(this,(function(t){switch(t.label){case 0:return e?[3,2]:[4,Promise.resolve(null)];case 1:return[2,t.sent()];case 2:return[4,Am.getInstance().fetchServiceInfo(e).then((function(e){return e.definition})).then((function(t){return t?{def:t,url:e}:null}))];case 3:return[2,t.sent()]}}))}))}))];case 1:return[2,i.sent()]}}))}))}function Fb(e,t,n,r){return $y(this,void 0,void 0,(function(){var o=this;return Yy(this,(function(i){switch(i.label){case 0:return e||n?[3,2]:[4,Promise.resolve(null)];case 1:return[2,i.sent()];case 2:return n?[4,Bb(n,r).then((function(n){return $y(o,void 0,void 0,(function(){var r,o;return Yy(this,(function(i){switch(i.label){case 0:return n?[3,2]:[4,Gb(Vb(e),e,t)];case 1:return[2,i.sent()];case 2:return r=qb(),o=n.url,r&&(o=Wb(o)||o),[4,Gb(o,e,t)];case 3:return[2,i.sent()]}}))}))}))]:[3,4];case 3:return[2,i.sent()];case 4:return[4,Gb(Vb(e),e,t)];case 5:return[2,i.sent()]}}))}))}function Vb(e){var t=bb(e,!1),n=qb();n&&(t=zb(t));var r=t.replace("/"+ea.h.SceneService,"/"+ea.h.FeatureService);return n&&(r=Wb(r)||r),r}function Bb(e,t){return $y(this,void 0,void 0,(function(){var n;return Yy(this,(function(r){switch(r.label){case 0:return e?[3,2]:[4,Promise.resolve(null)];case 1:return[2,r.sent()];case 2:return n={id:e,relationshipType:"Service2Service",direction:"reverse",authentication:Bp.getInstance().getSessionByUrl(t)},[4,Object(Gp.k)(n).then((function(e){var t;return(null===(t=null==e?void 0:e.relatedItems)||void 0===t?void 0:t.find((function(e){return e.type===ea.e.FeatureService})))||null}))];case 3:return[2,r.sent()]}}))}))}function Gb(e,t,n){return $y(this,void 0,void 0,(function(){var r,o;return Yy(this,(function(i){switch(i.label){case 0:return r=bb(t,!1),o=bb(e,!1),[4,Promise.all([Am.getInstance().fetchServiceInfo(r),Am.getInstance().fetchServiceInfo(o)]).then((function(e){var t,r,i=null===(t=e[0].definition)||void 0===t?void 0:t.layers,a=null===(r=e[1].definition)||void 0===r?void 0:r.layers;if(!Array.isArray(a))return null;var s=parseInt(n);if(Array.isArray(i))for(var u=0;u<Math.min(i.length,a.length);u++){if(i[u].id===s)return o+"/"+a[u].id}else if(s<a.length)return o+"/"+a[s].id;return null})).catch((function(e){return console.error("Can not find associated feature layer, ",t),null}))];case 1:return[2,i.sent()]}}))}))}function Wb(e){var t,n,r,o=null===(n=null===(t=Jf().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.appProxies;if(!e||!o)return null;var i=null===(r=Object.values(o).find((function(t){return t.sourceUrl===bb(e,!1)})))||void 0===r?void 0:r.proxyUrl;if(i){var a=i,s=e.split("/").filter((function(e){return e})),u=parseInt(s[s.length-1]);return isNaN(u)||(a=a+"/"+u),a}return null}function zb(e){var t,n,r,o=null===(n=null===(t=Jf().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.appProxies;if(!e||!o)return e;var i=null===(r=Object.values(o).find((function(t){return t.proxyUrl===bb(e,!1)})))||void 0===r?void 0:r.sourceUrl;if(i){var a=i,s=e.split("/").filter((function(e){return e})),u=parseInt(s[s.length-1]);return isNaN(u)||(a=a+"/"+u),a}return e}function qb(){var e,t;return!(null===(t=null===(e=Jf().getState())||void 0===e?void 0:e.appContext)||void 0===t?void 0:t.isInBuilder)}function Hb(e){var t,n,r;return(null===(t=e)||void 0===t?void 0:t.layer)||(null===(n=e)||void 0===n?void 0:n.layerDefinition)||(null===(r=e)||void 0===r?void 0:r.serviceDefinition)}function Jb(e,t,n){var r;return $y(this,void 0,void 0,(function(){var o,i=this;return Yy(this,(function(a){switch(a.label){case 0:return o=null==e?void 0:e.name,t?(o=t.title||o,[3,3]):[3,1];case 1:return!n.itemId||(null===(r=ld.getInstance().getDataSource(n.id))||void 0===r?void 0:r.parentDataSource)?[3,3]:[4,xm(n.portalUrl,(function(e){return $y(i,void 0,void 0,(function(){return Yy(this,(function(t){switch(t.label){case 0:return[4,Object(Gp.a)(n.itemId,{portal:hl(n.portalUrl),authentication:e}).then((function(e){return e.title||o})).catch((function(e){return console.warn("Can not get item info. ",e,n.itemId,n.portalUrl),o}))];case 1:return[2,t.sent()]}}))}))}))];case 2:o=a.sent(),a.label=3;case 3:return[2,o]}}))}))}function $b(e){return"esri.layers.support.Sublayer"===(null==e?void 0:e.declaredClass)?e.layer:null}function Yb(e,t){return 0===(null==t?void 0:t.indexOf(e))&&(null==t?void 0:t.split("-").length)-1===(null==e?void 0:e.split("-").length)}function Kb(e){return(null==e?void 0:e.split("-").reverse()[0])===Yu}function Xb(e){return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportSymbol():!(e.getDataSourceJson().isDataInDataSourceInstance||!e.layer))}function Qb(e){var t,n;return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportAttachment():null===(n=null===(t=e.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===n?void 0:n.supportsQueryAttachments)}function Zb(e){var t,n,r,o;if(!e)return null;if(e.getDataSourceJson().isOutputFromWidget){if(1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){var i=e.getOriginDataSources()[0];if((null==i?void 0:i.type)===ea.c.FeatureLayer||(null==i?void 0:i.type)===ea.c.SceneLayer){var a=null===(n=i)||void 0===n?void 0:n.getLayerDefinition();if(null===(r=e.getDataSourceJson().schema)||void 0===r?void 0:r.fields){var s=Object.values(e.getDataSourceJson().schema.fields),u=null===(o=a.fields)||void 0===o?void 0:o.filter((function(e){return s.some((function(t){return(null==t?void 0:t.name)===(null==e?void 0:e.name)}))}));return Jy(Jy({},a),{fields:u})}return a}}}else{if(e.id===e.getMainDataSource().id)return e.layerDefinition;if(e.isDataView||e.isLocal)return e.getMainDataSource().getLayerDefinition()}return null}var ew=[/demographics\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/route\w*\.arcgis\.com/i,/logistics\w*\.arcgis\.com/i,/analysis\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/sentinel\w*\.arcgis\.com/i,/oceans\w*\.arcgis\.com/i,/tiledbasemaps\w*\.arcgis\.com/i],tw=[/traffic\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/hydro\w*\.arcgis\.com/i,/naip\w*\.arcgis\.com/i,/livefeeds\w*\.arcgis\.com/i,/demographics\w*\.arcgis\.com/i,/landscape\w*\.arcgis\.com/i,/historical\w*\.arcgis\.com/i,/earthobs\w*\.arcgis\.com/i];function nw(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription")}(e):function(e){return e&&ew.some((function(t){return t.test(e)}))}(t)}function rw(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits")}(e):function(e){return e&&tw.some((function(t){return t.test(e)}))}(t)}function ow(e){var t=this;return e&&(e.itemId||e.url)?e.itemId?xm(e.portalUrl,(function(n){return $y(t,void 0,void 0,(function(){return Yy(this,(function(t){return[2,Object(Gp.a)(e.itemId,{portal:hl(e.portalUrl),authentication:n}).then((function(t){return nw(t,e.url)})).catch((function(e){return console.error("Faield to check whether data source is subscriber.",e),Promise.resolve(!1)}))]}))}))})):Promise.resolve(nw(null,e.url)):Promise.resolve(!1)}function iw(e){var t=this;return e&&(e.itemId||e.url)?e.itemId?xm(e.portalUrl,(function(n){return $y(t,void 0,void 0,(function(){return Yy(this,(function(t){return[2,Object(Gp.a)(e.itemId,{portal:hl(e.portalUrl),authentication:n}).then((function(t){return nw(t,e.url)||rw(t,e.url)})).catch((function(e){return console.error("Faield to check whether data source is subscriber.",e),Promise.resolve(!1)}))]}))}))})):Promise.resolve(nw(null,e.url)||rw(null,e.url)):Promise.resolve(!1)}function aw(e){var t=this;return e&&(e.itemId||e.url)?e.itemId?xm(e.portalUrl,(function(n){return $y(t,void 0,void 0,(function(){return Yy(this,(function(t){return[2,Object(Gp.a)(e.itemId,{portal:hl(e.portalUrl),authentication:n}).then((function(t){return rw(t,e.url)})).catch((function(e){return console.error("Faield to check whether data source is premium.",e),Promise.resolve(!1)}))]}))}))})):Promise.resolve(rw(null,e.url)):Promise.resolve(!1)}var sw,uw=sw||(sw={});uw.Pop="POP",uw.Push="PUSH",uw.Replace="REPLACE";var cw=function(e){return e};function lw(e){e.preventDefault(),e.returnValue=""}function fw(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function dw(){return Math.random().toString(36).substr(2,8)}function pw(e){var t=e.pathname,n=e.search;return(void 0===t?"/":t)+(void 0===n?"":n)+(void 0===(e=e.hash)?"":e)}function hw(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var gw,vw,mw=[/\.arcgis\.com$/];function yw(e){if(window&&window.parent&&window.parent!==window){var t=window.parent;try{if(t.jimuConfig&&t.jimuConfig.isBuilder)return}catch(e){}t.postMessage(e,window.location.origin)}}function bw(e,t){return function(n){var r;if((r=n.origin,window&&window.location.origin===r||mw.some((function(e){return e.test(r)})))&&(n.data&&Object.keys(vw).map((function(e){return vw[e]})).includes(n.data.type))){var o=n.data;o.type===e&&t(o)}}}function ww(e,t){if(window&&window.addEventListener){var n=bw(e,t);return window.addEventListener("message",n,!1),n}}!function(e){e.JimuPageChanged="JIMU_PAGE_CHANGED",e.JimuQueryChanged="JIMU_QUERY_CHANGED"}(gw||(gw={})),function(e){e.ChangePage="CHANGE_PAGE",e.ChangeQuery="CHANGE_QUERY"}(vw||(vw={}));var Sw=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Iw=function(){return(Iw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ow=document&&function(e){function t(){var e=a.location,t=s.state||{};return[t.idx,cw({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"==typeof e?e:pw(e)}function r(e,t){return void 0===t&&(t=null),cw(D({},f,{},"string"==typeof e?hw(e):e,{state:t,key:dw()}))}function o(e){c=e,e=t(),l=e[0],f=e[1],d.call({action:c,location:f})}function i(e){s.go(e)}void 0===e&&(e={});var a=void 0===(e=e.window)?document.defaultView:e,s=a.history,u=null;a.addEventListener("popstate",(function(){if(u)p.call(u),u=null;else{var e=sw.Pop,n=t(),r=n[0];if(n=n[1],p.length){if(null!=r){var a=l-r;a&&(u={action:e,location:n,retry:function(){i(-1*a)}},i(a))}}else o(e)}}));var c=sw.Pop,l=(e=t())[0],f=e[1],d=fw(),p=fw();return null==l&&(l=0,s.replaceState(D({},s.state,{idx:l}),"")),{get action(){return c},get location(){return f},createHref:n,push:function e(t,i){var u=sw.Push,c=r(t,i);if(!p.length||(p.call({action:u,location:c,retry:function(){e(t,i)}}),0)){var f=[{usr:c.state,key:c.key,idx:l+1},n(c)];c=f[0],f=f[1];try{s.pushState(c,"",f)}catch(e){a.location.assign(f)}o(u)}},replace:function e(t,i){var a=sw.Replace,u=r(t,i);p.length&&(p.call({action:a,location:u,retry:function(){e(t,i)}}),1)||(u=[{usr:u.state,key:u.key,idx:l},n(u)],s.replaceState(u[0],"",u[1]),o(a))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(e){return d.push(e)},block:function(e){var t=p.push(e);return 1===p.length&&a.addEventListener("beforeunload",lw),function(){t(),p.length||a.removeEventListener("beforeunload",lw)}}}}();ww(vw.ChangePage,(function(e){Dw(e.pageId)})),ww(vw.ChangeQuery,(function(e){Pw(e.queryObject)})),Ow&&Ow.listen((function(e){e.action;var t,n=e.location,r=Jf().getState().queryObject.asMutable();if(n.pathname!==Jf().getState().appPath){Jf().dispatch(pd(n.pathname));var o=mf(n.pathname).pageId;t=o,yw({type:gw.JimuPageChanged,pageId:t})}var i,a=Ee.parse(n.search);Vu(r,a)||(Jf().dispatch(Cd(a)),i=a,yw({type:gw.JimuQueryChanged,queryObject:i}))}));var Ew,xw,Cw,Tw=O.createContext(Ow),jw=function(e){return O.createElement(Tw.Provider,{value:Ow},e.children)};function Aw(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Sw(n,t),n.prototype.render=function(){var t=this;return O.createElement(Tw.Consumer,null,(function(n){return O.createElement(e,Iw({},t.props,{history:n}))}))},n.displayName="HistoryComponent("+e.displayName+")",n}(O.PureComponent)}function Pw(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),!Vu(e,Jf().getState().queryObject)){var r=n?xe(e):Jf().getState().queryObject.merge(e);r=r.without.apply(r,Object.keys(r).filter((function(e){return null===r[e]})));var o=Of(Ow.location,"?"+Ee.stringify(r));t?Ow.replace(o):Ow.push(o)}}function _w(e,t){void 0===t&&(t=!1);var n=Of(Ow.location,"?"+Ee.stringify(e));t?Ow.replace(n):Ow.push(n)}function Dw(e){mf().pageId!==e&&Ow.push(bf(e,Jf().getState().queryObject))}function kw(e,t){var n=Jf().getState().queryObject.views?Jf().getState().queryObject.views.split(","):[],r=n.length,o=Object.keys(Jf().getState().appConfig.views),i=(n=n.filter((function(e){return o.includes(e)}))).length;if(n.includes(t)){if(r===i)return;return Pw({views:n.join(",")})}return(n=n.filter((function(t){return!Jf().getState().appConfig.sections[e].views.includes(t)}))).push(t),Pw({views:n.join(",")})}function Rw(e){return Pw({dlg:e})}function Mw(e,t){Lw(e,{indexes:null,ids:t})}function Nw(e,t){Lw(e,{indexes:t,ids:null})}function Lw(e,t){var n=t.indexes,r=t.ids,o=function(e,t){var n=t.indexes,r=t.ids;if(n)return 1===n.length?e+":"+n[0]:e+":"+n.join("+");if(r)return 0===(r=r.filter((function(e){return!!e}))).length?null:1===r.length?e+":"+r[0]:e+":"+r.join("+")}(e,{indexes:n,ids:r}),i=n?Jf().getState().queryObject.data_index:Jf().getState().queryObject.data_id,a=[];i&&(a=i.split(","));var s=[],u=!1;a.forEach((function(t){t.split(":")[0]===e?o&&(s.push(o),u=!0):s.push(t)})),!u&&o&&s.push(o),Pw({data_index:n&&s.length>0?s.join(","):null,data_id:r&&s.length>0?s.join(","):null},!0)}!function(e){e.String="STRING",e.Number="NUMBER",e.Field="FIELD",e.Function="FUNCTION",e.Operator="OPERATOR",e.Unknown="UNKNOWN"}(Ew||(Ew={})),function(e){e.Average="AVERAGE",e.Count="COUNT",e.Sum="SUM",e.Max="MAX",e.Min="MIN"}(xw||(xw={})),function(e){e.Count="count",e.Sum="sum",e.Min="min",e.Max="max",e.Avg="avg"}(Cw||(Cw={}));var Uw="esriFieldTypeOID",Fw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Vw=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Bw(e,t){return Fw(this,void 0,void 0,(function(){return Vw(this,(function(n){switch(n.label){case 0:return[4,oS(e,xw.Average,t)];case 1:return[2,n.sent()]}}))}))}var Gw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ww=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function zw(e,t,n){return Gw(this,void 0,void 0,(function(){var r,o,i,a,s,u,c;return Ww(this,(function(l){return e&&0!==e.length?[2]:(r=null,(o=ld.getInstance().getDataSource(t))?(i=o&&o.getSchema(),a=i&&i.fields&&Object.keys(i.fields).find((function(e){return i.fields[e].esriType===Uw})),(s=i&&i.fields&&i.fields[a])?r=[{type:Ew.Field,jimuFieldName:s.jimuName,dataSourceId:t,exp:"{"+(s.alias||s.name)+"}"}]:i&&i.fields&&Object.keys(i.fields).length>0&&(u=Object.keys(i.fields)[0],(c=i.fields[u])&&(r=[{type:Ew.Field,jimuFieldName:c.jimuName,dataSourceId:t,exp:"{"+(c.alias||c.name)+"}"}])),r?[2,oS(r,xw.Count,n)]:[2,Promise.reject(eS.ParamNumber)]):[2,Promise.reject(eS.ParamNumber)])}))}))}var qw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Hw=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Jw(e,t){return qw(this,void 0,void 0,(function(){return Hw(this,(function(n){switch(n.label){case 0:return[4,oS(e,xw.Sum,t)];case 1:return[2,n.sent()]}}))}))}var $w=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Yw=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Kw(e,t){return $w(this,void 0,void 0,(function(){return Yw(this,(function(n){switch(n.label){case 0:return[4,oS(e,xw.Max,t)];case 1:return[2,n.sent()]}}))}))}var Xw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Qw=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Zw(e,t){return Xw(this,void 0,void 0,(function(){return Qw(this,(function(n){switch(n.label){case 0:return[4,oS(e,xw.Min,t)];case 1:return[2,n.sent()]}}))}))}var eS,tS=function(){return(tS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},nS=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},rS=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function oS(e,t,n){return nS(this,void 0,void 0,(function(){var r,o,i;return rS(this,(function(a){switch(a.label){case 0:return e&&0!==e.length?[3,2]:[4,Promise.reject(eS.ParamNumber)];case 1:return[2,a.sent()];case 2:return 0===(r=e.filter((function(e){return e.type!==Ew.Operator&&e.type!==Ew.Unknown}))).length?[2,Promise.reject(eS.ParamNumber)]:1===r.length&&kS(r)?(o=function(e){return!!(e&&e.length>0&&e.some((function(e){return e.type===Ew.Field&&function(e){if(!e)return!0;var t=e.dataSourceId,n=ld.getInstance().getDataSource(t);return(null==n?void 0:n.dataViewId)===Yu}(e)})))}(r),i=function(e){return!!(e&&e.length>0&&e.some((function(e){return e.isFromRepeatedDataSourceContext})))}(r),o?[2,iS(r[0],t)]:i?[2,aS(r[0],t,n)]:[2,sS(r,t)]):[2,Promise.reject(eS.ParamNumber)]}}))}))}function iS(e,t){var n;return nS(this,void 0,void 0,(function(){var r,o,i,a,s,u;return rS(this,(function(c){switch(c.label){case 0:return e&&e.type===Ew.Field?[3,2]:[4,Promise.reject(eS.ParamType)];case 1:return[2,c.sent()];case 2:return(null==(r=ld.getInstance().getDataSource(e.dataSourceId))?void 0:r.isDataView)&&r.dataViewId===Yu&&0===(null===(n=r.getRecords())||void 0===n?void 0:n.length)&&(r=r.getMainDataSource().getDataView(Ku)||r),r?[3,4]:[4,Promise.reject(eS.NeedDataSource)];case 3:return[2,c.sent()];case 4:return Kb(null==e?void 0:e.dataSourceId)?[3,6]:[4,sS([tS(tS({},e),{dataSourceId:r.id})],t)];case 5:return[2,c.sent()];case 6:return o=r&&r.getSchema(),i=e.jimuFieldName,a=o&&o.fields&&o.fields[i],a&&a.type===Ui.Number?[3,8]:[4,Promise.reject(eS.ParamType)];case 7:return[2,c.sent()];case 8:return(s=r.getRecords())&&0!==s.length?[3,10]:[4,Promise.reject(eS.NeedRecord)];case 9:return[2,c.sent()];case 10:return u=s.map((function(e){return e.getData()[i]||0})),[2,Promise.resolve(pS(u,t,!1))]}}))}))}function aS(e,t,n){return nS(this,void 0,void 0,(function(){var r,o;return rS(this,(function(i){switch(i.label){case 0:return e&&e.type===Ew.Field?[3,2]:[4,Promise.reject(eS.ParamType)];case 1:return[2,i.sent()];case 2:return t!==xw.Count?[3,4]:[4,Promise.resolve(1)];case 3:return[2,i.sent()];case 4:return(r=bS(e,n))?[3,6]:[4,Promise.reject(eS.NeedRecord)];case 5:return[2,i.sent()];case 6:return"number"!=typeof(o=ES(e.jimuFieldName,r,!1))?[3,8]:[4,Promise.resolve(o)];case 7:return[2,i.sent()];case 8:return[4,Promise.reject(eS.ParamType)];case 9:return[2,i.sent()]}}))}))}function sS(e,t){return nS(this,void 0,void 0,(function(){var n,r,o,i=this;return rS(this,(function(a){switch(a.label){case 0:return e&&0!==e.length?[3,2]:[4,Promise.reject(eS.ParamNumber)];case 1:return[2,a.sent()];case 2:return(n=e.filter((function(e){return e.type!==Ew.Operator&&e.type!==Ew.Unknown}))).length>0&&fS(n)?(r=function(e){if(!e)return{};var t={};return e.forEach((function(e){t[e.dataSourceId]?t[e.dataSourceId].push(e):t[e.dataSourceId]=[e]})),t}(n),[2,Promise.all(Object.keys(r).map((function(e){return nS(i,void 0,void 0,(function(){return rS(this,(function(n){switch(n.label){case 0:return[4,uS(r[e],t)];case 1:return[2,n.sent()]}}))}))}))).then((function(e){var n=e.length>0?pS(e,t,!0):null;if(null!==n)return n;throw new Error(eS.ParamType)}))]):[3,3];case 3:if(!(n.length>0&&dS(n)))return[3,4];switch(t){case xw.Average:return[2,Promise.resolve(hS(n)/n.length)];case xw.Sum:return[2,Promise.resolve(hS(n))];case xw.Count:return[2,Promise.resolve(n.length)];case xw.Max:return[2,Promise.resolve(gS(n))];case xw.Min:return[2,Promise.resolve(vS(n))];default:return[2,Promise.reject(eS.FuncType)]}return[3,7];case 4:return n.length>0&&n.every((function(e){return dS([e])||fS([e])}))?(o=n.filter((function(e){return dS([e])})),[2,sS(n.filter((function(e){return fS([e])})),t).then((function(e){return nS(i,void 0,void 0,(function(){return rS(this,(function(n){switch(n.label){case 0:return[4,sS(o.concat({type:Ew.Number,exp:""+e}),t)];case 1:return[2,n.sent()]}}))}))}))]):[3,5];case 5:return[4,Promise.reject(eS.ParamType)];case 6:return[2,a.sent()];case 7:return[2]}}))}))}function uS(e,t){return nS(this,void 0,void 0,(function(){var n,r,o,i;return rS(this,(function(a){switch(a.label){case 0:return e&&0!==e.length?[3,2]:[4,Promise.resolve(0)];case 1:return[2,a.sent()];case 2:return n=ld.getInstance().getDataSource(e[0].dataSourceId),r=function(e,t){var n="EXPRESSION_RESOLVER-"+t;return e&&e.forEach((function(e){n=n+"-"+e.jimuFieldName})),n}(e,t),o=ld.getInstance().createLocalDataSource(n,r),n&&n.load?(i=function(e,t){if(!e)return null;var n=[];return e.forEach((function(e,r){var o=ld.getInstance().getDataSource(e.dataSourceId),i=o&&o.getSchema(),a=i&&i.fields&&i.fields[e.jimuFieldName],s=function(e,t,n){return(t||"")+"_"+(cS(n)?n:"")+"_"+e}(t,a&&a.jimuName,r);n.push({onStatisticField:a&&a.name,outStatisticFieldName:s,statisticType:lS(t)})})),{returnGeometry:!0,where:"1=1",outStatistics:n}}(e,t),[4,o.load(i,{widgetId:r}).then((function(e){var r,o,i,a,s,u=e&&e[0]&&e[0].getData()||{},c=Object.keys(u).map((function(e,t){return u[e]}));if(t===xw.Count){var l=n.isDataView?(null===(o=null===(r=n.getMainDataSource())||void 0===r?void 0:r.getDataSourceJson())||void 0===o?void 0:o.dataViews)&&(null===(i=n.getMainDataSource().getDataSourceJson().dataViews[n.dataViewId])||void 0===i?void 0:i.maximum):null===(s=null===(a=n.getDataSourceJson())||void 0===a?void 0:a.query)||void 0===s?void 0:s.maximum;"number"==typeof l&&(c[0]=Math.min(c[0],l))}return pS(c,t,!0)}))]):[3,4];case 3:return[2,a.sent()];case 4:return[2]}}))}))}function cS(e){return!isNaN(parseFloat(e))&&isFinite(e)&&"[object Number]"===Object.prototype.toString.call(e)}function lS(e){switch(e){case xw.Average:return Cw.Avg;case xw.Count:return Cw.Count;case xw.Sum:return Cw.Sum;case xw.Max:return Cw.Max;case xw.Min:return Cw.Min;default:return null}}function fS(e){return!!e&&e.every((function(e){if(e.type===Ew.Field&&e.jimuFieldName&&e.dataSourceId){var t=ld.getInstance().getDataSource(e.dataSourceId),n=t&&t.getSchema(),r=n&&n.fields&&n.fields[e.jimuFieldName];return r&&r.type===Ui.Number}return!1}))}function dS(e){return!!e&&e.every((function(e){return e.type===Ew.Number}))}function pS(e,t,n){if(!e||0===e.length||e.some((function(e){return!cS(e)})))return 0;switch(t){case xw.Average:return e.reduce((function(e,t){return e+t}),0)/e.length;case xw.Sum:return e.reduce((function(e,t){return e+t}),0);case xw.Count:return n?e[0]:e.length;case xw.Max:return Math.max.apply(null,e);case xw.Min:return Math.min.apply(null,e);default:return 0}}function hS(e){var t=e.map((function(e){return parseFloat(e.exp)}));return t.length>0&&t.every((function(e){return cS(e)}))?t.reduce((function(e,t){return e+t}),0):0}function gS(e){var t=e.map((function(e){return parseFloat(e.exp)}));return t.length>0&&t.every((function(e){return cS(e)}))?Math.max.apply(null,t):0}function vS(e){var t=e.map((function(e){return parseFloat(e.exp)}));return t.length>0&&t.every((function(e){return cS(e)}))?Math.min.apply(null,t):0}function mS(e){var t=[],n=[];return e&&e.forEach((function(r,o){if(r&&!n.some((function(e){return e===o})))if(r.type!==Ew.Function)t=t.concat(r);else if(n.push(o),e[o+1]&&e[o+1].type===Ew.Operator&&"("===e[o+1].exp){for(var i=e.slice(o+2),a=0,s=0,u=0;u<i.length;u++){if(0===s&&i[u].type===Ew.Operator&&")"===i[u].exp){a=u;break}s>0&&i[u].type===Ew.Operator&&")"===i[u].exp?s--:i[u].type===Ew.Operator&&"("===i[u].exp&&s++}var c=a+o+2;if(c>=o+2){var l=e.slice(o+2,c);for(u=o+1;u<=c;u++)n.push(u);t=t.concat(tS(tS({},r),{parts:mS(l)}))}else console.warn("Can not martch parentheses")}else t=t.concat(r)})),t}function yS(e,t,n,r,o){var i=this;return void 0===e&&(e=[]),e.map((function(e,a){return nS(i,void 0,void 0,(function(){var i,a;return rS(this,(function(s){switch(s.label){case 0:return e.type!==Ew.Field?[3,4]:(i=bS(e,n))&&!0!==i.fake?[3,2]:[4,Promise.reject(eS.NeedRecord)];case 1:return[2,s.sent()];case 2:return a=ES(e.jimuFieldName,i,r,o),[4,Promise.resolve(OS(a,r,o))];case 3:return[2,s.sent()];case 4:return e.type!==Ew.Function?[3,6]:[4,wS(e,t,n).then((function(e){return OS(e,r,o)}))];case 5:return[2,s.sent()];case 6:return[2,Promise.resolve(e)]}}))}))}))}function bS(e,t){var n,r,o,i=Kb(null==e?void 0:e.dataSourceId);if(e.isFromRepeatedDataSourceContext)o=Array.isArray(t)?null===(n=t[0])||void 0===n?void 0:n.record:null===(r=t)||void 0===r?void 0:r.record;else if(i){if(!(o=null==(s=ld.getInstance().getDataSource(e.dataSourceId))?void 0:s.getRecords()[0])){var a=null==s?void 0:s.getMainDataSource().getDataView(Ku);o=null==a?void 0:a.getRecords()[0]}}else{var s;o=null==(s=ld.getInstance().getDataSource(e.dataSourceId))?void 0:s.getRecords()[0]}return o}function wS(e,t,n){return nS(this,void 0,void 0,(function(){var r,o=this;return rS(this,(function(i){switch(i.label){case 0:return DS(e&&e.parts)?(r=NS(e.parts),[4,Promise.all(Object.keys(r).sort((function(e,t){return parseInt(e)-parseInt(t)})).map((function(e){return nS(o,void 0,void 0,(function(){return rS(this,(function(o){switch(o.label){case 0:return[4,TS(r[e],t,n)];case 1:return[2,o.sent()]}}))}))}))).then((function(e){return e.map((function(e){return OS((t=e,!isNaN(parseFloat(t))&&isFinite(t)?parseFloat(e):e),!1);var t}))})).then((function(t){return nS(o,void 0,void 0,(function(){return rS(this,(function(r){switch(r.label){case 0:return[4,SS(tS(tS({},e),{parts:t}),n)];case 1:return[2,r.sent()]}}))}))}))]):[3,2];case 1:return[2,i.sent()];case 2:return[4,SS(e,n)];case 3:return[2,i.sent()]}}))}))}function SS(e,t){return nS(this,void 0,void 0,(function(){return rS(this,(function(n){switch(n.label){case 0:return e.exp!==xw.Average?[3,2]:[4,Bw(e.parts,t)];case 1:return[2,n.sent()];case 2:return e.exp!==xw.Count?[3,4]:[4,zw(e.parts,e.dataSourceId,t)];case 3:return[2,n.sent()];case 4:return e.exp!==xw.Sum?[3,6]:[4,Jw(e.parts,t)];case 5:return[2,n.sent()];case 6:return e.exp!==xw.Max?[3,8]:[4,Kw(e.parts,t)];case 7:return[2,n.sent()];case 8:return e.exp!==xw.Min?[3,10]:[4,Zw(e.parts,t)];case 9:return[2,n.sent()];case 10:return console.warn("Unknown function: ",e),[4,Promise.resolve("")];case 11:return[2,n.sent()]}}))}))}function IS(e,t){var n=[];return e.forEach((function(e){if(e.type===Ew.Number)n.push(t?e.exp:parseFloat(e.exp));else if(e.type===Ew.String)n.push(e.exp.replace(/^"/,"").replace(/"$/,""));else if(e.type===Ew.Operator){var r=n.pop(),o=function(e,t,n){switch(n){case"*":return cS(e)&&cS(t)?parseFloat(e)*parseFloat(t):"";case"/":return cS(e)&&cS(t)?parseFloat(e)/parseFloat(t):"";case"-":return cS(e)&&cS(t)?parseFloat(e)-parseFloat(t):"";default:return cS(e)&&cS(t)?parseFloat(e)+parseFloat(t):""+e+t}}(n.pop(),r,e.exp);n.push(o)}})),n.pop()}function OS(e,t,n){return cS(e)?{exp:t&&n?n.formatNumber(e):e,type:Ew.Number}:{exp:'"'+e.replace(/^"/,"").replace(/"$/,"")+'"',type:Ew.String}}function ES(e,t,n,r){var o,i="";if(!(o=t)||!o.getData||"function"!=typeof o.getData)return i;var a=n&&r?t.getFormattedData(r):t.getData();return a&&null!==a[e]&&void 0!==a[e]&&(i=a[e]),i}!function(e){e.ParamType="INVALID_PARAM_TYPE",e.ParamNumber="INVALID_NUMBER_OF_PARAMS",e.FuncType="INVALID_FUNCTION_TYPE",e.NeedRecord="NEED_RECORD",e.NeedDataSource="NEED_DATA_SOURCE"}(eS||(eS={}));var xS=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},CS=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function TS(e,t,n,r){return xS(this,void 0,void 0,(function(){var o,i,a,s;return CS(this,(function(u){switch(u.label){case 0:return o="",(i=e&&e.parts&&e.parts.slice())?[3,2]:[4,Promise.resolve(o)];case 1:return[2,u.sent()];case 2:return a=mS(i),s=a&&1===Object.keys(a).filter((function(e){return!/^\s*$/.test(a[e].exp)})).length,[2,Promise.all(yS(a,t,n,s,r)).then((function(e){var t;return""+(null!==(t=IS(function(e){var t=[],n=[];for(e.forEach((function(e,r){if(e.type===Ew.Number||e.type===Ew.String)t.push(e);else if(e.type===Ew.Operator)if("("===e.exp)n.push(e);else if(")"===e.exp)for(var o=n.pop();"("!=o.exp;)t.push(o),o=n.pop();else if("+"===e.exp||"-"===e.exp){for(;n.length>0&&("+"===n[n.length-1].exp||"-"===n[n.length-1].exp||"*"===n[n.length-1].exp||"/"===n[n.length-1].exp);)t.push(n.pop());n.push(e)}else if("*"===e.exp||"/"===e.exp){for(;n.length>0&&("*"===n[n.length-1].exp||"/"===n[n.length-1].exp);)t.push(n.pop());n.push(e)}}));n.length>0;)t.push(n.pop());return t}(e),s))&&void 0!==t?t:o)}))]}}))}))}var jS=function(){return(jS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function AS(e,t){if(!e||!e.length)return BS(t);var n={};return e.filter((function(e){return!!e})).forEach((function(e){if(e.dataSourceId){var r=void 0,o=void 0,i=ld.getInstance().getDataSource(e.dataSourceId),a=i&&i.getMainDataSource(),s=a&&a.id,u=t&&s&&t.asMutable({deep:!0}).find((function(e){return e.mainDataSourceId===s})),c=Kb(null==e?void 0:e.dataSourceId);if(c&&u?r=u.dataSourceId:c||(r=e.dataSourceId),!r)return;if(!n[r]){if(c&&u)delete(o=jS({},u)).fields;else if(!c){var l=i&&i.dataViewId,f=i&&i.getRootDataSource(),d=f&&f.id;o={dataSourceId:r,mainDataSourceId:s,fields:[]},l&&(o.dataViewId=l),d&&(o.rootDataSourceId=d)}r&&o&&(n[r]=o)}e.jimuFieldName&&n[r]&&(n[r].fields&&n[r].fields.every((function(t){return t!==e.jimuFieldName}))?n[r].fields=n[r].fields.concat(e.jimuFieldName):n[r].fields||(n[r].fields=[e.jimuFieldName]))}})),xe(Object.values(n))}function PS(e,t){void 0===e&&(e=xe([])),void 0===t&&(t=xe([]));var n=xe([]),r=xe({}),o=xe(e.concat(t)),i={};return o.forEach((function(e){i[e.dataSourceId]||(i[e.dataSourceId]=o.filter((function(t){return e.dataSourceId===t.dataSourceId})))})),Object.keys(i).forEach((function(e){r=xe({}),i[e].forEach((function(e){r=function(e,t){if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return console.warn("can not merge data sources with different id"),null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){var n=Array.from(new Set(e.fields.asMutable().concat(t.fields.asMutable())));return e.merge(t.asMutable({deep:!0})).set("fields",n)}return e.merge(t.asMutable({deep:!0}))}(r,e)})),n=xe(n.concat(r))})),n}function _S(e){if(!e||!e.parts)return!0;var t=e.parts.filter((function(e){return!!e})),n=t.some((function(e){return e.type===Ew.Unknown}));if(n)return!1;var r=t.filter((function(e){return e.type===Ew.Operator&&"("===e.exp})).length===t.filter((function(e){return e.type===Ew.Operator&&")"===e.exp})).length;if(!r)return!1;for(var o=t.filter((function(e){return!(e.type===Ew.Operator&&("("===e.exp||")"===e.exp||/^\s*$/.test(e.exp))||e.type===Ew.Function&&e.exp!==xw.Count)})),i=!0,a=0;a<o.length;a++)if((a%2==0||a===o.length-1)&&o[a].type===Ew.Operator||a%2==1&&o[a].type!==Ew.Operator){i=!1;break}if(!i)return!1;var s=!0;for(a=0;a<t.length;a++)if(t[a].type===Ew.Function&&!RS(t[a])||t[a].type===Ew.Field&&!MS(t[a].dataSourceId,t[a].jimuFieldName,t[a].exp.replace(/^\{/,"").replace(/\}$/,""))){s=!1;break}if(!s)return!1;var u=mS(t),c=!u.some((function(e){return e.type===Ew.Operator&&","===e.exp}));if(!c)return!1;var l=u.every((function(e){if(e.type===Ew.Function){if(e.exp===xw.Count)return e.parts&&0===e.parts.length;if(Object.keys(xw).some((function(t){return e.exp===xw[t]}))){if(e.parts&&1===e.parts.length&&e.parts[0].type===Ew.Field){var t=ld.getInstance().getDataSource(e.parts[0].dataSourceId),n=t&&t.getSchema(),r=e.parts[0].jimuFieldName,o=n&&n.fields&&n.fields[r];return o&&o.type===Ui.Number}return!1}return!1}return!0}));return!n&&r&&i&&s&&c&&l}function DS(e){return!!(e&&e.length>1&&e.some((function(e){return e.type===Ew.Operator&&/^[\+\-\*\/\(\)]$/.test(e.exp)})))||!(!e||1!==e.length||e[0].type!==Ew.Function)}function kS(e){var t=NS(e);return!!(t&&Object.keys(t).length>0&&Object.keys(t).some((function(e){return t[e].parts&&1===t[e].parts.length&&t[e].parts[0].type===Ew.Field})))}function RS(e){return!(!e||e.type!==Ew.Function)&&Object.keys(xw).some((function(t){return xw[t]===e.exp}))}function MS(e,t,n){if(!e||!t)return!1;var r=ld.getInstance().getDataSource(e),o=r&&r.getSchema&&r.getSchema(),i=o&&o.fields;return!!i&&!(!i[t]||n!==(i[t].alias||i[t].name))}function NS(e){var t,n={},r=!0;return e.filter((function(e){return!/^\s*$/.test(e.exp)})).forEach((function(e,o){e.type===Ew.Operator&&","===e.exp?r=!0:(r?(t=o,n[o]={name:"default",parts:[e]}):n[t].parts=n[t].parts.concat(e),r=!1)})),n}var LS,US,FS=function(e){var t,n,r;if(e)return 1===(null===(t=e.parts)||void 0===t?void 0:t.length)&&(null===(r=null===(n=e.parts)||void 0===n?void 0:n[0])||void 0===r?void 0:r.type)===Ew.String},VS=function(e){var t,n,r;return FS(e)?null===(r=null===(n=null===(t=e.parts)||void 0===t?void 0:t[0])||void 0===n?void 0:n.exp)||void 0===r?void 0:r.replace(/(^\"|\"$)/g,""):""},BS=function(e){return null==e?void 0:e.map((function(e){return null==e?void 0:e.without("fields").asMutable({deep:!0})}))},GS=function(e){return null==e?void 0:e.some((function(e){var t;return!!(null===(t=e.fields)||void 0===t?void 0:t.length)}))};function WS(){var e=O.useContext(av);return ev(e),e}!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(LS||(LS={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(US||(US={}));function zS(e){var t=function(t){return O.createElement(av.Consumer,null,(function(n){ev(n);var r=t.value,o=t.children,i=Qg(t,["value","children"]),a="string"==typeof r?new Date(r||0):r;return o("formatDate"===e?n.formatDateToParts(a,i):n.formatTimeToParts(a,i))}))};return t.displayName=US[e],t}function qS(e){var t=function(t){return O.createElement(av.Consumer,null,(function(n){ev(n);var r=t.value,o=t.children,i=Qg(t,["value","children"]),a=n[e](r,i);if("function"==typeof o)return o(a);var s=n.textComponent||O.Fragment;return O.createElement(s,null,a)}))};return t.displayName=LS[e],t}var HS=qS("formatDate"),JS=qS("formatTime"),$S=qS("formatNumber"),YS=(qS("formatList"),qS("formatDisplayName"),zS("formatDate"),zS("formatTime"),Mv.a||Rv),KS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kg(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.values,r=Qg(t,["values"]),o=e.values,i=Qg(e,["values"]);return!YS(o,n)||!YS(r,i)},t.prototype.render=function(){var e=this;return O.createElement(av.Consumer,null,(function(t){ev(t);var n=t.formatMessage,r=t.textComponent,o=void 0===r?O.Fragment:r,i=e.props,a=i.id,s=i.description,u=i.defaultMessage,c=i.values,l=i.children,f=i.tagName,d=void 0===f?o:f,p=n({id:a,description:s,defaultMessage:u},c);return Array.isArray(p)||(p=[p]),"function"==typeof l?l(p):d?O.createElement.apply(O,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([d,null],p)):p}))},t.displayName="FormattedMessage",t}(O.Component),XS=function(e){var t=e.value,n=e.other,r=e.children,o=e.intl,i=o.formatPlural,a=o.textComponent,s=e[i(t,e)]||n;return"function"==typeof r?r(s):a?O.createElement(a,null,s):s};XS.defaultProps={type:"cardinal"},XS.displayName="FormattedPlural";var QS=sv(XS);function ZS(e){var t=Math.abs(e);return t<60?"second":t<3600?"minute":t<86400?"hour":"day"}function eI(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return 3600;default:return 86400}}function tI(e,t){if(!e)return 0;switch(t){case"second":return e;case"minute":return 60*e;default:return 3600*e}}var nI=["second","minute","hour"];function rI(e){return void 0===e&&(e="second"),nI.includes(e)}var oI=function(e){function t(t){var n=e.call(this,t)||this;return n._updateTimer=null,n.state={prevUnit:n.props.unit,prevValue:n.props.value,currentValueInSeconds:rI(n.props.unit)?tI(n.props.value,n.props.unit):0},Zg(!t.updateIntervalInSeconds||!(!t.updateIntervalInSeconds||!rI(t.unit)),"Cannot schedule update with unit longer than hour"),n}return Kg(t,e),t.prototype.scheduleNextUpdate=function(e,t){var n=this,r=e.updateIntervalInSeconds,o=e.unit,i=t.currentValueInSeconds;if(clearTimeout(this._updateTimer),this._updateTimer=null,r&&rI(o)){var a=i-r,s=ZS(a);if("day"!==s){var u=eI(s),c=a-a%u,l=c>=i?c-u:c,f=Math.abs(l-i);this._updateTimer=setTimeout((function(){return n.setState({currentValueInSeconds:l})}),1e3*f)}}},t.prototype.componentDidMount=function(){this.scheduleNextUpdate(this.props,this.state)},t.prototype.componentDidUpdate=function(){this.scheduleNextUpdate(this.props,this.state)},t.prototype.componentWillUnmount=function(){clearTimeout(this._updateTimer),this._updateTimer=null},t.getDerivedStateFromProps=function(e,t){return e.unit!==t.prevUnit||e.value!==t.prevValue?{prevValue:e.value,prevUnit:e.unit,currentValueInSeconds:rI(e.unit)?tI(e.value,e.unit):0}:null},t.prototype.render=function(){var e=this;return O.createElement(av.Consumer,null,(function(t){ev(t);var n=t.formatRelativeTime,r=t.textComponent,o=e.props,i=o.children,a=o.value,s=o.unit,u=o.updateIntervalInSeconds,c=e.state.currentValueInSeconds,l=a||0,f=s;if(rI(s)&&"number"==typeof c&&u){var d=eI(f=ZS(c));l=Math.round(c/d)}var p=n(l,f,Xg({},e.props));return"function"==typeof i?i(p):r?O.createElement(r,null,p):p}))},t.displayName="FormattedRelativeTime",t.defaultProps={value:0,unit:"second"},t}(O.PureComponent),iI=function(){return(iI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},aI=O.createContext(null);function sI(e){var t=e.data,n=e.children;return O.createElement(aI.Consumer,null,(function(e){var r=t;return e&&(r=Array.isArray(e)?e.concat(t):[e].concat(t)),O.createElement(aI.Provider,{value:r},n)}))}aI.Consumer;function uI(e){function t(t){return O.createElement(aI.Consumer,null,(function(n){return O.createElement(e,iI({},t,{repeatedDataSource:n}))}))}return t.displayName="RepeatedDataSourceContextConsumerWrapper",t}var cI=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cI(t,e),t}(O.PureComponent);function fI(e,t){return e===t}function dI(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function pI(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}var hI=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,a=r.pop(),s=pI(r),u=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(n)),c=e((function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return u.apply(null,e)}));return c.resultFunc=a,c.dependencies=s,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fI,n=null,r=null;return function(){return dI(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var gI=function(e,t,n){"__proto__"==t&&td?td(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},vI=Object.prototype.hasOwnProperty;var mI=function(e,t,n){var r=e[t];vI.call(e,t)&&Ha(r,n)&&(void 0!==n||t in e)||gI(e,t,n)};var yI=function(e,t,n,r){if(!ya(e))return e;for(var o=-1,i=(t=Ss(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var u=Is(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=ya(l)?l:au(t[o+1])?[]:{})}mI(s,u,c),s=s[u]}return e};var bI=function(e,t,n){return null==e?e:yI(e,t,n)},wI=function(){function e(){this.state={}}return e.getInstance=function(){return e.instance||(e.instance=new e,window._mutableStoreManager=e.instance),e.instance},e.prototype.updateStateValue=function(e,t,n){var r,o=null!==(r=null==t?void 0:t.split("."))&&void 0!==r?r:[],i=[e].concat(o);bI(this.state,i,n),Jf().dispatch(Xd(e,t))},e.prototype.getStateValue=function(e){return Es(this.state,e)},e.prototype.getState=function(){return this.state},e}(),SI=n(9),II=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},OI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},EI=function(){function e(){this.actions=[],this.actionClassPromises={}}return e.getInstance=function(){return e.instance||(e.instance=new e,window._messageManager=e.instance),e.instance},e.prototype.getActions=function(){return this.actions},e.prototype.getWidgetActions=function(e){return this.actions.filter((function(t){return t.widgetId===e}))},e.prototype.getAction=function(e,t){return this.actions.find((function(n){return n.widgetId===e&&n.name===t}))},e.prototype.destroyWidgetActions=function(e){this.actions=this.actions.filter((function(t){return t.destroy(),t.widgetId!==e}))},e.prototype.registerWidgetActions=function(e,t){return II(this,void 0,void 0,(function(){var n,r=this;return OI(this,(function(o){switch(o.label){case 0:return e.context.isRemote?[4,Promise.resolve()]:[3,2];case 1:return[2,o.sent()];case 2:return n=[],e.manifest.messageActions&&e.manifest.messageActions.forEach((function(o){var i;i=e.context.isRemote?e.context.folderUrl+"dist/"+o.uri+".js":e.uri+"dist/"+o.uri,n.push(r.registerAction({id:e.id+"-"+o.name,name:o.name,uri:i,widgetId:e.id,appConfig:t,label:e.manifest.i18nMessages["_action_"+o.name+"_label"]||o.label}))})),[2,Promise.all(n)]}}))}))},e.prototype.registerAction=function(e){return II(this,void 0,void 0,(function(){var t,n=this;return OI(this,(function(r){switch(r.label){case 0:return(t=this.actions.find((function(t){return t.id===e.id})))?[2,Promise.resolve(t)]:[4,function(){return II(n,void 0,void 0,(function(){return OI(this,(function(t){switch(t.label){case 0:return e.ActionClass?[4,Promise.resolve(e.ActionClass)]:[3,2];case 1:return[2,t.sent()];case 2:return[4,this.loadActionClass(e.uri)];case 3:return[2,t.sent()]}}))}))}().then((function(r){return II(n,void 0,void 0,(function(){var n,o,i=this;return OI(this,(function(a){switch(a.label){case 0:return t=new r({id:e.id,name:e.name,widgetId:e.widgetId,label:e.label}),n=[],r.versionManager&&e.appConfig&&(o=tf(e.appConfig,e.widgetId,e.name),n=o.map((function(t){return II(i,void 0,void 0,(function(){return OI(this,(function(n){switch(n.label){case 0:return[4,this.upgradeActionConfig(t,r.versionManager,e.appConfig.widgets[e.widgetId].manifest.version)];case 1:return[2,n.sent()]}}))}))}))),[4,Promise.all(n).then((function(){return i.actions.push(t),t}))];case 1:return[2,a.sent()]}}))}))}))];case 1:return[2,r.sent()]}}))}))},e.prototype.upgradeActionConfig=function(e,t,n){return II(this,void 0,void 0,(function(){var r,o,i;return OI(this,(function(a){switch(a.label){case 0:return r=e.version,o=e.widgetId,i=e.config,r||(e.version="1.0.0-beta2"),n===r?[2,i]:t?SI.valid(r)&&SI.valid(n)?[4,t.upgrade(i,r,n,e.actionId).then((function(t){e.config=t,e.version=n}))]:(console.error("Bad widget action config version number, "+o+","+r+","+n),[2,i]):[2,i];case 1:return[2,a.sent()]}}))}))},e.prototype.loadActionClass=function(e){return II(this,void 0,void 0,(function(){return OI(this,(function(t){switch(t.label){case 0:return this.actionClassPromises[e]?[4,this.actionClassPromises[e]]:[3,2];case 1:return[2,t.sent()];case 2:return this.actionClassPromises[e]=Zc(e,["default"]).then((function(e){return e.default})),[2,this.actionClassPromises[e]]}}))}))},e.prototype.publishMessage=function(e){return II(this,void 0,void 0,(function(){var t,n,r,o,i,a,s;return OI(this,(function(u){switch(u.label){case 0:for(t=Jf().getState().appConfig.messageConfigs,n=Object.keys(t),r=null,a=0;a<n.length;a++)if(t[n[a]].messageType===e.type&&t[n[a]].widgetId===e.widgetId){r=t[n[a]];break}if(!r)return[2];o=function(t){var n,o;return OI(this,(function(a){switch(a.label){case 0:return n=r.actions[t],(o=i.actions.filter((function(e){return e.widgetId===n.widgetId&&e.name===n.actionName}))[0])?o.filterMessage(e)?[4,i.exeAction(o,e,n.config)]:[2,"break"]:(console.error("Not find action: "+n.actionName),[2,"break"]);case 1:return a.sent()?[2]:[2,{value:void 0}]}}))},i=this,a=0,u.label=1;case 1:return a<r.actions.length?[5,o(a)]:[3,4];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];if("break"===s)return[3,4];u.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))},e.prototype.exeAction=function(e,t,n){return II(this,void 0,void 0,(function(){var r;return OI(this,(function(o){switch(o.label){case 0:return(r=e.onExecute(t,n))&&r instanceof Promise?[4,r.then((function(e){return e}),(function(e){return II(this,void 0,void 0,(function(){return OI(this,(function(t){switch(t.label){case 0:return console.error(e),[4,Promise.resolve(!1)];case 1:return[2,t.sent()]}}))}))}))]:[3,2];case 1:return[2,o.sent()];case 2:return[4,Promise.resolve(r)];case 3:return[2,o.sent()]}}))}))},e}(),xI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},CI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var TI=function(){function e(){this.actions=[],this.actionClassPromises={}}return e.getInstance=function(){return e.instance||(e.instance=new e,window._dataActionManager=e.instance),e.instance},e.prototype.getActions=function(){return this.actions},e.prototype.getSupportedActions=function(e,t,n){var r,o,i;return void 0===n&&(n=[]),xI(this,void 0,void 0,(function(){var a,s,u,c,l,f,d,p,h,g;return CI(this,(function(v){switch(v.label){case 0:a={},s=Jf().getState(),u=s.appConfig,c=s.browserSizeMode,l=null==u?void 0:u.widgets[e],f=null===(o=null===(r=l.manifest)||void 0===r?void 0:r.properties)||void 0===o?void 0:o.excludeDataActions,d=uf(u,c),p=0,v.label=1;case 1:return p<this.actions.length?(h=this.actions[p],g=null===(i=Jf().getState().appConfig)||void 0===i?void 0:i.widgets[h.widgetId],[4,this.testActionSupportData(h,t,n)]):[3,4];case 2:if(v.sent()){if(h.widgetId&&(this.isActionExcluded(g.manifest.name+"."+h.name,f)||!function(e,t,n){var r,o,i,a,s,u;if(e===t)return!1;var c=null===(r=Jf().getState().appConfig)||void 0===r?void 0:r.widgets[e];if(!c)return!1;var l=c.dataActions;if(null===(i=null===(o=null==l?void 0:l[n])||void 0===o?void 0:o.enabled)||void 0===i||i){var f=null===(s=null===(a=null==l?void 0:l[n])||void 0===a?void 0:a.actions)||void 0===s?void 0:s[t];return null===(u=null==f?void 0:f.enabled)||void 0===u||u}return!1}(e,h.widgetId,h.name)||!af(d,e,h.widgetId)))return[3,3];a[h.name]||(a[h.name]=[]),a[h.name].push(h)}v.label=3;case 3:return p++,[3,1];case 4:return[2,a]}}))}))},e.prototype.isActionExcluded=function(e,t){void 0===t&&(t=[]);var n=e.split(".");if(2!==n.length)return!0;var r=n[0]+".*";return t.some((function(t){return t===e||t===r}))},e.prototype.registerWidgetActions=function(e){return xI(this,void 0,void 0,(function(){var t,n,r,o,i,a;return CI(this,(function(s){switch(s.label){case 0:if(t=[],!e.uri||!e.manifest.dataActions||0===e.manifest.dataActions.length)return[2,t];n=0,s.label=1;case 1:return n<e.manifest.dataActions.length?(r=e.manifest.dataActions[n],o=e.uri+"dist/"+r.uri,i=e.id+"-"+r.name,[4,this.registerAction({id:i,name:r.name,uri:o,widgetId:e.id,label:e.manifest.i18nMessages["_action_"+r.name+"_label"]||e.manifest.i18nMessages["action_"+r.name+"_label"]||r.label,icon:$l(e.uri).folderUrl+"dist/"+r.icon})]):[3,4];case 2:(a=s.sent())&&t.push(a),s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},e.prototype.registerAction=function(e){return xI(this,void 0,void 0,(function(){var t,n,r,o,i=this;return CI(this,(function(a){switch(a.label){case 0:if(t=this.actions.find((function(t){return t.id===e.id})))return[2,t];n=function(){return xI(i,void 0,void 0,(function(){return CI(this,(function(t){switch(t.label){case 0:return e.ActionClass?[2,e.ActionClass]:[3,1];case 1:return[4,this.loadActionClass(e.uri)];case 2:return[2,t.sent()]}}))}))},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n()];case 2:return r=a.sent(),o=new r({id:e.id,name:e.name,label:e.label,icon:e.icon,widgetId:e.widgetId}),this.actions.push(o),[2,o];case 3:return a.sent(),console.error("Action class "+e.uri+" load failed"),[3,4];case 4:return[2,null]}}))}))},e.prototype.destroyWidgetActions=function(e){this.actions=this.actions.filter((function(t){return t.destroy(),t.widgetId!==e}))},e.prototype.getActionsByWidgetId=function(e){return this.actions.filter((function(t){return t.widgetId===e}))},e.prototype.loadActionClass=function(e){return xI(this,void 0,void 0,(function(){return CI(this,(function(t){switch(t.label){case 0:return this.actionClassPromises[e]?[4,this.actionClassPromises[e]]:[3,2];case 1:return[2,t.sent()];case 2:return this.actionClassPromises[e]=Zc(e,["default"]).then((function(e){return e.default})),[2,this.actionClassPromises[e]]}}))}))},e.prototype.testActionSupportData=function(e,t,n){return xI(this,void 0,void 0,(function(){return CI(this,(function(r){switch(r.label){case 0:return[4,e.isSupported(t,n)];case 1:return[2,r.sent()]}}))}))},e}(),jI=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AI=function(){return(AI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},PI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},_I=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},DI=function(){function e(){this.widgets={},$f(this.onStoreChange.bind(this),["appConfig","widgets"]),this.dsManager=ld.getInstance()}return e.getInstance=function(){return e.instance||(e.instance=new e,window._widgetManager=e.instance),e.instance},e.prototype.updateWidgetCache=function(e,t){for(var n in this.widgets[e]||(this.widgets[e]={}),t)this.widgets[e][n]=t[n]},e.prototype.getWidgetListInfo=function(){return PI(this,void 0,void 0,(function(){var e=this;return _I(this,(function(t){switch(t.label){case 0:return this.widgetListInfo&&this.widgetListInfo.length>0?[4,Promise.resolve(this.widgetListInfo)]:[3,2];case 1:return[2,t.sent()];case 2:return[4,fetch(nl("widgets/")+"widgets-info.json").then((function(t){return PI(e,void 0,void 0,(function(){return _I(this,(function(e){switch(e.label){case 0:return[4,t.json()];case 1:return[2,e.sent()]}}))}))})).then((function(t){return e.widgetListInfo=t.map((function(e){e.manifest=Yl(e.manifest);var t=Zv(Jf().getState().appContext.locale,e.manifest.translatedLocales);return{itemType:il.Widget,name:e.name,label:e.i18nLabel[t]||e.manifest.label||e.name,uri:e.uri,manifest:e.manifest,icon:nl("widgets/")+"../"+e.icon}})),e.widgetListInfo}))];case 3:return[2,t.sent()]}}))}))},e.prototype.getWidgetClass=function(e){var t,n,r,o=null===(n=null===(t=Jf().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];if(o)return null===(r=this.widgets[o.uri])||void 0===r?void 0:r.clazz},e.prototype.getWidgetClassByUri=function(e){var t;return null===(t=this.widgets[e])||void 0===t?void 0:t.clazz},e.prototype.destroyWidget=function(e){var t,n,r=null===(n=null===(t=Jf().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];r&&delete this.widgets[r.uri]},e.prototype.destroyAllWidgets=function(){this.widgets={}},e.prototype.checkWidgetUriInConfig=function(e){var t=Jf().getState().appConfig.widgets||{};return!!Object.keys(t).find((function(n){return t[n].uri===e}))},e.prototype.loadWidgetClass=function(e){var t,n;return PI(this,void 0,void 0,(function(){var r;return _I(this,(function(o){switch(o.label){case 0:return(r=null===(n=null===(t=Jf().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e])?[3,2]:[4,Promise.resolve(null)];case 1:return[2,o.sent()];case 2:return[4,this.loadWidgetClassByUri(r.uri)];case 3:return[2,o.sent()]}}))}))},e.prototype.loadWidgetClassByUri=function(e){var t,n;return PI(this,void 0,void 0,(function(){var r,o=this;return _I(this,(function(i){switch(i.label){case 0:return this.checkWidgetUriInConfig(e)?[3,2]:[4,Promise.resolve(null)];case 1:return[2,i.sent()];case 2:return(null===(t=this.widgets[e])||void 0===t?void 0:t.clazzPromise)?[4,this.widgets[e].clazzPromise]:[3,4];case 3:return[2,i.sent()];case 4:return(null===(n=this.widgets[e])||void 0===n?void 0:n.manifest)?[3,6]:(console.error(e,"Should load manifest firstly."),[4,Promise.reject(null)]);case 5:return[2,i.sent()];case 6:return(r=this.widgets[e].manifest).properties.hasMainClass?[3,8]:[4,Promise.resolve(null)];case 7:return[2,i.sent()];case 8:return this.widgets[e].clazzPromise=this.loadRawClass(e).then((function(){return PI(o,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return[4,this.injectWidgetProps(e)];case 1:return[2,t.sent()]}}))}))})).then((function(e){return e?o.appWidgetClassWrapperExtension(e,r):e})).then((function(t){return t?(o.widgets[e].clazz=t,Jf().dispatch(vd(e)),t):t})),[2,this.widgets[e].clazzPromise]}}))}))},e.prototype.loadRawClass=function(e){return PI(this,void 0,void 0,(function(){var t=this;return _I(this,(function(n){switch(n.label){case 0:return[4,this.loadWidgetDependency(e).then((function(){return PI(t,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return[4,Zc(e+"dist/runtime/widget",[])];case 1:return[2,t.sent()]}}))}))})).then((function(n){var r=n.default?n.default:n;return t.widgets[e].rawClazz=r,r}))];case 1:return[2,n.sent()]}}))}))},e.prototype.loadWidgetTranslation=function(e,t){return PI(this,void 0,void 0,(function(){var n,r=this;return _I(this,(function(o){switch(o.label){case 0:return(n=zv(n=Jf().getState().appContext.locale,t.translatedLocales))?[4,$v(e+"dist/runtime/translations",n).catch((function(e){return PI(r,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return console.error("Load widget translation error",e),[4,Promise.resolve({})];case 1:return[2,t.sent()]}}))}))}))]:[3,2];case 1:return[2,o.sent()];case 2:return[4,Promise.resolve({})];case 3:return[2,o.sent()]}}))}))},e.prototype.openWidget=function(e){Jf().dispatch(bd(e))},e.prototype.closeWidget=function(e){Jf().dispatch(Sd(e))},e.prototype.appWidgetClassWrapperExtension=function(e,t){var n=fl.getInstance().getExtensions(Yc.WidgetClassWrapper)[0];return n?n.wrap(e,t):e},e.prototype.handleNewWidgetJson=function(e){return PI(this,void 0,void 0,(function(){var t=this;return _I(this,(function(n){switch(n.label){case 0:return e.context=$l(e.uri),[4,this.loadWidgetManifest(e.uri).then((function(n){return PI(t,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return e._originManifest=n,[4,this.processWidgetManifest(e)];case 1:return[2,t.sent()]}}))}))})).then((function(n){return PI(t,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return e.manifest=n,e.version=n.version,Kl(Jf().getState().appStateInBuilder?Jf().getState().appStateInBuilder.appConfig:Jf().getState().appConfig,e),[4,this.loadWidgetDefaultConfig(e.uri)];case 1:return[2,t.sent()]}}))}))})).then((function(t){return e.config=t,e}))];case 1:return[2,n.sent()]}}))}))},e.prototype.isAllowLoad=function(e){return PI(this,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?[4,Promise.resolve(!1)]:[3,2];case 1:return[2,t.sent()];case 2:return[4,Promise.resolve(!0)];case 3:return[2,t.sent()]}}))}))},e.prototype.loadWidgetManifest=function(e){return PI(this,void 0,void 0,(function(){var t=this;return _I(this,(function(n){switch(n.label){case 0:return this.widgets[e]||(this.widgets[e]={}),this.widgets[e].manifestPromise?[4,this.widgets[e].manifestPromise]:[3,2];case 1:return[2,n.sent()];case 2:return this.widgets[e].manifestPromise=this.isAllowLoad(e).then((function(n){return PI(t,void 0,void 0,(function(){var t,r=this;return _I(this,(function(o){switch(o.label){case 0:return n?[3,2]:[4,Promise.reject("Not allow."+e)];case 1:return[2,o.sent()];case 2:return t=$l(e).folderUrl+"manifest.json",[4,window.fetch(t).then((function(e){return PI(r,void 0,void 0,(function(){var t=this;return _I(this,(function(n){switch(n.label){case 0:return 404!==e.status?[3,2]:[4,Fc().then((function(e){return PI(t,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return e&&Jf().dispatch(_p(!0)),[4,Promise.reject(new Error("404, widget not found."))];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,n.sent()];case 2:return[4,e.json()];case 3:return[2,n.sent()]}}))}))}))];case 3:return[2,o.sent()]}}))}))})).then((function(n){return PI(t,void 0,void 0,(function(){var t;return _I(this,(function(r){switch(r.label){case 0:return n.error&&n.error.code?[4,Promise.reject(n.error)]:[3,2];case 1:return[2,r.sent()];case 2:return!(t=n).widgetType&&t.properties&&t.properties.type&&(t.widgetType=t.properties.type,delete t.properties.type),!t.layouts&&t.properties&&t.properties.layouts&&(t.layouts=t.properties.layouts,delete t.properties.layouts),!t.translatedLocales&&t.supportedLocales&&(t.translatedLocales=t.supportedLocales),this.widgets[e].rawManifest=t,[4,Promise.resolve(t)];case 3:return[2,r.sent()]}}))}))})),[4,this.widgets[e].manifestPromise];case 3:return[2,n.sent()]}}))}))},e.prototype.processWidgetManifest=function(e){return PI(this,void 0,void 0,(function(){var t,n=this;return _I(this,(function(r){switch(r.label){case 0:return t=Yl(e._originManifest),e.manifest=t,[4,this.loadWidgetTranslation(e.uri,t).then((function(r){return t.i18nMessages=r,e.manifest=t,n.widgets[e.uri]?n.widgets[e.uri].manifest=t:n.widgets[e.uri]={rawManifest:e._originManifest,manifest:t,manifestPromise:Promise.resolve(t)},t}))];case 1:return[2,r.sent()]}}))}))},e.prototype.registerManifestProps=function(e,t){return PI(this,void 0,void 0,(function(){var n,r;return _I(this,(function(o){switch(o.label){case 0:return n=e.manifest,r=[],n.extensions&&n.extensions.length>0&&r.push(fl.getInstance().registerWidgetExtensions(e)),n.messageActions&&n.messageActions.length>0&&r.push(EI.getInstance().registerWidgetActions(e,t)),n.dataActions&&n.dataActions.length>0&&r.push(TI.getInstance().registerWidgetActions(e)),[4,Promise.all(r).then((function(){}))];case 1:return[2,o.sent()]}}))}))},e.prototype.unRegisterManifestProps=function(e){fl.getInstance().destryWidgetExtensions(e),EI.getInstance().destroyWidgetActions(e),TI.getInstance().destroyWidgetActions(e)},e.prototype.loadWidgetDefaultConfig=function(e){var t;return PI(this,void 0,void 0,(function(){var n,r=this;return _I(this,(function(o){switch(o.label){case 0:return this.widgets[e].manifest.properties.hasConfig?[3,2]:[4,Promise.resolve(null)];case 1:return[2,o.sent()];case 2:return(null===(t=this.widgets[e])||void 0===t?void 0:t.defaultConfigPromise)?[4,this.widgets[e].defaultConfigPromise]:[3,4];case 3:return[2,o.sent()];case 4:return n=$l(e).folderUrl,this.widgets[e].defaultConfigPromise=window.fetch(n+"config.json").then((function(e){return PI(r,void 0,void 0,(function(){var t=this;return _I(this,(function(n){switch(n.label){case 0:return 404!==e.status?[3,2]:[4,Fc().then((function(e){return PI(t,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return e&&Jf().dispatch(_p(!0)),[4,Promise.reject(new Error("404, widget not found."))];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,n.sent()];case 2:return[4,e.json()];case 3:return[2,n.sent()]}}))}))})).then((function(e){return e})),[2,this.widgets[e].defaultConfigPromise]}}))}))},e.prototype.loadWidgetDependency=function(e){return PI(this,void 0,void 0,(function(){var t;return _I(this,(function(n){switch(n.label){case 0:return(t=this.widgets[e].manifest).dependency?[3,2]:[4,Promise.resolve()];case 1:return[2,n.sent()];case 2:return[4,Mm("string"==typeof t.dependency?[t.dependency]:t.dependency)];case 3:return[2,n.sent()]}}))}))},e.prototype.injectWidgetProps=function(e){return PI(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,u,c,l=this;return _I(this,(function(f){switch(f.label){case 0:return t=this.widgets[e].manifest,n=t.name,r=this.widgets[e].rawClazz,o=sv(r),i=bt(o),a=uI(i),this.checkWidgetUriInConfig(e)?[3,2]:[4,Promise.resolve(null)];case 1:return[2,f.sent()];case 2:return s=hI((function(e){return e.appI18nMessages}),(function(e){var n=t.i18nMessages;return Object.assign({},n,e)})),u=function(t,n){var o,i=n.widgetId;if(!t.appConfig.widgets[i])return{};var a=t.widgetsRuntimeInfo[i],u=Object.assign({portalUrl:t.portalUrl,portalSelf:t.portalSelf,user:t.user,token:t.token,locale:t.appContext.locale,appI18nMessages:t.appI18nMessages,i18nMessages:s(t)},n);t.widgetsState[i]&&(u.stateProps=t.widgetsState[i]),t.widgetsMutableStateVersion[i]&&(u.mutableStatePropsVersion=t.widgetsMutableStateVersion[i],u.mutableStateProps=wI.getInstance().getStateValue([i])),(null===(o=l.widgets[e])||void 0===o?void 0:o.widgetBuilderSupportModules)&&(u.builderSupportModules=l.widgets[e].widgetBuilderSupportModules),t.widgetsPreloadProps&&t.widgetsPreloadProps[i]&&Object.assign(u,t.widgetsPreloadProps[i]);var c=Object.assign(u,t.appConfig.widgets[i],a);return Object.assign(c,r.mapExtraStateProps?r.mapExtraStateProps(t,c):{})},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jI(t,e),t.prototype.upgradeWidgetConfig=function(){return PI(this,void 0,void 0,(function(){var e,t,n,o,i,a;return _I(this,(function(s){switch(s.label){case 0:return e=this.props,t=r.versionManager,n=e.manifest.version,o=e.version,i=e.config,n!==o?[3,2]:[4,Promise.resolve(i)];case 1:return[2,s.sent()];case 2:return t?[3,4]:(Jf().dispatch(md(e.id,i)),[4,Promise.resolve(i)]);case 3:return[2,s.sent()];case 4:return SI.valid(o)&&SI.valid(n)?[3,6]:[4,Promise.reject("Bad widget version number, "+e.manifest.name+","+o+","+n)];case 5:return[2,s.sent()];case 6:if(!SI.lt(o,n))return[3,11];s.label=7;case 7:return s.trys.push([7,9,,10]),[4,t.upgrade(i,o,n,e.id).then((function(t){return Jf().dispatch(md(e.id,t)),t}))];case 8:return[2,s.sent()];case 9:return a=s.sent(),console.log("Upgrade widget ["+e.manifest.name+"] old config error,"+a.stack),[2,i];case 10:return[3,13];case 11:return[4,Promise.reject("It seems this widget is configured with a higher version. Please upgrade to the latest version to view. "+e.manifest.name+","+o+","+n)];case 12:return[2,s.sent()];case 13:return[2]}}))}))},t.prototype.componentDidMount=function(){this.upgradeWidgetConfig()},t.prototype.componentDidUpdate=function(){this.upgradeWidgetConfig()},t.prototype.render=function(){var e=this.props,t=e.id,n=e.manifest,o=e.version,i=e.i18nMessages;return t?r.versionManager&&n.version!==o?null:O.createElement(Bv,{locale:this.props.locale,defaultLocale:this.props.locale,messages:i},O.createElement(a,AI({},this.props))):null},t.displayName="WidgetWrapper("+n+")",t}(O.PureComponent),[2,this.loadWidgetBuilderSupportModules(e,t).then((function(){return PI(l,void 0,void 0,(function(){return _I(this,(function(t){switch(t.label){case 0:return this.checkWidgetUriInConfig(e)?[3,2]:[4,Promise.resolve(null)];case 1:return[2,t.sent()];case 2:return[4,Promise.resolve(pe(u)(c))];case 3:return[2,t.sent()]}}))}))}))]}}))}))},e.prototype.loadWidgetBuilderSupportModules=function(e,t){var n;return PI(this,void 0,void 0,(function(){var r,o,i=this;return _I(this,(function(a){switch(a.label){case 0:return r=[],window.jimuConfig.isInBuilder?(null===(n=this.widgets[e])||void 0===n?void 0:n.widgetBuilderSupportModulesPromise)?[4,this.widgets[e].widgetBuilderSupportModulesPromise]:[3,2]:[3,3];case 1:return[2,a.sent()];case 2:return t.properties.hasEmbeddedLayout?r.push(Zc("jimu-layouts/layout-builder",["LayoutEntry"]).then((function(e){return e.LayoutEntry}))):r.push(Promise.resolve(null)),t.properties.hasBuilderSupportModule?(o=e+"dist/runtime/builder-support",r.push(Zc(o,["default"]).then((function(e){return e.default})))):r.push(Promise.resolve(null)),this.widgets[e].widgetBuilderSupportModulesPromise=Promise.all(r).then((function(t){return i.widgets[e].widgetBuilderSupportModules={jimuForBuilderLib:rl(),LayoutEntry:t[0],widgetModules:t[1]},i.widgets[e].widgetBuilderSupportModules})),[2,this.widgets[e].widgetBuilderSupportModulesPromise];case 3:return[2,Promise.resolve({jimuForBuilderLib:null})]}}))}))},e.prototype.onStoreChange=function(e,t){var n=this;e&&t&&Object.keys(e).forEach((function(e){t[e]||(n.destroyWidget(e),n.unRegisterManifestProps(e))})),e&&t&&Object.keys(t).forEach((function(r){e[r]||n.registerManifestProps(t[r])}))},e}(),kI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},RI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},MI=function(){function e(){var e=this;this.initialize=function(t){return kI(e,void 0,void 0,(function(){var e,n=this;return RI(this,(function(r){switch(r.label){case 0:return(e=!(!t||!t.enable))?[3,2]:(this.enable=e,[4,Promise.resolve()]);case 1:return[2,r.sent()];case 2:return[4,Promise.all([this.initializeGtag(),this.createTracker(t)]).then((function(){n.enable=e}),function(e){throw this.enable=!1,new Error(e)}.bind(this))];case 3:return[2,r.sent()]}}))}))},this.initializeGtag=function(){return kI(e,void 0,void 0,(function(){var e=this;return RI(this,(function(t){switch(t.label){case 0:return this.gtag?[4,Promise.resolve()]:[3,2];case 1:return[2,t.sent()];case 2:return[4,Zc("gtm").then((function(){var t=window;t.dataLayer=t.dataLayer||[],e.gtag=function(){t.dataLayer.push(arguments)},e.gtag("js",new Date)}))];case 3:return[2,t.sent()]}}))}))},this.compareGoogleAnalytics=function(t){if(void 0===t&&(t=xe({})),e.enable){var n=e.googleAnalytics||xe({});t!==n&&(t.trackId!==n.trackId&&(n.trackId&&e.disableGaTrackForGtag(n.trackId,!0),t.trackId&&e.addGaTrackIdToGtag(t.trackId,t.anonymizeip)),t.dimensions!==n.dimensions&&e.updateGgTrackerDimensions(e.track,t.dimensions),t.metrics!==n.metrics&&e.updateGgTrackerMetrics(e.track,t.metrics),t.anonymizeip!==n.anonymizeip&&e.updateGgTrackerAnonymizeip(t.trackId,t.anonymizeip),e.googleAnalytics=t)}},this.disableGaTrackForGtag=function(e,t){void 0===t&&(t=!0),e&&(window["ga-disable-"+e]=t)},this.addGaTrackIdToGtag=function(t,n){void 0===n&&(n=!0),e.gtag&&(e.disableGaTrackForGtag(t,!1),e.gtag("config",t,{anonymize_ip:n}))},this.updateGgTrackerDimensions=function(t,n){var r=e.getGgTracker(t);r&&(r.dimensions=n)},this.updateGgTrackerMetrics=function(t,n){var r=e.getGgTracker(t);r&&(r.metrics=n)},this.updateGgTrackerAnonymizeip=function(t,n){void 0===n&&(n=!0),e.gtag&&e.gtag("config",t,{anonymize_ip:n})},this.getGgTracker=function(e){return e&&e.trackers&&e.trackers.find((function(e){return"google"===e.name}))},this.mutablePortalUser=function(){var e=Jf().getState().portalSelf.asMutable();return e.user=e.user.asMutable(),e},this.isTrackAvailable=function(){return e.enable,!!e.enable},$f(this.onStoreChange.bind(this),["appConfig","analytics"])}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.onStoreChange=function(e,t){var n=this;void 0===e&&(e=xe({})),void 0===t&&(t=xe({})),t.enable!==e.enable?this.initialize(t).then((function(){return n.compareGoogleAnalytics(t&&t.google)})):this.compareGoogleAnalytics(t&&t.google)},e.prototype.createTracker=function(e){return kI(this,void 0,void 0,(function(){var t,n=this;return RI(this,(function(r){switch(r.label){case 0:return this.track?[4,Promise.resolve(this.track)]:[3,2];case 1:return[2,r.sent()];case 2:return t={google:e&&e.google,portal:this.mutablePortalUser()},[4,Zc("jimu-core/telemetry").then((function(e){return n.track=new e(t),n.track}))];case 3:return[2,r.sent()]}}))}))},e.prototype.logPageView=function(e){if(this.isTrackAvailable())return this.track.logPageView(e)},e.prototype.logEvent=function(e){if(this.isTrackAvailable())return this.track.logEvent(e)},e.prototype.logError=function(e){if(this.isTrackAvailable())return this.track.logError(e)},e}(),NI=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},UI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},FI=function(){function e(){}return e.prototype.upgrade=function(e,t,n,r){return LI(this,void 0,void 0,(function(){var o,i,a,s=this;return UI(this,(function(u){switch(u.label){case 0:return SI.valid(t)&&SI.valid(n)?[3,2]:[4,Promise.resolve()];case 1:return[2,u.sent()];case 2:return this.checkVersion()?[3,4]:[4,Promise.resolve()];case 3:return[2,u.sent()];case 4:return o=this.getVersionIndex(t),i=this.getVersionIndex(n),o>i?[4,Promise.reject("New version should higher than old version.")]:[3,6];case 5:return[2,u.sent()];case 6:return o!==i?[3,10]:this.versions[i]?[4,Promise.resolve(this.versions[i].upgrader(e,r))]:[3,8];case 7:return[2,u.sent()];case 8:return[4,Promise.resolve(e)];case 9:return[2,u.sent()];case 10:return a=e,[2,this.versions.slice(o+1,i+1).filter((function(e){return null==e?void 0:e.upgrader})).reduce((function(e,t){return LI(s,void 0,void 0,(function(){var n=this;return UI(this,(function(o){switch(o.label){case 0:return[4,e.then((function(e){return LI(n,void 0,void 0,(function(){return UI(this,(function(n){switch(n.label){case 0:return[4,Promise.resolve(t.upgrader(e,r))];case 1:return[2,n.sent()]}}))}))}))];case 1:return[2,o.sent()]}}))}))}),Promise.resolve(a))]}}))}))},e.prototype.getVersionIndex=function(e){var t=this.versions.findIndex((function(t){return SI.eq(e,t.version)}));if(t>-1)return t;for(var n=0;n<this.versions.length-1;n++)if(SI.gt(e,this.versions[n].version)&&SI.lt(e,this.versions[n+1].version))return n;return SI.lt(e,this.versions[0].version)?-1:SI.gt(e,this.versions[this.versions.length-1].version)?this.versions.length:void 0},e.prototype.checkVersion=function(){for(var e=0;e<this.versions.length-1;e++){if(!SI.valid(this.versions[e].version))return console.error("Invalid version.",this.versions[e].version),!1;if(SI.gt(this.versions[e].version,this.versions[e+1].version))return console.error("Version order error.",this.versions[e].version,this.versions[e+1]),!1}return!0},e}(),VI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versions=[{version:"1.0.0",description:"First release.",upgrader:function(e){var t,n=e;return delete n.widgetsManifest,(t=n).widgets&&Object.keys(t.widgets).forEach((function(e){var n,r=t.widgets[e];"widgets/common/controller/"===r.uri&&(null===(n=r.layouts)||void 0===n?void 0:n.openwidget)&&(r.layouts._openwidget=r.layouts.openwidget,delete r.layouts.openwidget)})),n=function(e){var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((function(t){var n,r;Object.keys(null!==(r=null===(n=e.layouts[t])||void 0===n?void 0:n.content)&&void 0!==r?r:{}).forEach((function(n){var r,o,i,a,s=e.layouts[t].content[n];(null===(r=null==s?void 0:s.setting)||void 0===r?void 0:r.fitContainer)&&(s.setting.heightMode="fit",(u=null!==(o=s.setting.autoProps)&&void 0!==o?o:{}).height="STRETCH",s.setting.autoProps=u,delete s.setting.fitContainer);if(null===(i=null==s?void 0:s.setting)||void 0===i?void 0:i.autoHeight){var u=null!==(a=s.setting.autoProps)&&void 0!==a?a:{},c=s.bbox;null!=c.top&&null!=c.bottom?u.height="STRETCH":u.height="AUTO",s.setting.autoProps=u,delete s.setting.autoHeight}}))})),e}(n=t)}},{version:"1.1.0",description:"1.1.0",upgrader:function(e){return LI(t,void 0,void 0,(function(){var t,n,r,o,i;return UI(this,(function(a){return t=function(e){var t;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((function(t){var n,r=e.dataSources[t];"FEATURE_QUERY"===r.type?r.type=ea.c.FeatureLayer:r.isOutputFromWidget&&(null===(n=null==r?void 0:r.originDataSources)||void 0===n||n.forEach((function(e){e.mainDataSourceId=e.dataSourceId})))})),e},n=function(e,t,n){var i,a=Xv().formatMessage({id:"upgradedFrom"});return Object.keys(null!==(i=e.widgets)&&void 0!==i?i:{}).forEach((function(n){var r,o=e.widgets[n];(null!==(r=o.useDataSources)&&void 0!==r?r:[]).forEach((function(r,i){var s,u,c,l,f,d,p,h,g,v,m;if(r.query||"widgets/arcgis/feature-info/"===o.uri&&(null===(d=o.config)||void 0===d?void 0:d.limitGraphics)||"widgets/common/list/"===o.uri){var y="_from_10_"+n+"_"+i,b=e.dataSources||{},w={id:y,label:a,where:null===(p=r.query)||void 0===p?void 0:p.where,orderBy:null===(g=null===(h=r.query)||void 0===h?void 0:h.orderBy)||void 0===g?void 0:g.filter((function(e){return!!(null==e?void 0:e.jimuFieldName)})),maximum:"widgets/arcgis/feature-info/"===o.uri?null===(v=o.config)||void 0===v?void 0:v.maxGraphics:"widgets/common/list/"===o.uri&&(null===(m=o.config)||void 0===m?void 0:m.maxItems)},S=r.dataSourceId,I=r.rootDataSourceId,O=S+"-"+y;if(r.dataSourceId=O,r.mainDataSourceId=S,r.dataViewId=y,t.getChildrenContents(e,n,il.Widget,!0).forEach((function(t){var n,r=e.widgets[t];if((null!==(n=r.useDataSources)&&void 0!==n?n:[]).forEach((function(e,t){e.dataSourceId===S&&(e.dataSourceId=O,e.mainDataSourceId=S,e.dataViewId=y)})),"widgets/common/image/"===r.uri||"widgets/common/button/"===r.uri){("widgets/common/image/"===r.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"]).forEach((function(e){var t,n,o,i=e.split("."),a=1===i.length?(null===(t=null==r?void 0:r.config)||void 0===t?void 0:t.functionConfig)&&r.config.functionConfig[i[0]]:(null===(n=null==r?void 0:r.config)||void 0===n?void 0:n.functionConfig)&&r.config.functionConfig[i[0]]&&r.config.functionConfig[i[0]][i[1]];null===(o=null==a?void 0:a.parts)||void 0===o||o.forEach((function(e){e.dataSourceId===S&&(e.dataSourceId=O)}))}))}else"widgets/common/text/"===r.uri&&(r.config.text=r.config.text.replace(new RegExp(S,"g"),O))})),b[S])b[S].dataViews?b[S].dataViews[y]=w:b[S].dataViews=((s={})[y]=w,s);else if(b[I]){var E=S.substr(I.length+1);b[I].childDataSourceJsons?b[I].childDataSourceJsons[E]?b[I].childDataSourceJsons[E].dataViews?b[I].childDataSourceJsons[E].dataViews[y]=w:b[I].childDataSourceJsons[E].dataViews=((u={})[y]=w,u):b[I].childDataSourceJsons[E]={id:S,dataViews:(c={},c[y]=w,c)}:b[I].childDataSourceJsons=((l={})[E]={id:S,dataViews:(f={},f[y]=w,f)},l)}else console.error("bad config ds.",r);Object.keys(b).forEach((function(e){b[e].originDataSources&&b[e].originDataSources.forEach((function(e){e.dataSourceId===S&&(e.dataSourceId=O,e.mainDataSourceId=S,e.dataViewId=y)}))})),delete r.query}else r.mainDataSourceId||(r.mainDataSourceId=r.dataSourceId)}))})),r(o(e,t,n,"_from_10_"))},r=function(e){var t;return Object.keys(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((function(t){var n,r=null===(n=e.messageConfigs[t])||void 0===n?void 0:n.actions,o=e.widgets||{};r&&r.forEach((function(e){var t,n,r,i,a,s;if("widgets/common/list/"===(null===(t=o[null==e?void 0:e.widgetId])||void 0===t?void 0:t.uri)){if(e.config=e.config||{},e.config.actionUseDataSource&&e.config.actionUseDataSource.dataSourceId){var u=null===(n=e.config.actionUseDataSource)||void 0===n?void 0:n.fields;e.config.actionUseDataSource=null===(r=o[e.widgetId])||void 0===r?void 0:r.useDataSources[0],e.config.actionUseDataSource.fields=u}if(e.config.messageUseDataSource&&e.config.messageUseDataSource.dataSourceId)if("widgets/common/list/"===(null===(i=o[null==e?void 0:e.messageWidgetId])||void 0===i?void 0:i.uri)){var c=null===(a=e.config.messageUseDataSource)||void 0===a?void 0:a.fields;e.config.messageUseDataSource=null===(s=o[e.messageWidgetId])||void 0===s?void 0:s.useDataSources[0],e.config.messageUseDataSource.fields=c}else e.config.messageUseDataSource.mainDataSourceId=e.config.messageUseDataSource.dataSourceId;e.actionId=e.actionId.replace(e.widgetId+"-filter","filter-data-record-action"),e.actionName=e.actionName.replace("filter","filter data record action"),e.version="1.1.0",delete e.widgetId}}))})),e},o=function(e,t,n,r){var o;return Object.keys(null!==(o=e.widgets)&&void 0!==o?o:{}).forEach((function(o){var i=function(e,t,n){var o=(null==t?void 0:t.parts)&&(null==t?void 0:t.parts[e]);if(!o)return null;if(o.type===Ew.Field){var i=e>0?t.parts[e-1]:null,a=e>1?t.parts[e-2]:null,s=t.parts[e+1];if((null==a?void 0:a.type)===Ew.Function&&"("===(null==i?void 0:i.exp)&&")"===(null==s?void 0:s.exp))return o;if(n&&o.dataSourceId===n)o.isFromRepeatedDataSourceContext=!0;else if(o.dataSourceId&&!o.isFromRepeatedDataSourceContext){var u=0===o.dataSourceId.split("-").reverse()[0].indexOf(r)?o.dataSourceId.split("-").reverse().slice(1).reverse().join("-"):o.dataSourceId;o.dataSourceId=u+"-"+Yu}}return o},a=function(e,t){var r,o,a,s;if("widgets/common/image/"===e.uri||"widgets/common/button/"===e.uri){("widgets/common/image/"===e.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"]).forEach((function(n){var r,o,a,s=n.split("."),u=1===s.length?(null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.functionConfig)&&e.config.functionConfig[s[0]]:(null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.functionConfig)&&e.config.functionConfig[s[0]]&&e.config.functionConfig[s[0]][s[1]];null===(a=null==u?void 0:u.parts)||void 0===a||a.forEach((function(e,n){i(n,u,t)}))}))}else"widgets/common/embed/"===e.uri?null===(a=null===(o=null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.expression)||void 0===o?void 0:o.parts)||void 0===a||a.forEach((function(n,r){i(r,e.config.expression,t)})):"widgets/common/text/"===e.uri&&(null===(s=e.config)||void 0===s?void 0:s.text)&&(e.config.text=n.editExpressionPart(e.config.text,(function(e,n){return i(e,n,t)})));return e},s=e.widgets[o];Zu.some((function(e){return e===s.uri}))?t.getChildrenContents(e,o,il.Widget,!0).forEach((function(t){var n=(null==s?void 0:s.useDataSources)&&s.useDataSources[0]&&s.useDataSources[0].dataSourceId;e.widgets[t]=a(e.widgets[t],n)})):s=a(s)})),e},i=function(e){var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((function(t){var n,r=e.layouts[t],o=null==r?void 0:r.type;Object.keys(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:{}).forEach((function(e){var t,n,i,a,s,u,c=r.content[e],l=null!==(n=null===(t=c.setting)||void 0===t?void 0:t.autoProps)&&void 0!==n?n:{};!0===l.width?(o===al.FixedLayout?l.left||l.right?l.width="AUTO":l.width="STRETCH":l.width="AUTO",c.setting.autoProps=l):!1===l.width&&(l.width="CUSTOM",c.setting.autoProps=l),!0===(null===(i=c.setting)||void 0===i?void 0:i.fitContainer)?l.height="STRETCH":!1===(null===(a=c.setting)||void 0===a?void 0:a.fitContainer)&&(null===(s=c.bbox)||void 0===s?void 0:s.height)?l.height="CUSTOM":!0===l.height?(o===al.FixedLayout?l.top||l.bottom?l.height="AUTO":l.height="STRETCH":l.height="AUTO",c.setting.autoProps=l):!1===l.height&&(l.height="CUSTOM",c.setting.autoProps=l),(null===(u=c.setting)||void 0===u?void 0:u.heightMode)&&null==l.height&&("auto"===c.setting.heightMode?(l.height="AUTO",c.setting.autoProps=l):"fit"===c.setting.heightMode?(l.height="STRETCH",c.setting.autoProps=l):"fixed"===c.setting.heightMode&&(l.height="CUSTOM",c.setting.autoProps=l))}))})),e},[2,Promise.all([Zc("jimu-layouts/layout-runtime",["searchUtils"]),Zc("jimu-ui",["richTextUtils"])]).then((function(r){var o=r[0],a=r[1],s=e;return s=t(s),s=n(s,o.searchUtils,a.richTextUtils),s=i(s)}))]}))}))}},{version:"1.2.0",description:"1.2.0",upgrader:function(e){var t,n=e;return t=n,Object.keys(t.pages).forEach((function(e){t.pages[e].icon&&(t.pages[e].icon.properties.color=null)})),n=function(e){return Object.keys(e.layouts).forEach((function(t){var n=e.layouts[t];Object.keys(n.content||{}).forEach((function(t){var r,o,i=n.content[t];if(i.type===il.Widget){var a=e.widgets[i.widgetId];if(0===(null===(r=null==a?void 0:a.uri)||void 0===r?void 0:r.indexOf("widgets/layout/column"))){var s=null===(o=a.layouts)||void 0===o?void 0:o.DEFAULT;s&&Object.keys(s).forEach((function(t){var n,r,o,i,u,c,l,f,d=s[t],p=e.layouts[d];p.setting||(p.setting={}),p.setting.space=(null===(r=null===(n=a.config)||void 0===n?void 0:n.space)||void 0===r?void 0:r.distance)||(null===(o=a.config)||void 0===o?void 0:o.space),p.setting.padding=null===(u=null===(i=a.config)||void 0===i?void 0:i.style)||void 0===u?void 0:u.padding,p.setting.justifyContent=null===(l=null===(c=a.config)||void 0===c?void 0:c.style)||void 0===l?void 0:l.justifyContent,p.setting.overflowY=null===(f=a.config)||void 0===f?void 0:f.style.overflowY}))}}}))})),e}(n=function(e){return Object.keys(e.layouts).forEach((function(t){var n=e.layouts[t];Object.keys(n.content||{}).forEach((function(t){var r,o,i,a,s,u=n.content[t];if(u.type===il.Widget){var c=e.widgets[u.widgetId];0===(null===(r=null==c?void 0:c.uri)||void 0===r?void 0:r.indexOf("widgets/common/card"))&&("AUTO"===(null===(i=null===(o=u.setting)||void 0===o?void 0:o.autoProps)||void 0===i?void 0:i.width)&&(u.setting.autoProps.width="CUSTOM",u.bbox||(u.bbox={}),u.bbox.width=c.config.widgetWidth+"px"),"AUTO"===(null===(s=null===(a=u.setting)||void 0===a?void 0:a.autoProps)||void 0===s?void 0:s.height)&&(u.setting.autoProps.height="CUSTOM",u.bbox||(u.bbox={}),u.bbox.height=c.config.widgetHeight+"px"))}}))})),e}(n=function(e){return Object.keys(e.layouts).forEach((function(t){var n=e.layouts[t];(null==n?void 0:n.type)===al.FlowLayout&&Object.keys(n.content||{}).forEach((function(e){var t,r,o,i=n.content[e];!0===(null===(t=i.setting)||void 0===t?void 0:t.isFloating)&&(+(null===(r=i.bbox)||void 0===r?void 0:r.width)>0&&(i.bbox.width=i.bbox.width+"px"),+(null===(o=i.bbox)||void 0===o?void 0:o.height)>0&&(i.bbox.height=i.bbox.height+"px"))}))})),e}(n=function(e){return Object.keys(e.layouts).forEach((function(t){var n=e.layouts[t];(null==n?void 0:n.type)===al.FixedLayout&&Object.keys(n.content||{}).forEach((function(e){var t,r,o=n.content[e];!0===(null===(t=o.setting)||void 0===t?void 0:t.hCenter)&&(o.bbox||(o.bbox={}),o.bbox.left="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.left=!1,o.setting.autoProps.right=!0):o.setting.autoProps={left:!1,right:!0}:o.setting={autoProps:{left:!1,right:!0}}),!0===(null===(r=o.setting)||void 0===r?void 0:r.vCenter)&&(o.bbox||(o.bbox={}),o.bbox.top="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.top=!1,o.setting.autoProps.bottom=!0):o.setting.autoProps={top:!1,bottom:!0}:o.setting={autoProps:{top:!1,bottom:!0}})}))})),e}(n=function(e){if(!e.dialogs)return e;var t=0,n=0;Object.keys(e.dialogs).forEach((function(r){var o=e.dialogs[r];o.mode===Ul.Fixed?o.index=t++:o.index=n++,o.dialogBackground?""===o.dialogBackground.color&&(o.dialogBackground.color="rgba(0,0,0,0)"):o.dialogBackground={color:"rgba(0,0,0,0)",fillType:"fit",image:{url:""}},o.mode===Ul.Fixed&&o.confirmBeforeClose?(o.interactionType=Vl.ButtonInline,o.interactionStyles=o.confirmationStyle,o.alwaysShowConfirmation=!1):(o.interactionType=null,o.interactionStyles=null),delete o.confirmationStyle}));var r={};return Object.keys(e.dialogs).sort().map((function(t){r[t]=e.dialogs[t]})),e.dialogs=r,e}(n=t)))))}},{version:"1.3.0",description:"1.3.0",upgrader:function(e){return e}},{version:"1.4.0",description:"1.4.0",upgrader:function(e){var t,n=e;return(t=n).widgets&&Object.keys(t.widgets).forEach((function(e){var n=t.widgets[e];if("widgets/common/filter/"===n.uri&&n.useDataSources){var r={};n.useDataSources.forEach((function(e){if(e.dataSourceId in r){var t=r[e.dataSourceId].fields||[],n=e.fields||[];r[e.dataSourceId].fields=Array.from(new Set(t.concat(n))).sort()}else r[e.dataSourceId]=e})),t.widgets[e].useDataSources=Object.keys(r).map((function(e){return r[e]}))}})),n=function(e){var t,n=["widgets/arcgis/feature-info/","widgets/arcgis/query/","widgets/common/chart/","widgets/common/list/","widgets/common/table/"];return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((function(t){var r=e.widgets[t];n.includes(r.uri)&&(r.enableDataAction=!1)})),e}(n=function(e){return e.dialogs?(Object.keys(e.dialogs).forEach((function(t){var n=e.dialogs[t],r={width:n.width,height:n.height,aspectRatio:!!n.aspectRatio};delete n.width,delete n.height,delete n.aspectRatio,n.mode===Ul.Fixed&&(r.position=n.position,delete n.position),n.sizeMode={},n.sizeMode[Li.Large]=r})),e):e}(n=t))}}],t}return NI(t,e),t}(FI),BI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},GI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},WI=n(73);window.jimuConfig.exbVersion=WI.exbVersion;var zI=function(){function e(e){this.intl=e.intl,$f(this.onStoreChange.bind(this),["appInfo"])}return e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.loadAppConfig=function(){return BI(this,void 0,void 0,(function(){var e=this;return GI(this,(function(t){switch(t.label){case 0:return[4,this._loadAndProcessAppConifg().then((function(t){return BI(e,void 0,void 0,(function(){var e;return GI(this,(function(n){switch(n.label){case 0:return this.updateAppInfoForDeployedApp(t.attributes),e=xe(t),[4,this.initTrackingManager(e)];case 1:return[2,n.sent()]}}))}))}))];case 1:return[2,t.sent()]}}))}))},e.prototype.initTrackingManager=function(e){return BI(this,void 0,void 0,(function(){var t;return GI(this,(function(n){switch(n.label){case 0:return(t=e.analytics)?[3,2]:[4,Promise.resolve(e)];case 1:return[2,n.sent()];case 2:return[4,MI.getInstance().initialize(t).then((function(){return e}),(function(t){return console.error(t.message||t),e}))];case 3:return[2,n.sent()]}}))}))},e.prototype._loadAndProcessAppConifg=function(){return BI(this,void 0,void 0,(function(){var e,t,n=this;return GI(this,(function(r){switch(r.label){case 0:return e=window.jimuConfig.isDevEdition&&!window.jimuConfig.isInBuilder||window.jimuConfig.packagesInAppFolder,t=!1,Jf().getState().appConfig?[4,Promise.resolve(Jf().getState().appConfig.asMutable({deep:!0}))]:[3,2];case 1:return[2,r.sent()];case 2:return[4,this.loadRawAppConfig().then((function(e){return e.__not_publish?Promise.reject(new Error(n.intl.formatMessage({id:"notPublishError",defaultMessage:nm.notPublishError}))):SI.valid(e.exbVersion)&&SI.valid(WI.exbVersion)?SI.lt(e.exbVersion,WI.exbVersion)?(new VI).upgrade(e,e.exbVersion,WI.exbVersion,"app").then((function(e){return e.exbVersion=WI.exbVersion,e})):e.exbVersion===WI.exbVersion?e:Promise.reject(new Error(n.intl.formatMessage({id:"versionIsHigh",defaultMessage:nm.versionIsHigh}))):Promise.reject(new Error(n.intl.formatMessage({id:"badVersion",defaultMessage:nm.badVersion})))})).then((function(e){return BI(n,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return[4,this.processRawConfig(e)];case 1:return[2,t.sent()]}}))}))})).then((function(r){var o,i;if(e&&(null===(o=r.attributes)||void 0===o?void 0:o.portalUrl)){var a=Bp.getInstance().getMainPortal();return a&&!a.isWebTier?(t=a.isWebTier,Jp(r.attributes.portalUrl),r):n.processWebTierPortalConfig(r).then((function(e){return Jp(r.attributes.portalUrl),t=e,r}))}return"template"!==window.jimuConfig.appFolderName||(null===(i=r.attributes)||void 0===i?void 0:i.portalUrl)||Jp(Jf().getState().portalUrl),r})).then((function(n){var r,o=Jf().getState();if(e&&(null===(r=n.attributes)||void 0===r?void 0:r.portalUrl)){var i=Al(n.attributes.portalUrl);if(!Bp.getInstance().getMainPortal()){var a={portalUrl:n.attributes.portalUrl,isWebTier:t};n.attributes.clientId&&(a.clientId=n.attributes.clientId),Bp.getInstance().setMainPortal(a)}return o.portalUrl||Jf().dispatch(Zd(i,n.attributes.clientId)),n}return n})).then((function(e){return BI(n,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return[4,this.handlePortalResourceInConfig(e)];case 1:return[2,t.sent()]}}))}))}))];case 3:return[2,r.sent()]}}))}))},e.prototype.processWebTierPortalConfig=function(e){return BI(this,void 0,void 0,(function(){var t,n;return GI(this,(function(r){return t=Bp.getInstance(),n=!1,[2,t.getSessionFromWebTierPortal(e.attributes.portalUrl).then((function(r){return r?(n=!0,t.initSession({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId,isWebTier:n}),t.getMainSession()?n:(t.writeAuthInfo(r),t.initSession({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId,isWebTier:n}))):(n=!1,t.initSession({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId,isWebTier:n}))}))]}))}))},e.prototype.processRawConfig=function(e){return BI(this,void 0,void 0,(function(){var t=this;return GI(this,(function(n){switch(n.label){case 0:return this.processAppConfigAfterLoad(e),[4,this.loadAllWidgetsManifest(e).then((function(e){return BI(t,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return[4,this.applyAppConfigProcessorExtension(e)];case 1:return[2,t.sent()]}}))}))})).then((function(e){return t.addDefaultLabelAndIcon(e),e}))];case 1:return[2,n.sent()]}}))}))},e.prototype.onStoreChange=function(e,t){(null==t?void 0:t.name)&&(document.title=t.name)},e.prototype.updateAppInfoForDeployedApp=function(e){var t={name:e.title,description:e.description};Jf().dispatch(hd(t))},e.prototype.loadRawAppConfig=function(){return BI(this,void 0,void 0,(function(){var e;return GI(this,(function(t){switch(t.label){case 0:return(e=fl.getInstance().getExtensions(Yc.AppConfigService)[0])?[3,2]:[4,this.loadAppConfigWithDefault()];case 1:return[2,t.sent()];case 2:return[4,e.loadAppConfig()];case 3:return[2,t.sent()]}}))}))},e.prototype.loadAppConfigWithDefault=function(){return BI(this,void 0,void 0,(function(){var e,t,n,r,o=this;return GI(this,(function(i){switch(i.label){case 0:return(e=Jf().getState()).appContext.isBuilder?[3,4]:(t=vf().appId)?window.jimuConfig.isDevEdition?[4,this.loadAppConfigFromLocalServer(t)]:[3,2]:[3,4];case 1:return[2,i.sent()];case 2:return[4,this.loadAppConfigFromPortal(t)];case 3:return[2,i.sent()];case 4:return(n=e.queryObject.config)||(n="config.json"),2!==(r=n.split(":")).length||"item"!==r[0]?[3,6]:[4,this.loadAppConfigFromPortal(r[1])];case 5:return[2,i.sent()];case 6:return df(n)?/^https:\/\/(.)+\.arcgis\.com/.test(n.trim())?[3,8]:("Only *.arcgis.com is allowed.",console.error("Only *.arcgis.com is allowed."),[4,Promise.reject({message:"Only *.arcgis.com is allowed."})]):[3,8];case 7:return[2,i.sent()];case 8:return[4,window.fetch(n).then((function(e){return BI(o,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))}))];case 9:return[2,i.sent()]}}))}))},e.prototype.loadAppConfigFromLocalServer=function(e){return BI(this,void 0,void 0,(function(){var t,n=this;return GI(this,(function(r){switch(r.label){case 0:return"true"!==(t=Jf().getState().queryObject.draft)&&"1"!==t?[3,2]:[4,window.fetch("/apps/"+e+"/resources/config/config.json").then((function(e){return BI(n,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,r.sent()];case 2:return[4,window.fetch("/apps/"+e+"/config.json").then((function(e){return BI(n,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))}))];case 3:return[2,r.sent()]}}))}))},e.prototype.loadAppConfigFromPortal=function(e){return BI(this,void 0,void 0,(function(){var t,n,r,o=this;return GI(this,(function(i){switch(i.label){case 0:return t=Bp.getInstance(),n=(new Date).getTime(),"true"!==(r=Jf().getState().queryObject.draft)&&"1"!==r?[3,2]:[4,Object(Mp.d)(hl(Jf().getState().portalUrl)+"/content/items/"+e+"/resources/config/config.json",{authentication:t.getSessionByUrl(Jf().getState().portalUrl),httpMethod:"GET",params:{timestamp:n}}).catch((function(t){return BI(o,void 0,void 0,(function(){return GI(this,(function(n){switch(n.label){case 0:return[4,this._handleAuthError(t,e)];case 1:return[2,n.sent()]}}))}))}))];case 1:return[2,i.sent()];case 2:return[4,Object(Gp.c)(e,{portal:hl(Jf().getState().portalUrl),authentication:t.getSessionByUrl(Jf().getState().portalUrl)}).catch((function(t){return BI(o,void 0,void 0,(function(){return GI(this,(function(n){switch(n.label){case 0:return[4,this._handleAuthError(t,e)];case 1:return[2,n.sent()]}}))}))}))];case 3:return[2,i.sent()]}}))}))},e.prototype._handleAuthError=function(e,t){return BI(this,void 0,void 0,(function(){var n,r,o=this;return GI(this,(function(i){return n=!(window===window.top||window.jimuConfig.isInBuilder),r=!!n,[2,Bp.getInstance().handleAuthError(e,r).then((function(){return r?(Xp(t),$p(),sm(em.Experience).then((function(e){e.valid||Jf().dispatch(kp(e.invalidMessage))})).catch((function(e){console.error(e),Jf().dispatch(kp(e.message))})),Jp(Jf().getState().portalUrl),Kp(t).then((function(e){return Jf().dispatch(hd(e)),e})),o.loadAppConfigFromPortal(t)):Promise.reject({})}))]}))}))},e.prototype.applyAppConfigProcessorExtension=function(e){return BI(this,void 0,void 0,(function(){var t;return GI(this,(function(n){switch(n.label){case 0:return(t=fl.getInstance().getExtensions(Yc.AppConfigProcessor)[0])?[3,2]:[4,Promise.resolve(e)];case 1:return[2,n.sent()];case 2:return[4,t.process(e)];case 3:return[2,n.sent()]}}))}))},e.prototype.loadAllWidgetsManifest=function(e){return BI(this,void 0,void 0,(function(){var t,n,r=this;return GI(this,(function(o){switch(o.label){case 0:return t=[],n=DI.getInstance(),ef(e).forEach((function(o,i){var a=o,s=a.uri;if(s)return e.useCachedManifest&&e.widgetsManifest[s]?(a._originManifest=e.widgetsManifest[s],void t.push(n.processWidgetManifest(a).then((function(){return BI(r,void 0,void 0,(function(){return GI(this,(function(e){switch(e.label){case 0:return[4,n.registerManifestProps(o)];case 1:return[2,e.sent()]}}))}))})))):void t.push(n.loadWidgetManifest(a.uri).then((function(e){return BI(r,void 0,void 0,(function(){var t=this;return GI(this,(function(r){switch(r.label){case 0:return a._originManifest=e,[4,n.processWidgetManifest(a).then((function(){return BI(t,void 0,void 0,(function(){return GI(this,(function(e){switch(e.label){case 0:return[4,n.registerManifestProps(a)];case 1:return[2,e.sent()]}}))}))}))];case 1:return[2,r.sent()]}}))}))}),(function(e){return BI(r,void 0,void 0,(function(){return GI(this,(function(t){switch(t.label){case 0:return console.error(e),[4,Promise.resolve()];case 1:return[2,t.sent()]}}))}))})))})),[4,Promise.all(t).then((function(t){return e}))];case 1:return[2,o.sent()]}}))}))},e.prototype.processAppConfigAfterLoad=function(e){this.handleEmbedMode(e),this.addDefaultValues(e),this.fixAllIds(e),this.fixWidgetUri(e),this.fixThemeUri(e),this.addWidgetContext(e),this.addDefaultPageStructure(e)},e.prototype.handlePortalResourceInConfig=function(e){return BI(this,void 0,void 0,(function(){var t,n;return GI(this,(function(r){switch(r.label){case 0:return!window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder?[3,2]:[4,Promise.resolve(e)];case 1:return[2,r.sent()];case 2:return(t=Bp.getInstance().getMainSession())&&t.token?(n=t.token,[4,ql(e,n)]):[3,4];case 3:return[2,r.sent()];case 4:return[4,ql(e,null)];case 5:return[2,r.sent()]}}))}))},e.prototype.handleEmbedMode=function(e){var t=Jf().getState().queryObject.embedded;"true"!==t&&"1"!==t||Object.keys(e.pages).forEach((function(t){e.pages[t].header=!1,e.pages[t].footer=!1}))},e.prototype.addDefaultPageStructure=function(e){e.pageStructure||(e.pageStructure=[],Object.keys(e.pages).forEach((function(t){var n;e.pageStructure.push(((n={})[t]=[],n))})))},e.prototype.fixAllIds=function(e){this.fixId(e.pages),this.fixId(e.widgets),this.fixId(e.sections),this.fixId(e.views),this.fixId(e.dialogs),this.fixId(e.messageConfigs),this.fixId(e.dataSources),rf(e)},e.prototype.fixId=function(e){e&&Object.keys(e).forEach((function(t){"string"!=typeof e[t]&&(e[t].id=t)}))},e.prototype.fixWidgetUri=function(e){ef(e).forEach((function(e){/\/$/.test(e.uri)||(e.uri=e.uri+"/")}))},e.prototype.fixThemeUri=function(e){/\/$/.test(e.theme)||(e.theme=e.theme+"/")},e.prototype.addWidgetContext=function(e){ef(e).forEach((function(e){var t=$l(e.uri);e.context=t}))},e.prototype.addDefaultValues=function(e){return e.attributes||(e.attributes={}),e.widgets||(e.widgets={}),e.widgetsManifest||(e.widgetsManifest={}),e.views||(e.views={}),e.sections||(e.sections={}),e.dialogs||(e.dialogs={}),e.pages||(e.pages={}),e.layouts||(e.layouts={}),e.dataSources||(e.dataSources={}),e.messageConfigs||(e.messageConfigs={}),this.addDefaultPageVisible(e),e},e.prototype.addDefaultPageVisible=function(e){Object.keys(e.pages).forEach((function(t){void 0===e.pages[t].isVisible&&(e.pages[t].isVisible=!0)}))},e.prototype.addDefaultLabelAndIcon=function(e){var t=this;Object.keys(e.pages).forEach((function(n){e.pages[n].label||(e.pages[n].label=Zl(e,"page",t.intl.formatMessage({id:"page",defaultMessage:nm.page})))})),Object.keys(e.dialogs||{}).forEach((function(n){e.dialogs[n].label||(e.dialogs[n].label=Zl(e,"dialog",t.intl.formatMessage({id:"dialog",defaultMessage:nm.dialog})))})),e.layouts&&Object.keys(e.layouts).filter((function(t){return e.layouts[t].type===al.FlowLayout})).forEach((function(n){var r=e.layouts[n];Object.keys(r.content||{}).filter((function(e){return r.content[e].type===il.Widget})).map((function(e){return r.content[e].widgetId})).forEach((function(n){var r=e.widgets[n];if(r&&!r.label&&"widgets/layout/row/"===r.uri){var o=t.intl.formatMessage({id:"block",defaultMessage:nm.block});r.label=Zl(e,"widget",o)}}))})),ef(e).forEach((function(t){Kl(e,t)})),Object.keys(e.sections||{}).forEach((function(n){var r=e.sections[n];r.label||(r.label=Zl(e,"section",t.intl.formatMessage({id:"section",defaultMessage:nm.section})))})),Object.keys(e.views||{}).forEach((function(n){var r=e.views[n];r.label||(r.label=Zl(e,"view",t.intl.formatMessage({id:"view",defaultMessage:nm.view})))})),Xl(e)},e}(),qI=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},JI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},$I=function(){function e(e){e.id&&(this.id=e.id),e.name&&(this.name=e.name),e.label&&(this.label=e.label),e.icon&&(this.icon=e.icon),e.index&&(this.index=e.index),e.widgetId&&(this.widgetId=e.widgetId)}return e.prototype.destroy=function(){},e.prototype.confirm=function(e,t){return HI(this,void 0,void 0,(function(){return JI(this,(function(e){return[2,{needed:!1}]}))}))},e}(),YI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qI(t,e),t.prototype.isSupported=function(e,t){return HI(this,void 0,void 0,(function(){return JI(this,(function(e){return[2,!0]}))}))},t.prototype.onExecute=function(e,t){return HI(this,void 0,void 0,(function(){return JI(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve(!0)];case 1:return[2,e.sent()]}}))}))},t}($I),KI=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},QI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ZI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.isSupported=function(e,t){return XI(this,void 0,void 0,(function(){return QI(this,(function(t){switch(t.label){case 0:return null==e||"function"!=typeof e.query?[2,!1]:[4,e.allowToExportData()];case 1:return[2,t.sent()]}}))}))},t.prototype.confirm=function(e,t){return XI(this,void 0,void 0,(function(){var t,n,r,o,i,a;return QI(this,(function(s){switch(s.label){case 0:return e.getDataSourceJson().isDataInDataSourceInstance?[2,{needed:!1}]:"function"!=typeof(t=e).queryCount?[3,2]:[4,t.queryCount({})];case 1:if(n=s.sent(),(r=n.count)>2e3)return o=Xv(),i=void 0,a=void 0,r>5e3?(i=o.formatMessage({id:"tooLargeWarningTitle"},{max:"5000"}),a=o.formatMessage({id:"tooLargeWarningContent"},{max:"5000"})):(i=o.formatMessage({id:"largeWarningTitle"}),a=o.formatMessage({id:"largeWarningContent"})),[2,{needed:!0,content:{title:i,content:a,okLabel:o.formatMessage({id:"export"}),cancelLabel:o.formatMessage({id:"cancel"})}}];s.label=2;case 2:return[2,{needed:!1}]}}))}))},t.prototype.getRecords=function(e){return XI(this,void 0,void 0,(function(){var t,n,r;return QI(this,(function(o){switch(o.label){case 0:return e.getDataSourceJson().isDataInDataSourceInstance?[2,e.getSourceRecords()]:"function"!=typeof(t=e).queryCount?[3,3]:[4,t.queryCount({})];case 1:return n=o.sent(),1e3,r=n.count,[4,this.query(t,1e3,Math.min(5e3,r))];case 2:return[2,o.sent()];case 3:return[2,[]]}}))}))},t.prototype.query=function(e,t,n){return XI(this,void 0,void 0,(function(){var r,o,i,a,s,u;return QI(this,(function(c){switch(c.label){case 0:r=t>0?t:n,o=Math.ceil(n/r),i=[],a=1,c.label=1;case 1:return a<=o?(s=a===o?n-(o-1)*r:r,[4,e.query({page:a,pageSize:s})]):[3,4];case 2:u=c.sent(),i=i.concat(u.records),c.label=3;case 3:return a++,[3,1];case 4:return[2,i]}}))}))},t}($I),eO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tO=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},nO=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},rO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eO(t,e),t.prototype.onExecute=function(e,t){return tO(this,void 0,void 0,(function(){var t,n,r;return nO(this,(function(o){switch(o.label){case 0:return[4,this.getRecords(e)];case 1:return t=o.sent(),n=t.map((function(e){return e.toJson()})),r=new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"}),Object(xo.saveAs)(r,"DataRecords.json"),[2,Promise.resolve(!0)]}}))}))},t}(ZI);function oO(){var e;return","===Qv(null!==(e=Jf().getState().appContext.locale)&&void 0!==e?e:"en")?";":","}function iO(e,t,n){return t.find((function(t,r){var o;return(null!==(o=null==n?void 0:n[r])&&void 0!==o?o:t)===e}))?iO("_"+e,t,n):e}function aO(e,t){var n,r,o=e.getSchema();if(null!=(null==o?void 0:o.fields))r=(n=Object.keys(o.fields)).map((function(e){return o.fields[e].alias}));else{var i=t[0];n=Object.keys(i.getData())}var a=function(e){return"esriGeometryPoint"===e.getGeometryType()}(e),s=function(e,t,n){var r=oO(),o="",i=!1,a=!1;if(e.forEach((function(n,s){var u,c=null!==(u=null==t?void 0:t[s])&&void 0!==u?u:n;c.includes(r)&&(c='"'+c+'"'),i=i||"x"===c,a=a||"y"===c,s!==e.length-1?o+=""+c+r:o+=c})),n){var s=iO("x",e,t),u=iO("y",e,t);o+=","+s+","+u}return o+"\r\n"}(n,r,a);return t.forEach((function(e){s+=function(e,t,n){var r=Xv(),o=oO(),i="";if(t.forEach((function(n,a){var s,u=null!==(s=e.getFormattedFieldValue(n,r))&&void 0!==s?s:"";u.includes(o)&&(u='"'+u+'"'),a!==t.length-1?i+=""+u+o:i+=u})),n){var a=e.getGeometry();a&&(i+=","+a.x+","+a.y)}return i+"\r\n"}(e,n,a)})),new Blob([s],{type:"text/plain;charset=utf-8"})}var sO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uO=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},cO=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},lO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sO(t,e),t.prototype.onExecute=function(e,t){return uO(this,void 0,void 0,(function(){var t,n;return cO(this,(function(r){switch(r.label){case 0:return[4,this.getRecords(e)];case 1:return t=r.sent(),n=aO(e,t),Object(xo.saveAs)(n,"DataRecords.csv"),[2,!0]}}))}))},t}(ZI);function fO(e){for(var t,n=0,r=0,o=e.length,i=e[r];r<o-1;r++)n+=((t=e[r+1])[0]-i[0])*(t[1]+i[1]),i=t;return n>=0}function dO(e,t,n,r){var o=(r[0]-n[0])*(e[1]-n[1])-(r[1]-n[1])*(e[0]-n[0]),i=(t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]),a=(r[1]-n[1])*(t[0]-e[0])-(r[0]-n[0])*(t[1]-e[1]);if(0!==a){var s=o/a,u=i/a;if(s>=0&&s<=1&&u>=0&&u<=1)return!0}return!1}function pO(e,t){for(var n=0;n<e.length-1;n++)for(var r=0;r<t.length-1;r++)if(dO(e[n],e[n+1],t[r],t[r+1]))return!0;return!1}function hO(e,t){var n=pO(e,t),r=function(e,t){for(var n=!1,r=-1,o=e.length,i=o-1;++r<o;i=r)(e[r][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[i][0]-e[r][0])*(t[1]-e[r][1])/(e[i][1]-e[r][1])+e[r][0]&&(n=!n);return n}(e,t[0]);return!(n||!r)}function gO(e){var t,n={},r=e;"number"==typeof(null==r?void 0:r.x)&&"number"==typeof(null==r?void 0:r.y)&&(n.type="Point",n.coordinates=[r.x,r.y],"number"==typeof r.z&&n.coordinates.push(r.z));var o=e;(null==o?void 0:o.points)&&(n.type="MultiPoint",n.coordinates=o.points.slice(0));var i=e;(null==i?void 0:i.paths)&&(1===i.paths.length?(n.type="LineString",n.coordinates=i.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=i.paths.slice(0)));var a=e;(null==a?void 0:a.rings)&&(n=function(e){for(var t,n,r,o=[],i=[],a=0;a<e.length;a++){var s=(function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((r=e[a].slice(0))[0],r[r.length-1])||r.push(r[0]),r);if(!(s.length<4))if(fO(s)){var u=[s.slice().reverse()];o.push(u)}else i.push(s.slice().reverse())}for(var c=[];i.length;){n=i.pop();var l=!1;for(t=o.length-1;t>=0;t--)if(hO(o[t][0],n)){o[t].push(n),l=!0;break}l||c.push(n)}for(;c.length;){n=c.pop();var f=!1;for(t=o.length-1;t>=0;t--)if(pO(o[t][0],n)){o[t].push(n),f=!0;break}f||o.push([n.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}(a.rings.slice(0)));var s=e;return"number"==typeof(null==s?void 0:s.xmin)&&"number"==typeof(null==s?void 0:s.ymin)&&"number"==typeof(null==s?void 0:s.xmax)&&"number"==typeof(null==s?void 0:s.ymax)&&(n.type="Polygon",n.coordinates=[[[s.xmax,s.ymax],[s.xmin,s.ymax],[s.xmin,s.ymin],[s.xmax,s.ymin],[s.xmax,s.ymax]]]),(null===(t=null==e?void 0:e.spatialReference)||void 0===t?void 0:t.wkid)&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n}function vO(e,t){var n={},r=e.getGeometry(),o=e.getData();if((r||o)&&(n.type="Feature",n.geometry=r?gO(r):null,n.properties=o?function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(o):null,o))try{n.id=function(e,t){for(var n=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"],r=0;r<n.length;r++){var o=n[r];if(o in e&&("string"==typeof e[o]||"number"==typeof e[o]))return e[o]}throw Error("No valid id attribute found")}(o,t)}catch(e){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),n}function mO(e,t){for(var n={type:"FeatureCollection",features:[]},r=0;r<e.length;r++)n.features.push(vO(e[r],t));return n}var yO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bO=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},wO=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},SO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yO(t,e),t.prototype.isSupported=function(t,n){return bO(this,void 0,void 0,(function(){return wO(this,(function(r){switch(r.label){case 0:return[4,e.prototype.isSupported.call(this,t,n)];case 1:return[2,r.sent()&&null!=t.getGeometryType()]}}))}))},t.prototype.onExecute=function(e,t){var n;return bO(this,void 0,void 0,(function(){var t,r,o,i;return wO(this,(function(a){switch(a.label){case 0:return[4,this.getRecords(e)];case 1:return t=a.sent(),r=null===(n=e.getSchema())||void 0===n?void 0:n.idField,o=mO(t,r),i=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8"}),Object(xo.saveAs)(i,"DataRecords.geojson"),[4,Promise.resolve(!0)];case 2:return[2,a.sent()]}}))}))},t}(ZI),IO=function(e){return!(!e||!e.tagName)&&("BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"DIV"===e.tagName&&"true"===e.contentEditable||"SPAN"===e.tagName&&"true"===e.contentEditable)},OO=function(e){return IO(e.target||e.nativeEvent.target)},EO=function(e){var t="",n=[];if(navigator.userAgent.includes("Edge")&&-1!==e.key.indexOf("-manual"))t=e.key.replace("-manual","");else if("code"in e)t=Vh[e.code]?Vh[e.code]:e.code;else{var r=e.which;t=String.fromCharCode(r).toLowerCase(),Vh[r]&&(t=Vh[r])}return e.metaKey&&n.push("command"),e.ctrlKey&&n.push("Ctrl"),e.shiftKey&&n.push("Shift"),e.altKey&&n.push("Alt"),n.push(t),n.join("+")},xO=function(e){console.log(":keyboard event:",e)};var CO=function(e,t){if(void 0===e&&(e="keydown"),void 0===t&&(t=null),"undefined"==typeof window)return!1;var n={},r=null,o=null;null===t&&(t=window.document);var i=!IO(t);function a(e){if(!(Fh(e)||i&&OO(e))){o&&o(e);var t=EO(e),a=n[t.toLowerCase()]||[];if("function"==typeof r){var s=a.length>0;r(t,s,e)}a.length&&e.preventDefault();for(var u=!0,c=a.length-1;c>=0&&(a[c]&&(u=a[c](e)),u);c--);return!!u&&void 0}}function s(){t.addEventListener(e,a)}return s(),{subscribe:function(e,t){return(e=e.toLowerCase()).replace(/\s/,""),void 0===n[e]&&(n[e]=[]),n[e].push(t),{unsubscribe:function(){var r=n[e].indexOf(t);n[e].splice(r,1)}}},setMonitor:function(e){void 0===e&&(e=null),r=!0===e?xO:e},startListening:s,stopListening:function(){t.removeEventListener(e,a)},setKeyboardTriggerFunction:function(e){o=e}}},TO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jO=function(e){function t(t){var n=e.call(this,t)||this;return n.subs=[],n.keyboardListener=CO(t.eventName,n.props.element),n.props.onKeyboardTrigger&&n.keyboardListener.setKeyboardTriggerFunction(n.props.onKeyboardTrigger),n}return TO(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.bindings,r=t.monitor;Object.keys(n).forEach((function(t){var r=n[t],o=e.keyboardListener.subscribe(t,r);e.subs.push(o)})),r&&this.keyboardListener.setMonitor(r)},t.prototype.componentWillUnmount=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.render=function(){return null},t.defaultProps={eventName:"keydown",bindings:{},monitor:null},t}(O.PureComponent),AO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),PO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onKeyboardTrigger=function(e){e.key.includes("-manual")||rl().appBuilderSync.letBuilderResponseToKeyboard(e)},t.isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},t}return AO(t,e),t.prototype.render=function(){return this.isMac()?O.createElement(jO,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"command+keys":function(){return!1}}}):O.createElement(jO,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"ctrl+keys":function(){return!1}}})},t}(O.PureComponent),_O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DO=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},kO=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},RO=function(e){function t(t){var n,r=e.call(this,t)||this;r.getKeyboardComponent=function(){if(window.jimuConfig.isBuilder){var e=Qc("jimu-for-builder").BuilderKeyboardComponent;return O.createElement(e,null)}return window.jimuConfig.isInBuilder?O.createElement(PO,null):null};var o={},i=r.getPageId();return o.pageStatus=xe(i?((n={})[i]=!0,n):{}),o.PageRenderClass=r.getPageRenderClass(),o.jimuUI=r.getJimuUI(),window.isNode||window.initStoreState?o.preloadWidgetsLoaded=!0:o.preloadWidgetsLoaded=!1,r.state=o,r.onDismiss=r.onDismiss.bind(r),r.reload=r.reload.bind(r),r}return _O(t,e),t.prototype.getLayoutEntryPath=function(){return window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime"},t.prototype.getPageRenderClass=function(){return Qc(this.getLayoutEntryPath())?Qc(this.getLayoutEntryPath()).PageRenderer:(console.error("Please init jimu-layouts."),null)},t.prototype.getJimuUI=function(){return Qc("jimu-ui")?Qc("jimu-ui"):(console.error("Please init jimu-ui."),null)},t.prototype.componentDidMount=function(){var e=this,t=Sf()+"jimu-ui",n=this.props.isRTL?t+"/styles/base-rtl.css":t+"/styles/base.css";if(document){if(document.getElementById("jimu-base-style"))return;var r=document.createElement("link");r.setAttribute("id","jimu-base-style"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",n),document.head.appendChild(r)}zI.getInstance({intl:this.props.intl}).loadAppConfig().then((function(t){e.props.dispatch(fd(t));var n=gf(e.props.queryObject,t);return Object.keys(n).forEach((function(t){e.props.dispatch(Cp(t,n[t]))})),t})).then((function(t){Promise.all([e.loadPreloadWidgets(t),ch.getInstance().loadTheme(t.theme)]).then((function(){Vc(),window.jimuConfig.isInBuilder&&ld.getInstance().createAllDataSources()})).catch((function(t){console.error("Initializing theme manager failed.",t),e.setState({error:t.message})}))})).catch((function(t){console.error("Load app config error.",t),e.setState({error:t.message})}))},t.prototype.componentWillUnmount=function(){var e=document.getElementById("jimu-base-style");e&&e.remove()},t.prototype.loadPreloadWidgets=function(e){var t;return DO(this,void 0,void 0,(function(){var n,r,o=this;return kO(this,(function(i){return n=[],r=(null===(t=e.preloadWidgets)||void 0===t?void 0:t.asMutable())||[],Object.keys(e.widgets).forEach((function(t){var o=e.widgets[t];n.includes(o.uri)&&!r.includes(o.uri)&&r.push(o.uri)})),0===r.length?(this.setState({preloadWidgetsLoaded:!0}),[2,Promise.resolve()]):[2,Promise.all(r.map((function(e){return DO(o,void 0,void 0,(function(){return kO(this,(function(t){switch(t.label){case 0:return[4,DI.getInstance().loadWidgetClassByUri(e)];case 1:return[2,t.sent()]}}))}))}))).then((function(){o.setState({preloadWidgetsLoaded:!0})}))]}))}))},t.prototype.componentDidUpdate=function(){var e=this.getPageId(),t=this.state.pageStatus;e&&!t[e]&&(Object.keys(t).forEach((function(e){t=t.set(e,!1)})),this.setState({pageStatus:t.set(e,!0)}))},t.prototype.getPageId=function(){var e=this;if(!this.props.pages)return null;var t=vf();return t.pageId?t.pageId:Object.keys(this.props.pages).find((function(t){return e.props.pages[t].isDefault}))},t.prototype.getDialogId=function(){return this.props.dialogJson&&(window.jimuConfig.isInBuilder||this.props.dialogJson.mode!==Ul.Anchored)?window.jimuConfig.isInBuilder&&this.props.dialogJson.mode===Ul.Anchored&&this.props.currentDialogId&&this.props.currentDialogId!==this.props.queryObject.dlg?null:this.props.dialogJson.id:null},t.prototype.render=function(){var e,t=this.state,n=t.PageRenderClass,r=t.pageStatus;if(!this.props.hasPrivilege)return Vc(),this.renderPrivilegeError();if(this.state.error)return Vc(),O.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:this.state.error}});var o=ch.getInstance();if(!this.props.appConfigLoaded||!n||!this.state.preloadWidgetsLoaded||Vu(this.props.themeVariables,{}))return null;if(this.props.themeName&&!o.isThemeLoaded(this.props.themeName))return null;var i=this.getPageId();if(!i)return console.error("No page to render."),null;if(!this.props.pages[i])return console.error("Invalid page id.",i),null;if(this.props.pages[i].type===Nl.Folder)return console.error("This is a folder."),null;if(this.props.pages[i].linkUrl)return window.location.assign(this.props.pages[i].linkUrl),null;var a=o.getGlobalStyles(this.props.themeVariables),s=null===(e=this.state.jimuUI)||void 0===e?void 0:e.Loading;return O.createElement(O.Fragment,null,O.createElement(Pt,{styles:a}),this.renderReloadAlert(this.props.themeVariables),O.createElement(n,{pageStatus:r,dialogId:this.getDialogId()}),this.getThemeNode(),O.createElement("div",{id:"helper-nodes-container"}),this.getKeyboardComponent(),s&&this.props.isBusy&&O.createElement(s,{type:this.props.loadingType}))},t.prototype.renderPrivilegeError=function(){var e=this.state.jimuUI.Button,t=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"white":"black";return O.createElement("div",{style:{width:"100vw",height:"100vh",color:t,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},O.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.privilegeError}}),O.createElement(e,{size:"lg",style:{padding:"0.25rem 1rem",fontSize:"14px",userSelect:"none",lineHeight:1.5,borderRadius:"2px",color:"#fff",background:"#444",borderWidth:"1px",borderStyle:"solid",borderColor:"#444",marginTop:"20px",outline:"none",cursor:"pointer"},onClick:function(){location.href="/"}},this.props.intl.formatMessage({id:"ok",defaultMessage:nm.ok})))},t.prototype.renderReloadAlert=function(e){if(window.jimuConfig.isInBuilder||!this.state.jimuUI||window.jimuConfig.isSite&&"landing"===this.getPageId())return null;if(!this.props.hasNewVersion&&!this.props.userLocaleChanged)return null;var t=this.state.jimuUI,n=t.Alert,r=t.Button,o=this.props.hasNewVersion?O.createElement(KS,{id:"versionUpdateMsg",defaultMessage:nm.versionUpdateMsg}):O.createElement(KS,{id:"userLocaleChangeMsg",defaultMessage:nm.userLocaleChangeMsg});return O.createElement(n,{color:"info",isOpen:this.props.hasNewVersion,toggle:this.onDismiss,className:"pl-3 pr-3",closeClassName:"mt-2",style:{position:"absolute",zIndex:999,width:"100%",paddingTop:""+Qt(11),paddingBottom:""+Qt(11),backgroundColor:""+e.colors.palette.primary[100],color:""+e.colors.black,fontSize:""+Qt(16)}},o,O.createElement(r,{size:"sm",type:"primary",className:"ml-3",onClick:this.reload,style:{minWidth:""+Qt(78),height:""+Qt(26),marginTop:""+Qt(-2)}},O.createElement(KS,{id:"doUpdate",defaultMessage:nm.doUpdate})))},t.prototype.onDismiss=function(){var e;this.props.dispatch(_p(!1)),this.props.dispatch(Dp(!1)),window.jimuConfig.isBuilder&&(null===(e=window._appWindow)||void 0===e?void 0:e._appStore)&&(window._appWindow._appStore.dispatch({type:"SET_HAS_NEW_VERSION",hasNew:!1}),window._appWindow._appStore.dispatch({type:"USER_LOCALE_CHANGED",isChanged:!1}))},t.prototype.reload=function(){window.location.reload()},t.prototype.getThemeNode=function(){var e=null,t=this.props.themeName;if(t){var n=ch.getInstance().getThemeManifest(t);if(n&&n.styleFiles&&n.styleFiles.css){var r=this.props.isRTL?""+Sf()+t+"/style-rtl.css":""+Sf()+t+"/style.css";e=O.createElement("link",{type:"text/css",rel:"stylesheet",href:r})}}return e},t}(O.PureComponent),MO=sv(pe((function(e){var t;return e.appConfig?{appConfigLoaded:!0,customTheme:e.appConfig.customTheme,themeName:e.appConfig.theme?e.appConfig.theme:null,themeVariables:e.theme,pages:e.appConfig.pages,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,isBusy:e.appRuntimeInfo.isBusy,loadingType:e.appRuntimeInfo.loadingType,dialogJson:e.appConfig.dialogs?e.appConfig.dialogs[e.queryObject.dlg]:null,currentDialogId:e.appRuntimeInfo.currentDialogId,hasNewVersion:e.hasNewVersion||(null===(t=e.appStateInBuilder)||void 0===t?void 0:t.hasNewVersion),userLocaleChanged:e.userLocaleChanged,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError}:{appConfigLoaded:!1,themeVariables:e.theme,themeName:null,customTheme:null,pages:null,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,loadingType:null,isBusy:e.appRuntimeInfo.isBusy,dialogJson:null,currentDialogId:null,hasNewVersion:!1,userLocaleChanged:!1,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError}}))(RO)),NO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LO=function(e){function t(t){var n=e.call(this,t)||this;return n.state={error:null},n}return NO(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({error:e})},t.prototype.render=function(){return this.state.error?O.createElement("h1",null,this.state.error.message):this.props.children},t}(O.Component),UO=O.useEffect,FO=O.useState,VO="jimu-interactive-node";function BO(e){var t=FO(!1),n=t[0],r=t[1];function o(e){e&&(n?e.classList.add("jimu-keyboard-nav"):e.classList.remove("jimu-keyboard-nav"))}return UO((function(){!function(){if(o(document.body),window.jimuConfig.isBuilder){var e=document.querySelector('iframe[name="'+Zi+'"]');o((null==e?void 0:e.contentDocument.body)||(null==e?void 0:e.contentWindow.document.body))}else if(window.jimuConfig.isInBuilder){o(window.parent.document.body)}}()}),[n]),UO((function(){function e(){r(!1)}function t(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(r(!1),o())}function n(){document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("pointerdown",t),document.addEventListener("pointerup",t),document.addEventListener("touchmove",t),document.addEventListener("touchstart",t),document.addEventListener("touchend",t)}function o(){document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",t),document.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",t),document.removeEventListener("touchmove",t),document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t)}function i(e){"Tab"===e.key&&r(!0)}function a(e){"hidden"===document.visibilityState&&(r(!0),n())}return document.addEventListener("keydown",i,!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("visibilitychange",a,!0),n(),function(){document.removeEventListener("keydown",i,!0),document.removeEventListener("mousedown",e,!0),document.removeEventListener("pointerdown",e,!0),document.removeEventListener("touchstart",e,!0),document.removeEventListener("visibilitychange",a,!0),o()}}),[]),O.createElement(O.Fragment,null,e.children)}var GO,WO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zO=pe((function(e){return{locale:e.appContext.locale,defaultLocale:e.appContext.locale,messages:e.appI18nMessages}}))(Bv),qO=pe((function(e){return{theme:e.theme}}))(yt),HO=function(e){function t(t){var n=e.call(this,t)||this;return n.myEmotionCache=Jf().getState().appContext.isRTL?Ke({stylisPlugins:[gh.a],key:"app-root-emotion-cache-rtl"}):Ke({key:"app-root-emotion-cache-ltr"}),n}return WO(t,e),t.prototype.render=function(){return O.createElement(_,{store:Jf()},O.createElement(LO,null,O.createElement(jw,null,O.createElement(zO,null,O.createElement(qO,null,O.createElement(ht,{value:this.myEmotionCache},O.createElement(BO,null,O.createElement(MO,null))))))))},t}(O.PureComponent),JO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JO(t,e),t.prototype.componentDidMount=function(){this.createDataSource(),this.props.dataSource&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo),this.doQuery()},t.prototype.componentDidUpdate=function(e){this.createDataSource(),(!e.dataSource&&this.props.dataSource||e.dataSource&&this.props.dataSource&&e.dataSource.id!==this.props.dataSource.id)&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),e.dataSourceInfo!==this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo,e.dataSourceInfo),e.dataSourceSchema!==this.props.dataSourceSchema&&this.props.onDataSourceSchemaChange&&this.props.onDataSourceSchemaChange(this.props.dataSourceSchema,e.dataSourceSchema),this.doQuery(),this.handleAutoRefresh()},t.prototype.render=function(){var e=this.props,t=e.useDataSource,n=e.dataSource,r=e.dataSourceInfo,o=e.children,i=e.query;return t?r?r.instanceStatus===ea.b.CreateError?Xv().formatMessage({id:"dataSourceCreateError"}):n&&o?"function"==typeof o?o(n,r,i):o:null:null:(console.log("No data source configured."),null)},t.prototype.doQuery=function(){if(this.props.dataSource){var e=this.props,t=e.dataSource,n=e.query,r=e.queryCount,o=e.widgetId,i=e.localId,a=e.queryScope,s=t;if(s.load&&s.query&&n){var u={widgetId:o||i,refresh:this.props.refresh,scope:a};if(s.load(n,u),r){var c=Object.assign({},n);s.loadCount(c,u)}}}},t.prototype.handleAutoRefresh=function(){if(this.props.dataSource){var e=this.props.dataSource;e.stopAutoRefresh&&e.startAutoRefresh&&(window.jimuConfig.isInBuilder&&this.props.appMode===Bi.Design?e.stopAutoRefresh():e.startAutoRefresh())}},t.prototype.createDataSource=function(){var e=this,t=this.props,n=t.dataSourceManager,r=t.useDataSource,o=t.localId;r&&n.createDataSourceByUseDataSource(r,o).then((function(e){})).catch((function(t){t.dataSourceId!==r.dataSourceId&&t.dataSourceId!==r.rootDataSourceId||e.props.onCreateDataSourceFailed&&e.props.onCreateDataSourceFailed(t)}))},t}(O.PureComponent),YO=pe((function(e,t){var n,r=ld.getInstance(),o=window.jimuConfig.isBuilder?e.appStateInBuilder:e;if(!o||!t.useDataSource)return{dataSourceInfo:null,dataSourceJson:null,dataSourceSchema:null,rootDataSourceJson:null,dataSource:null,dataSourceManager:r,belongToDataSourceInfo:null,appMode:null};var i=t.useDataSource,a=Lb(i,t.localId),s=r.getDataSource(i.rootDataSourceId),u=r.getDataSource(a);return i.rootDataSourceId&&!s&&(u=null),{dataSourceInfo:o.dataSourcesInfo[a],dataSourceJson:o.appConfig.dataSources[i.mainDataSourceId],dataSourceSchema:(null==u?void 0:u.getSchema())||(null===(n=o.appConfig.dataSources[i.mainDataSourceId])||void 0===n?void 0:n.schema),rootDataSourceJson:o.appConfig.dataSources[i.rootDataSourceId],dataSource:u,dataSourceManager:r,belongToDataSourceInfo:(null==u?void 0:u.isDataView)||(null==u?void 0:u.isLocal)?o.dataSourcesInfo[u.belongToDataSource.id]:null,appMode:o.appRuntimeInfo.appMode}}))($O),KO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDataSourceCreated=function(){var e=t.props.onDataSourceCreated;(void 0===e?function(){}:e)(t.getDataSources())},t.handleDataSourceInfoChange=function(){var e=t.props.onDataSourceInfoChange;(void 0===e?function(){}:e)(t.getDataSourcesInfo())},t.getDataSources=function(){var e=t.props.useDataSources,n=void 0===e?[]:e,r={},o=ld.getInstance();return n.forEach((function(e){return r[e.dataSourceId]=o.getDataSource(e.dataSourceId)})),r},t.getDataSourcesInfo=function(){var e=t.props.useDataSources,n={};return(void 0===e?[]:e).forEach((function(e){n[e.dataSourceId]=t.props[e.dataSourceId]})),n},t.hasLoadedDataSources=function(){var e=t.props.useDataSources,n=void 0===e?[]:e,r=t.getDataSources();return n.every((function(e){return!!r[e.dataSourceId]}))},t.MemoDataSourceComponents=O.memo((function(e){var n=e.useDataSources,r=e.queries,o=e.widgetId,i=e.localId;return n?O.createElement(O.Fragment,null,n.asMutable().map((function(e,n){return O.createElement(YO,{key:n,useDataSource:e,query:null==r?void 0:r[e.dataSourceId],widgetId:o,localId:i,onDataSourceCreated:t.handleDataSourceCreated,onDataSourceInfoChange:t.handleDataSourceInfoChange})}))):null})),t}return KO(t,e),t.prototype.render=function(){var e=this.props,t=e.useDataSources,n=e.queries,r=e.widgetId,o=e.localId,i=e.children,a=this.MemoDataSourceComponents,s=O.createElement(a,{useDataSources:t,queries:n,widgetId:r,localId:o});return i?O.createElement(O.Fragment,null,s,"function"==typeof i?i(this.getDataSources(),this.getDataSourcesInfo()):i):s},t}(O.PureComponent),QO=pe((function(e,t){var n={},r=window.jimuConfig.isBuilder?e.appStateInBuilder:e;return t.useDataSources&&t.useDataSources.forEach((function(e){var o=Lb(e,t.localId);ld.getInstance().getDataSource(o)&&(n[o]=r.dataSourcesInfo[o])})),n}))(XO),ZO=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eE=function(){return(eE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},nE=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e.Failed="RESOLVE_FAILED",e.NotMatched="DATA_SOURCES_IN_EXPRESSION_CANNOT_MATCH_DATA_SOURCES_IN_USE"}(GO||(GO={}));var rE=sv(uI(function(e){function t(t){var n=e.call(this,t)||this;return n.dataSources=null,n.__unmount=!1,n.__resolveCount=1,n.getWhetherExpressionsAreSame=function(e,t){return Vu(e,t)},n.getWhetherDsInfosAreSame=function(e,t,r){if(!r)return!0;if(e||t){if(e&&t){if(Object.keys(e).length!==Object.keys(t).length)return!1;var o=n.getUseSelectionDsIdsFromExpression(r).map((function(e){var t;return null===(t=ld.getInstance().getDataSource(e))||void 0===t?void 0:t.getMainDataSource()}));return!Object.keys(e).some((function(n){var r,i,a=ld.getInstance().getDataSource(n);return!(a&&o.some((function(e){return(null==e?void 0:e.id)===a.getMainDataSource().id}))?Vu(e[n],t[n]):Vu(null===(r=e[n])||void 0===r?void 0:r.without("selectedIds"),null===(i=t[n])||void 0===i?void 0:i.without("selectedIds")))}))}return!1}return!0},n.getUseSelectionDsIdsFromExpression=function(e){var t=n.getWhetherIsMultipleExpression(e),r=[];if(!e)return r;if(t){var o=e;Object.keys(o).forEach((function(e){r=r.concat(n.getUseSelectionDsIdsFromSingleExpression(o[e]))}))}else r=r.concat(n.getUseSelectionDsIdsFromSingleExpression(e));return Array.from(new Set(r))},n.getUseSelectionDsIdsFromSingleExpression=function(e){var t=[];return e&&e.parts?(e.parts.forEach((function(e){(null==e?void 0:e.type)===Ew.Field&&Kb(null==e?void 0:e.dataSourceId)&&(t=t.concat(e.dataSourceId))})),Array.from(new Set(t))):t},n.getWhetherUseDssAreSame=function(e,t){return!e&&!t||!(!e||!t)&&(e.length===t.length&&!e.some((function(n,r){var o,i;return!Vu(null===(o=e[r])||void 0===o?void 0:o.without("fields"),null===(i=t[r])||void 0===i?void 0:i.without("fields"))})))},n.getWhetherIsMultipleExpression=function(e){return!!e&&!(2===Object.keys(e).length&&Object.keys(e).includes("name")&&Object.keys(e).includes("parts")&&Array.isArray(e.parts))},n.resolveExpressions=function(e,t,r){return tE(n,void 0,void 0,(function(){var t,n=this;return nE(this,(function(o){switch(o.label){case 0:return e?[3,2]:[4,Promise.resolve("")];case 1:return[2,o.sent()];case 2:return this.getWhetherIsMultipleExpression(e)?(t=e,Object.keys(t).forEach((function(e){n.resolveSingleExpression(t[e]).then((function(t){var o,i=n.resultsCache;n.__unmount||r!==n.__resolveCount||(n.resultsCache=eE(eE({},i),((o={})[e]={isSuccessful:!0,value:t},o)),n.setState({results:n.resultsCache}))})).catch((function(t){var o,i=n.resultsCache;n.__unmount||r!==n.__resolveCount||(n.resultsCache=eE(eE({},i),((o={})[e]={isSuccessful:!1,value:t},o)),n.setState({results:n.resultsCache}))}))}))):this.resolveSingleExpression(e).then((function(e){n.__unmount||r!==n.__resolveCount||(n.resultsCache={isSuccessful:!0,value:e},n.setState({results:n.resultsCache}))})).catch((function(e){n.__unmount||r!==n.__resolveCount||(n.resultsCache={isSuccessful:!1,value:e},n.setState({results:n.resultsCache}))})),[2]}}))}))},n.resolveSingleExpression=function(e){return tE(n,void 0,void 0,(function(){var t,n=this;return nE(this,(function(r){switch(r.label){case 0:return this.getWhetherExpressionDssInUseDss(e)?[4,TS(e,this.props.useDataSources,this.props.repeatedDataSource,this.props.intl).catch((function(e){return tE(n,void 0,void 0,(function(){return nE(this,(function(e){switch(e.label){case 0:return[4,Promise.reject(GO.Failed)];case 1:return[2,e.sent()]}}))}))}))]:[3,2];case 1:return t=r.sent(),[3,4];case 2:return[4,Promise.reject(GO.NotMatched)];case 3:t=r.sent(),r.label=4;case 4:return[2,t]}}))}))},n.onDataSourceCreated=function(e){if(n.dataSources=e,e){var t={};Object.keys(e).forEach((function(n){n&&e[n]&&(t[n]=e[n].getInfo())})),n.setState({infos:t})}},n.onDataSourceInfoChange=function(e){n.getWhetherDsInfosAreSame(e,n.state.infos,n.props.expression)||n.setState({infos:e})},n.getWhetherExpressionDssInUseDss=function(e){return!e||!e.parts||!e.parts.some((function(e){return e&&e.dataSourceId&&!n.getWhetherDsIdInUseDss(e.dataSourceId)}))},n.getWhetherDsIdInUseDss=function(e){if(!e)return!1;var t=n.props.useDataSources||[];if(e.split("-").reverse()[0]===Yu){var r=e.replace(/-dataView_\d{1,}/,"").replace("-"+Yu,"");return t.some((function(e){return e.mainDataSourceId===r}))}return t.some((function(t){return t.dataSourceId===e}))},n.getLocalDataSources=function(e){var t=xe([]);return e&&0!==e.length?(e.forEach((function(e){var n=ld.getInstance().getDataSource(e.dataSourceId);n&&n.getAllDerivedDataSources().forEach((function(e){var r;if((null==e?void 0:e.isLocal)&&(null===(r=null==e?void 0:e.id)||void 0===r?void 0:r.includes(n.id+"-EXPRESSION_RESOLVER"))){var o=e.getRootDataSource(),i=e.getMainDataSource();t=t.concat({dataSourceId:e.id,rootDataSourceId:o&&o.id,mainDataSourceId:i&&i.id,dataViewId:e.dataViewId})}}))})),t):t},n.getQueries=function(e,t){var r={};if(!e||!t)return r;var o=n.getWhetherIsMultipleExpression(t)?Object.values(t):[t],i=[];return o.forEach((function(e){(null==e?void 0:e.parts)&&(i=i.concat(e.parts.asMutable()))})),e.filter((function(e){return!!e})).filter((function(e){return e.dataViewId===Ku&&i.some((function(t){return t.dataSourceId===ld.getInstance().getDataViewDataSourceId(e.mainDataSourceId,Yu)&&t.type===Ew.Field&&!t.isFromRepeatedDataSourceContext}))||e.dataViewId!==Yu&&i.some((function(t){return t.dataSourceId===e.dataSourceId&&t.type===Ew.Field&&!t.isFromRepeatedDataSourceContext}))})).forEach((function(e){r[e.dataSourceId]={}})),r},n.state={results:null,infos:null},n}return ZO(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.__resolveCount)},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.componentDidUpdate=function(e,t){this.state.infos===t.infos&&this.getWhetherExpressionsAreSame(this.props.expression,e.expression)&&this.getWhetherUseDssAreSame(this.props.useDataSources,e.useDataSources)||(this.__resolveCount++,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.__resolveCount)),t.results!==this.state.results&&null!==this.state.results&&this.props.onChange&&this.props.onChange(this.state.results)},t.prototype.getLocalLoadId=function(){return"EXPRESSION_RESOLVER-"+this.props.widgetId},t.prototype.render=function(){var e=this;if(!this.props.expression||!this.props.useDataSources)return null;var t=this.getLocalDataSources(this.props.useDataSources),n=t.length>0?this.props.useDataSources.concat(t):this.props.useDataSources;return O.createElement(QO,{useDataSources:n,onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange,queries:this.getQueries(n,this.props.expression),widgetId:this.getLocalLoadId()},(function(){return"function"==typeof e.props.children?e.props.children(e.state.results):e.props.children}))},t}(O.PureComponent)));var oE=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),o?gI(n,s,u):mI(n,s,u)}return n};var iE=function(e,t,n){if(!ya(n))return!1;var r=typeof t;return!!("number"==r?Su(n)&&au(t,n.length):"string"==r&&t in n)&&Ha(n[t],e)};var aE=function(e){return ad((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&iE(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))},sE=Object.prototype.hasOwnProperty,uE=aE((function(e,t){if(mu(t)||Su(t))oE(t,Iu(t),e);else for(var n in t)sE.call(t,n)&&mI(e,n,t[n])})),cE=function(){return na.a.Date.now()},lE=/^\s+|\s+$/g,fE=/^[-+]0x[0-9a-f]+$/i,dE=/^0b[01]+$/i,pE=/^0o[0-7]+$/i,hE=parseInt;var gE=function(e){if("number"==typeof e)return e;if(ha(e))return NaN;if(ya(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ya(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(lE,"");var n=dE.test(e);return n||pE.test(e)?hE(e.slice(2),n?2:8):fE.test(e)?NaN:+e},vE=Math.max,mE=Math.min;var yE=function(e,t,n){var r,o,i,a,s,u,c=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function h(e){return c=e,s=setTimeout(v,t),l?p(e):a}function g(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=i}function v(){var e=cE();if(g(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-u);return f?mE(n,i-(e-c)):n}(e))}function m(e){return s=void 0,d&&r?p(e):(r=o=void 0,a)}function y(){var e=cE(),n=g(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return h(u);if(f)return clearTimeout(s),s=setTimeout(v,t),p(u)}return void 0===s&&(s=setTimeout(v,t)),a}return t=gE(t)||0,ya(n)&&(l=!!n.leading,i=(f="maxWait"in n)?vE(gE(n.maxWait)||0,t):i,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?a:m(cE())},y};var bE=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ya(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),yE(e,t,{leading:r,maxWait:t,trailing:o})};var wE=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n};var SE=function(e){return function(t){return null==e?void 0:e[t]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),IE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,OE=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var EE=function(e){return(e=ws(e))&&e.replace(IE,SE).replace(OE,"")},xE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var CE=function(e){return e.match(xE)||[]},TE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var jE=function(e){return TE.test(e)},AE="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",PE="["+AE+"]",_E="\\d+",DE="[\\u2700-\\u27bf]",kE="[a-z\\xdf-\\xf6\\xf8-\\xff]",RE="[^\\ud800-\\udfff"+AE+_E+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ME="(?:\\ud83c[\\udde6-\\uddff]){2}",NE="[\\ud800-\\udbff][\\udc00-\\udfff]",LE="[A-Z\\xc0-\\xd6\\xd8-\\xde]",UE="(?:"+kE+"|"+RE+")",FE="(?:"+LE+"|"+RE+")",VE="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",BE="[\\ufe0e\\ufe0f]?"+VE+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",ME,NE].join("|")+")[\\ufe0e\\ufe0f]?"+VE+")*"),GE="(?:"+[DE,ME,NE].join("|")+")"+BE,WE=RegExp([LE+"?"+kE+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[PE,LE,"$"].join("|")+")",FE+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[PE,LE+UE,"$"].join("|")+")",LE+"?"+UE+"+(?:['](?:d|ll|m|re|s|t|ve))?",LE+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_E,GE].join("|"),"g");var zE=function(e){return e.match(WE)||[]};var qE=function(e,t,n){return e=ws(e),void 0===(t=n?void 0:t)?jE(e)?zE(e):CE(e):e.match(t)||[]},HE=RegExp("[']","g");var JE,$E,YE=function(e){return function(t){return wE(qE(EE(t).replace(HE,"")),e,"")}}((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));!function(e){e.Loading="LOADING",e.Loaded="LOADED",e.Failed="FAILED"}(JE||(JE={})),function(e){e.UseDataSource="USE_DATA_SOURCE",e.OutputDataSource="OUTPUT_DATA_SOURCE"}($E||($E={}));var KE,XE="exb_user_settings";!function(e){e.Urlinfo="URLINFO"}(KE||(KE={}));var QE,ZE=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ex(e,t){return{STRING_SELECTION_CHANGE:t.formatMessage({id:"message_StringSelectionChange",defaultMessage:nm.message_StringSelectionChange}),EXTENT_CHANGE:t.formatMessage({id:"message_ExtentChange",defaultMessage:nm.message_ExtentChange}),DATA_RECORDS_SELECTION_CHANGE:t.formatMessage({id:"message_DataRecordsSelectionChange",defaultMessage:nm.message_DataRecordsSelectionChange}),DATA_RECORD_SET_CHANGE:t.formatMessage({id:"message_DataRecordSetChange",defaultMessage:nm.message_DataRecordSetChange}),SELECT_DATA_RECORD:t.formatMessage({id:"message_SelectDataRecord",defaultMessage:nm.message_SelectDataRecord})}[e]}!function(e){e.StringSelectionChange="STRING_SELECTION_CHANGE",e.ExtentChange="EXTENT_CHANGE",e.DataRecordsSelectionChange="DATA_RECORDS_SELECTION_CHANGE",e.DataRecordSetChange="DATA_RECORD_SET_CHANGE",e.SelectDataRecord="SELECT_DATA_RECORD"}(QE||(QE={}));var tx,nx=function(e,t){this.type=QE.StringSelectionChange,this.widgetId=e,this.str=t},rx=function(e,t){this.type=QE.DataRecordsSelectionChange,this.widgetId=e,this.records=t},ox=function(){function e(e,t){this.type=QE.ExtentChange,this.widgetId=e,this.extent=t,this.relatedWidgetIds=[]}return e.prototype.setRelatedWidgetIds=function(e){this.relatedWidgetIds=e},e.prototype.getRelatedWidgetIds=function(){return this.relatedWidgetIds},e.prototype.addRelatedWidgetId=function(e){this.relatedWidgetIds.includes(e)||this.relatedWidgetIds.push(e)},e}();!function(e){e.Create="CREATE",e.Update="UPDATE",e.Remove="REMOVE"}(tx||(tx={}));var ix=function(e,t,n,r){this.type=QE.DataRecordSetChange,this.widgetId=e,this.dataRecordSetId=t,this.changeType=n,this.dataRecordSet=r},ax=function(e,t,n){this.type=QE.SelectDataRecord,this.widgetId=e,this.dataSourceId=t,this.recordId=n},sx=function(){function e(e){this.id=e.id,e.name&&(this.name=e.name),e.widgetId&&(this.widgetId=e.widgetId),this.label=e.label}return e.prototype.destroy=function(){},e.prototype.onRemoveListen=function(e,t){},e}(),ux=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ZE(t,e),t.prototype.filterMessageType=function(e,t){return!0},t.prototype.filterMessage=function(e){return!0},t.prototype.onExecute=function(e,t){return!0},t}(sx),cx=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lx=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},fx=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},dx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cx(t,e),t.prototype.isSupported=function(e,t){var n;return lx(this,void 0,void 0,(function(){return fx(this,(function(t){switch(t.label){case 0:return null==e||"function"!=typeof e.query?[2,!1]:[4,e.allowToExportData()];case 1:return[2,t.sent()&&(null===(n=e.getSelectedRecords)||void 0===n?void 0:n.call(e).length)>0]}}))}))},t.prototype.getRecords=function(e){var t;return lx(this,void 0,void 0,(function(){return fx(this,(function(n){return(null===(t=e.getSelectedRecords)||void 0===t?void 0:t.call(e).length)>0?[2,e.getSelectedRecords()]:[2,[]]}))}))},t}($I),px=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hx=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},gx=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},vx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return px(t,e),t.prototype.onExecute=function(e,t){return hx(this,void 0,void 0,(function(){var t,n;return gx(this,(function(r){switch(r.label){case 0:return[4,this.getRecords(e)];case 1:return t=r.sent(),n=aO(e,t),Object(xo.saveAs)(n,"DataRecords.csv"),[2,!0]}}))}))},t}(dx),mx=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yx=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},bx=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},wx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mx(t,e),t.prototype.isSupported=function(t,n){return yx(this,void 0,void 0,(function(){return bx(this,(function(r){switch(r.label){case 0:return[4,e.prototype.isSupported.call(this,t,n)];case 1:return[2,r.sent()&&null!=t.getGeometryType()]}}))}))},t.prototype.onExecute=function(e,t){var n;return yx(this,void 0,void 0,(function(){var t,r,o,i;return bx(this,(function(a){switch(a.label){case 0:return[4,this.getRecords(e)];case 1:return t=a.sent(),r=null===(n=e.getSchema())||void 0===n?void 0:n.idField,o=mO(t,r),i=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8"}),Object(xo.saveAs)(i,"DataRecords.geojson"),[4,Promise.resolve(!0)];case 2:return[2,a.sent()]}}))}))},t}(dx),Sx=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ix=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ox=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ex=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Sx(t,e),t.prototype.onExecute=function(e,t){return Ix(this,void 0,void 0,(function(){var t,n,r;return Ox(this,(function(o){switch(o.label){case 0:return[4,this.getRecords(e)];case 1:return t=o.sent(),n=t.map((function(e){return e.toJson()})),r=new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"}),Object(xo.saveAs)(r,"DataRecords.json"),[2,Promise.resolve(!0)]}}))}))},t}(dx);function xx(e,t){return t===Ui.String?"'"+e+"'":t===Ui.Number?Number.isNaN(Number(e))?null:""+e:t===Ui.Date?"'"+e+"'":void 0}var Cx=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tx=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},jx=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ax=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="filter data record action",t}return Cx(t,e),t.prototype.filterMessageType=function(e,t){return e==QE.DataRecordsSelectionChange||e==QE.SelectDataRecord||e==QE.ExtentChange},t.prototype.filterMessage=function(e){return!0},t.prototype.getSettingComponentUri=function(e,t){return"filter-data-record-action"},t.prototype.onRemoveListen=function(e,t){if(this.lastMessage&&this.lastMessage.type===e&&this.lastMessage.widgetId===t){if(this.lastActionConfig&&this.lastActionConfig.actionUseDataSource&&this.lastActionConfig.actionUseDataSource.dataSourceId){var n=ld.getInstance().getDataSource(this.lastActionConfig.actionUseDataSource.dataSourceId);n&&this.lastMessage.type===QE.DataRecordsSelectionChange&&n.updateQueryParams(null,this.id),n&&this.lastMessage.type===QE.ExtentChange&&n.updateQueryParams(null,this.id),this.lastActionConfig=null}this.lastMessage=null}},t.prototype.onExecute=function(e,t){var n;return Tx(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,f,d,p,h,g,v,m,y,b,w,S,I,O,E,x,C;return jx(this,(function(T){switch(T.label){case 0:switch(this.lastMessage=e,this.lastActionConfig=t,e.type){case QE.DataRecordsSelectionChange:return[3,1];case QE.ExtentChange:return[3,7]}return[3,11];case 1:return r=null,t&&t.messageUseDataSource&&t.actionUseDataSource?e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId?[4,Promise.resolve(!0)]:[3,3]:[3,6];case 2:return[2,T.sent()];case 3:return w=ld.getInstance(),o=w.getDataSource(t.messageUseDataSource.mainDataSourceId),(S=w.getDataSource(t.actionUseDataSource.dataSourceId))?[3,5]:[4,w.createDataSourceByUseDataSource(t.actionUseDataSource)];case 4:S=T.sent(),T.label=5;case 5:if(o&&S){if(i=!1,t.enabledDataRelationShip){if(a=null,s=null,t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId?(u=o.getSchema(),c=u&&u.fields&&Object.keys(u.fields).find((function(e){return"esriFieldTypeOID"===u.fields[e].esriType})),a=u&&u.fields&&u.fields[c],s=a):(l=t.messageUseDataSource.fields[0],f=t.actionUseDataSource.fields[0],a=o.getSchema().fields[l],s=S.getSchema().fields[f]),E="",a&&s){for(d=a.name,p=a.type,h=s.type,g=e,v=[],m=0;m<g.records.length;m++)y=g.records[m].getData()[d],v.includes(""+xx(y,h))||null!==(b=xx(g.records[m].getData()[d],h))&&v.push(""+b);p!==Ui.Number&&h===Ui.Number&&g.records.length>0&&0==v.length&&(i=!0),E=s.name+" IN ",E=v.length>0?E+"("+v.join(", ")+")":""}e.records.length>0?(x=t.sqlExprObj?_y(t.sqlExprObj,S).sql:null)&&(E=E?E+" AND "+x:x):E="",i&&(E="1 = 2"),r={outFields:["*"],where:E,returnGeometry:!0}}else E="",e.records.length>0?(x=t.sqlExprObj?_y(t.sqlExprObj,S).sql:null)&&(E=x):E="",r={outFields:["*"],where:E,returnGeometry:!0};S.updateQueryParams(r,this.id)}T.label=6;case 6:return[2,Promise.resolve(!0)];case 7:return t&&t.actionUseDataSource?(w=ld.getInstance(),(S=w.getDataSource(t.actionUseDataSource.dataSourceId))?[3,9]:[4,w.createDataSourceByUseDataSource(t.actionUseDataSource)]):[3,10];case 8:S=T.sent(),T.label=9;case 9:I=null,S&&(O=null===(n=e)||void 0===n?void 0:n.extent,E="",(x=t.sqlExprObj?_y(t.sqlExprObj,S).sql:null)&&(E=x),C=t.enableQueryWithCurrentExtent?O.toJSON():{},I={geometry:C,outFields:["*"],where:E,returnGeometry:!0},S.updateQueryParams(I,this.id)),T.label=10;case 10:return[2,Promise.resolve(!0)];case 11:return[3,12];case 12:return[2]}}))}))},t}(sx),Px=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_x=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Dx=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},kx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="select data record action",t}return Px(t,e),t.prototype.filterMessageType=function(e,t){return e==QE.DataRecordsSelectionChange||e==QE.SelectDataRecord},t.prototype.filterMessage=function(e){return!0},t.prototype.getSettingComponentUri=function(e,t){return"select-data-record-action"},t.prototype.onExecute=function(e,t){return _x(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,d,p,h,g,v,m,y,b,w,S,I;return Dx(this,(function(O){switch(O.label){case 0:switch(e.type){case QE.DataRecordsSelectionChange:return[3,1]}return[3,9];case 1:return n=null,t&&t.messageUseDataSource&&t.actionUseDataSource?t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId?[2]:e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId?[4,Promise.resolve(!0)]:[3,3]:[3,8];case 2:return[2,O.sent()];case 3:return r=ld.getInstance(),o=r.getDataSource(t.messageUseDataSource.mainDataSourceId),i=!1,(a=r.getDataSource(t.actionUseDataSource.mainDataSourceId))?[3,5]:[4,r.createDataSourceByUseDataSource(t.actionUseDataSource)];case 4:O.sent(),a=r.getDataSource(t.actionUseDataSource.mainDataSourceId),O.label=5;case 5:return 0!==e.records.length?[3,7]:(a&&a.selectRecordsByIds([]),[4,Promise.resolve(!0)]);case 6:return[2,O.sent()];case 7:if(o&&a){if(t.enabledDataRelationShip){if(s=null,u=null,t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId?(c=o.getSchema(),l=c&&c.fields&&Object.keys(c.fields).find((function(e){return"esriFieldTypeOID"===c.fields[e].esriType})),s=c&&c.fields&&c.fields[l],u=s):(f=t.messageUseDataSource.fields[0],d=t.actionUseDataSource.fields[0],s=o.getSchema().fields[f],u=a.getSchema().fields[d]),S="",s&&u){for(p=s.name,h=s.type,g=u.type,v=e,m=[],y=0;y<v.records.length;y++)b=v.records[y].getData()[p],m.includes(""+xx(b,g))||null!==(w=xx(v.records[y].getData()[p],g))&&m.push(""+w);h!==Ui.Number&&g===Ui.Number&&0==m.length&&(i=!0),S=u.name+" IN ",S=m.length>0?S+"("+m.join(", ")+")":""}e.records.length>0?(I=t.sqlExprObj?_y(t.sqlExprObj,a).sql:null)&&(S=S?S+" AND "+I:I):S="",n={outFields:["*"],where:S,returnGeometry:!0}}else S="",e.records.length>0?(I=t.sqlExprObj?_y(t.sqlExprObj,a).sql:null)&&(S=I):S="",n={outFields:["*"],where:S,returnGeometry:!0};if(i)return a.clearSelection(),[2];a.query(n).then((function(e){var t=e&&e.records;if(t&&t.length>0){for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(o.getId())}setTimeout((function(){a.selectRecordsByIds(n,t)}),200)}else a.clearSelection()}))}O.label=8;case 8:return[2,Promise.resolve(!0)];case 9:return[3,10];case 10:return[2]}}))}))},t}(sx),Rx=function(){function e(){this.id="jimu-core-ds-factory"}return e.prototype.getFactoryUri=function(e){if(Object.keys(ea.c).map((function(e){return ea.c[e]})).includes(e))return"jimu-core/data-source"},e}(),Mx=function(){return(Mx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Nx=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Lx=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ux=["en","ar","bs","ca","cs","da","de","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw"],Fx=Hf(xe(window.initStoreState));function Vx(){return Nx(this,void 0,void 0,(function(){var e,t=this;return Lx(this,(function(n){var r;return e=Ee.parse(window.location.search),Fx.dispatch(Cd(e)),r=Bp.getInstance(),Object(Mp.e)({fetch:function(e,t){var n,o=this,i=Mx({},t),a=r.getMainPortal();return a.isWebTier&&vl(e,a.portalUrl)?(i.credentials="include",n=Promise.resolve()):n=r.isTrustedServer(e)?r.getSessionFromTrustedServer(e).then((function(t){t&&t.token&&(e=Df(e,"token",t.token))})):Promise.resolve(),n.then((function(){return Nx(o,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return[4,fetch(e,i).then((function(e){return e}))];case 1:return[2,t.sent()]}}))}))}))}}),Fx.subscribe((function(){window._appState=Jf().getState()})),window.addEventListener&&(window.addEventListener("online",(function(){return Fx.dispatch(cp(!1))})),window.addEventListener("offline",(function(){return Fx.dispatch(cp(!0))})),window.addEventListener("resize",yE($x,100)),$x()),window.runtimeInfo={widgets:{}},Promise.allSettled||(Promise.allSettled=function(e){return Nx(this,void 0,void 0,(function(){var t,n=this;return Lx(this,(function(r){return t=e.map((function(e){return Nx(n,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return[4,e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))];case 1:return[2,t.sent()]}}))}))})),[2,Promise.all(t)]}))}))}),wI.getInstance(),[2,Bx().then(zx).then((function(){!function(){Nx(this,void 0,void 0,(function(){var e;return Lx(this,(function(t){switch(t.label){case 0:return e=vf().appId,window.jimuConfig.isInBuilder||!e?[3,2]:[4,Kp(e).then((function(e){return Jf().dispatch(hd(e)),e}))];case 1:return[2,t.sent()];case 2:return[2,Promise.resolve({})]}}))}))}()})).then(Gx).then((function(n){return Nx(t,void 0,void 0,(function(){var t,r,o,i,a,s,u;return Lx(this,(function(c){switch(c.label){case 0:return t=null===(u=function(e,t){return e.locale||t||qv(window.navigator)}(e,n))||void 0===u?void 0:u.toLowerCase(),r=Hv(t,Ux)||"en",o={isInPortal:window.jimuConfig.isInPortal,isInBuilder:window.jimuConfig.isInBuilder,isBuilder:window.jimuConfig.isBuilder,isSite:window.jimuConfig.isSite,locale:t,translatedLocale:r,isRTL:Yv(t),isTouchDevice:wc(),jimuConfig:window.jimuConfig},function(e){if(window.locale=e,"undefined"==typeof document)return;var t=document.getElementsByTagName("html")[0];t.setAttribute("lang",e),Yv(e)?(t.setAttribute("dir","rtl"),t.className+=" esriRtl jimu-rtl",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:"")):(t.setAttribute("dir","ltr"),t.className+=" esriLtr jimu-ltr",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:""))}(t),Fx.dispatch(Ed(o)),Fx.dispatch(cp(!(window.navigator&&window.navigator.onLine))),i=vf(),a=i.appId,s=i.pageId,a?Fx.dispatch(gd(a)):e.config&&Fx.dispatch(gd(e.config)),Fx.dispatch(vp({appMode:Bi.Run,currentPageId:s,currentDialogId:e.dlg,activePagePart:$i.Body})),function(e){var t=pf(e);Object.keys(t).forEach((function(e){var n=t[e];"index"===n.selectionType?Jf().dispatch(ep(e,n.selection)):"id"===n.selectionType&&Jf().dispatch(tp(e,n.selection)),n.query&&Jf().dispatch(Vd(e,"_filterInUrl",n.query)),n.gdbVersion&&Jf().dispatch(Nd(e,n.gdbVersion))}))}(e),[4,Jx(r).then((function(e){return e&&Fx.dispatch(xd("jimu-core",e)),TI.getInstance().registerAction({id:"export-json",name:"exportAll",label:Wx({id:"dataAction_ExportJson",defaultMessage:nm.dataAction_ExportJson},e),ActionClass:rO}).catch((function(e){return console.error(e)})),TI.getInstance().registerAction({id:"export-csv",name:"exportAll",label:Wx({id:"dataAction_ExportCSV",defaultMessage:nm.dataAction_ExportCSV},e),ActionClass:lO}).catch((function(e){return console.error(e)})),TI.getInstance().registerAction({id:"export-geojson",name:"exportAll",label:Wx({id:"dataAction_ExportGeoJson",defaultMessage:nm.dataAction_ExportGeoJson},e),ActionClass:SO}).catch((function(e){return console.error(e)})),TI.getInstance().registerAction({id:"export-selected-json",name:"exportSelected",label:Wx({id:"dataAction_ExportJson",defaultMessage:nm.dataAction_ExportJson},e),ActionClass:Ex}).catch((function(e){return console.error(e)})),TI.getInstance().registerAction({id:"export-selected-csv",name:"exportSelected",label:Wx({id:"dataAction_ExportCSV",defaultMessage:nm.dataAction_ExportCSV},e),ActionClass:vx}).catch((function(e){return console.error(e)})),TI.getInstance().registerAction({id:"export-selected-geojson",name:"exportSelected",label:Wx({id:"dataAction_ExportGeoJson",defaultMessage:nm.dataAction_ExportGeoJson},e),ActionClass:wx}).catch((function(e){return console.error(e)})),EI.getInstance().registerAction({id:"filter-data-record-action",label:Wx({id:"messageAction_FilterDataRecord",defaultMessage:nm.messageAction_FilterDataRecord},e),ActionClass:Ax}).catch((function(e){return console.error(e)})),EI.getInstance().registerAction({id:"select-data-record-action",label:Wx({id:"messageAction_SelectDataRecord",defaultMessage:nm.messageAction_SelectDataRecord},e),ActionClass:kx}).catch((function(e){return console.error(e)})),fl.getInstance().registerExtension({epName:Yc.DataSourceFactoryUri,extension:new Rx}),window.jimuConfig.isInBuilder?(Jf().dispatch(jd(Bi.Design)),Qc("jimu-for-builder").loadI18nMessage()):Promise.resolve()}))];case 1:return[2,c.sent()]}}))}))}))]}))}))}function Bx(){return Nx(this,void 0,void 0,(function(){var e=this;return Lx(this,(function(t){switch(t.label){case 0:return window.jimuConfig.isInBuilder?[4,Zc("jimu-layouts/layout-builder").then((function(){return Nx(e,void 0,void 0,(function(){var e=this;return Lx(this,(function(t){switch(t.label){case 0:return[4,Zc("jimu-for-builder",["appBuilderSync","loadI18nMessage"]).then((function(t){return Nx(e,void 0,void 0,(function(){var e,n;return Lx(this,(function(r){return(e=t.appBuilderSync).listenBuilderEvents(),e.publishAppIsLoadedToBuilder(),n=yE(e.publishAppStateChangeToBuilder,200),$f((function(e,t){e&&t&&n()})),[2,Promise.resolve()]}))}))}))];case 1:return[2,t.sent()]}}))}))}))]:[3,2];case 1:return[2,t.sent()];case 2:return[2,Promise.resolve()]}}))}))}function Gx(){return Nx(this,void 0,void 0,(function(){return Lx(this,(function(e){switch(e.label){case 0:return Fx.getState().user?(Wc(nc)!==Fx.getState().user.culture&&zc(nc,Fx.getState().user.culture),[4,Promise.resolve(Fx.getState().user.culture)]):[3,2];case 1:return[2,e.sent()];case 2:return Bp.getInstance().getMainSession()?Wc(nc)?(Bp.getInstance().getUserInfo(),[4,Promise.resolve(Wc(nc))]):[3,4]:[3,7];case 3:return[2,e.sent()];case 4:return[4,Bp.getInstance().getUserInfo().then((function(e){return e.culture}))];case 5:return[2,e.sent()];case 6:return[3,8];case 7:return[2,null];case 8:return[2]}}))}))}function Wx(e,t){return t&&t[e.id]?t[e.id]:e.defaultMessage}function zx(){return Nx(this,void 0,void 0,(function(){var e=this;return Lx(this,(function(t){switch(t.label){case 0:return[4,Hx().then((function(t){return Nx(e,void 0,void 0,(function(){return Lx(this,(function(e){switch(e.label){case 0:return t?[3,2]:(console.warn("No portal info."),[4,Promise.resolve(null)]);case 1:return[2,e.sent()];case 2:return!window.jimuConfig.isDevEdition||window.jimuConfig.isSite||window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder?[3,4]:(Jf().dispatch(Zd(t.portalUrl,t.clientId)),[4,Bp.getInstance().initSession(t)]);case 3:return[2,e.sent()];case 4:return Jf().getState().portalUrl?Jf().dispatch(Zd(Jf().getState().portalUrl,t.clientId)):Jf().dispatch(Zd(t.portalUrl,t.clientId)),[4,Bp.getInstance().initSession(t).then((function(){(function(e){return Nx(this,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return window.jimuConfig.isInBuilder?[3,2]:[4,Jp(e)];case 1:return[2,t.sent()];case 2:return[4,Promise.resolve({})];case 3:return[2,t.sent()]}}))}))})(t.portalUrl).then((function(e){!function(e,t){Nx(this,void 0,void 0,(function(){var n,r=this;return Lx(this,(function(o){switch(o.label){case 0:return window.jimuConfig.isInPortal?[3,2]:[4,Promise.resolve({})];case 1:return[2,o.sent()];case 2:return window.jimuConfig.isInBuilder?[3,3]:[2,(n=Bp.getInstance()).getSessionFromWebTierPortal(e,null,t).then((function(e){return Nx(r,void 0,void 0,(function(){var t;return Lx(this,(function(r){switch(r.label){case 0:return e&&(t=n.getMainPortal(),n.setMainPortal(Mx(Mx({},t),{isWebTier:!0}))),[4,Promise.resolve({})];case 1:return[2,r.sent()]}}))}))}))];case 3:return[4,Promise.resolve({})];case 4:return[2,o.sent()]}}))}))}(t.portalUrl,e)}))}))];case 5:return[2,e.sent()]}}))}))}))];case 1:return[2,t.sent()]}}))}))}function qx(e){return Nx(this,void 0,void 0,(function(){var t=this;return Lx(this,(function(n){switch(n.label){case 0:return[4,Promise.all(ef(e.appConfig).map((function(e){return Nx(t,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return e.manifest.properties.hasMainClass?[3,2]:[4,Promise.resolve({})];case 1:return[2,t.sent()];case 2:return[4,DI.getInstance().loadWidgetClass(e.id)];case 3:return[2,t.sent()]}}))}))}))).then((function(){return Nx(t,void 0,void 0,(function(){return Lx(this,(function(e){switch(e.label){case 0:return[4,Zc(window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime")];case 1:return[2,e.sent()]}}))}))})).then((function(){return Nx(t,void 0,void 0,(function(){return Lx(this,(function(e){switch(e.label){case 0:return[4,Zc("jimu-ui")];case 1:return[2,e.sent()]}}))}))})).then((function(){return Nx(t,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return[4,ch.getInstance().loadTheme(e.appConfig.theme)];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))}function Hx(){return Nx(this,void 0,void 0,(function(){var e,t,n,r=this;return Lx(this,(function(o){switch(o.label){case 0:return window.jimuConfig.isInPortal?(e=pl(),[4,Promise.resolve({portalUrl:e,clientId:"experienceBuilder"})]):[3,2];case 1:return[2,o.sent()];case 2:return window.jimuConfig.packagesInAppFolder?[4,Promise.resolve(null)]:[3,4];case 3:return[2,o.sent()];case 4:return t=window.jimuConfig.hostEnv||"dev",n=Sf()+"builder/setting.json?env="+(window.jimuConfig.isDevEdition?"dev":"online"),[4,window.fetch(n).then((function(e){return Nx(r,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))})).then((function(e){var n=(window.jimuConfig.isDevEdition?e.devEnv:e.env)[t];return n&&(n.portalUrl=Al(n.portalUrl)),n}),(function(e){return Nx(r,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return console.error("Get setting.json error.",e),[4,Promise.resolve(null)];case 1:return[2,t.sent()]}}))}))}))];case 5:return[2,o.sent()]}}))}))}function Jx(e){return Nx(this,void 0,void 0,(function(){return Lx(this,(function(t){switch(t.label){case 0:return"en"!==e?[3,2]:[4,Promise.resolve(nm)];case 1:return[2,t.sent()];case 2:return(e=zv(e,Ux))?[4,$v("jimu-core/lib/translations",e).then((function(e){return e}))]:[3,4];case 3:return[2,t.sent()];case 4:return[2,Promise.resolve(nm)]}}))}))}function $x(){if("undefined"!=typeof document){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=Sc({width:e,height:t});Jf().getState().browserSizeMode!==n&&Jf().dispatch(ip(n));var r=.01*t,o=.01*e;document.documentElement.style.setProperty("--vh",r+"px"),document.documentElement.style.setProperty("--vw",o+"px")}}function Yx(e){return e.error?O.createElement("div",null,"Error! ",O.createElement("button",{onClick:e.retry},"Retry")):e.pastDelay?O.createElement("div",null,"Loading..."):null}var Kx,Xx,Qx,Zx,eC,tC=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},nC=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function rC(e){e(pp(null))}function oC(e){return kc()+"-"+e}function iC(){return tC(this,void 0,void 0,(function(){return nC(this,(function(e){switch(e.label){case 0:return[4,Zc(window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",["LayoutEntry"])];case 1:return[2,e.sent()]}}))}))}!function(e){e.ScrollIntoView="SCROLL_IN",e.Manual="MANUAL"}(Kx||(Kx={})),function(e){e.None="NONE",e.Pulse="PULSE",e.RubberBand="RUBBER_BAND",e.FadeIn="FADE_IN",e.FadeOut="FADE_OUT",e.FlyIn="FLY_IN",e.ZoomIn="ZOOM_IN",e.WipeIn="WIPE_IN",e.SpinIn="SPIN_IN",e.FloatIn="FLOAT_IN"}(Xx||(Xx={})),function(e){e.Default="DEFAULT",e.Gentle="GENTLE",e.Wobbly="WOBBLY",e.Stiff="STIFF",e.Slow="SLOW",e.Molasses="MOLASSES"}(Qx||(Qx={})),function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Left="LEFT",e.Right="RIGHT"}(Zx||(Zx={})),function(e){e.AsOne="AS_ONE",e.OneByOne="ONE_BY_ONE"}(eC||(eC={}));var aC={offsetX:0,offsetY:0,rotateX:0,rotateY:0,rotateZ:0,clipLeft:0,clipRight:0,clipTop:0,clipBottom:0,scaleX:1,scaleY:1,opacity:1,zIndex:0},sC=function(){function e(e,t){this.type=e,this.option=t}return e.prototype.generateProps=function(e){return Object.assign({},aC,e)},e.prototype.getConfigType=function(){var e,t;return(null!==(t=null===(e=this.option)||void 0===e?void 0:e.configType)&&void 0!==t?t:Qx.Default).toLowerCase()},e.prototype.transform=function(e,t,n){return uC(e,t,n)},e.prototype.clippath=function(e){return cC(e)},e.prototype.propsOnXY=function(e,t){return null},e.prototype.hasMoveEffect=function(){return!1},e}();function uC(e,t,n){if(null!=(null==e?void 0:e.offsetX)){var r=e.offsetX,o=e.offsetY,i=e.rotateX,a=e.rotateY,s=e.rotateZ,u=e.scaleX,c=e.scaleY;return kr([r,o,i,a,s,u,c],(function(e,r,o,i,a,s,u){var c=Math.max(o,i,a);return 0===e&&0===r&&0===o&&0===i&&0===a&&1===s&&1===u?null:"translate3d(calc("+t+" + "+e+"px), calc("+n+" + "+r+"px), 0)\n        rotate3d("+(0!==c?o/c:0)+", "+(0!==c?i/c:0)+", "+(0!==c?a/c:0)+", "+c+"deg)\n        scale("+s+", "+u+")"}))}return null}function cC(e){if(null==e?void 0:e.clipTop){var t=e.clipTop,n=e.clipBottom,r=e.clipLeft,o=e.clipRight;return kr([t,n,r,o],(function(e,t,n,r){return 0!==e||0!==t||0!==n||0!==r?"inset("+e+"% "+r+"% "+t+"% "+n+"%)":null}))}return null}var lC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fC=function(e){function t(t){return e.call(this,Xx.FadeIn,t)||this}return lC(t,e),t.prototype.initProps=function(){return this.generateProps({opacity:0,immediate:!0})},t.prototype.animateProps=function(){return{from:this.generateProps({opacity:0}),to:this.generateProps({opacity:1}),immediate:!1,reset:!0,config:Rr[this.getConfigType()]}},t.prototype.endProps=function(){return this.generateProps({opacity:1,immediate:!0,reset:!1})},t}(sC),dC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pC=function(e){function t(t){return e.call(this,Xx.FadeOut,t)||this}return dC(t,e),t.prototype.initProps=function(){return this.generateProps({opacity:1,immediate:!0})},t.prototype.animateProps=function(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:0}),immediate:!0,reset:!0,config:void 0}},t.prototype.endProps=function(){return this.generateProps({opacity:0,immediate:!0,reset:!1})},t}(sC),hC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gC=function(){return(gC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},vC=function(e){function t(t){var n,r=e.call(this,Xx.FlyIn,t)||this;return r.direction=(null===(n=r.option)||void 0===n?void 0:n.direction)||Zx.Top,r}return hC(t,e),t.prototype.from=function(){switch(this.direction){case Zx.Bottom:return{offsetX:0,offsetY:window.innerHeight};case Zx.Left:return{offsetX:-window.innerWidth,offsetY:0};case Zx.Right:return{offsetX:window.innerWidth,offsetY:0};default:return{offsetX:0,offsetY:-window.innerHeight}}},t.prototype.initProps=function(){return this.generateProps({opacity:0,offsetX:0,offsetY:0,immediate:!0})},t.prototype.animateProps=function(){return{from:this.generateProps(gC({opacity:0},this.from())),to:this.generateProps({opacity:1,offsetX:0,offsetY:0}),immediate:!1,reset:!0,config:Rr[this.getConfigType()]}},t.prototype.endProps=function(){return this.generateProps({opacity:1,offsetX:0,offsetY:0,immediate:!0,reset:!1})},t}(sC),mC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yC=function(e){function t(t){return e.call(this,Xx.ZoomIn,t)||this}return mC(t,e),t.prototype.initProps=function(){return this.generateProps({scaleX:1,scaleY:1,opacity:0,transformOrigin:"center",immediate:!0})},t.prototype.animateProps=function(){return{from:this.generateProps({scaleX:0,scaleY:0,opacity:0}),to:this.generateProps({scaleX:1,scaleY:1,opacity:1}),immediate:!1,reset:!0,config:Rr[this.getConfigType()]}},t.prototype.endProps=function(){return this.generateProps({scaleX:1,scaleY:1,opacity:1,immediate:!0,reset:!1})},t}(sC),bC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wC=function(e){function t(t){var n,r=e.call(this,Xx.WipeIn,t)||this;return r.direction=(null===(n=r.option)||void 0===n?void 0:n.direction)||Zx.Top,r}return bC(t,e),t.prototype.getClipProp=function(){switch(this.direction){case Zx.Bottom:return"clipTop";case Zx.Left:return"clipRight";case Zx.Right:return"clipLeft";default:return"clipBottom"}},t.prototype.initProps=function(){var e;return this.generateProps(((e={})[this.getClipProp()]=100,e.opacity=0,e.transformOrigin="center",e.immediate=!0,e))},t.prototype.animateProps=function(){var e,t;return{from:this.generateProps((e={},e[this.getClipProp()]=100,e.opacity=0,e)),to:this.generateProps((t={},t[this.getClipProp()]=0,t.opacity=1,t)),immediate:!1,reset:!0,config:Rr[this.getConfigType()]}},t.prototype.endProps=function(){var e;return this.generateProps(((e={})[this.getClipProp()]=0,e.opacity=1,e.immediate=!0,e.reset=!1,e))},t}(sC),SC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),IC=function(e){function t(t){return e.call(this,Xx.SpinIn,t)||this}return SC(t,e),t.prototype.initProps=function(){return this.generateProps({rotateZ:0,opacity:0,immediate:!0})},t.prototype.animateProps=function(){return{from:this.generateProps({rotateZ:720,opacity:0}),to:this.generateProps({rotateZ:0,opacity:1}),immediate:!1,reset:!0,config:Rr[this.getConfigType()]}},t.prototype.endProps=function(){return this.generateProps({rotateZ:0,opacity:1,immediate:!0,reset:!1})},t}(sC),OC=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EC=function(){return(EC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xC=function(e){function t(t){var n,r=e.call(this,Xx.FloatIn,t)||this;return r.direction=(null===(n=r.option)||void 0===n?void 0:n.direction)||Zx.Top,r}return OC(t,e),t.prototype.from=function(){switch(this.direction){case Zx.Bottom:return{offsetX:0,offsetY:100};case Zx.Left:return{offsetX:-100,offsetY:0};case Zx.Right:return{offsetX:100,offsetY:0};default:return{offsetX:0,offsetY:-100}}},t.prototype.initProps=function(){return this.generateProps({opacity:0,offsetX:0,offsetY:0,immediate:!0})},t.prototype.animateProps=function(){return{from:this.generateProps(EC({opacity:0},this.from())),to:this.generateProps({opacity:1,offsetX:0,offsetY:0}),immediate:!1,reset:!0,config:Rr[this.getConfigType()]}},t.prototype.endProps=function(){return this.generateProps({opacity:1,offsetX:0,offsetY:0,immediate:!0,reset:!1})},t}(sC);function CC(e,t){switch(e){case Xx.FadeIn:return new fC(t);case Xx.FadeOut:return new pC(t);case Xx.FlyIn:return new vC(t);case Xx.ZoomIn:return new yC(t);case Xx.WipeIn:return new wC(t);case Xx.SpinIn:return new IC(t);case Xx.FloatIn:return new xC(t);default:return null}}function TC(e){if(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(t.top<n){var r=e.parentElement.getBoundingClientRect();return t.top<r.bottom}}return!1}function jC(){for(var e=[0],t=1;t<=100;t++)e.push(t/100);return e}function AC(e,t,n){var r=O.useRef(),o=O.useState(),i=o[0],a=o[1],s=O.useRef(Number.NEGATIVE_INFINITY),u=O.useRef(0);return O.useEffect((function(){var o=function(e){u.current=e.intersectionRatio,s.current=e.boundingClientRect.top};if(t&&e&&"function"==typeof IntersectionObserver){var i=new IntersectionObserver((function(e){!function(e){var t=e.boundingClientRect,n=e.intersectionRect;if(!e.target.classList.contains("playing-animation")){if(function(e,t){return e>t.boundingClientRect.top}(s.current,e)&&function(e,t){return e<t.intersectionRatio}(u.current,e)){if(e.intersectionRatio>=.95||n.height>300)return o(e),void a(!0);if(t.top+1<n.top)return o(e),void a(!0)}if(function(e,t){return e<t.boundingClientRect.top}(s.current,e)&&function(e,t){return e>t.intersectionRatio}(u.current,e)&&e.intersectionRatio<=.05)return o(e),void a(!1);o(e)}}(e[0])}),{threshold:jC(),root:n||document.body});return i.observe(e),r.current=i,function(){r.current.disconnect(),r.current=null}}r.current&&(r.current.disconnect(),r.current=null)}),[e,t,n]),i}var PC=O.createContext({trigger:"",delay:0,setting:null,inheritedOneByOneSetting:null,playId:null,revert:!1,depth:0});function _C(e){var t,n=e.ref,r=e.enable,o=e.isParentPlaying,i=e.parentAnimationStyle,a=O.useState(!1),s=a[0],u=a[1],c=O.useRef(),l=O.useRef(),f=O.useContext(PC)||{},d=f.inheritedOneByOneSetting,p=f.depth,h=d||{},g=h.type,v=h.option,m=O.useMemo((function(){return CC(g,v)}),[g,v]),y=O.useMemo((function(){return new pC}),[]),b=Ie((function(e){var t;return null===m||(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===Bi.Design})),w=O.useMemo((function(){return r&&!o&&g&&g!==Xx.None&&n.current&&!b}),[r,o,g,n,b]),S=AC(n.current,w,1===p?null:null===(t=n.current)||void 0===t?void 0:t.parentElement),I=Br((function(){return{}})),E=I[0],x=I[1],C=I[2],T=function(){m&&(C(),x(y.animateProps()),u(!0))};return O.useEffect((function(){o&&u(!1)}),[o]),O.useEffect((function(){m&&(!l.current&&w?!function(e,t){var n=null==t?void 0:t.parentElement;if(!n)return!0;var r=t.getBoundingClientRect(),o=1===e?{top:0,height:window.innerHeight}:n.getBoundingClientRect();return r.top<o.top+o.height}(p,n.current)?T():c.current=!0:w&&c.current!==S&&(c.current=S,S?m&&(C(),x(m.animateProps()),u(!0)):null==S||S||T()),l.current=w)})),[o||!s?i:E,m]}var DC=function(){return(DC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var kC=function(){return(kC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},RC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},MC=/translateX\(([^)]*)\)/,NC=/translateY\(([^)]*)\)/,LC=/translate\(([^),]*),\s*([^),]*)\)/;var UC=O.forwardRef((function(e,t){var n,r,o,i=e.type,a=e.trigger,s=void 0===a?"":a,u=e.revert,c=e.configType,l=e.direction,f=e.playId,d=e.children,p=e.style,h=e.onAnimationStart,g=e.onAnimationEnd,v=e.parentAnimationStyle,m=e.isParentEnableScroll,y=void 0!==m&&m,b=e.isParentPlaying,w=e.isParentRevert,S=e.parentPlayId,I=RC(e,["type","trigger","revert","configType","direction","playId","children","style","onAnimationStart","onAnimationEnd","parentAnimationStyle","isParentEnableScroll","isParentPlaying","isParentRevert","parentPlayId"]),E=O.useRef(),x=t||E,C=function(e){var t=e.type,n=e.ref,r=e.trigger,o=void 0===r?"":r,i=e.revert,a=e.configType,s=e.direction,u=e.playId,c=e.isParentPlaying,l=e.isParentRevert,f=e.parentPlayId,d=e.onAnimationStart,p=e.onAnimationEnd,h=O.useRef(),g=O.useRef(),v=O.useRef(!1),m=O.useRef(!1),y=O.useRef(),b=O.useRef(),w=O.useRef(),S=O.useMemo((function(){return o.includes(Kx.ScrollIntoView)}),[o]),I=O.useMemo((function(){return o.includes(Kx.Manual)}),[o]),E=O.useMemo((function(){return new pC}),[]),x=O.useMemo((function(){return CC(t,{configType:a,direction:s})}),[t,a,s]),C=AC(n.current,S&&null!=x),T=Br((function(){return aC})),j=T[0],A=T[1],P=T[2],_=function(e){var t,r;void 0===e&&(e=!1),x&&(v.current&&!e||(P(),"function"==typeof d&&d(),v.current=!0,null===(r=null===(t=n.current)||void 0===t?void 0:t.classList)||void 0===r||r.add("playing-animation"),g.current=Date.now(),A(DC(DC({},x.animateProps()),{onRest:function(){var e,t;v.current=!1,null===(t=null===(e=n.current)||void 0===e?void 0:e.classList)||void 0===t||t.remove("playing-animation"),"function"==typeof p&&p()}}))))},D=function(e){void 0===e&&(e=!1),x&&(v.current&&!e&&Date.now()-g.current<50||(P(),v.current=!0,A(DC(DC({},E.animateProps()),{onRest:function(){v.current=!1,"function"==typeof p&&I&&p()}}))))};return O.useEffect((function(){x&&(!w.current&&S?TC(n.current)?b.current=!0:D():S&&b.current!==C&&(b.current=C,C?_():null==C||C||D()),w.current=S)})),O.useEffect((function(){x&&u&&u!==h.current&&I&&(h.current=u,i?D(!0):_(!0))})),O.useEffect((function(){c&&!v.current&&(m.current!==c||f&&y.current!==f)&&(l?D(!0):_(!0)),m.current=c,y.current=f})),[j,x]}({type:i,ref:t,trigger:s,revert:u,configType:c,direction:l,playId:f,isParentPlaying:b,isParentRevert:w,parentPlayId:S,onAnimationStart:h,onAnimationEnd:g}),T=C[0],j=C[1],A=_C({enable:null==j&&y,parentAnimationStyle:v,isParentPlaying:b,ref:t}),P=A[0],_=A[1],D="string"==typeof p?JSON.parse(p):p;if(j&&T?(n=T,r=j.transform,o=j.clippath):y&&_?(n=P,r=null==_?void 0:_.transform,o=null==_?void 0:_.clippath):v&&(n=v,r=uC,o=cC),n){var k=void 0;x.current&&(k=getComputedStyle(x.current).getPropertyValue("transform"));var R=function(e){var t="0px",n="0px";if(e){if(e.includes("matrix(")){var r=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");return[t=parseInt(r[4],10)+"px",n=parseInt(r[5],10)+"px"]}var o=e.match(MC),i=e.match(NC),a=e.match(LC);a?(t=a[1],n=a[2]):(o&&(t=o[1]),i&&(n=i[1]))}return[t,n]}(k),M=R[0],N=R[1],L=(n.offsetX,n.offsetY,n.rotateX,n.rotateY,n.rotateZ,n.scaleX,n.scaleY,n.clipLeft,n.clipRight,n.clipTop,n.clipBottom,RC(n,["offsetX","offsetY","rotateX","rotateY","rotateZ","scaleX","scaleY","clipLeft","clipRight","clipTop","clipBottom"]));(D=Object.assign({},D,L)).transform=r(n,M,N),D.clipPath=o(n)}return O.createElement(Eo.div,kC({style:D,ref:x},I),d)})),FC=function(){return(FC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},VC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},BC=new pC;function GC(e){e.children;var t,n,r=e.style,o=e.enableScroll,i=void 0!==o&&o,a=VC(e,["children","style","enableScroll"]),s=O.useRef(),u=O.useRef(),c=O.useRef(),l=O.useRef(),f=O.useContext(PC),d=O.useState(),p=d[0],h=d[1],g=f||{},v=g.trigger,m=void 0===v?"":v,y=g.delay,b=void 0===y?0:y,w=g.setting,S=g.playId,I=g.revert,E=g.onAnimationStart,x=g.onAnimationEnd,C=null==w?void 0:w.type,T=null===(t=null==w?void 0:w.option)||void 0===t?void 0:t.configType,j=null===(n=null==w?void 0:w.option)||void 0===n?void 0:n.direction,A=O.useMemo((function(){return CC(C,{configType:T,direction:j})}),[C,T,j]),P=O.Children.count(e.children),_=m.includes(Kx.ScrollIntoView),D=m.includes(Kx.Manual),k=AC(c.current,_&&null!=A),R=Gr(O.Children.count(e.children),(function(){return aC})),M=R[0],N=R[1],L=R[2],U=O.useCallback((function(){if(A){L(),h(!0);var e=0;"function"==typeof E&&E(),N(FC(FC({},A.animateProps()),{delay:b,onRest:function(){(e+=1)===P&&("function"==typeof x&&x(),h(!1))}}))}}),[b,A,x,E,P,N,L]),F=O.useCallback((function(){if(A){L(),h(!0);var e=0;N(FC(FC({},BC.animateProps()),{onRest:function(){(e+=1)===P&&(h(!1),"function"==typeof x&&x())}}))}}),[A,P,x,N,L]);O.useEffect((function(){A&&(!l.current&&_?TC(c.current)||F():_&&u.current!==k&&(u.current=k,k?U():null==k||k||F()),l.current=_)})),O.useEffect((function(){A&&S&&S!==s.current&&D&&(s.current=S,I?F():U())}));var V="string"==typeof r?JSON.parse(r):FC({},r);return O.createElement("div",FC({style:V,ref:c},a),e.children&&O.Children.map(e.children,(function(e,t){return e?O.cloneElement(e,{isPlaying:p,revert:I,playId:S,enableScroll:i,animationStyle:null!=A?M[t]:null}):null})))}var WC,zC,qC,HC,JC,$C,YC,KC,XC=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function QC(e){return"object"==typeof e?""+e.distance+e.unit:e}function ZC(e){var t="unset";if(e&&e.image){switch(e.fillType){case"fit":t="contain";break;case"fill":t="cover";break;case"stretch":t="100% 100%";break;default:t="auto"}return t}return t}function eT(e){var t,n=e.dialogBackground,r=e.border,o=e.borderRadius,i=e.boxShadow,a="unset",s="unset";if(o){var u=o.number[0],c=void 0!==o.number[1]?o.number[1]:u,l=void 0!==o.number[2]?o.number[2]:u,f=void 0!==o.number[3]?o.number[3]:u;a=""+u+o.unit+" "+c+o.unit,s=""+l+o.unit+" "+f+o.unit}return{backgroundColor:n&&n.color?n.color:"transparent",backgroundImage:(null===(t=null==n?void 0:n.image)||void 0===t?void 0:t.url)?"url("+n.image.url+")":"unset",backgroundRepeat:n&&n.image&&"tile"===n.fillType?"repeat":"no-repeat",backgroundSize:ZC(n),borderStyle:r&&r.color&&r.width?QC(r.width)+" "+r.type+" "+r.color:"none",borderRadiusTopStyle:a,borderRadiusBottomStyle:s,borderRadiusStyle:o?a+" "+s:"unset",boxShadowStyle:i&&i.color?QC(i.offsetX)+" "+QC(i.offsetY)+"\n      "+QC(i.blur)+" "+QC(i.spread)+" "+i.color:"none"}}function tT(e,t,n,r){var o,i,a,s,u,c=e.borderRadius,l=e.interactionType,f=eT(e),d=e.overlayColor||(e.isOpenerDlg?"var(--dark-900)":"transparent"),p="app-dialog-wrap-"+e.id,h=l===Vl.ButtonBlock?91:l===Vl.ButtonInline?64:59,g=l?"calc(100% - "+h+"px)":"100%",v="0";if(null===(o=e.boxShadow)||void 0===o?void 0:o.color){var m=(parseFloat(null===(i=e.boxShadow.blur)||void 0===i?void 0:i.split("px")[0])||0)+(parseFloat(null===(a=e.boxShadow.spread)||void 0===a?void 0:a.split("px")[0])||0),y=parseFloat(null===(s=e.boxShadow.offsetX)||void 0===s?void 0:s.split("px")[0])||0,b=parseFloat(null===(u=e.boxShadow.offsetY)||void 0===u?void 0:u.split("px")[0])||0;v=(m-b>0?m-b:0)+"px "+(m+y)+"px "+(m+b)+"px "+(m-y>0?m-y:0)+"px"}var w="100%",S="unset";r.position===Fl.Center&&(w="%"===(r.height.includes("%")?"%":"px")?n*parseFloat(r.height.split("%")[0])/100+"px":r.height,S="calc(50% - "+parseFloat(w.split("px")[0])/2+"px)");var I=c&&l?f.borderRadiusTopStyle+" 0 0":f.borderRadiusStyle,O=c?"0 0 "+f.borderRadiusBottomStyle:"unset";return _t(WC||(WC=XC(["\n    body {\n\n      @keyframes aBlink {\n        from { background-color: var(--danger-700); }\n        50% { background-color: var(--danger-700); }\n        51%{background-color: transparent;}\n        to { background-color: transparent; }\n      }\n\n      .app-dialog-wrap{\n\n        &.","{\n          display: ",";\n          .app-dialog{\n            margin: 0!important;\n            max-width: 100vw;\n            max-height: 100vh;\n\n            .app-dialog-content{\n              padding: ","; /* decided by shadow*/\n              overflow-y: auto;\n\n              border: none;\n              box-shadow: unset;\n              background-color: transparent;\n              border-radius:  ",";\n\n              &.overflow-visible{\n                overflow: visible;\n              }\n\n              .app-dialog-animation-content{\n                flex-shrink: 0;\n                /* height: "," !important; */\n                height: ",";\n\n                border: ",";\n                border-radius:  ",";\n                box-shadow: ",";\n                background-color: ",";\n                background-image: ",";\n                background-position: center center;\n                background-repeat: ",";\n                background-size: ",";\n\n                .dialog-content{\n                  padding: 0;\n                  height: ",";\n                  border-radius:  ",";\n                }\n\n                .dialog-footer{\n                  overflow-x: auto;\n                  border-radius:  ",";\n\n                  .cbx-animation{\n                    width: 16px;\n                    height: 16px;\n                    border: 2px solid var(--light-600);\n                    animation: aBlink 500ms infinite;\n                  }\n                  .btn {\n                    min-width: 6.25rem;\n                  }\n                }\n              }\n\n              .app-dialog-resize-container{\n                touch-action: none;\n                .app-dialog-resize-handlers{\n                  &.resize-center{\n                    top: ",";\n                    .dialog-resize-bottom{\n                      top: calc("," - ",");\n                    }\n                    .dialog-resize-left, .dialog-resize-right{\n                      height: ",";\n                    }\n                  }\n                }\n              }\n\n            }\n          }\n          .app-dialog-backdrop{\n            background-color: ",";\n          }\n        }\n      }\n    }\n  "],["\n    body {\n\n      @keyframes aBlink {\n        from { background-color: var(--danger-700); }\n        50% { background-color: var(--danger-700); }\n        51%{background-color: transparent;}\n        to { background-color: transparent; }\n      }\n\n      .app-dialog-wrap{\n\n        &.","{\n          display: ",";\n          .app-dialog{\n            margin: 0!important;\n            max-width: 100vw;\n            max-height: 100vh;\n\n            .app-dialog-content{\n              padding: ","; /* decided by shadow*/\n              overflow-y: auto;\n\n              border: none;\n              box-shadow: unset;\n              background-color: transparent;\n              border-radius:  ",";\n\n              &.overflow-visible{\n                overflow: visible;\n              }\n\n              .app-dialog-animation-content{\n                flex-shrink: 0;\n                /* height: "," !important; */\n                height: ",";\n\n                border: ",";\n                border-radius:  ",";\n                box-shadow: ",";\n                background-color: ",";\n                background-image: ",";\n                background-position: center center;\n                background-repeat: ",";\n                background-size: ",";\n\n                .dialog-content{\n                  padding: 0;\n                  height: ",";\n                  border-radius:  ",";\n                }\n\n                .dialog-footer{\n                  overflow-x: auto;\n                  border-radius:  ",";\n\n                  .cbx-animation{\n                    width: 16px;\n                    height: 16px;\n                    border: 2px solid var(--light-600);\n                    animation: aBlink 500ms infinite;\n                  }\n                  .btn {\n                    min-width: 6.25rem;\n                  }\n                }\n              }\n\n              .app-dialog-resize-container{\n                touch-action: none;\n                .app-dialog-resize-handlers{\n                  &.resize-center{\n                    top: ",";\n                    .dialog-resize-bottom{\n                      top: calc("," - ",");\n                    }\n                    .dialog-resize-left, .dialog-resize-right{\n                      height: ",";\n                    }\n                  }\n                }\n              }\n\n            }\n          }\n          .app-dialog-backdrop{\n            background-color: ",";\n          }\n        }\n      }\n    }\n  "])),p,t?"inherit":"none",v,f.borderRadiusStyle,w,w,f.borderStyle,f.borderRadiusStyle,f.boxShadowStyle,f.backgroundColor,f.backgroundImage,f.backgroundRepeat,f.backgroundSize,g,I,O,S,w,"12px",w,d)}function nT(e){var t,n=e.width.includes("%")?"100%":e.width;switch(e.position){case Fl.Left:t=_t(zC||(zC=XC(["\n        &.app-dialog{\n          margin: 0px;\n          width: ",";\n        }\n        .app-dialog-content{\n          height: 100vh;\n\n          .app-dialog-resize-container{\n            width: ",";\n            max-width: 100%;\n            height: 100vh;\n          }\n        }\n      "],["\n        &.app-dialog{\n          margin: 0px;\n          width: ",";\n        }\n        .app-dialog-content{\n          height: 100vh;\n\n          .app-dialog-resize-container{\n            width: ",";\n            max-width: 100%;\n            height: 100vh;\n          }\n        }\n      "])),e.width,n);break;case Fl.Right:t=_t(qC||(qC=XC(["\n        &.app-dialog{\n          margin: 0px;\n          float: right;\n          width: ",";\n        }\n        .app-dialog-content{\n          height: 100vh;\n\n          .app-dialog-resize-container{\n            width: ",";\n            max-width: 100%;\n            height: 100vh;\n          }\n        }\n      "],["\n        &.app-dialog{\n          margin: 0px;\n          float: right;\n          width: ",";\n        }\n        .app-dialog-content{\n          height: 100vh;\n\n          .app-dialog-resize-container{\n            width: ",";\n            max-width: 100%;\n            height: 100vh;\n          }\n        }\n      "])),e.width,n);break;case Fl.Top:t=_t(HC||(HC=XC(["\n        &.app-dialog{\n          margin: 0px;\n          height: 100%;\n        }\n        .app-dialog-content{\n          width: 100vw;\n          height: ",";\n\n          .app-dialog-resize-container{\n            height: ",";\n            .app-dialog-resize-handlers{\n              .dialog-resize-bottom{\n                bottom: calc(100vh - ",");\n              }\n            }\n          }\n        }\n      "],["\n        &.app-dialog{\n          margin: 0px;\n          height: 100%;\n        }\n        .app-dialog-content{\n          width: 100vw;\n          height: ",";\n\n          .app-dialog-resize-container{\n            height: ",";\n            .app-dialog-resize-handlers{\n              .dialog-resize-bottom{\n                bottom: calc(100vh - ",");\n              }\n            }\n          }\n        }\n      "])),e.height,e.height.includes("%")?"100%":e.height,e.height);break;case Fl.Bottom:t=_t(JC||(JC=XC(["\n        &.app-dialog{\n          position: absolute;\n          bottom: 0px;\n          margin: 0px;\n          height: ",";\n        }\n        .app-dialog-content{\n          width: 100vw;\n          height: 100%;\n\n          .app-dialog-resize-container{\n            height: ",";\n          }\n        }\n      "],["\n        &.app-dialog{\n          position: absolute;\n          bottom: 0px;\n          margin: 0px;\n          height: ",";\n        }\n        .app-dialog-content{\n          width: 100vw;\n          height: 100%;\n\n          .app-dialog-resize-container{\n            height: ",";\n          }\n        }\n      "])),e.height,e.height.includes("%")?"100%":e.height);break;case Fl.Center:t=_t($C||($C=XC(["\n        &.app-dialog::before{\n          height: 100vh;\n        }\n        .app-dialog-content{\n          width: ",";\n          max-height: 100vh;\n          margin: 0 auto;\n\n          .app-dialog-resize-container{\n            .app-dialog-resize-handlers{\n              position: fixed;\n              width: ","; /* Do not add height since it could be a mask */\n\n              .resize-handler{\n                position: absolute;\n                &.dialog-resize-bottom{\n                  width: ",";\n                }\n                &.dialog-resize-top{\n                  width: ",";\n                  top: 0;\n                }\n                &.dialog-resize-left{\n                  left: 0;\n                }\n                &.dialog-resize-right{\n                  left: calc(100% - ",");\n                }\n              }\n            }\n          }\n        }\n      "],["\n        &.app-dialog::before{\n          height: 100vh;\n        }\n        .app-dialog-content{\n          width: ",";\n          max-height: 100vh;\n          margin: 0 auto;\n\n          .app-dialog-resize-container{\n            .app-dialog-resize-handlers{\n              position: fixed;\n              width: ","; /* Do not add height since it could be a mask */\n\n              .resize-handler{\n                position: absolute;\n                &.dialog-resize-bottom{\n                  width: ",";\n                }\n                &.dialog-resize-top{\n                  width: ",";\n                  top: 0;\n                }\n                &.dialog-resize-left{\n                  left: 0;\n                }\n                &.dialog-resize-right{\n                  left: calc(100% - ",");\n                }\n              }\n            }\n          }\n        }\n      "])),e.width,e.width,n,n,"12px")}return t}function rT(e,t){var n,r,o,i,a,s,u,c,l=eT(e),f="transparent"===l.backgroundColor?"var(--light)":l.backgroundColor,d=0,p=0,h="0 auto";if(null===(n=e.boxShadow)||void 0===n?void 0:n.color){var g=(parseFloat(null===(r=e.boxShadow.blur)||void 0===r?void 0:r.split("px")[0])||0)+(parseFloat(null===(o=e.boxShadow.spread)||void 0===o?void 0:o.split("px")[0])||0),v=parseFloat(null===(i=e.boxShadow.offsetX)||void 0===i?void 0:i.split("px")[0])||0,m=parseFloat(null===(a=e.boxShadow.offsetX)||void 0===a?void 0:a.split("px")[0])||0;h=(g-m>0?g-m:0)+"px "+(g+v)+"px "+(g+m)+"px "+(g-v>0?g-v:0)+"px",d=d+g+v,p=p+g+m}var y="calc("+t.width+" - "+d+"px)",b="calc("+t.height+" - "+p+"px)",w=null,S=null;return e.border&&e.border.width&&e.border.color&&(w=e.border.color,S=e.border.width),_t(YC||(YC=XC(["\n    &.app-dialog{\n      /* margin: 0.5rem !important; */\n      margin: 0 !important;\n      border-radius:  ",";\n      background-color: transparent;\n      border: none;\n      box-shadow: unset;\n\n      &.dialog-animation-playing{\n        .jimu-popper--arrow{\n          visibility: hidden !important;\n        }\n\n        .popper-box{\n          overflow: visible !important; /*for animation is playing*/\n\n          .app-dialog-container{\n            box-shadow: ",';\n          }\n        }\n      }\n      &.dialog-animation-end{\n\n        &[data-popper-placement^="top"] .jimu-popper--arrow{\n          &::before{\n            border-top-color: ',";\n          }\n          &::after{\n            border-top-color: ",";\n            bottom: ",';\n          }\n        }\n\n        &[data-popper-placement^="bottom"] .jimu-popper--arrow{\n          &::before{\n            border-bottom-color: ',";\n          }\n          &::after{\n            border-bottom-color: ",";\n            top: ",';\n          }\n        }\n\n        &[data-popper-placement^="top"] .popper-box,\n        &[data-popper-placement^="bottom"] .popper-box{\n          box-shadow: ',";\n        }\n      }\n\n      .popper-box{\n        max-width: calc(100vw - ",");\n        max-height: calc(100vh - ",");\n        width: ",";\n        height: ",";\n        border-radius:  ",";\n      }\n\n      .app-dialog-animation-content{\n        height: 100%;\n\n        .app-dialog-container{\n          margin: ",";\n          max-width: calc(100vw - "," - ",");\n          max-height: calc(100vh - "," - ",");\n          width: ",";\n          height: ",";\n\n          border: ",";\n          box-shadow: ",";\n          border-radius:  ",";\n\n          .app-dialog-content{\n            width: 100%;\n            height: 100%;\n            border-radius:  ",";\n            background-color: "," ;\n            background-image: ",";\n            background-position: center center;\n            background-repeat: ",";\n            background-size: ",";\n          }\n        }\n      }\n\n    }\n  "],["\n    &.app-dialog{\n      /* margin: 0.5rem !important; */\n      margin: 0 !important;\n      border-radius:  ",";\n      background-color: transparent;\n      border: none;\n      box-shadow: unset;\n\n      &.dialog-animation-playing{\n        .jimu-popper--arrow{\n          visibility: hidden !important;\n        }\n\n        .popper-box{\n          overflow: visible !important; /*for animation is playing*/\n\n          .app-dialog-container{\n            box-shadow: ",';\n          }\n        }\n      }\n      &.dialog-animation-end{\n\n        &[data-popper-placement^="top"] .jimu-popper--arrow{\n          &::before{\n            border-top-color: ',";\n          }\n          &::after{\n            border-top-color: ",";\n            bottom: ",';\n          }\n        }\n\n        &[data-popper-placement^="bottom"] .jimu-popper--arrow{\n          &::before{\n            border-bottom-color: ',";\n          }\n          &::after{\n            border-bottom-color: ",";\n            top: ",';\n          }\n        }\n\n        &[data-popper-placement^="top"] .popper-box,\n        &[data-popper-placement^="bottom"] .popper-box{\n          box-shadow: ',";\n        }\n      }\n\n      .popper-box{\n        max-width: calc(100vw - ",");\n        max-height: calc(100vh - ",");\n        width: ",";\n        height: ",";\n        border-radius:  ",";\n      }\n\n      .app-dialog-animation-content{\n        height: 100%;\n\n        .app-dialog-container{\n          margin: ",";\n          max-width: calc(100vw - "," - ",");\n          max-height: calc(100vh - "," - ",");\n          width: ",";\n          height: ",";\n\n          border: ",";\n          box-shadow: ",";\n          border-radius:  ",";\n\n          .app-dialog-content{\n            width: 100%;\n            height: 100%;\n            border-radius:  ",";\n            background-color: "," ;\n            background-image: ",";\n            background-position: center center;\n            background-repeat: ",";\n            background-size: ",";\n          }\n        }\n      }\n\n    }\n  "])),l.borderRadiusStyle,(null===(s=e.boxShadow)||void 0===s?void 0:s.color)?l.boxShadowStyle:"0 0 10px 1px var(--light-600)",w,f,S,w,f,S,(null===(u=e.boxShadow)||void 0===u?void 0:u.color)?"unset":"0 0 10px 1px var(--light-600)","12px","12px",t.width,t.height,l.borderRadiusStyle,h,"12px",d+"px","12px",p+"px",y,b,e.border&&e.border.width&&e.border.color?l.borderStyle:"none",(null===(c=e.boxShadow)||void 0===c?void 0:c.color)?l.boxShadowStyle:"unset",l.borderRadiusStyle,l.borderRadiusStyle,f,l.backgroundImage,l.backgroundRepeat,l.backgroundSize)}var oT=O.useEffect,iT=O.useState,aT=O.useRef;var sT=function(e){var t,n,r,o,i,a,s=e.dialogJson,u=e.isOpen,c=e.jimuUI,l=e.jimuLayout,f=e.loadingCallBack,d=e.messages,p=e.cbxAnimation,h=e.isChecked,g=e.setCbxState,v=e.closeDialog,m=Ie((function(e){return e.appRuntimeInfo.currentPageId})),y=Ie((function(e){return e.appRuntimeInfo.appMode===Bi.Design})),b=aT(!1),w=aT(!1),S=iT(y?null:Symbol("init one by one")),I=S[0],E=S[1],x=iT(y?null:Symbol("init as one")),C=x[0],T=x[1],j=Ie((function(e){var t;return(null===(t=e.appRuntimeInfo.animationPreview)||void 0===t?void 0:t.dialogId)===s.id?e.appRuntimeInfo.animationPreview:null}),J),A=aT(),P=ye();function _(){var e;(null===(e=s.effect)||void 0===e?void 0:e.type)!==Xx.None&&(w.current=!1,T(Symbol("play dialog "+s.id)))}function D(){var e;(null===(e=s.oneByOneEffect)||void 0===e?void 0:e.type)!==Xx.None&&(b.current=!1,E(Symbol("play dialog widgets "+s.id)))}oT((function(){return y||(_(),D()),function(){}}),[y,s.id,m]),oT((function(){j&&(j.playMode!==eC.AsOne&&D(),j.playMode!==eC.OneByOne&&_())}),[j]);var k=O.useCallback((function(){w.current?w.current=!1:f(!1)}),[]),R=null,M=null,N=null,L=w.current?null:(w.current=!0,C);(null===(t=s.effect)||void 0===t?void 0:t.type)!==Xx.None&&L&&(R=null===(n=s.effect)||void 0===n?void 0:n.type,M=null===(o=null===(r=s.effect)||void 0===r?void 0:r.option)||void 0===o?void 0:o.configType,N=null===(a=null===(i=s.effect)||void 0===i?void 0:i.option)||void 0===a?void 0:a.direction);var U=c.ModalBody,F=c.ModalFooter,V=l.LayoutEntry;return At(PC.Provider,{value:{trigger:Kx.Manual,setting:!u||y&&!(null==j?void 0:j.id)?null:s.oneByOneEffect,inheritedOneByOneSetting:null,playId:b.current?null:(b.current=!0,I),depth:0}},At(UC,{type:R,trigger:Kx.Manual,configType:M,direction:N,playId:L,ref:A,style:{},onAnimationEnd:k,className:"app-dialog-animation-content"},s.mode===Ul.Fixed&&At(U,{className:"dialog-content"},At(V,{layouts:s.layout,className:"w-100 h-100"})),s.mode===Ul.Fixed&&s.interactionType&&At(F,{onClick:function(){return rC(P)},className:Ce("dialog-footer",{"d-block":s.interactionType===Vl.ButtonBlock})},At("div",{className:"d-flex flex-grow-1 overflow-hidden text-nowrap"},p?At("div",{className:"cbx-animation"}):At(c.Checkbox,{style:{cursor:"pointer"},onChange:function(e){return g(e.target.checked)},checked:h,disabled:y}),At("label",{className:"ml-2 text-break overflow-hidden",style:{fontSize:s.interactionStyles.textSize,textOverflow:"ellipsis",cursor:y?"inherit":"pointer"},onClick:function(){return!y&&g(!h)}},s.interactionStyles.text||d(s.confirmBeforeClose?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText"))),s.interactionType!==Vl.NoButton&&At("div",{className:"d-flex flex-row-reverse"},At(c.Button,{icon:!0,type:"primary",disabled:y||s.interactionType&&s.confirmBeforeClose&&!h,onClick:function(e){v()},style:{fontSize:s.interactionStyles.buttonTextSize}},s.interactionStyles.buttonText||d("ok")))),s.mode===Ul.Anchored&&At("div",{className:"app-dialog-container"},At("div",{className:"app-dialog-content"},At(V,{layouts:s.layout,className:"w-100 h-100"})))))},uT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},cT=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},lT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},fT=O.useEffect,dT=O.useState,pT=O.useRef;var hT=function(){var e=WS();return O.useCallback((function(t,n){return e.formatMessage({id:t,defaultMessage:nm[t]},n)}),[e])};function gT(e,t,n,r,o,i,a,s){var u,c,l=!1;if(s===t.id&&!t.isSplash&&!n.isOpenByPage&&!t.confirmBeforeClose)return l;if(t.isSplash||n.isOpenByPage){var f=t.isSplash?t.id:e+"-"+t.id;n.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose)?((l="true"===localStorage.getItem(mT(f,r,o)))&&vT(i,f,a),t.confirmBeforeClose||l||(l=null===(u=null==i?void 0:i[f])||void 0===u?void 0:u.isClosed)):l=null===(c=null==i?void 0:i[f])||void 0===c?void 0:c.isClosed}return l}function vT(e,t,n){var r;(null===(r=null==e?void 0:e[t])||void 0===r?void 0:r.isClosed)||n(dp(e=(e||xe({})).setIn([t,"isClosed"],!0)))}var mT=function(e,t,n){return oC(t)+"-"+e+"-"+n};function yT(){return uT(this,void 0,void 0,(function(){return cT(this,(function(e){switch(e.label){case 0:return[4,Zc("jimu-ui",["Modal","ModalBody","ModalFooter","Checkbox","Button"])];case 1:return[2,e.sent()]}}))}))}var bT=function(e){var t,n=e.dialogJson,r=lT(e,["dialogJson"]),o=dT(null),i=o[0],a=o[1],s=dT(null),u=s[0],c=s[1],l=dT(null),f=l[0],d=l[1],p=dT(null),h=p[0],g=p[1],v=Ie((function(e){return e.queryObject.draft}))?"draft":"release",m=Ie((function(e){return e.appConfig.timestamp})),y=Ie((function(e){return e.appRuntimeInfo.currentPageId})),b=Ie((function(e){return e.appConfig.pages[y].autoOpenDialogId})),w=Ie((function(e){return e.appRuntimeInfo.currentDialogId})),S=Ie((function(e){return e.appRuntimeInfo.appMode===Bi.Design})),I=Ie((function(e){var t,n;return null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===n?void 0:n.lockLayout})),O=Ie((function(e){return e.browserSizeMode})),E=Ie((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===n?void 0:n.viewPortSize)||void 0===r?void 0:r[O]}))||Ju[O][1],x=window.jimuConfig.isInBuilder?E.height:window.innerHeight,C=ye(),T=hT(),j=Ie((function(e){return e.queryObject.dlg})),A=Ie((function(e){return e.appRuntimeInfo.dialogInfos})),P=Ie((function(e){var t;return n.isSplash?n.id:e.appConfig.dialogs&&(null===(t=e.appConfig.dialogs[Object.keys(e.appConfig.dialogs).find((function(t){return e.appConfig.dialogs[t].isSplash}))])||void 0===t?void 0:t.id)}),J),_=dT(r.isOpenByPage&&w===P||n.id===j&&w!==j||w===n.id),D=_[0],k=_[1],R=r.isOpenByPage?y+"-"+n.id:n.id,M=dT(!(!A||!A[R])&&A[R].checked),N=M[0],L=M[1],U=dT(!0),F=U[0],V=U[1],B=n.sizeMode[O]||n.sizeMode[Li.Large],G=B.position===Fl.Center,W=pT(null),z=dT(null),q=z[0],H=z[1],$=dT(!0),Y=$[0],K=$[1],X=dT(n.effect&&n.effect.type!==Xx.None),Q=X[0],Z=X[1],ee=dT(!1),te=ee[0],ne=ee[1],re=function(e){var t;return null===(t=null==A?void 0:A[e])||void 0===t?void 0:t.isClosed},oe=function(){return S&&!I&&window.jimuConfig.isInBuilder};fT((function(){oe()&&f&&h&&yE((function(){if(q&&q.unset(),W.current){var e=n.sizeMode[O]?O:Li.Large;H(function(e,t,n,r,o,i){var a,s,u,c,l,f=n.sizeMode[r],d=f.position;d===Fl.Center?l={top:".dialog-resize-top",left:".dialog-resize-left",bottom:".dialog-resize-bottom",right:".dialog-resize-right"}:d===Fl.Top?l={bottom:".dialog-resize-bottom"}:d===Fl.Bottom?l={top:".dialog-resize-top"}:d===Fl.Left?l={right:".dialog-resize-right"}:d===Fl.Right&&(l={left:".dialog-resize-left"});var p=f.position!==Fl.Top&&f.position!==Fl.Bottom&&parseFloat(f.width.includes("%")?f.width.split("%")[0]:f.width.split("px")[0]),h=f.position!==Fl.Left&&f.position!==Fl.Right&&parseFloat(f.height.includes("%")?f.height.split("%")[0]:f.height.split("px")[0]);return e(t).resizable({edges:l}).on("resizestart",(function(e){e.stopPropagation(),a=0,s=0;var n=t.getBoundingClientRect();u=n.width,c=n.height,t.style.minWidth="0px",t.style.minHeight="0px",i(!1)})).on("resizemove",(function(e){e.stopPropagation();var r=e.deltaRect;a+=r.width,s+=r.height;var o=p&&u+a+"px",i=h&&c+s+"px";t.style.width=o,t.style.height=i,f.position===Fl.Right?document.querySelector('div[id="'+n.id+'"]').style.width=o:f.position===Fl.Bottom?document.querySelector('div[id="'+n.id+'"]').style.height=i:f.position===Fl.Center&&(document.querySelector('div[id="'+n.id+'"] > div.app-dialog-content').style.width=o,document.querySelector('div[id="'+n.id+'"]  div.app-dialog-animation-content').style.height=i)})).on("resizeend",(function(e){e.stopPropagation(),i(!0),t.style.width=null,t.style.minWidth=null,t.style.height=null,t.style.minHeight=null,f.position===Fl.Right?document.querySelector('div[id="'+n.id+'"]').style.width=null:f.position===Fl.Bottom?document.querySelector('div[id="'+n.id+'"]').style.height=null:f.position===Fl.Center&&(document.querySelector('div[id="'+n.id+'"] > div.app-dialog-content').style.width=null,document.querySelector('div[id="'+n.id+'"]  div.app-dialog-animation-content').style.height=null);var l=p?p*Math.round(u+a)/u+f.width.split(p+"")[1]:null,d=h?h*Math.round(c+s)/c+f.height.split(h+"")[1]:null,g=Jf().getState().appConfig.dialogs[Jf().getState().appRuntimeInfo.currentDialogId].setIn(["sizeMode",r,"width"],null!=l?l:f.width).setIn(["sizeMode",r,"height"],null!=d?d:f.height);o().editDialog(g).exec()}))}(h,W.current,n,e,f,V))}}),W.current?0:1e3)()}),[S,I,w,n.sizeMode[O],B.position,B.width,B.height,f,h]),fT((function(){L(!1)}),[w]),fT((function(){Z(n.effect&&n.effect.type!==Xx.None)}),[n.effect,w]),fT((function(){return Promise.all([yT(),iC()]).then((function(e){a(e[0]),c(e[1])})),window.jimuConfig.isInBuilder&&(f||Zc("jimu-for-builder",["getAppConfigAction"]).then((function(e){d((function(){return e.getAppConfigAction}))})),h||Zc("jimu-core/dnd").then((function(e){g((function(){return e.interact}))}))),(n.isSplash&&!re(P)&&(window.jimuConfig.isInBuilder||"true"!==localStorage.getItem(mT(P,v,m)))||r.isOpenByPage&&(P&&(re(P)||window.jimuConfig.isInBuilder||"true"===localStorage.getItem(mT(P,v,m)))||!P))&&!gT(y,n,r,v,m,A,C)&&n.id!==j&&n.id!==w&&(C(fp(n.id)),C(bp(null))),function(){S&&q&&q.unset();var e=Jf().getState(),t=e.appRuntimeInfo.dialogInfos;if(t){var n=t[ae()];(null==n?void 0:n.canClose)&&ie(e)}}}),[]),fT((function(){var e;(null===(e=null==A?void 0:A[w])||void 0===e?void 0:e.alertVersion)>=1&&(ne(!0),yE((function(){ne(!1)}),800)())}),[null===(t=null==A?void 0:A[w])||void 0===t?void 0:t.alertVersion]),fT((function(){if(!localStorage.getItem("exb-link-dialog")){var e=!1;(n.isSplash||r.isOpenByPage||w)&&(e=!gT(y,n,r,v,m,A,C,j)),e!==D&&k(e)}}));var ie=function(e){var t,o;if(n.isSplash||r.isOpenByPage){!function(e,t,n,r,o,i,a){var s,u=t.isSplash?t.id:e+"-"+t.id;n.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose&&(null===(s=null==i?void 0:i[u])||void 0===s?void 0:s.checked))&&localStorage.setItem(mT(u,r,o),"true");vT(i,u,a)}(y,n,r,v,m,(null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.dialogInfos)||A,C);var i=se(e);C(fp(i)),k(!1),i||C(bp($i.Body))}else vT((null===(o=null==e?void 0:e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos)||A,n.id,C),Rw(null),C(bp($i.Body))},ae=function(){return r.isOpenByPage?y+"-"+n.id:n.id},se=function(e){var t,o,i,a,s,u,c,l=j,f=w;if((n.isSplash||r.isOpenByPage)&&(l=null==e?void 0:e.queryObject.dlg,f=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId,window.jimuConfig.isInBuilder)){if(n.isSplash){if(b&&!(null===(a=null===(i=e?null===(o=e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos:A)||void 0===i?void 0:i[y+"-"+b])||void 0===a?void 0:a.isClosed))return b;if(n.isSplash&&l===n.id&&(null===(c=null===(u=null===(s=null==e?void 0:e.appRuntimeInfo)||void 0===s?void 0:s.dialogInfos)||void 0===u?void 0:u[n.id])||void 0===c?void 0:c.isClosed))return null}return l}var d=n.isSplash&&(b||l)||r.isOpenByPage&&f!==l&&l||null;return f===d&&(d=null),d};if(!i||!u)return null;var ue=i.Modal;return At(ue,{isOpen:D,fade:!1,disableActivateOverlay:!0,toggle:function(){var e,t;if(S)rC(C);else if(n.interactionType&&n.confirmBeforeClose&&!N){var r=(A||xe({})).set(ae(),{canClose:!1,checked:!1,alertVersion:(null!==(t=null===(e=null==A?void 0:A[ae()])||void 0===e?void 0:e.alertVersion)&&void 0!==t?t:0)+1,isClosed:!1});C(dp(r))}else D&&n.closeWhenClickOverlay?ie():rC(C)},centered:G,css:nT(B),id:n.id,className:"app-dialog",wrapClassName:"app-dialog-wrap app-dialog-wrap-"+n.id,modalClassName:"app-dialog-modal",backdropClassName:"app-dialog-backdrop",contentClassName:Ce("app-dialog-content",{"overflow-visible h-auto":!F||Q}),onOpened:function(){K(!1)}},At(Pt,{styles:tT(n,D,x,B)}),At("div",{className:"app-dialog-resize-container",css:_t(KC||(KC=XC(["\n    .app-dialog-resize-handlers{\n        max-width: 100vw;\n\n      .resize-handler{\n        width: 100%;\n        height: 100%;\n        position: fixed;\n        z-index: 1;\n\n        &.dialog-resize-bottom{\n          height: ",";\n          cursor: ns-resize;\n        }\n        &.dialog-resize-top{\n          height: ",";\n          cursor: ns-resize;\n          top: 0;\n        }\n        &.dialog-resize-right{\n          width: ",";\n          right: ",";\n          cursor: ew-resize;\n          top: 0;\n        }\n        &.dialog-resize-left{\n          width: ",";\n          left: ",";\n          cursor: ew-resize;\n          top: 0;\n        }\n\n        &:hover {\n          /* background: red; */\n        }\n      }\n    }\n  "],["\n    .app-dialog-resize-handlers{\n        max-width: 100vw;\n\n      .resize-handler{\n        width: 100%;\n        height: 100%;\n        position: fixed;\n        z-index: 1;\n\n        &.dialog-resize-bottom{\n          height: ",";\n          cursor: ns-resize;\n        }\n        &.dialog-resize-top{\n          height: ",";\n          cursor: ns-resize;\n          top: 0;\n        }\n        &.dialog-resize-right{\n          width: ",";\n          right: ",";\n          cursor: ew-resize;\n          top: 0;\n        }\n        &.dialog-resize-left{\n          width: ",";\n          left: ",";\n          cursor: ew-resize;\n          top: 0;\n        }\n\n        &:hover {\n          /* background: red; */\n        }\n      }\n    }\n  "])),"12px","12px","12px","0px","12px","0px"),ref:function(e){return W.current=e}},At("div",{className:"w-100 h-100"},D&&!Y&&At(sT,{dialogJson:n,isOpen:D,jimuUI:i,jimuLayout:u,cbxAnimation:te,messages:T,isChecked:N,setCbxState:function(e){L(e);var t=!n.interactionType||!n.confirmBeforeClose||e,r=(A||xe({})).set(ae(),{canClose:t,checked:e,isClosed:!1});C(dp(r))},closeDialog:ie,loadingCallBack:function(e){return Z(e)}})),oe()&&At("div",{className:Ce("app-dialog-resize-handlers",{"resize-center":B.position===Fl.Center})},function(e,t){var n=[];return e&&(t.position!==Fl.Bottom&&t.position!==Fl.Center||n.push(At("span",{key:"1",className:"resize-handler dialog-resize-top"})),t.position!==Fl.Top&&t.position!==Fl.Center||n.push(At("span",{key:"2",className:"resize-handler dialog-resize-bottom"})),t.position!==Fl.Right&&t.position!==Fl.Center||n.push(At("span",{key:"3",className:"resize-handler dialog-resize-left"})),t.position!==Fl.Left&&t.position!==Fl.Center||n.push(At("span",{key:"4",className:"resize-handler dialog-resize-right"}))),n}(S,B))))},wT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ST=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},IT=O.useEffect,OT=O.useState,ET=[{name:"preventOverflow",options:{altAxis:!0}}];function xT(){return wT(this,void 0,void 0,(function(){return ST(this,(function(e){switch(e.label){case 0:return[4,Zc("jimu-ui",["Popper"])];case 1:return[2,e.sent()]}}))}))}var CT=function(e){var t=e.dialogJson,n=e.opener,r=e.toggle,o=OT(null),i=o[0],a=o[1],s=OT(null),u=s[0],c=s[1],l=OT(t.effect&&t.effect.type!==Xx.None),f=l[0],d=l[1],p=Ie((function(e){return e.appRuntimeInfo.appMode===Bi.Design})),h=Ie((function(e){return e.appRuntimeInfo.currentDialogId})),g=Ie((function(e){return e.browserSizeMode})),v=t.sizeMode[g]||t.sizeMode[Li.Large];if(IT((function(){Promise.all([xT(),iC()]).then((function(e){a(e[0]),c(e[1])}))}),[]),IT((function(){p&&h===t.id&&r()}),[p]),!i||!u)return null;var m=i.Popper;return At(m,{open:!0,showArrow:!!n,toggle:r,reference:n,modifiers:ET,css:rT(t,v),disableActivateOverlay:t.closeWhenClickOverlay,className:Ce("app-dialog",{"dialog-animation-playing":f,"dialog-animation-end":!f})},At(sT,{dialogJson:t,isOpen:!0,jimuUI:i,jimuLayout:u,loadingCallBack:function(e){return d(e)}}))},TT=function(){return(TT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},jT=O.useEffect;function AT(e){var t=Ie((function(e){return e.queryObject.draft}))?"draft":"release",n=Ie((function(e){return e.appConfig.timestamp})),r=Ie((function(e){return e.appRuntimeInfo.currentPageId})),o=Ie((function(e){return e.appRuntimeInfo.appMode===Bi.Design})),i=Ie((function(e){return e.browserSizeMode})),a=e.dialogJson.sizeMode[i]?i:Li.Large,s=ye();if(jT((function(){e.runtime&&function(e,t){var n=oC(e);Object.keys(localStorage).map((function(e){e.includes(n)&&!e.includes(t)&&localStorage.removeItem(e)}))}(t,n)}),[e.runtime,t,n]),jT((function(){s(pp(null))}),[o,e.dialogJson.id,r]),e.dialogJson.mode===Ul.Fixed)return At(bT,TT({},e));if(window.jimuConfig.isInBuilder&&!e.opener){var u=e.dialogJson.set("mode",Ul.Fixed).set("isOpenerDlg",!0).setIn(["sizeMode",a,"position"],Fl.Center);return At(bT,{dialogJson:u,opener:e.opener,isOpenByPage:e.isOpenByPage})}return At(CT,TT({},e))}var PT,_T;!function(e){e.Horizontal="H",e.Vertical="V"}(PT||(PT={})),function(e){e.Cube="CUBE",e.Cover="COVER",e.Fade="FADE",e.Push="PUSH",e.Box="BOX",e.None="None"}(_T||(_T={}));var DT=function(){function e(e,t){void 0===e&&(e=!1),void 0===t&&(t=PT.Horizontal),this.isRTL=e,this.direction=t}return e.prototype.initRotate=function(){return this.direction===PT.Vertical?"rotateX(-90deg)":this.isRTL?"rotateY(90deg)":"rotateY(-90deg)"},e.prototype.getTransitionProps=function(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)},e.prototype.getDiscreteTransitionProps=function(e,t,n,r){var o=e===t||e===n,i=this.getDiscreteOrigin(e,t,n,r);if(!o)return{display:"none",transformOrigin:""};var a={},s=this.direction===PT.Horizontal&&this.isRTL?-1:1;if(e===t){var u=t>n||r?90:-90;a.from=Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:u*s,rotateY:this.direction===PT.Horizontal?-u*s:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},aC,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.reset=!0}else a.from=Object.assign({},aC,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:e>t&&!r?90:-90,rotateY:this.direction===PT.Horizontal?e>t&&!r?-90*s:90*s:0,opacity:1,transformOrigin:i}),a.reset=!0;return a},e.prototype.getContinuousTransitionProps=function(e,t,n,r,o){if(void 0===r&&(r=1),!(e===t||e===n))return{display:"none",transformOrigin:""};var i,a=r-n;t===n&&(a=1),i=this.direction===PT.Vertical||this.isRTL?e===t?90*(1-a):-90*a:e===t?-90*(1-a):90*a;var s=Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:i,rotateY:this.direction===PT.Horizontal?i:0,opacity:1,transformOrigin:this.getOrigin(e,t,n)});if(e===t&&o){var u,c={};return u=this.direction===PT.Vertical||this.isRTL?90:-90,c.from=Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:u,rotateY:this.direction===PT.Horizontal?u:0,opacity:1,transformOrigin:this.getOrigin(e,t,n)}),c.to=s,c.reset=!0,c}return s.reset=!1,s},e.prototype.getOrigin=function(e,t,n){return e===t?this.direction===PT.Vertical?"bottom":this.isRTL?"left":"right":e===n?this.direction===PT.Vertical?"top":this.isRTL?"right":"left":void 0},e.prototype.getDiscreteOrigin=function(e,t,n,r){if(this.direction===PT.Vertical){if(e===t)return t>n||r?"bottom":"top";if(e===n)return t>n||r?"top":"bottom"}if(this.isRTL){if(e===t)return t>n||r?"left":"right";if(e===n)return t>n||r?"right":"left"}else{if(e===t)return t>n||r?"right":"left";if(e===n)return t>n||r?"left":"right"}return""},e.prototype.transform=function(e,t,n,r,o){if(t!==n&&t!==r)return null;var i=e.rotateX,a=e.rotateY;return i&&a?kr([i,a],(function(e,t){return"perspective(1000px) rotateX("+e+"deg) rotateY("+t+"deg)"})):null},e}(),kT=function(){function e(e,t){void 0===e&&(e=!1),void 0===t&&(t=PT.Horizontal),this.isRTL=e,this.direction=t}return e.prototype.initOffset=function(e,t,n,r){if(t!==n)return 0;var o=e-r;return n===r&&(o=1),this.direction===PT.Horizontal&&this.isRTL?100*(o-1):100*(1-o)},e.prototype.getTransitionProps=function(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)},e.prototype.getDiscreteTransitionProps=function(e,t,n,r){if(!(e===t||e===n))return{display:"none"};var o={},i=this.direction===PT.Horizontal&&this.isRTL?-1:1;if(e===t){var a=t>n||r?100*i:-100*i;o.from=Object.assign({},aC,{offsetX:this.direction===PT.Horizontal?a:0,offsetY:this.direction===PT.Horizontal?0:a,opacity:1,display:"block",zIndex:1}),o.to=Object.assign({},aC,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:1}),o.reset=!0}else e===n&&(o.from=Object.assign({},aC,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0}),o.to=Object.assign({},aC,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0}),o.reset=!0);return o},e.prototype.getContinuousTransitionProps=function(e,t,n,r,o){if(void 0===r&&(r=1),!(e===t||e===n))return{display:"none"};var i=this.initOffset(r,e,t,n),a=Object.assign({},aC,{display:"block",offsetX:this.direction===PT.Horizontal?i:0,offsetY:this.direction===PT.Horizontal?0:i,opacity:1});if(e===t&&o){var s,u={};return s=this.direction===PT.Horizontal&&this.isRTL?-100:100,u.from=Object.assign({},aC,{display:"block",offsetX:this.direction===PT.Horizontal?s:0,offsetY:this.direction===PT.Horizontal?0:s,opacity:1}),u.to=a,u.reset=!0,u}return a.reset=!1,a},e.prototype.transform=function(e,t,n,r,o){if(t!==n&&t!==r)return null;var i=e.offsetX,a=e.offsetY;return i&&a?kr([i,a],(function(e,t){return"translate3d("+e+"%, "+t+"%, 0)"})):null},e}(),RT=function(){function e(){}return e.prototype.getTransitionProps=function(e,t,n,r,o){return o>=0?this.getContinuousTransitionProps(e,t,n,o):this.getDiscreteTransitionProps(e,t,n)},e.prototype.getDiscreteTransitionProps=function(e,t,n){if(!(e===t||e===n))return{display:"none"};var r={};return e===t?(r.from=Object.assign({},aC,{opacity:0,zIndex:0,display:"block"}),r.to=Object.assign({},aC,{opacity:1,zIndex:1,display:"block"}),r.reset=!0):e===n&&(r.from=Object.assign({},aC,{opacity:1,zIndex:1,display:"block"}),r.to=Object.assign({},aC,{opacity:0,zIndex:0,display:"block"}),r.reset=!0),r},e.prototype.getContinuousTransitionProps=function(e,t,n,r){if(void 0===r&&(r=1),!(e===t||e===n))return{display:"none"};var o=r-n;return t===n&&(o=1),Object.assign({},aC,{display:"block",opacity:e===t?o:1-o,zIndex:e===t?1:0,reset:!1})},e.prototype.transform=function(e,t,n,r,o){return""},e}(),MT=function(){function e(e,t){void 0===e&&(e=!1),void 0===t&&(t=PT.Horizontal),this.isRTL=e,this.direction=t}return e.prototype.initOffset=function(e,t,n,r){var o=e-r;return n===r&&(o=1),t===n?this.direction===PT.Horizontal&&this.isRTL?100*(o-1):100*(1-o):this.direction===PT.Horizontal&&this.isRTL?100*o:-100*o},e.prototype.getTransitionProps=function(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)},e.prototype.getDiscreteTransitionProps=function(e,t,n,r){if(!(e===t||e===n))return{display:"none"};var o={},i=this.direction===PT.Horizontal&&this.isRTL?-1:1;if(e===t){var a=t>n||r?100*i:-100*i;o.from=Object.assign({},aC,{offsetX:this.direction===PT.Horizontal?a:0,offsetY:this.direction===PT.Horizontal?0:a,opacity:1,display:"block"}),o.to=Object.assign({},aC,{offsetX:0,offsetY:0,opacity:1,display:"block"}),o.reset=!0}else if(e===n){a=e>t&&!r?100*i:-100*i;o.from=Object.assign({},aC,{offsetX:0,offsetY:0,opacity:1,display:"block"}),o.to=Object.assign({},aC,{offsetX:this.direction===PT.Horizontal?a:0,offsetY:this.direction===PT.Horizontal?0:a,opacity:1,display:"block"}),o.reset=!0}return o},e.prototype.getContinuousTransitionProps=function(e,t,n,r,o){if(void 0===r&&(r=1),!(e===t||e===n))return{display:"none"};var i=this.initOffset(r,e,t,n),a=Object.assign({},aC,{display:"block",offsetX:this.direction===PT.Horizontal?i:0,offsetY:this.direction===PT.Horizontal?0:i,opacity:1});if(o&&e===t){var s;s=this.direction===PT.Horizontal&&this.isRTL?-100:100;var u={};return u.from=Object.assign({},aC,{display:"block",offsetX:this.direction===PT.Horizontal?s:0,offsetY:this.direction===PT.Horizontal?0:s,opacity:1}),u.to=a,u.reset=!0,u}return a.reset=!1,a},e.prototype.transform=function(e,t,n,r,o){if(t!==n&&t!==r)return null;var i=e.offsetX,a=e.offsetY;return i&&a?kr([i,a],(function(e,t){return"translate3d("+e+"%, "+t+"%, 0)"})):null},e}(),NT=function(){function e(e,t){void 0===e&&(e=!1),void 0===t&&(t=PT.Horizontal),this.isRTL=e,this.direction=t}return e.prototype.initState=function(e,t,n,r){var o=e-r;return n===r&&(o=1),t===n?[100*(1-o),60*(1-o)]:[-100*o,-60*o]},e.prototype.getContinuousOrigin=function(e,t,n){return this.direction===PT.Vertical?e===t?"top":"bottom":e===t?this.isRTL?"right":"left":this.isRTL?"left":"right"},e.prototype.getDiscreteOrigin=function(e,t,n,r){return this.direction===PT.Vertical?e===t?t>n||r?"top":"bottom":e<t||r?"bottom":"top":this.isRTL?e===t?t>n||r?"right":"left":e<t||r?"left":"right":e===t?t>n||r?"left":"right":e<t||r?"right":"left"},e.prototype.getTransitionProps=function(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)},e.prototype.getDiscreteTransitionProps=function(e,t,n,r){var o=e===t||e===n,i=this.getDiscreteOrigin(e,t,n,r);if(!o)return{display:"none",transformOrigin:i};var a=this.isRTL?-1:1,s={};if(e===t){var u=t>n||r?100:-100,c=t>n||r?60:-60;s.from=Object.assign({},aC,{rotateX:this.direction===PT.Horizontal?0:-c,rotateY:this.direction===PT.Horizontal?c*a:0,offsetX:this.direction===PT.Horizontal?u*a:0,offsetY:this.direction===PT.Horizontal?0:u,opacity:0,display:"block",zIndex:1,transformOrigin:i}),s.to=Object.assign({},aC,{rotateX:0,rotateY:0,offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:1,transformOrigin:i}),s.reset=!0}else{u=t>n||r?-100:100,c=t>n||r?-60:60;s.from=Object.assign({},aC,{rotateX:0,rotateY:0,offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0,transformOrigin:i}),s.to=Object.assign({},aC,{rotateX:this.direction===PT.Horizontal?0:-c,rotateY:this.direction===PT.Horizontal?c*a:0,offsetX:this.direction===PT.Horizontal?u*a:0,offsetY:this.direction===PT.Horizontal?0:u,opacity:0,display:"block",zIndex:0,transformOrigin:i}),s.reset=!0}return s},e.prototype.getContinuousTransitionProps=function(e,t,n,r,o){if(void 0===r&&(r=1),!(e===t||e===n))return{display:"none",transformOrigin:""};var i=this.initState(r,e,t,n),a=i[0],s=i[1],u=r-n;t===n&&(u=1);var c=this.isRTL?-1:1;if(e===t){var l={},f=Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:-s,rotateY:this.direction===PT.Horizontal?s*c:0,offsetX:this.direction===PT.Horizontal?a*c:0,offsetY:this.direction===PT.Horizontal?0:a,opacity:u,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,n)});return o?(l.from=Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:-60,rotateY:this.direction===PT.Horizontal?60*c:0,offsetX:this.direction===PT.Horizontal?100*c:0,offsetY:this.direction===PT.Horizontal?0:100,opacity:u,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,n)}),l.to=f,l.reset=!0,l):(f.reset=!1,f)}return Object.assign({},aC,{display:"block",rotateX:this.direction===PT.Horizontal?0:-s,rotateY:this.direction===PT.Horizontal?s*c:0,offsetX:this.direction===PT.Horizontal?a*c:0,offsetY:this.direction===PT.Horizontal?0:a,opacity:1-u,transformOrigin:this.getContinuousOrigin(e,t,n),zIndex:0,reset:!1})},e.prototype.transform=function(e,t,n,r,o){if(t!==n&&t!==r)return null;var i=e.offsetX,a=e.offsetY,s=e.rotateX,u=e.rotateY;return null==i||null==u?null:kr([i,a,s,u],(function(e,t,n,r){return"perspective(1000px) translate3d("+e+"%, "+t+"%, 0) rotateX("+n+"deg) rotateY("+r+"deg)"}))},e}(),LT=function(){function e(){}return e.prototype.getTransitionProps=function(e,t,n,r,o){return void 0===o&&(o=1),Object.assign({},aC,{display:e===t?"block":"none",opacity:1,zIndex:e===t?1:0,reset:!0})},e.prototype.transform=function(e,t,n,r,o){return""},e}();function UT(){var e,t;return null!==(t=null===(e=Jf().getState().appContext)||void 0===e?void 0:e.isRTL)&&void 0!==t&&t}function FT(e){return Math.abs(e-Math.round(e))<1e-7}function VT(e,t){var n,r,o=BT(e,0,1)*(t-1),i=Math.floor(o);return r=i,n=BT(n=(r=FT(o)?Math.round(o)-1:i)+1,0,t-1),{previousIndex:r=BT(r,0,t-1),progress:o,currentIndex:n}}function BT(e,t,n){return Math.max(t,Math.min(e,n))}function GT(e,t){switch(void 0===t&&(t=PT.Horizontal),e){case _T.Cover:return new kT(UT(),t);case _T.Cube:return new NT(UT(),t);case _T.Fade:return new RT;case _T.Push:return new MT(UT(),t);case _T.Box:return new DT(UT(),t);default:return new LT}}var WT=function(){return(WT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function qT(e){var t=e.useProgress,n=void 0!==t&&t,r=e.useStep,o=e.progress,i=e.currentIndex,a=e.previousIndex,s=e.direction,u=e.transitionType,c=e.children,l=e.playId,f=e.withOneByOne,d=e.loop,p=O.useRef(),h=O.useRef(),g=O.useRef(),v=O.useRef(),m=O.useRef(),y=O.useState(),b=(y[0],y[1]),w=O.Children.count(c),S=O.useContext(PC),I=S||{},E=I.setting,x=I.playId,C=I.onAnimationEnd,T=O.useMemo((function(){return GT(u,s)}),[u,s]),j=Ie((function(e){var t;return u&&u!==_T.None?(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===Bi.Design:null})),A=O.useMemo((function(){var e=o,t=!1,r=!1;if(n){var s=VT(o,w);e=s.progress,Math.round(100*v.current)!==Math.round(100*e)&&(t=!0,v.current=s.progress);var u=!0;p.current===s.currentIndex-1?r=!0:FT(o*(w-1))&&s.currentIndex===p.current-1&&(u=!1),u&&(p.current=s.currentIndex,h.current=s.previousIndex)}else p.current===i&&h.current===a||(t=!0,p.current=i,h.current=a);return m.current=t,[e,r]}),[n,o,w,i,a]),P=A[0],_=A[1],D=l&&g.current!==l||m.current,k=Vr(w,(function(e){return Object.assign({},aC,{zIndex:e===p.current?1:0,display:e===p.current?"block":"none"})})),R=k[0],M=k[1],N=k[2],L=function(e,t,n,r,o,i){void 0===r&&(r=!1),void 0===o&&(o=!1),N(),M((function(a){var s=a!==e?void 0:function(){"function"==typeof i&&i(),U()};return WT(WT({},T.getTransitionProps(a,e,t,d,n,r)),{config:{duration:400},immediate:o,onRest:s})}))},U=function(){E&&E.type!==Xx.None&&b(Symbol())};O.useEffect((function(){if(l&&g.current!==l)return g.current=l,m.current=!1,void L(p.current,h.current,void 0);m.current&&(m.current=!1,L(p.current,h.current,P,_,!(!n||r)))}));var F=function(e){var t=O.useRef();return O.useCallback((function(n){var r,o,i;return e&&(null===(r=t.current)||void 0===r?void 0:r.symbol)!==e&&(t.current={symbol:e,used:!1}),n&&(null===(o=t.current)||void 0===o?void 0:o.symbol)&&!(null===(i=t.current)||void 0===i?void 0:i.used)?(t.current.used=!0,t.current.symbol):null}),[e])}(x),V=function(e){var t=e.sectionPlayId,n=e.withOneByOne,r=e.willPlayTransition,o=O.useRef();return O.useCallback((function(e){var i,a,s;if(!n)return null;if(t&&(null===(i=o.current)||void 0===i?void 0:i.symbol)!==t&&(o.current={symbol:t,used:!1}),(null===(a=o.current)||void 0===a?void 0:a.symbol)&&!(null===(s=o.current)||void 0===s?void 0:s.used)){if(r)return e?Symbol("prepare animation before transition"):null;if(e)return o.current.used=!0,o.current.symbol}return null}),[t,n,r])}({sectionPlayId:l,withOneByOne:f,willPlayTransition:D}),B=function(e){var t=e.activeViewIndex,n=e.willPlayTransition,r=O.useRef();return O.useCallback((function(e,o){var i,a;if(e)return null;if((null===(i=r.current)||void 0===i?void 0:i.index)!==t&&(r.current={index:t,used:!1}),!(null===(a=r.current)||void 0===a?void 0:a.used)){if(n)return o?Symbol("prepare animation before transition"):null;if(o)return r.current.used=!0,Symbol("play animation after transition")}return null}),[t,n])}({activeViewIndex:p.current,willPlayTransition:D}),G=function(e){var t=e===p.current;return F(t)||V(t)||B(j,t)},W=function(){"function"==typeof C&&C()};return O.createElement(O.Fragment,null,O.Children.map(c,(function(e,t){var r=R[t],o=(r.offsetX,r.offsetY,r.rotateX,r.rotateY,zT(r,["offsetX","offsetY","rotateX","rotateY"])),i="";p.current!==h.current&&(i=T.transform(R[t],t,p.current,h.current,P));var a=t===p.current||t===h.current;return O.createElement(Eo.div,{className:"w-100 h-100 view-content",key:t,style:WT({position:"absolute",transform:i},o)},O.createElement(PC.Provider,{value:{trigger:Kx.Manual,setting:n?null:a?E:null,playId:a?G(t):null,revert:D&&t===p.current||!D&&t!==p.current,inheritedOneByOneSetting:null,depth:S.depth+1,onAnimationEnd:W}},e))})))}function HT(e){switch(e){case _T.Cover:case _T.Cube:case _T.Push:case _T.Box:return!0;default:return!1}}var JT=n(73).exbVersion,$T={assign:uE,defer:sd,debounce:yE,setValue:bI,isDeepEqual:Vu,throttle:bE,kebabCase:YE},YT={restAuth:Co,restFeatureLayer:To,restPortal:Ao,restRequest:jo,Sanitizer:Ji},KT={rgba:In,parseToRgb:dn,rem:Qt,readableColor:function(e,t,n,r){void 0===t&&(t="#000"),void 0===n&&(n="#fff"),void 0===r&&(r=!0);var o=jn(e)>.179,i=o?t:n;return!r||An(e,i)>=4.5?i:o?"#000":"#fff"},lighten:_n,darken:Tn,ellipsis:function(e,t){void 0===t&&(t=1);var n={display:"inline-block",maxWidth:e||"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"};return t>1?D({},n,{WebkitBoxOrient:"vertical",WebkitLineClamp:t,display:"-webkit-box",whiteSpace:"normal"}):n},mix:kn,stripUnit:$t,math:function(e,t){var n=zt(e),r=n.match(Bt);if(r&&!r.every((function(e){return e===r[0]})))throw new Vt(41);return""+Wt(zt(n.replace(Bt,"")),t)+(r?zt(r[0]):"")},borderRadius:function(e,t){var n,r,o=qt(e);if(!t&&0!==t)throw new Vt(62);if("Top"===o||"Bottom"===o)return(n={})["border"+o+"RightRadius"]=t,n["border"+o+"LeftRadius"]=t,n;if("Left"===o||"Right"===o)return(r={})["borderTop"+o+"Radius"]=t,r["borderBottom"+o+"Radius"]=t,r;throw new Vt(63)},getValueAndUnit:Xt}}]))}}}));